import{u as i,v as t,w as l,x as Qc,y as Jc,z as Im,D as xn,H as Si,J as V,K as bn,L as Dn,N as Em,O as Cm,Q as ct,U as _m,V as Ti,W as bm,X as Zc,Y as Pt,Z as Nm,_ as Sm,$ as Tm,a0 as zr,a1 as Yr,a2 as Ss,a3 as eu,a4 as tu,a5 as ru,a6 as vm,a7 as nu,a8 as wm,a9 as Rm,aa as su,ab as ra,ac as na,ad as Go,ae as ou,af as xm,ag as ym,ah as Om,ai as au,aj as iu,ak as km,al as Am,am as Pm,an as Dm,ao as Mm,ap as Lm,aq as Um,ar as Fm,as as Gm,at as nl,au as Bm,av as Vm,aw as Hm}from"./vendor-367c1fc6.js";import{N as os,a as on,H as Ys,M as xe,T as mr,R as te,b as tt,A as us,c as ar,G as Wm,d as Q,D as jm,C as sr,e as qm,f as He,g as zm,h as Bo,i as Xr,j as cn,k as vi,l as Vo,E as Ym,m as sl,n as Nr,o as Us,p as gt,F as Lo,q as Fs,S as $s,r as Os,s as $m,t as lu,u as Gs,v as Km,w as Xm,x as Qm,y as Ho,z as yr,B as sn,O as cu,V as Rt,I as Sa,P as ps,J as qr,K as Ar,U as Jm,L as Zm,Q as Ta,W as uu,X as mn,Y as eg,Z as tg,_ as rg,$ as ng,a0 as sg,a1 as og,a2 as ag,a3 as ig,a4 as lg,a5 as cg,a6 as ug,a7 as dg,a8 as du,a9 as mg,aa as gg,ab as pg,ac as hg,ad as fg,ae as Ig,af as Eg,ag as Cg,ah as _g,ai as bg,aj as Ng,ak as Sg,al as Tg,am as vg,an as ni,ao as wg,ap as mu,aq as Rg,ar as xg,as as yg,at as Og,au as kg,av as Ag,aw as Pg,ax as Dg,ay as Mg,az as Lg,aA as Ug,aB as Fg,aC as Gg,aD as gu,aE as Bg,aF as Vg,aG as Hg,aH as ol,aI as Wg,aJ as jg,aK as qg,aL as sa,aM as zg,aN as Yg,aO as pu,aP as $g,aQ as Kg,aR as Wo,aS as Wt,aT as Ts,aU as hu,aV as fu,aW as Xg,aX as Qg,aY as Jg,aZ as Zg,a_ as ep,a$ as tp,b0 as rp,b1 as np,b2 as wi,b3 as As,b4 as Iu,b5 as al,b6 as sp,b7 as op,b8 as ap,b9 as ip,ba as lp,bb as cp,bc as up,bd as dp,be as mp,bf as gp,bg as pp,bh as hp,bi as fp,bj as Ip,bk as Ep,bl as Cp,bm as _p,bn as bp,bo as Np,bp as Sp,bq as Tp,br as vp,bs as wp,bt as Rp,bu as xp,bv as yp,bw as Op,bx as kp,by as Ap,bz as Pp,bA as Eu,bB as si,bC as Dp,bD as Cu,bE as Mp,bF as Lp,bG as Up,bH as Fp,bI as Gp,bJ as Bp,bK as Vp,bL as Hp,bM as Wp,bN as jp,bO as qp,bP as zp,bQ as Yp,bR as $p,bS as Kp,bT as Xp,bU as Qp,bV as Jp,bW as Zp,bX as eh,bY as th,bZ as rh,b_ as nh,b$ as sh,c0 as oh,c1 as ah,c2 as ih,c3 as lh,c4 as ch,c5 as uh,c6 as dh,c7 as mh,c8 as gh,c9 as ph,ca as _u,cb as bu,cc as jo,cd as hh,ce as fh,cf as Bs,cg as Nu,ch as nt,ci as Ih,cj as Eh,ck as Ch,cl as _h,cm as bh,cn as Nh,co as Sh,cp as Th,cq as vh,cr as wh,cs as Rh,ct as va,cu as xh,cv as yh,cw as Oh,cx as kh,cy as Ah,cz as Ph,cA as il,cB as Dh,cC as Mh,cD as Bn,cE as Lh,cF as Uh,cG as gr,cH as ht,cI as Fh,cJ as Gh,cK as Bh,cL as ao,cM as Dr,cN as ve,cO as Vh,cP as Mt,cQ as Hh,cR as Wh,cS as jh,cT as qh,cU as zh,cV as Yh,cW as $h,cX as Kh,cY as Xh,cZ as Qh,c_ as Jh,c$ as Zh,d0 as ef,d1 as tf,d2 as rf,d3 as nf,d4 as sf,d5 as oi,d6 as of,d7 as af,d8 as lf,d9 as Su,da as cf,db as uf,dc as ll,dd as df,de as mf,df as gf,dg as pf,dh as ai,di as hf,dj as ff,dk as If,dl as Ef,dm as io,dn as cl,dp as Cf,dq as _f,dr as bf,ds as Nf,dt as Tu,du as Sf,dv as vu,dw as Tf,dx as wu,dy as vf,dz as wf,dA as Rf,dB as xf,dC as ul,dD as br,dE as Ru,dF as ii,dG as $r,dH as dl,dI as ml,dJ as ft,dK as vn,dL as yf,dM as Of,dN as kf,dO as Af,dP as wa,dQ as Pf,dR as gl,dS as pl,dT as Df,dU as Ra,dV as xa,dW as Mf,dX as xu,dY as Lf,dZ as lo,d_ as Uf,d$ as yu,e0 as Ff,e1 as Gf,e2 as Bf,e3 as Vf,e4 as Hf,e5 as Wf,e6 as jf,e7 as qf,e8 as ya,e9 as zf,ea as Yf,eb as $f,ec as Kf,ed as Xf,ee as Qf,ef as Ou,eg as Jf,eh as Zf,ei as eI,ej as tI,ek as rI,el as Ps,em as nI,en as sI,eo as oI,ep as aI,eq as hl,er as iI,es as lI,et as cI,eu as uI,ev as dI,ew as mI,ex as fl,ey as gI,ez as pI,eA as hI,eB as fI,eC as II,eD as EI,eE as CI,eF as _I,eG as bI,eH as NI,eI as ku,eJ as SI,eK as TI,eL as vI,eM as wI,eN as RI,eO as Au,eP as xI,eQ as yI,eR as OI,eS as kI,eT as AI,eU as PI,eV as Tr,eW as DI,eX as MI,eY as LI,eZ as UI,e_ as FI,e$ as GI,f0 as BI,f1 as VI,f2 as HI,f3 as WI,f4 as jI,f5 as Ri,f6 as Ks,f7 as qI,f8 as Oa,f9 as zI,fa as Il,fb as YI,fc as $I,fd as Xt,fe as KI,ff as XI,fg as QI,fh as JI,fi as ZI,fj as eE,fk as tE,fl as rE,fm as nE,fn as sE,fo as oE,fp as aE,fq as iE,fr as lE,fs as cE,ft as uE,fu as Pu,fv as El,fw as Du,fx as dE,fy as mE,fz as gE,fA as pE,fB as hE,fC as fE,fD as IE,fE as EE,fF as CE,fG as _E,fH as bE,fI as NE,fJ as SE,fK as TE,fL as vE,fM as wE,fN as RE,fO as xE,fP as yE,fQ as OE,fR as kE,fS as AE,fT as PE,fU as DE,fV as ME,fW as LE,fX as UE,fY as Cl,fZ as FE,f_ as GE,f$ as BE,g0 as VE,g1 as HE,g2 as WE,g3 as co,g4 as _l,g5 as jE,g6 as qE,g7 as uo,g8 as Mu,g9 as zE,ga as ka,gb as YE,gc as $E,gd as KE,ge as Lu,gf as XE,gg as QE,gh as JE,gi as ZE,gj as eC,gk as tC,gl as rC,gm as nC,gn as sC,go as oC,gp as aC,gq as iC,gr as lC,gs as hs,gt as cC,gu as bl,gv as uC,gw as dC,gx as mC,gy as Uu,gz as gC,gA as pC,gB as hC,gC as fC,gD as IC,gE as EC,gF as CC,gG as _C,gH as bC,gI as NC,gJ as SC,gK as TC,gL as Fu,gM as vC,gN as Gu,gO as wC,gP as RC,gQ as xC,gR as yC,gS as nn,gT as Aa,gU as OC,gV as Nl,gW as kC,gX as AC,gY as Bu,gZ as Sn,g_ as PC,g$ as DC,h0 as MC,h1 as Vu,h2 as Hu,h3 as LC,h4 as UC,h5 as FC,h6 as Wu,h7 as ju,h8 as GC,h9 as BC,ha as VC,hb as HC,hc as WC,hd as jC,he as qC,hf as zC,hg as YC,hh as $C,hi as KC,hj as XC,hk as mo,hl as dt,hm as QC,hn as Pa,ho as Sl,hp as JC,hq as ZC,hr as e_,hs as t_,ht as r_,hu as n_,hv as s_,hw as o_,hx as a_,hy as i_,hz as l_,hA as c_,hB as u_,hC as d_,hD as Tl,hE as Hr,hF as go}from"./nitro-renderer-ebfce9c1.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function r(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerpolicy&&(o.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?o.credentials="include":s.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=r(s);fetch(s.href,o)}})();function Ce(){return os.instance}function Ct(a){Ce().addLinkEventTracker(a)}function Tt(){return Ce().avatar}function vl(a){return Tt().structureData.getPalette(a)}function wl(a){return Tt().structureData.getSetType(a)}function Ds(){return Ce().cameraManager}function m_(){return Ce().core}function g_(){return m_().configuration}function Z(a){a=a.startsWith("event:")?a.substring(6):a,Ce().createLinkEvent(a)}function Vs(){var a;return(a=Ce())==null?void 0:a.communication}function K(a,e=null){return on.getValue(a,e)}function li(){var a;return(a=Vs())==null?void 0:a.connection}function qu(){return Ce().localization}const vs=a=>{!a||!a.length||(a.startsWith("http")?Ys.openWebPage(a):Z(a))};function _t(a){Ce().removeLinkEventTracker(a)}function q(){return Ce().roomEngine}let Da=!1,po=0,ho=0;const fo=(a,e=1)=>{const r=a.clientX,n=a.clientY;let s=a.type;switch(s===xe.MOUSE_CLICK&&(po&&(ho=1,po>=Date.now()-300&&ho++),po=Date.now(),ho===2&&(Da||(s=xe.DOUBLE_CLICK),ho=0,po=null)),s){case xe.MOUSE_CLICK:break;case xe.DOUBLE_CLICK:break;case xe.MOUSE_MOVE:Da=!0;break;case xe.MOUSE_DOWN:Da=!1;break;case xe.MOUSE_UP:break;case xe.RIGHT_CLICK:break;default:return}q().dispatchMouseEvent(e,r,n,s,a.altKey,a.ctrlKey||a.metaKey,a.shiftKey,!1)};let Ma=!1,Io=0,Eo=0;const Co=(a,e=1,r=!1,n=!1,s=!1,o=!1)=>{let c=0,u=0;a.touches[0]?(c=a.touches[0].clientX,u=a.touches[0].clientY):a.changedTouches[0]&&(c=a.changedTouches[0].clientX,u=a.changedTouches[0].clientY);let g=a.type;switch(r&&(g=mr.TOUCH_LONG),(g===xe.MOUSE_CLICK||g===mr.TOUCH_END)&&(g=xe.MOUSE_CLICK,Io&&(Eo=1,Io>=Date.now()-300&&Eo++),Io=Date.now(),Eo===2&&(Ma||(g=xe.DOUBLE_CLICK),Eo=0,Io=null)),g){case xe.MOUSE_CLICK:break;case xe.DOUBLE_CLICK:break;case mr.TOUCH_START:g=xe.MOUSE_DOWN,Ma=!1;break;case mr.TOUCH_MOVE:g=xe.MOUSE_MOVE,Ma=!0;break;case mr.TOUCH_END:g=xe.MOUSE_UP;break;case mr.TOUCH_LONG:g=xe.MOUSE_DOWN_LONG;break;default:return}g===mr.TOUCH_START&&q().dispatchMouseEvent(e,c,u,g,n,s,o,!1),q().dispatchMouseEvent(e,c,u,g,n,s,o,!1)};function Vt(a){if(!a||!a.model)return!1;const e=H().userId,r=a.model.getValue(te.FURNITURE_OWNER_ID);return e===r}function Hs(a,e,r){return a?a.isRoomOwner||a.controllerLevel>=tt.GUEST||H().isModerator||Vt(q().getRoomObject(a.roomId,e,r)):!1}function $n(){return Ce().roomSessionManager}function Vn(a,e=null){$n().createSession(a,e)}function p_(){const a=Kn();return a?a.model.getValue(te.FIGURE_CAN_STAND_UP):us.POSTURE_STAND}function La(){const a=Kn();if(!a)return!1;const r=a.model.getValue(te.FIGURE_EFFECT);return!(r===29||r===30||r===185)}function H(){return Ce().sessionDataManager}function pr(){return K("hc.disabled",!1)?ar.VIP:H().clubLevel}class rr{}rr.OKAY=0;rr.MISSING_OFFER=1;rr.FURNI_LIMIT_REACHED=2;rr.NOT_IN_ROOM=3;rr.NOT_ROOM_OWNER=4;rr.GUILD_ROOM=5;rr.VISITORS_IN_ROOM=6;class h_{constructor(e,r,n){this._depth=0,this._localization="",this._pageId=-1,this._pageName="",this._iconId=0,this._depth=r,this._parent=n,this._localization=e.localization,this._pageId=e.pageId,this._pageName=e.pageName,this._iconId=e.icon,this._children=[],this._offerIds=e.offerIds,this._isVisible=e.visible,this._isActive=!1,this._isOpen=!1}activate(){this._isActive=!0}deactivate(){this._isActive=!1}open(){this._isOpen=!0}close(){this._isOpen=!1}addChild(e){e&&this._children.push(e)}get depth(){return this._depth}get isBranch(){return this._children.length>0}get isLeaf(){return this._children.length===0}get localization(){return this._localization}get pageId(){return this._pageId}get pageName(){return this._pageName}get iconId(){return this._iconId}get children(){return this._children}get offerIds(){return this._offerIds}get parent(){return this._parent}get isVisible(){return this._isVisible}get isActive(){return this._isActive}get isOpen(){return this._isOpen}}const zu=class{constructor(a,e,r,n,s,o=-1){this._pageId=a,this._layoutCode=e,this._localization=r,this._offers=n,this._acceptSeasonCurrencyAsCredits=s;for(const c of n)c.page=this;o===-1?this._mode=zu.MODE_NORMAL:this._mode=o}get pageId(){return this._pageId}get layoutCode(){return this._layoutCode}get localization(){return this._localization}get offers(){return this._offers}get acceptSeasonCurrencyAsCredits(){return this._acceptSeasonCurrencyAsCredits}get mode(){return this._mode}};let xi=zu;xi.MODE_NORMAL=0;class at{}at.DUCKET_INFO="ducket_info";at.CREDITS="credits";at.AVATAR_EFFECTS="avatar_effects";at.HC_MEMBERSHIP="hc_membership";at.CLUB_GIFTS="club_gifts";at.LIMITED_SOLD="limited_sold";at.PET_ACCESSORIES="pet_accessories";at.TRAX_SONGS="trax_songs";at.NEW_ADDITIONS="new_additions";at.QUEST_SHELL="quest_shell";at.QUEST_SNOWFLAKES="quest_snowflakes";at.VAL_QUESTS="val_quests";at.GUILD_CUSTOM_FURNI="guild_custom_furni";at.GIFT_SHOP="gift_shop";at.HORSE_STYLES="horse_styles";at.HORSE_SHOE="horse_shoe";at.SET_EASTER="set_easter";at.ECOTRON_TRANSFORM="ecotron_transform";at.LOYALTY_INFO="loyalty_info";at.ROOM_BUNDLES="room_bundles";at.ROOM_BUNDLES_MOBILE="room_bundles_mobile";at.HABBO_CLUB_DESKTOP="habbo_club_desktop";at.MOBILE_SUBSCRIPTIONS="mobile_subscriptions";class f_{constructor(e,r){this.breed=e,this.palettes=r}}class Be{}Be.NONE=0;Be.CONFIRM=1;Be.PURCHASE=2;Be.NO_CREDITS=3;Be.NO_POINTS=4;Be.SOLD_OUT=5;Be.FAILED=6;class Sr{}Sr.NORMAL="NORMAL";Sr.BUILDER="BUILDERS_CLUB";const I_=a=>"",E_=a=>"",Rl=(a,e)=>{const r=a.get(e),n=[];if(r&&r.length)for(const s of r)s.isVisible&&n.push(s);return n},Yu=(a,e,r,n)=>{if(r.isVisible&&r.pageId>0){let s=!1;const o=[r.pageName,r.localization].join(" ").toLowerCase().replace(/ /gi,"");if(o.indexOf(a)>-1&&(n.push(r),s=!0),!s){for(const c of e)if(o.indexOf(c)>=0){n.push(r);break}}}for(const s of r.children)Yu(a,e,s,n)};function C_(a){if(!a.length)return 0;let e=a.length-1;for(;e>=0&&!isNaN(parseInt(a.charAt(e)));)e--;return e>0?parseInt(a.substring(e+1)):-1}function __(a,e){switch(a){case 0:return[[16743226],[16750435],[16764339],[16094464],[16498012],[16704690],[15586304],[16115545],[16513201],[8694111],[11585939],[14413767],[6664599],[9553845],[12971486],[8358322],[10002885],[13292268],[10780600],[12623573],[14403561],[12418717],[14327229],[15517403],[14515069],[15764368],[16366271],[11250603],[13948116],[16777215],[14256481],[14656129],[15848130],[14005087],[14337152],[15918540],[15118118],[15531929],[9764857],[11258085]];case 1:return[[16743226],[16750435],[16764339],[16094464],[16498012],[16704690],[15586304],[16115545],[16513201],[8694111],[11585939],[14413767],[6664599],[9553845],[12971486],[8358322],[10002885],[13292268],[10780600],[12623573],[14403561],[12418717],[14327229],[15517403],[14515069],[15764368],[16366271],[11250603],[13948116],[16777215],[14256481],[14656129],[15848130],[14005087],[14337152],[15918540],[15118118],[15531929],[9764857],[11258085]];case 2:return[[16579283],[15378351],[8830016],[15257125],[9340985],[8949607],[6198292],[8703620],[9889626],[8972045],[12161285],[13162269],[8620113],[12616503],[8628101],[13827840],[9764857]];case 3:return[[16777215],[15658734],[14540253]];case 4:return[[16777215],[16053490],[15464440],[16248792],[15396319],[15007487]];case 5:return[[16777215],[15658734],[14540253]];case 6:return[[16777215],[15658734],[14540253],[16767177],[16770205],[16751331]];case 7:return[[13421772],[11447982],[16751331],[10149119],[16763290],[16743786]];default:{const r=[];for(const n of e){const s=q().getPetColorResult(a,n.paletteId);s&&(s.primaryColor===s.secondaryColor?r.push([s.primaryColor]):r.push([s.primaryColor,s.secondaryColor]))}return r}}}class ge{}ge.WALL="i";ge.FLOOR="s";ge.EFFECT="e";ge.HABBO_CLUB="h";ge.BADGE="b";ge.GAME_TOKEN="GAME_TOKEN";ge.PET="p";ge.ROBOT="r";const $u=class{constructor(a,e,r,n,s,o,c=!1,u=0,g=0){this._productType=a.toLowerCase(),this._productClassId=e,this._extraParam=r,this._productCount=n,this._productData=s,this._furnitureData=o,this._isUniqueLimitedItem=c,this._uniqueLimitedItemSeriesSize=u,this._uniqueLimitedItemsLeft=g}static stripAddonProducts(a){return a.length===1?a:a.filter(e=>e.productType!==ge.BADGE&&e.productType!==ge.EFFECT&&e.productClassId!==$u.EFFECT_CLASSID_NINJA_DISAPPEAR)}getIconUrl(a=null,e=null){switch(this._productType){case ge.FLOOR:return q().getFurnitureFloorIconUrl(this.productClassId);case ge.WALL:{if(a&&this._furnitureData){let r="";switch(this._furnitureData.className){case"floor":r=["th",this._furnitureData.className,a.product.extraParam].join("_");break;case"wallpaper":r=["th","wall",a.product.extraParam].join("_");break;case"landscape":r=["th",this._furnitureData.className,(a.product.extraParam||"").replace(".","_"),"001"].join("_");break}if(r!=="")return`${K("catalog.asset.url")}/${r}.png`}return q().getFurnitureWallIconUrl(this.productClassId,this._extraParam)}case ge.EFFECT:return I_(this.productClassId);case ge.HABBO_CLUB:return E_(this.productClassId);case ge.BADGE:return H().getBadgeUrl(this._extraParam);case ge.ROBOT:return null}return null}get productType(){return this._productType}get productClassId(){return this._productClassId}get extraParam(){return this._extraParam}set extraParam(a){this._extraParam=a}get productCount(){return this._productCount}get productData(){return this._productData}get furnitureData(){return this._furnitureData}get isUniqueLimitedItem(){return this._isUniqueLimitedItem}get uniqueLimitedItemSeriesSize(){return this._uniqueLimitedItemSeriesSize}get uniqueLimitedItemsLeft(){return this._uniqueLimitedItemsLeft}set uniqueLimitedItemsLeft(a){this._uniqueLimitedItemsLeft=a}};let Wn=$u;Wn.EFFECT_CLASSID_NINJA_DISAPPEAR=108;const Wr=class{constructor(a,e,r,n,s,o,c,u,g,p){this._clubLevel=0,this._bundlePurchaseAllowed=!1,this._offerId=a,this._localizationId=e,this._isRentOffer=r,this._priceInCredits=n,this._priceInActivityPoints=s,this._activityPointType=o,this._giftable=c,this._clubLevel=u,this._products=g,this._bundlePurchaseAllowed=p,this.setPricingModelForProducts(),this.setPricingType();for(const d of g)if(d.productType===ge.BADGE){this._badgeCode=d.extraParam;break}}activate(){}get clubLevel(){return this._clubLevel}get page(){return this._page}set page(a){this._page=a}get offerId(){return this._offerId}get localizationId(){return this._localizationId}get priceInCredits(){return this._priceInCredits}get priceInActivityPoints(){return this._priceInActivityPoints}get activityPointType(){return this._activityPointType}get giftable(){return this._giftable}get product(){if(!this._products||!this._products.length)return null;if(this._products.length===1)return this._products[0];const a=Wn.stripAddonProducts(this._products);return a.length?a[0]:null}get pricingModel(){return this._pricingModel}get priceType(){return this._priceType}get bundlePurchaseAllowed(){return this._bundlePurchaseAllowed}get isRentOffer(){return this._isRentOffer}get badgeCode(){return this._badgeCode}get localizationName(){const a=ds(this._localizationId);return a?a.name:m(this._localizationId)}get localizationDescription(){const a=ds(this._localizationId);return a?a.description:m(this._localizationId)}get isLazy(){return!1}get products(){return this._products}setPricingModelForProducts(){const a=Wn.stripAddonProducts(this._products);a.length===1?a[0].productCount===1?this._pricingModel=Wr.PRICING_MODEL_SINGLE:this._pricingModel=Wr.PRICING_MODEL_MULTI:a.length>1?this._pricingModel=Wr.PRICING_MODEL_BUNDLE:this._pricingModel=Wr.PRICING_MODEL_UNKNOWN}setPricingType(){this._priceInCredits>0&&this._priceInActivityPoints>0?this._priceType=Wr.PRICE_TYPE_CREDITS_ACTIVITYPOINTS:this._priceInCredits>0?this._priceType=Wr.PRICE_TYPE_CREDITS:this._priceInActivityPoints>0?this._priceType=Wr.PRICE_TYPE_ACTIVITYPOINTS:this._priceType=Wr.PRICE_TYPE_NONE}clone(){const a=[],e=ds(this.localizationId);for(const n of this._products){const s=ci(n.productClassId,n.productType);a.push(new Wn(n.productType,n.productClassId,n.extraParam,n.productCount,e,s))}const r=new Wr(this.offerId,this.localizationId,this.isRentOffer,this.priceInCredits,this.priceInActivityPoints,this.activityPointType,this.giftable,this.clubLevel,a,this.bundlePurchaseAllowed);return r.page=this.page,r}};let it=Wr;it.PRICING_MODEL_UNKNOWN="pricing_model_unknown";it.PRICING_MODEL_SINGLE="pricing_model_single";it.PRICING_MODEL_MULTI="pricing_model_multi";it.PRICING_MODEL_BUNDLE="pricing_model_bundle";it.PRICING_MODEL_FURNITURE="pricing_model_furniture";it.PRICE_TYPE_NONE="price_type_none";it.PRICE_TYPE_CREDITS="price_type_credits";it.PRICE_TYPE_ACTIVITYPOINTS="price_type_activitypoints";it.PRICE_TYPE_CREDITS_ACTIVITYPOINTS="price_type_credits_and_activitypoints";class b_{constructor(e){this._furniData=e,this._product=new Wn(this._furniData.type,this._furniData.id,this._furniData.customParams,1,ds(this._furniData.className),this._furniData)}activate(){D(new Wm(this._furniData.rentOfferId>-1?this._furniData.rentOfferId:this._furniData.purchaseOfferId))}get offerId(){return this.isRentOffer?this._furniData.rentOfferId:this._furniData.purchaseOfferId}get priceInActivityPoints(){return 0}get activityPointType(){return 0}get priceInCredits(){return 0}get page(){return this._page}set page(e){this._page=e}get priceType(){return""}get product(){return this._product}get products(){return[this._product]}get localizationId(){return"roomItem.name."+this._furniData.id}get bundlePurchaseAllowed(){return!1}get isRentOffer(){return this._furniData.rentOfferId>-1}get giftable(){return!1}get pricingModel(){return it.PRICING_MODEL_FURNITURE}get clubLevel(){return 0}get badgeCode(){return""}get localizationName(){return this._furniData.name}get localizationDescription(){return this._furniData.description}get isLazy(){return!0}}const N_=(a,e,r=null)=>{let n=null;switch(a.toLocaleLowerCase()){case ge.FLOOR:n=q().getFurnitureFloorIconUrl(e);break;case ge.WALL:n=q().getFurnitureWallIconUrl(e,r);break}return n};class S_{constructor(e){this._isEnabled=!1,this._price=null,this._stuffTypes=null,this._boxTypes=null,this._ribbonTypes=null,this._defaultStuffTypes=null,this._isEnabled=e.isEnabled,this._price=e.price,this._boxTypes=e.boxTypes,this._ribbonTypes=e.ribbonTypes,this._stuffTypes=e.giftWrappers,this._defaultStuffTypes=e.giftFurnis}get isEnabled(){return this._isEnabled}get price(){return this._price}get stuffTypes(){return this._stuffTypes}get boxTypes(){return this._boxTypes}get ribbonTypes(){return this._ribbonTypes}get defaultStuffTypes(){return this._defaultStuffTypes}}class Xs{constructor(e,r,n,s,o,c,u,g,p=-1){this._timeLeftMinutes=-1,this._offerId=e,this._furniId=r,this._furniType=n,this._extraData=s,this._stuffData=o,this._price=c,this._status=u,this._averagePrice=g,this._offerCount=p}get offerId(){return this._offerId}set offerId(e){this._offerId=e}get furniId(){return this._furniId}get furniType(){return this._furniType}get extraData(){return this._extraData}get stuffData(){return this._stuffData}get price(){return this._price}set price(e){this._price=e}get averagePrice(){return this._averagePrice}get image(){return this._image}set image(e){this._image=e}get imageCallback(){return this._imageCallback}set imageCallback(e){this._imageCallback=e}get status(){return this._status}get timeLeftMinutes(){return this._timeLeftMinutes}set timeLeftMinutes(e){this._timeLeftMinutes=e}get offerCount(){return this._offerCount}set offerCount(e){this._offerCount=e}get isUniqueLimitedItem(){return this.stuffData&&this.stuffData.uniqueSeries>0}}Xs.TYPE_FLOOR=1;Xs.TYPE_WALL=2;class qn{}qn.ONGOING=1;qn.ONGOING_OWN=1;qn.SOLD=2;qn.EXPIRED=3;class Lt{}Lt.BY_ACTIVITY=1;Lt.BY_VALUE=2;Lt.ADVANCED=3;class Ku{constructor(e,r){this._images=e,this._texts=r}getText(e){let r=this._texts[e]||"";return r&&r.length&&(r=r.replace(/\r\n|\r|\n/g,"<br />")),r}getImage(e){const r=this._images[e]||"";if(!r||!r.length)return null;let n=K("catalog.asset.image.url");return n=n.replace("%name%",r),n}}class T_{constructor(e,r,n,s,o,c,u,g){this.roomId=e,this.objectId=r,this.category=n,this.wallLocation=s,this.x=o,this.y=c,this.direction=u,this.offer=g}get offerId(){return this.offer.offerId}get productClassId(){return this.offer.product.productClassId}get productData(){return this.offer.product.productData}get furniData(){return this.offer.product.furnitureData}get extraParam(){return this.offer.product.extraParam}}const as=class{constructor(){this._requestType=as.REQUEST_TYPE_NONE}resetRequest(){this._requestType=as.REQUEST_TYPE_NONE,this._requestById=-1,this._requestedByOfferId=-1,this._requestByName=null}get requestType(){return this._requestType}get requestById(){return this._requestById}set requestById(a){this._requestType=as.REQUEST_TYPE_ID,this._requestById=a}get requestedByOfferId(){return this._requestedByOfferId}set requestedByOfferId(a){this._requestType=as.REQUEST_TYPE_OFFER,this._requestedByOfferId=a}get requestByName(){return this._requestByName}set requestByName(a){this._requestType=as.REQUEST_TYPE_NAME,this._requestByName=a}};let un=as;un.REQUEST_TYPE_NONE=0;un.REQUEST_TYPE_ID=1;un.REQUEST_TYPE_OFFER=2;un.REQUEST_TYPE_NAME=3;class v_{constructor(e,r,n){this.searchValue=e,this.offers=r,this.filteredNodes=n}}function ci(a,e){let r=null;switch(e.toLowerCase()){case ge.FLOOR:r=H().getFloorItemData(a);break;case ge.WALL:r=H().getWallItemData(a);break}return r}function oa(a,e,r){const n=q().getRoomObject(a,e,r);if(!n)return;const s=n.model.getValue(te.FURNITURE_TYPE_ID);switch(r){case Q.FLOOR:return H().getFloorItemData(s);case Q.WALL:return H().getWallItemData(s)}return null}function w_(){const a=Kn();return a?a.model.getValue(te.FIGURE_POSTURE):us.POSTURE_STAND}function ds(a){return a?H().getProductData(a):null}function ye(){return $n().getSession(-1)}function ui(){D(new jm)}function Hn(){return H().clubLevel>=ar.CLUB}function _o(){return H().clubLevel>=ar.VIP}function R_(a){const e=q().getRoomObject(ye().roomId,a,Q.FLOOR);if(!e||!e.model)return!1;const r=H().userId,n=e.model.getValue(te.FURNITURE_OWNER_ID);return r===n}function x_(){const a=Kn();return a?a.model.getValue(te.FIGURE_EFFECT)===77:!1}function y_(a){$n().startSession(a)}const yi=()=>{ye()&&(ui(),$n().removeSession(-1))};function Kn(){const a=H().userId,e=q().activeRoomId,r=Q.UNIT,n=q().getTotalObjectsForManager(e,r);let s=0;for(;s<n;){const o=q().getRoomObjectByIndex(e,s,r);if(o){const c=ye().userDataManager.getUserDataByIndex(o.id);if(c&&c.webID===a)return o}s++}return null}const Oi=(a,e,r,n=1)=>{const s=q().getRoomObjectBoundingRectangle(a,e,r,n);return s?(s.x=Math.round(s.x),s.y=Math.round(s.y),s):null},Xu=(a,e,r,n=1)=>{const s=q().getRoomObjectScreenLocation(a,e,r,n);return s?(s.x=Math.round(s.x),s.y=Math.round(s.y),s):null},O_=(a,e,r=1)=>{const n=q(),s=n.activeRoomId;n.initializeRoomInstanceRenderingCanvas(s,r,a,e)};function k_(a){let e=!1;const r=q().getRoomObject(a.roomId,a.objectId,a.category);return r&&r.model.getValue(te.FURNITURE_SELECTION_DISABLED)===1&&(e=!0,H().isModerator&&(e=!1)),e}function ls(a,e,r){q().processRoomObjectOperation(a,e,r)}function xl(a){q().setActiveRoomId(a)}const D=a=>li().send(a);class or{static getAchievementBadgeCode(e){if(!e)return null;let r=e.badgeId;return e.finalLevel||(r=qu().getPreviousLevelBadgeId(r)),r}static getAchievementCategoryImageUrl(e,r=null,n=!1){const s=K("achievements.images.url");let o=n?"achicon_":"achcategory_";return o+=e.code,r!==null&&(o+=`_${r>0?"active":"inactive"}`),s.replace("%image%",o)}static getAchievementCategoryMaxProgress(e){if(!e)return 0;let r=0;for(const n of e.achievements)r+=n.levelCount;return r}static getAchievementCategoryProgress(e){if(!e)return 0;let r=0;for(const n of e.achievements)r+=n.finalLevel?n.level:n.level-1;return r}static getAchievementCategoryTotalUnseen(e){if(!e)return 0;let r=0;for(const n of e.achievements)n.unseen>0&&r++;return r}static getAchievementHasStarted(e){return e?!!(e.finalLevel||e.level-1>0):!1}static getAchievementIsIgnored(e){if(!e)return!1;const r=K("achievements.unseen.ignored"),n=e.badgeId.replace(/[0-9]/g,"");return r.indexOf(n)>=0}static getAchievementLevel(e){return e?e.finalLevel?e.level:e.level-1:0}}class yl{constructor(e){this._code=e,this._achievements=[]}getProgress(){return or.getAchievementCategoryProgress(this)}getMaxProgress(){return or.getAchievementCategoryMaxProgress(this)}get code(){return this._code}get achievements(){return this._achievements}set achievements(e){this._achievements=e}}class dr{}dr.ACTION_SAVE="AEA_ACTION_SAVE";dr.ACTION_CLEAR="AEA_ACTION_CLEAR";dr.ACTION_RESET="AEA_ACTION_RESET";dr.ACTION_RANDOMIZE="AEA_ACTION_RANDOMIZE";class A_{constructor(e,r=!1){this._partColor=e,this._isDisabled=r,this._isHC=this._partColor.clubLevel>0,this._isSelected=!1}dispose(){this._partColor=null}get partColor(){return this._partColor}get color(){return sr.int2rgb(this._partColor.rgb)}get isDisabled(){return this._isDisabled}get isHC(){return this._isHC}get isSelected(){return this._isSelected}set isSelected(e){this._isSelected=e,this.notify&&this.notify()}get notify(){return this._notifier}set notify(e){this._notifier=e}}class ki{constructor(e,r,n){this._selectedPartIndex=-1,this._name=e,this._parts=r,this._palettes=n,this._selectedPartIndex=-1}static defaultColorId(e,r){if(!e||!e.length)return-1;let n=0;for(;n<e.length;){const s=e[n];if(s.partColor&&s.partColor.clubLevel<=r)return s.partColor.id;n++}return-1}init(){for(const e of this._parts)e&&e.init()}dispose(){if(this._parts){for(const e of this._parts)e.dispose();this._parts=null}if(this._palettes){for(const e of this._palettes)for(const r of e)r.dispose();this._palettes=null}this._selectedPartIndex=-1,this._paletteIndexes=null}selectPartId(e){if(!this._parts)return;let r=0;for(;r<this._parts.length;){if(this._parts[r].id===e){this.selectPartIndex(r);return}r++}}selectColorIds(e){if(!e||!this._palettes)return;this._paletteIndexes=new Array(e.length);let r=0;for(;r<this._palettes.length;){const n=this.getPalette(r);if(n){let s=0;if(e.length>r)s=e[r];else{const c=n[0];c&&c.partColor&&(s=c.partColor.id)}let o=0;for(;o<n.length;){const c=n[o];c.partColor.id===s?(this._paletteIndexes[r]=o,c.isSelected=!0):c.isSelected=!1,o++}}r++}this.updatePartColors()}selectPartIndex(e){if(!this._parts)return null;if(this._selectedPartIndex>=0&&this._parts.length>this._selectedPartIndex){const r=this._parts[this._selectedPartIndex];r&&(r.isSelected=!1)}if(this._parts.length>e){const r=this._parts[e];if(r)return r.isSelected=!0,this._selectedPartIndex=e,r}return null}selectColorIndex(e,r){const n=this.getPalette(r);if(!n||n.length<=e)return null;this.deselectColorIndex(this._paletteIndexes[r],r),this._paletteIndexes[r]=e;const s=n[e];return s?(s.isSelected=!0,this.updatePartColors(),s):null}getCurrentColorIndex(e){return this._paletteIndexes[e]}deselectColorIndex(e,r){const n=this.getPalette(r);if(!n||n.length<=e)return;const s=n[e];s&&(s.isSelected=!1)}getSelectedColorIds(){if(!this._paletteIndexes||!this._paletteIndexes.length||!this._palettes||!this._palettes.length)return null;const e=this._palettes[0];if(!e||!e.length)return null;const r=e[0];if(!r||!r.partColor)return null;const n=r.partColor.id,s=[];let o=0;for(;o<this._paletteIndexes.length;){const u=this._palettes[o];if(!(!u||u.length<=o))if(u.length>this._paletteIndexes[o]){const g=u[this._paletteIndexes[o]];g&&g.partColor?s.push(g.partColor.id):s.push(n)}else s.push(n);o++}const c=this.getCurrentPart();return c?s.slice(0,Math.max(c.maxColorIndex,1)):null}getSelectedColors(){const e=[];let r=0;for(;r<this._paletteIndexes.length;){const n=this.getSelectedColor(r);n?e.push(n.partColor):e.push(null),r++}return e}getSelectedColor(e){const r=this.getPalette(e);return!r||r.length<=this._paletteIndexes[e]?null:r[this._paletteIndexes[e]]}getSelectedColorId(e){const r=this.getSelectedColor(e);return r&&r.partColor?r.partColor.id:0}getPalette(e){return!this._paletteIndexes||!this._palettes||this._palettes.length<=e?null:this._palettes[e]}getCurrentPart(){return this._parts[this._selectedPartIndex]}updatePartColors(){const e=this.getSelectedColors();for(const r of this._parts)r&&(r.partColors=e)}hasClubSelectionsOverLevel(e){let r=!1;const n=this.getSelectedColors();if(n){let o=0;for(;o<n.length;){const c=n[o];c&&c.clubLevel>e&&(r=!0),o++}}const s=this.getCurrentPart();if(s&&s.partSet){const o=s.partSet;o&&o.clubLevel>e&&(r=!0)}return r}hasInvalidSelectedItems(e){const r=this.getCurrentPart();if(!r)return!1;const n=r.partSet;if(!(!n||!n.isSellable))return e.indexOf(n.id)>-1}stripClubItemsOverLevel(e){const r=this.getCurrentPart();if(r&&r.partSet&&r.partSet.clubLevel>e){const s=this.selectPartIndex(0);return s&&!s.partSet&&this.selectPartIndex(1),!0}return!1}stripClubColorsOverLevel(e){const r=[],n=this.getSelectedColors(),s=this.getPalette(0);let o=!1;const c=ki.defaultColorId(s,e);if(c===-1)return!1;let u=0;for(;u<n.length;){const g=n[u];g?g.clubLevel>e?(r.push(c),o=!0):r.push(g.id):(r.push(c),o=!0),u++}return o&&this.selectColorIds(r),o}get name(){return this._name}get parts(){return this._parts}get selectedPartIndex(){return this._selectedPartIndex}}class mt{static getGender(e){switch(e){case ce.MALE:case"m":case"M":e=ce.MALE;break;case ce.FEMALE:case"f":case"F":e=ce.FEMALE;break;default:e=ce.MALE}return e}static hasFigureSetId(e){return this.FIGURE_SET_IDS.indexOf(e)>=0}static createCategory(e,r){if(!e||!r||!this.CURRENT_FIGURE)return null;const n=[],s=[];let o=0;for(;o<this.MAX_PALETTES;)s.push([]),o++;const c=wl(r);if(!c)return null;const u=vl(c.paletteID);if(!u)return null;let g=this.CURRENT_FIGURE.getColorIds(r);g||(g=[]);const p=new Array(g.length),d=this.clubItemsDimmed,h=pr();for(const b of u.colors.getValues())if(b.isSelectable&&(d||h>=b.clubLevel)){let T=0;for(;T<this.MAX_PALETTES;){const w=h<b.clubLevel,O=new A_(b,w);s[T].push(O),T++}if(r!==ce.FACE){let w=0;for(;w<g.length;)b.id===g[w]&&(p[w]=b),w++}}let C=[];if(d?C=Tt().getMandatoryAvatarPartSetIds(this.CURRENT_FIGURE.gender,2):C=Tt().getMandatoryAvatarPartSetIds(this.CURRENT_FIGURE.gender,h),C.indexOf(r)===-1){const b=new Ws(null,null,!1);b.isClear=!0,n.push(b)}const f=r!==ce.FACE,_=c.partSets;for(o=_.length-1;o>=0;){const b=_.getWithIndex(o);let T=!1;if((b.gender===ce.UNISEX||b.gender===this.CURRENT_FIGURE.gender)&&(T=!0),b.isSelectable&&T&&(d||h>=b.clubLevel)){const w=h<b.clubLevel;let O=!0;b.isSellable&&(O=this.hasFigureSetId(b.id)),O&&n.push(new Ws(b,p,f,w))}o--}for(n.sort(this.clubItemsFirst?this.clubSorter:this.noobSorter),o=0;o<this.MAX_PALETTES;)s[o].sort(this.colorSorter),o++;return new ki(r,n,s)}static clubSorter(e,r){const n=e.partSet?e.partSet.clubLevel:9999999999,s=r.partSet?r.partSet.clubLevel:9999999999,o=e.partSet?e.partSet.isSellable:!1,c=r.partSet?r.partSet.isSellable:!1;return o&&!c?1:c&&!o||n>s?-1:n<s?1:e.partSet.id>r.partSet.id?-1:e.partSet.id<r.partSet.id?1:0}static colorSorter(e,r){const n=e.partColor?e.partColor.clubLevel:-1,s=r.partColor?r.partColor.clubLevel:-1;return n<s?-1:n>s?1:e.partColor.index<r.partColor.index?-1:e.partColor.index>r.partColor.index?1:0}static noobSorter(e,r){const n=e.partSet?e.partSet.clubLevel:-1,s=r.partSet?r.partSet.clubLevel:-1,o=e.partSet?e.partSet.isSellable:!1,c=r.partSet?r.partSet.isSellable:!1;return o&&!c?1:c&&!o||n<s?-1:n>s?1:e.partSet.id<r.partSet.id?-1:e.partSet.id>r.partSet.id?1:0}static avatarSetFirstSelectableColor(e){const r=wl(e);if(!r)return-1;const n=vl(r.paletteID);if(!n)return-1;for(const s of n.colors.getValues())if(!(!s.isSelectable||pr()<s.clubLevel))return s.id;return-1}static get clubItemsFirst(){return K("avatareditor.show.clubitems.first",!0)}static get clubItemsDimmed(){return K("avatareditor.show.clubitems.dimmed",!0)}}mt.MAX_PALETTES=2;mt.CURRENT_FIGURE=null;mt.FIGURE_SET_IDS=[];mt.BOUND_FURNITURE_NAMES=[];const be=class{constructor(){this._gender="M",this._direction=be.DEFAULT_DIRECTION,this._avatarEffectType=-1,this._notifier=null}loadAvatarData(a,e){this._data=new Map,this._colors=new Map,this._gender=e,this.parseFigureString(a),this.updateView()}parseFigureString(a){if(!a)return;const e=a.split(".");if(!(!e||!e.length))for(const r of e){const n=r.split("-");if(!n.length)continue;const s=n[0],o=parseInt(n[1]),c=[];let u=2;for(;u<n.length;)c.push(parseInt(n[u])),u++;c.length||c.push(0),this.savePartSetId(s,o,!1),this.savePartSetColourId(s,c,!1)}}getPartSetId(a){const e=this._data.get(a);return e!==void 0?e:-1}getColorIds(a){const e=this._colors.get(a);return e!==void 0?e:[mt.avatarSetFirstSelectableColor(a)]}getFigureString(){let a="";const e=[];for(const[n,s]of this._data.entries()){const o=this._colors.get(n);let c=n+"-"+s;if(o&&o.length){let u=0;for(;u<o.length;)c=c+("-"+o[u]),u++}e.push(c)}let r=0;for(;r<e.length;)a=a+e[r],r<e.length-1&&(a=a+"."),r++;return a}savePartData(a,e,r,n=!1){this.savePartSetId(a,e,n),this.savePartSetColourId(a,r,n)}savePartSetId(a,e,r=!0){switch(a){case be.FACE:case be.HAIR:case be.HAT:case be.HEAD_ACCESSORIES:case be.EYE_ACCESSORIES:case be.FACE_ACCESSORIES:case be.SHIRT:case be.JACKET:case be.CHEST_ACCESSORIES:case be.CHEST_PRINTS:case be.TROUSERS:case be.SHOES:case be.TROUSER_ACCESSORIES:e>=0?this._data.set(a,e):this._data.delete(a);break}r&&this.updateView()}savePartSetColourId(a,e,r=!0){switch(a){case be.FACE:case be.HAIR:case be.HAT:case be.HEAD_ACCESSORIES:case be.EYE_ACCESSORIES:case be.FACE_ACCESSORIES:case be.SHIRT:case be.JACKET:case be.CHEST_ACCESSORIES:case be.CHEST_PRINTS:case be.TROUSERS:case be.SHOES:case be.TROUSER_ACCESSORIES:this._colors.set(a,e);break}r&&this.updateView()}getFigureStringWithFace(a,e=!0){let r="";const n=[be.FACE],s=[];for(const c of n){const u=this._colors.get(c);if(!u)continue;let g=this._data.get(c);c===be.FACE&&e&&(g=a);let p=c+"-"+g;if(g>=0){let d=0;for(;d<u.length;)p=p+("-"+u[d]),d++}s.push(p)}let o=0;for(;o<s.length;)r=r+s[o],o<s.length-1&&(r=r+"."),o++;return r}updateView(){this.notify&&this.notify()}get gender(){return this._gender}get direction(){return this._direction}set direction(a){this._direction=a,this.updateView()}set avatarEffectType(a){this._avatarEffectType=a}get avatarEffectType(){return this._avatarEffectType}get notify(){return this._notifier}set notify(a){this._notifier=a}};let ce=be;ce.DEFAULT_DIRECTION=4;ce.MALE="M";ce.FEMALE="F";ce.UNISEX="U";ce.SCALE="h";ce.STD="std";ce.DEFAULT_FRAME="0";ce.FACE="hd";ce.HAIR="hr";ce.HAT="ha";ce.HEAD_ACCESSORIES="he";ce.EYE_ACCESSORIES="ea";ce.FACE_ACCESSORIES="fa";ce.JACKET="cc";ce.SHIRT="ch";ce.CHEST_ACCESSORIES="ca";ce.CHEST_PRINTS="cp";ce.TROUSERS="lg";ce.SHOES="sh";ce.TROUSER_ACCESSORIES="wa";ce.SET_TYPES=[be.FACE,be.HAIR,be.HAT,be.HEAD_ACCESSORIES,be.EYE_ACCESSORIES,be.FACE_ACCESSORIES,be.JACKET,be.SHIRT,be.CHEST_ACCESSORIES,be.CHEST_PRINTS,be.TROUSERS,be.SHOES,be.TROUSERS];const is=class{constructor(a,e,r=!0,n=!1){if(this._renderManager=Tt(),this._partSet=a,this._partColors=e,this._useColors=r,this._isDisabled=n,this._thumbContainer=null,this._imageUrl=null,this._maxColorIndex=0,this._isValidFigure=!1,this._isHC=!1,this._isSellable=!1,this._isClear=!1,this._isSelected=!1,this._disposed=!1,this._isInitalized=!1,a){const s=a.parts;for(const o of s)this._maxColorIndex=Math.max(this._maxColorIndex,o.colorLayerIndex)}}init(){this._isInitalized||(this._isInitalized=!0,this.update())}dispose(){this._disposed||(this._renderManager=null,this._partSet=null,this._partColors=null,this._imageUrl=null,this._disposed=!0,this._isInitalized=!1,this._thumbContainer&&(this._thumbContainer.destroy(),this._thumbContainer=null))}update(){this.updateThumbVisualization()}analyzeFigure(){if(!this._renderManager||!this._partSet||!this._partSet.parts||!this._partSet.parts.length)return!1;const a=this._renderManager.createFigureContainer(this.partSet.type+"-"+this.partSet.id);return this._renderManager.isFigureContainerReady(a)?(this._isValidFigure=!0,!0):(this._renderManager.downloadAvatarFigure(a,this),!1)}renderThumb(){if(!this._renderManager||!this._partSet||!this._isValidFigure&&!this.analyzeFigure())return null;const a=this._partSet.parts.concat().sort(this.sortByDrawOrder),e=new zm;for(const r of a){if(!r)continue;let n=null,s=0,o=!1;for(;!o&&s<is.THUMB_DIRECTIONS.length;){const d=ce.SCALE+"_"+ce.STD+"_"+r.type+"_"+r.id+"_"+is.THUMB_DIRECTIONS[s]+"_"+ce.DEFAULT_FRAME;n=this._renderManager.getAssetByName(d),n&&n.texture?o=!0:s++}if(!o)continue;const c=n.offsetX,u=n.offsetY;let g=null;if(this._useColors&&r.colorLayerIndex>0){const d=this._partColors[r.colorLayerIndex-1];d&&(g=d)}const p=new Bo(n.texture);p.position.set(c,u),g&&(p.tint=g.rgb),e.addChild(p)}return e}updateThumbVisualization(){if(!this._isInitalized)return;let a=this._thumbContainer;a||(a=this.renderThumb()),a&&(this._partSet?(this._isHC=this._partSet.clubLevel>0,this._isSellable=this._partSet.isSellable):(this._isHC=!1,this._isSellable=!1),this._isDisabled&&this.setAlpha(a,.2),this._imageUrl=Xr.generateImageUrl(a),this.notify&&this.notify())}setAlpha(a,e){return a.filters=[is.ALPHA_FILTER],a}sortByDrawOrder(a,e){const r=is.DRAW_ORDER.indexOf(a.type),n=is.DRAW_ORDER.indexOf(e.type);return r<n?-1:r>n?1:a.index<e.index?-1:a.index>e.index?1:0}resetFigure(a){this.analyzeFigure()&&this.update()}get disposed(){return this._disposed}get id(){return this._partSet?this._partSet.id:-1}get partSet(){return this._partSet}set partColors(a){this._partColors=a,this.update()}get isDisabled(){return this._isDisabled}set thumbContainer(a){this._thumbContainer=a,this.update()}get imageUrl(){return this._imageUrl}get maxColorIndex(){return this._maxColorIndex}get isHC(){return this._isHC}get isSellable(){return this._isSellable}get isClear(){return this._isClear}set isClear(a){this._isClear=a}get isSelected(){return this._isSelected}set isSelected(a){this._isSelected=a,this.notify&&this.notify()}get notify(){return this._notifier}set notify(a){this._notifier=a}};let Ws=is;Ws.ALPHA_FILTER=new qm(.2);Ws.THUMB_DIRECTIONS=[2,6,0,4,3,1];Ws.DRAW_ORDER=[He.LEFT_HAND_ITEM,He.LEFT_HAND,He.LEFT_SLEEVE,He.LEFT_COAT_SLEEVE,He.BODY,He.SHOES,He.LEGS,He.CHEST,He.CHEST_ACCESSORY,He.COAT_CHEST,He.CHEST_PRINT,He.WAIST_ACCESSORY,He.RIGHT_HAND,He.RIGHT_SLEEVE,He.RIGHT_COAT_SLEEVE,He.HEAD,He.FACE,He.EYES,He.HAIR,He.HAIR_BIG,He.FACE_ACCESSORY,He.EYE_ACCESSORY,He.HEAD_ACCESSORY,He.HEAD_ACCESSORY_EXTRA,He.RIGHT_HAND_ITEM];class aa{constructor(){this._isInitalized=!1,this._maxPaletteCount=0}dispose(){this._categories=null,this._disposed=!0}get disposed(){return this._disposed}init(){this._categories||(this._categories=new Map)}reset(){if(this._isInitalized=!1,this._categories)for(const e of this._categories.values())e&&e.dispose();this._categories=new Map}addCategory(e){let r=this._categories.get(e);r||(r=mt.createCategory(this,e),r&&(this._categories.set(e,r),this.updateSelectionsFromFigure(e)))}updateSelectionsFromFigure(e){const r=this._categories.get(e);if(!r)return;const n=mt.CURRENT_FIGURE.getPartSetId(e);let s=mt.CURRENT_FIGURE.getColorIds(e);s||(s=[]),r.selectPartId(n),r.selectColorIds(s)}hasClubSelectionsOverLevel(e){if(!this._categories)return!1;for(const r of this._categories.values())if(r&&r.hasClubSelectionsOverLevel(e))return!0;return!1}hasInvalidSelectedItems(e){if(!this._categories)return!1;for(const r of this._categories.values())if(r.hasInvalidSelectedItems(e))return!0;return!1}stripClubItemsOverLevel(e){if(!this._categories)return!1;let r=!1;for(const[n,s]of this._categories.entries()){let o=!1;if(s.stripClubItemsOverLevel(e)&&(o=!0),s.stripClubColorsOverLevel(e)&&(o=!0),o){const c=s.getCurrentPart();c&&mt.CURRENT_FIGURE&&mt.CURRENT_FIGURE.savePartData(n,c.id,s.getSelectedColorIds(),!0),r=!0}}return r}stripInvalidSellableItems(){if(!this._categories)return!1;let e=!1;for(const[r,n]of this._categories.entries());return e}selectPart(e,r){const n=this._categories.get(e);if(!n)return;const s=n.selectedPartIndex;n.selectPartIndex(r);const o=n.getCurrentPart();if(o){if(o.isDisabled){n.selectPartIndex(s);return}this._maxPaletteCount=o.maxColorIndex,mt.CURRENT_FIGURE.savePartData(e,o.id,n.getSelectedColorIds(),!0)}}selectColor(e,r,n){const s=this._categories.get(e);if(!s)return;const o=s.getCurrentColorIndex(n);if(s.selectColorIndex(r,n),s.getSelectedColor(n).isDisabled){s.selectColorIndex(o,n);return}mt.CURRENT_FIGURE.savePartSetColourId(e,s.getSelectedColorIds(),!0)}getCategoryData(e){return this._isInitalized||this.init(),this._categories?this._categories.get(e):null}get categories(){return this._categories}get canSetGender(){return!1}get maxPaletteCount(){return this._maxPaletteCount||1}set maxPaletteCount(e){this._maxPaletteCount=e}get name(){return null}}class P_ extends aa{constructor(){super(...arguments),this._imageCallBackHandled=!1}init(){super.init(),this.addCategory(ce.FACE),this._isInitalized=!0}selectColor(e,r,n){super.selectColor(e,r,n),this.updateSelectionsFromFigure(ce.FACE)}updateSelectionsFromFigure(e){if(!this._categories||!mt.CURRENT_FIGURE)return;const r=this._categories.get(e);if(!r)return;const n=mt.CURRENT_FIGURE.getPartSetId(e);let s=mt.CURRENT_FIGURE.getColorIds(e);s||(s=[]),r.selectPartId(n),r.selectColorIds(s);for(const o of r.parts){const c=u=>{const g=mt.CURRENT_FIGURE.getFigureStringWithFace(o.id),p=Tt().createAvatarImage(g,vi.LARGE,null,{resetFigure:c,dispose:null,disposed:!1}),d=p.getImageAsSprite(Vo.HEAD);d&&(d.y=10,o.thumbContainer=d,setTimeout(()=>p.dispose(),0))};c()}}get canSetGender(){return!0}get name(){return cn.GENERIC}}const $t=a=>{if(a==null||typeof a!="object")return a;const e=new a.constructor;for(const r in a)a.hasOwnProperty(r)&&(e[r]=a[r]);return e};class Qt{static makeColorHex(e){return"#"+e}static makeColorNumberHex(e){return"#"+e.toString(16).padStart(6,"0")}static convertFromHex(e){return parseInt(e.replace("#",""),16)}static uintHexColor(e){const r=e>>>0;return Qt.makeColorHex(r.toString(16).substring(2))}static int_to_8BitVals(e){const r=e>>24&255,n=e>>16&255,s=e>>8&255,o=e&255;return[r,n,s,o]}static eight_bitVals_to_int(e,r,n,s){return(e<<24)+(r<<16)+(n<<8)+(s|0)}static int2rgb(e){e>>>=0;const r=e&255,n=(e&65280)>>>8;return"rgba("+[(e&16711680)>>>16,n,r,1].join(",")+")"}}const Ai=a=>{try{JSON.parse(window.localStorage.getItem(a))}catch{return null}},Pi=a=>{let e=Ce().localization.getBadgeDesc(a);return(!e||!e.length)&&(e=`badge_desc_${a}`),e},Qs=a=>{let e=Ce().localization.getBadgeName(a);return(!e||!e.length)&&(e=`badge_name_${a}`),e};function qo(a){return!a||isNaN(a)?"0":a.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")}function D_(a){if(!a||isNaN(a))return"0";let e=Math.abs(a);const r=Math.pow(10,1),n=a<0;let s="";const o=[{key:"Q",value:Math.pow(10,15)},{key:"T",value:Math.pow(10,12)},{key:"B",value:Math.pow(10,9)},{key:"M",value:Math.pow(10,6)},{key:"K",value:1e3}];for(const c of o){let u=e/c.value;if(u=Math.round(u*r)/r,u>=1){e=u,s=c.key;break}}return(n?"-":"")+e+s}function m(a,e=null,r=null){return Ce().getLocalizationWithParameters(a,e,r)}class Js{}Js.CATALOG_PLACE_MULTIPLE_OBJECTS="catalogPlaceMultipleObjects";Js.CATALOG_SKIP_PURCHASE_CONFIRMATION="catalogSkipPurchaseConfirmation";const Qu=(a,e)=>a.dispatchEvent(e),di=a=>Qu(Ce().events,a),Qr=new Ym,St=a=>Qu(Qr,a);let Ju=!1;const Jr=a=>{Ju&&di(new sl(sl.PLAY_SOUND,a))},Ol=[xe.MOUSE_CLICK],M_=()=>{const a=()=>Ol.forEach(r=>window.removeEventListener(r,e)),e=r=>(Ju=!0)&&a();Ol.forEach(r=>window.addEventListener(r,e))};M_();class ee{}ee.DEFAULT=1;ee.WALL_PAPER=2;ee.FLOOR=3;ee.LANDSCAPE=4;ee.POST_IT=5;ee.POSTER=6;ee.SOUND_SET=7;ee.TRAX_SONG=8;ee.PRESENT=9;ee.ECOTRON_BOX=10;ee.TROPHY=11;ee.CREDIT_FURNI=12;ee.PET_SHAMPOO=13;ee.PET_CUSTOM_PART=14;ee.PET_CUSTOM_PART_SHAMPOO=15;ee.PET_SADDLE=16;ee.GUILD_FURNI=17;ee.GAME_FURNI=18;ee.MONSTERPLANT_SEED=19;ee.MONSTERPLANT_REVIVAL=20;ee.MONSTERPLANT_REBREED=21;ee.MONSTERPLANT_FERTILIZE=22;ee.FIGURE_PURCHASABLE_SET=23;class js{constructor(e){e&&(this._locked=!1,this._id=e.itemId,this._type=e.spriteId,this._ref=e.ref,this._category=e.category,this._groupable=e.isGroupable&&!e.rentable,this._tradeable=e.tradable,this._recyclable=e.isRecycleable,this._sellable=e.sellable,this._stuffData=e.stuffData,this._extra=e.extra,this._secondsToExpiration=e.secondsToExpiration,this._expirationTimeStamp=e.expirationTimeStamp,this._hasRentPeriodStarted=e.hasRentPeriodStarted,this._creationDay=e.creationDay,this._creationMonth=e.creationMonth,this._creationYear=e.creationYear,this._slotId=e.slotId,this._songId=e.songId,this._flatId=e.flatId,this._isRented=e.rentable,this._isWallItem=e.isWallItem)}get rentable(){return this._isRented}get id(){return this._id}get ref(){return this._ref}get category(){return this._category}get type(){return this._type}get stuffData(){return this._stuffData}set stuffData(e){this._stuffData=e}get extra(){return this._extra}get recyclable(){return this._recyclable}get isTradable(){return this._tradeable}get isGroupable(){return this._groupable}get sellable(){return this._sellable}get secondsToExpiration(){if(this._secondsToExpiration===-1)return-1;let e=-1;return this._hasRentPeriodStarted?(e=this._secondsToExpiration-(Nr()-this._expirationTimeStamp)/1e3,e<0&&(e=0)):e=this._secondsToExpiration,e}get creationDay(){return this._creationDay}get creationMonth(){return this._creationMonth}get creationYear(){return this._creationYear}get slotId(){return this._slotId}get songId(){return this._songId}get locked(){return this._locked}set locked(e){this._locked=e}get flatId(){return this._flatId}get isWallItem(){return this._isWallItem}get hasRentPeriodStarted(){return this._hasRentPeriodStarted}get expirationTimeStamp(){return this._expirationTimeStamp}update(e){this._type=e.spriteId,this._ref=e.ref,this._category=e.category,this._groupable=e.isGroupable&&!e.rentable,this._tradeable=e.tradable,this._recyclable=e.isRecycleable,this._sellable=e.sellable,this._stuffData=e.stuffData,this._extra=e.extra,this._secondsToExpiration=e.secondsToExpiration,this._expirationTimeStamp=e.expirationTimeStamp,this._hasRentPeriodStarted=e.hasRentPeriodStarted,this._creationDay=e.creationDay,this._creationMonth=e.creationMonth,this._creationYear=e.creationYear,this._slotId=e.slotId,this._songId=e.songId,this._flatId=e.flatId,this._isRented=e.rentable,this._isWallItem=e.isWallItem}clone(){const e=new js(null);return e._expirationTimeStamp=this._expirationTimeStamp,e._isWallItem=this._isWallItem,e._songId=this._songId,e._locked=this._locked,e._id=this._id,e._ref=this._ref,e._category=this._category,e._type=this._type,e._stuffData=this._stuffData,e._extra=this._extra,e._recyclable=this._recyclable,e._tradeable=this._tradeable,e._groupable=this._groupable,e._sellable=this._sellable,e._secondsToExpiration=this._secondsToExpiration,e._hasRentPeriodStarted=this._hasRentPeriodStarted,e._creationDay=this._creationDay,e._creationMonth=this._creationMonth,e._creationYear=this._creationYear,e._slotId=this._slotId,e._isRented=this._isRented,e._flatId=this._flatId,e}}class Di{constructor(e=-1,r=-1,n=null,s=null,o=-1){this._type=e,this._category=r,this._roomEngine=n,this._stuffData=s,this._extra=o,this._isWallItem=!1,this._iconUrl=null,this._name=null,this._description=null,this._locked=!1,this._selected=!1,this._hasUnseenItems=!1,this._items=[]}clone(){const e=new Di;return e._type=this._type,e._category=this._category,e._roomEngine=this._roomEngine,e._stuffData=this._stuffData,e._extra=this._extra,e._isWallItem=this._isWallItem,e._iconUrl=this._iconUrl,e._name=this._name,e._description=this._description,e._locked=this._locked,e._selected=this._selected,e._hasUnseenItems=this._hasUnseenItems,e._items=this._items,e}prepareGroup(){this.setIcon(),this.setName(),this.setDescription()}dispose(){}getItemByIndex(e){return this._items[e]}getItemById(e){for(const r of this._items)if(r.id===e)return r;return null}getTradeItems(e){const r=[],n=this.getLastItem();if(!n)return r;let s=0,o=0;for(;o<this._items.length&&!(s>=e);){const c=this.getItemByIndex(o);!c.locked&&c.isTradable&&c.type===n.type&&(r.push(c),s++),o++}return r}push(e){const r=[...this._items];let n=0;for(;n<r.length;){let s=r[n];if(s.id===e.id){s=s.clone(),s.locked=!1,r.splice(n,1),r.push(s),this._items=r;return}n++}r.push(e),this._items=r,this._items.length===1&&this.prepareGroup()}pop(){const e=[...this._items];let r=null;if(e.length>0){const n=e.length-1;r=e[n],e.splice(n,1)}return this._items=e,r}remove(e){const r=[...this._items];let n=0;for(;n<r.length;){let s=r[n];if(s.id===e)return r.splice(n,1),this._items=r,s;n++}return null}getTotalCount(){if(this._category===ee.POST_IT){let e=0,r=0;for(;r<this._items.length;){const n=this.getItemByIndex(r);e=e+parseInt(n.stuffData.getLegacyString()),r++}return e}return this._items.length}getUnlockedCount(){if(this.category===ee.POST_IT)return this.getTotalCount();let e=0,r=0;for(;r<this._items.length;)this.getItemByIndex(r).locked||e++,r++;return e}getLastItem(){return this._items.length?this.getItemByIndex(this._items.length-1):null}unlockAllItems(){const e=[...this._items];let r=0;for(;r<e.length;){const n=e[r];if(n.locked){const s=n.clone();s.locked=!1,e[r]=s}r++}this._items=e}lockItemIds(e){const r=[...this._items];let n=0,s=!1;for(;n<r.length;){const o=r[n],c=e.indexOf(o.ref)>=0;if(o.locked!==c){s=!0;const u=o.clone();u.locked=c,r[n]=u}n++}return this._items=r,s}setName(){const e=this.getLastItem();if(!e){this._name="";return}let r="";switch(this._category){case ee.POSTER:r="poster_"+e.stuffData.getLegacyString()+"_name";break;case ee.TRAX_SONG:this._name="SONG_NAME";return;default:this.isWallItem?r="wallItem.name."+e.type:r="roomItem.name."+e.type}this._name=m(r)}setDescription(){this._description=""}setIcon(){if(this._iconUrl)return;let e=null;this.isWallItem?e=this._roomEngine.getFurnitureWallIconUrl(this._type,this._stuffData.getLegacyString()):e=this._roomEngine.getFurnitureFloorIconUrl(this._type),e&&(this._iconUrl=e)}get type(){return this._type}get category(){return this._category}get stuffData(){return this._stuffData}get extra(){return this._extra}get iconUrl(){return this._iconUrl}get name(){return this._name}get description(){return this._description}get hasUnseenItems(){return this._hasUnseenItems}set hasUnseenItems(e){this._hasUnseenItems=e}get locked(){return this._locked}set locked(e){this._locked=e}get selected(){return this._selected}set selected(e){this._selected=e}get isWallItem(){const e=this.getItemByIndex(0);return e?e.isWallItem:!1}get isGroupable(){const e=this.getItemByIndex(0);return e?e.isGroupable:!1}get isSellable(){const e=this.getItemByIndex(0);return e?e.sellable:!1}get items(){return this._items}set items(e){this._items=e}}const Mi=(a,e,r,n=NaN)=>new Di(a,e,q(),r,n),L_=(a,e,r)=>{const n=[];for(const o of a)o.type===e.type&&n.push(o);for(const o of n)if(o.getItemById(e.id))return o;const s=Mi(e.type,e.category,e.stuffData,e.extra);return s.push(e),r?(s.hasUnseenItems=!0,a.unshift(s)):a.push(s),s},U_=(a,e,r)=>{let n=null;for(const s of a)if(s.type===e.type&&s.isWallItem===e.isWallItem&&s.isGroupable)if(e.category===ee.POSTER){if(s.stuffData.getLegacyString()===e.stuffData.getLegacyString()){n=s;break}}else if(e.category===ee.GUILD_FURNI){if(e.stuffData.compare(s.stuffData)){n=s;break}}else{n=s;break}if(n){if(n.push(e),r){n.hasUnseenItems=!0;const s=a.indexOf(n);s>=0&&a.splice(s,1),a.unshift(n)}return n}return n=Mi(e.type,e.category,e.stuffData,e.extra),n.push(e),r?(n.hasUnseenItems=!0,a.unshift(n)):a.push(n),n},kl=(a,e,r)=>{e.isGroupable?U_(a,e,r):L_(a,e,r)},F_=(a,e,r,n)=>{if(e===1)return a;n[r]=a;for(const o of n)if(!o)return null;const s=new Map;for(const o of n){for(const[c,u]of o)s.set(c,u);o.clear()}return n=null,s},G_=a=>{const e=[];for(const r of a){let n=r.getTotalCount();r.category===ee.POST_IT&&(n=1);let s=0;for(;s<n;)e.push(r.getItemByIndex(s).id),s++}return e};let Zu=!1,ed=-1;const B_=()=>Zu,Zs=a=>Zu=a,fs=()=>ed,ia=a=>ed=a,qs=()=>{fs()!==-1&&(q().cancelRoomObjectPlacement(),ia(-1),Zs(!1))},mi=(a,e=!1)=>{const r=a.petData;if(!r)return!1;const n=$n().getSession(1);return!n||!n.isRoomOwner&&!n.allowPets?!1:(Z("inventory/hide"),q().processRoomObjectPlacement(Us.INVENTORY,-r.id,Q.UNIT,gt.PET,r.figureData.figuredata)&&(ia(r.id),Zs(!0)),!0)},Is=(a,e=!1)=>{if(!a||!a.getUnlockedCount())return!1;const r=a.getLastItem();if(!r)return!1;if(r.category===ee.FLOOR||r.category===ee.WALL_PAPER||r.category===ee.LANDSCAPE)return e||D(new Lo(r.id)),!1;{Z("inventory/hide");let n=0,s=!1;r.isWallItem?n=Q.WALL:n=Q.FLOOR,r.category===ee.POSTER?s=q().processRoomObjectPlacement(Us.INVENTORY,r.id,n,r.type,r.stuffData.getLegacyString()):s=q().processRoomObjectPlacement(Us.INVENTORY,r.id,n,r.type,r.extra.toString(),r.stuffData),s&&(ia(r.ref),Zs(!0))}return!0},gi=(a,e=!1)=>{const r=a.botData;if(!r)return!1;const n=$n().getSession(1);return!n||!n.isRoomOwner?!1:(Z("inventory/hide"),q().processRoomObjectPlacement(Us.INVENTORY,-r.id,Q.UNIT,gt.RENTABLE_BOT,r.figure)&&(ia(r.id),Zs(!0)),!0)};class qe{}qe.FURNI=1;qe.RENTABLE=2;qe.PET=3;qe.BADGE=4;qe.BOT=5;qe.GAMES=6;const V_=a=>a.map(e=>e.petData.id),td=(a,e,r=!0)=>{const n={petData:a};return r?e.unshift(n):e.push(n),n},rd=(a,e)=>{let r=0;for(;r<e.length;){const n=e[r];if(n&&n.petData.id===a)return fs()===n.petData.id&&(qs(),Z("inventory/open")),e.splice(r,1),n;r++}return null},H_=(a,e,r)=>{const n=V_(a),s=[],o=[];for(const c of e.keys())n.indexOf(c)===-1&&s.push(c);for(const c of n)!e.get(c)&&o.push(c);n.length;for(const c of o)rd(c,a);for(const c of s){const u=e.get(c);u&&td(u,a,r(qe.PET,u.id))}return a},W_=(a,e,r,n)=>{if(e===1)return a;n[r]=a;for(const o of n)if(!o)return null;const s=new Map;for(const o of n){for(const[c,u]of o)s.set(c,u);o.clear()}return n=null,s};class rt{}rt.TRADING_STATE_READY=0;rt.TRADING_STATE_RUNNING=1;rt.TRADING_STATE_COUNTDOWN=2;rt.TRADING_STATE_CONFIRMING=3;rt.TRADING_STATE_CONFIRMED=4;rt.TRADING_STATE_COMPLETED=5;rt.TRADING_STATE_CANCELLED=6;class Al{constructor(e=-1,r="",n=new Fs,s=0,o=0,c=!1,u=!1){this.userId=e,this.userName=r,this.userItems=n,this.itemCount=s,this.creditsCount=o,this.accepts=c,this.canTrade=u}}class bt{}bt.ALERT_SCAM=0;bt.HOTEL_TRADING_DISABLED=1;bt.YOU_NOT_ALLOWED=2;bt.THEY_NOT_ALLOWED=4;bt.ROOM_DISABLED=6;bt.YOU_OPEN=7;bt.THEY_OPEN=8;bt.ERROR_WHILE_COMMIT=9;bt.THEY_CANCELLED=10;const Pl=a=>{var e;return((e=H().getWallItemData(a))==null?void 0:e.isExternalImage)||!1},Dl=a=>{const e=new Fs;if(a.length)for(const n of a){const s=n.spriteId,o=n.category;let c=n.furniType+s;(!n.isGroupable||Pl(s))&&(c="itemid"+n.itemId),n.category===ee.POSTER?c=n.itemId+"poster"+n.stuffData.getLegacyString():n.category===ee.GUILD_FURNI&&(c="");let u=n.isGroupable&&!Pl(n.spriteId)?e.getValue(c):null;u||(u=Mi(s,o,n.stuffData),e.add(c,u)),u.push(new js(n))}return e},j_=(a,e)=>{let r=a.toString();if(!(e instanceof $s))return r;let n=1;for(;n<5;)r=r+(","+e.getValue(n)),n++;return r};class Uo{static getProductImageUrl(e,r,n){let s=null;switch(e){case Os.S:s=q().getFurnitureFloorIconUrl(r);break;case Os.I:this.getProductCategory(Os.I,r)===1&&(s=q().getFurnitureWallIconUrl(r,n));break}return s}static getProductCategory(e,r){if(e===Os.S)return 1;if(e===Os.I){if(r===3001)return ee.WALL_PAPER;if(r===3002)return ee.FLOOR;if(r===4057)return ee.LANDSCAPE}return 1}}class zo{static getRandomNumber(e){return Math.floor(Math.random()*e)}static getRandomElement(e){return e[this.getRandomNumber(e.length)]}static getRandomElements(e,r){const n=new Array(r);let s=e.length;const o=new Array(s);for(;r--;){var c=this.getRandomNumber(s);n[r]=e[c in o?o[c]:c],o[c]=--s in o?o[s]:s}return n}}const vt=new Map;vt.set("r","red");vt.set("b","blue");vt.set("g","green");vt.set("y","yellow");vt.set("w","white");vt.set("o","orange");vt.set("c","cyan");vt.set("br","brown");vt.set("pr","purple");vt.set("pk","pink");vt.set("red","red");vt.set("blue","blue");vt.set("green","green");vt.set("yellow","yellow");vt.set("white","white");vt.set("orange","orange");vt.set("cyan","cyan");vt.set("brown","brown");vt.set("purple","purple");vt.set("pink","pink");const q_=a=>a.replace(/([\u00A0-\u9999<>&])(.|$)/g,(e,r,n)=>r!=="&"||n!=="#"?(/[\u00A0-\u9999<>&]/.test(n)&&(n="&#"+n.charCodeAt(0)+";"),"&#"+r.charCodeAt(0)+";"+n):e),z_=a=>{let e="";if(a=q_(a),a.startsWith("@")&&a.indexOf("@",1)>-1){let r=null;for(;(r=/@[a-zA-Z]+@/g.exec(a))!==null;){const n=r[0].toString(),s=n.substr(1,n.length-2),o=a.replace(n,"");vt.has(s)?e='<span style="color: '+vt.get(s)+'">'+o+"</span>":e=o;break}}else e=a;return e},Li=(a,e)=>window.localStorage.setItem(a,JSON.stringify(e));class ir{}ir.CAMERA_SHUTTER="camera_shutter";ir.CREDITS="credits";ir.DUCKETS="duckets";ir.MESSENGER_NEW_THREAD="messenger_new_thread";ir.MESSENGER_MESSAGE_RECEIVED="messenger_message_received";ir.MODTOOLS_NEW_TICKET="modtools_new_ticket";function Y_(a){const e=a.parts;let r=0;for(const n of e)r=Math.max(r,n.colorLayerIndex);return r}function $_(a,e){return e=e.filter(r=>a.indexOf(r)===-1),[...a,...zo.getRandomElements(e,zo.getRandomNumber(e.length)+1)]}function K_(a,e,r=0,n=[]){if(!a)return null;const s=a.partSets.getValues().filter(o=>!o.isSelectable||o.gender!=="U"&&o.gender!==e||o.clubLevel>r||o.isSellable&&n.indexOf(o.id)===-1?null:o);return!s||!s.length?null:zo.getRandomElement(s)}function X_(a,e,r=0){if(!a)return[];const n=a.colors.getValues().filter(s=>!s.isSelectable||s.clubLevel>r?null:s);return!n||!n.length?null:zo.getRandomElements(n,Y_(e))}function Q_(a,e,r=0,n=[],s=[]){const o=Tt().structure,c=new $m(""),u=$_(o.getMandatorySetTypeIds(e,r),ce.SET_TYPES);for(const g of s){const p=a.getPartSetId(g),d=a.getColorIds(g);c.updatePart(g,p,d)}for(const g of u){if(c.hasPartType(g))continue;const p=o.figureData.getSetType(g),d=K_(p,e,r,n);if(!d)continue;let h=[];d.isColorable&&(h=X_(o.figureData.getPalette(p.paletteID),d,r).map(C=>C.id)),c.updatePart(p.type,d.id,h)}return c.getFigureString()}class J_ extends aa{init(){super.init(),this.addCategory(ce.HAIR),this.addCategory(ce.HAT),this.addCategory(ce.HEAD_ACCESSORIES),this.addCategory(ce.EYE_ACCESSORIES),this.addCategory(ce.FACE_ACCESSORIES),this._isInitalized=!0}get name(){return cn.HEAD}}class Z_ extends aa{init(){super.init(),this.addCategory(ce.TROUSERS),this.addCategory(ce.SHOES),this.addCategory(ce.TROUSER_ACCESSORIES),this._isInitalized=!0}get name(){return cn.LEGS}}class eb extends aa{init(){super.init(),this.addCategory(ce.SHIRT),this.addCategory(ce.CHEST_PRINTS),this.addCategory(ce.JACKET),this.addCategory(ce.CHEST_ACCESSORIES),this._isInitalized=!0}get name(){return cn.TORSO}}class zs{}zs.COLORMATRIX="colormatrix";zs.COMPOSITE="composite";class tb{constructor(e,r){this.texture=e,this.imageUrl=r}}class rb{constructor(e,r){this.effectName=e,this.thumbnailUrl=r}}class nb{constructor(e,r,n){this._productName=e,this._customImage=r,this._furnitureClassName=n}get productName(){return this._productName}get customImage(){return this._customImage}get furnitureClassName(){return this._furnitureClassName}}class Ut{}Ut.STATE_UNLOCKED=1;Ut.STATE_LOCKED_AVAILABLE=2;Ut.STATE_LOCKED_EXPIRED=3;Ut.STATE_LOCKED_FUTURE=4;class Rr{}Rr.TYPE_CHAT=1;Rr.TYPE_ROOM_INFO=2;Rr.TYPE_IM=3;const nd=()=>{const a=new Date;return`${a.getHours().toString().padStart(2,"0")}:${a.getMinutes().toString().padStart(2,"0")}`},Ml=(a=0)=>{const e=a?new Date(Date.now()-a*1e3):new Date;return`${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}`},sd=a=>{if(!a||!a.length)return null;const e=a.split("/"),r=e[0],n=e[1],s=parseInt(e[2]);return{username:r,figure:n,userId:s}};class Ht{constructor(){this.id=-1,this.name=null,this.gender=0,this.online=!1,this.followingAllowed=!1,this.figure=null,this.categoryId=0,this.motto=null,this.realName=null,this.lastAccess=null,this.persistedMessageUser=!1,this.vipMember=!1,this.pocketHabboUser=!1,this.relationshipStatus=-1,this.unread=0}populate(e){this.id=e.id,this.name=e.name,this.gender=e.gender,this.online=e.online,this.followingAllowed=e.followingAllowed,this.figure=e.figure,this.categoryId=e.categoryId,this.motto=e.motto,this.realName=e.realName,this.lastAccess=e.lastAccess,this.persistedMessageUser=e.persistedMessageUser,this.vipMember=e.vipMember,this.pocketHabboUser=e.pocketHabboUser,this.relationshipStatus=e.relationshipStatus}}Ht.RELATIONSHIP_NONE=0;Ht.RELATIONSHIP_HEART=1;Ht.RELATIONSHIP_SMILE=2;Ht.RELATIONSHIP_BOBBA=3;class jn{}jn.GROUP_CHAT=0;jn.PRIVATE_CHAT=1;class Ur{}Ur.HIDDEN=0;Ur.SHOW=1;Ur.UNREAD=2;class Ll{populate(e){return e?(this._id=e.requestId,this._name=e.requesterName,this._figureString=e.figureString,this._requesterUserId=e.requesterUserId,!0):!1}get id(){return this._id}get name(){return this._name}get requesterUserId(){return this._requesterUserId}get figureString(){return this._figureString}}class sb{constructor(e=0,r=0,n=0,s=[]){this.userFriendLimit=e,this.normalFriendLimit=r,this.extendedFriendLimit=n,this.categories=s}}class Fr{constructor(e,r,n=0,s=null,o=0){this._type=o,this._senderId=e,this._message=r,this._secondsSinceSent=n,this._extraData=s,this._date=new Date}get type(){return this._type}get senderId(){return this._senderId}get message(){return this._message}get secondsSinceSent(){return this._secondsSinceSent}get extraData(){return this._extraData}get date(){return this._date}}Fr.CHAT=0;Fr.ROOM_INVITE=1;Fr.STATUS_NOTIFICATION=2;Fr.SECURITY_NOTIFICATION=3;class ob{constructor(e,r=jn.PRIVATE_CHAT){this._userId=e,this._chats=[],this._type=r}addChat(e){this._chats.push(e)}get userId(){return this._userId}get chats(){return this._chats}get type(){return this._type}set type(e){this._type=e}}const od=class{constructor(a){this._threadId=++od.THREAD_ID,this._participant=a,this._groups=[],this._lastUpdated=new Date,this._unreadCount=0}addMessage(a,e,r=0,n=null,s=0){const o=a<0&&n,c=o?sd(n).userId:a,u=this.getLastGroup(c);if(!u)return;o&&(u.type=jn.GROUP_CHAT);const g=new Fr(a,e,r,n,s);return u.addChat(g),this._lastUpdated=new Date,this._unreadCount++,g}getLastGroup(a){let e=this._groups[this._groups.length-1];return e&&e.userId===a||(e=new ob(a),this._groups.push(e)),e}setRead(){this._unreadCount=0}get threadId(){return this._threadId}get participant(){return this._participant}get groups(){return this._groups}get lastUpdated(){return this._lastUpdated}get unreadCount(){return this._unreadCount}get unread(){return this._unreadCount>0}};let Ui=od;Ui.MESSAGE_RECEIVED="MT_MESSAGE_RECEIVED";Ui.THREAD_ID=0;function la(a=0){Z(a===0?"friends-messenger/toggle":`friends-messenger/${a}`)}const ab=()=>lu.RENDERER_VERSION,ad=()=>"2.1.1";function eo(a){D(new Gs(a,!0))}function id(a){Z(`groups/manage/${a}`)}function Ul(a,e){Z(e?`group-members/${a}/${e}`:`group-members/${a}`)}const pi=class{constructor(a,e,r,n){this.type=a,this.key=e||0,this.color=r||0,this.position=n||4}get code(){return this.key===0&&this.type!==pi.BASE?null:pi.getCode(this.type,this.key,this.color,this.position)}static getCode(a,e,r,n){return a+(e<10?"0":"")+e+(r<10?"0":"")+r+n}};let zt=pi;zt.BASE="b";zt.SYMBOL="s";class wt{}wt.NOT_MEMBER=0;wt.MEMBER=1;wt.REQUEST_PENDING=2;class nr{}nr.REGULAR=0;nr.EXCLUSIVE=1;nr.PRIVATE=2;const ib=a=>{D(a.favourite?new Km(a.groupId):new Xm(a.groupId))},Fi=a=>D(new Qm(a));class me{}me.NONE="NONE";me.ERROR="ERROR";me.REJECTED="REJECTED";me.USER_CREATE="USER_CREATE";me.USER_PENDING="USER_PENDING";me.USER_ONGOING="USER_ONGOING";me.USER_FEEDBACK="USER_FEEDBACK";me.USER_NO_HELPERS="USER_NO_HELPERS";me.USER_SOMETHING_WRONG="USER_SOMETHING_WRONG";me.USER_THANKS="USER_THANKS";me.USER_GUIDE_DISCONNECTED="USER_GUIDE_DISCONNECTED";me.GUIDE_TOOL_MENU="GUIDE_TOOL_MENU";me.GUIDE_ACCEPT="GUIDE_ACCEPT";me.GUIDE_ONGOING="GUIDE_ONGOING";me.GUIDE_CLOSED="GUIDE_CLOSED";me.GUARDIAN_CHAT_REVIEW_ACCEPT="GUARDIAN_CHAT_REVIEW_ACCEPT";me.GUARDIAN_CHAT_REVIEW_WAIT_FOR_VOTERS="GUARDIAN_CHAT_REVIEW_WAIT_FOR_VOTERS";me.GUARDIAN_CHAT_REVIEW_VOTE="GUARDIAN_CHAT_REVIEW_VOTE";me.GUARDIAN_CHAT_REVIEW_WAIT_FOR_RESULTS="GUARDIAN_CHAT_REVIEW_WAIT_FOR_RESULTS";me.GUARDIAN_CHAT_REVIEW_RESULTS="GUARDIAN_CHAT_REVIEW_RESULTS";class Fl{constructor(e,r){this._message=e,this._roomId=r}get message(){return this._message}get roomId(){return this._roomId}}class Gl{constructor(e){this._userId=e,this._messages=[]}addChat(e){this._messages.push(e)}get userId(){return this._userId}get messages(){return this._messages}}class Mr{}Mr.ACTIVE="active";Mr.NONE="none";Mr.EXPIRED="expired";const lb="HC1",cb=["ACH_VipHC1","ACH_VipHC2","ACH_VipHC3","ACH_VipHC4","ACH_VipHC5","HC1","HC2","HC3","HC4","HC5"],ub=a=>{let e=null;return cb.forEach(r=>a.indexOf(r)>-1&&(e=r)),e||lb};class Yo{}Yo.TOO_MANY_PENDING_CALLS_CODE=1;Yo.HAS_ABUSIVE_CALL_CODE=2;const db=a=>a===1?"useless":a===2?"abusive":"resolved";class kt{}kt.SELECT_USER=0;kt.SELECT_CHATS=1;kt.SELECT_TOPICS=2;kt.INPUT_REPORT_MESSAGE=3;kt.REPORT_SUMMARY=4;class Ve{}Ve.EMERGENCY=1;Ve.GUIDE=2;Ve.IM=3;Ve.ROOM=4;Ve.BULLY=6;Ve.THREAD=7;Ve.MESSAGE=8;Ve.PHOTO=9;const mb=a=>{switch(a){case 1:case 2:return"Normal";case 3:return"Automatic";case 4:return"Automatic IM";case 5:return"Guide System";case 6:return"IM";case 7:return"Room";case 8:return"Panic";case 9:return"Guardian";case 10:return"Automatic Helper";case 11:return"Discussion";case 12:return"Selfie";case 14:return"Photo";case 15:return"Ambassador"}return"Unknown"};class Le{constructor(e,r,n,s,o){this._actionId=e,this._name=r,this._actionType=n,this._sanctionTypeId=s,this._actionLengthHours=o}get actionId(){return this._actionId}get name(){return this._name}get actionType(){return this._actionType}get sanctionTypeId(){return this._sanctionTypeId}get actionLengthHours(){return this._actionLengthHours}}Le.ALERT=1;Le.MUTE=2;Le.BAN=3;Le.KICK=4;Le.TRADE_LOCK=5;Le.MESSAGE=6;class Ae{}Ae.NONE=0;Ae.START_DOORBELL=1;Ae.START_PASSWORD=2;Ae.STATE_PENDING_SERVER=3;Ae.UPDATE_STATE=4;Ae.STATE_WAITING=5;Ae.STATE_NO_ANSWER=6;Ae.STATE_WRONG_PASSWORD=7;Ae.STATE_ACCEPTED=8;class an{}an.LIST=0;an.THUMBNAILS=1;an.FORCED_THUMBNAILS=2;const gb=()=>{const a=[];for(let e=10;e<=100;e=e+10)a.push(e);return a},Bl=gb(),ts=[{name:"anything",query:null},{name:"room.name",query:"roomname"},{name:"owner",query:"owner"},{name:"tag",query:"tag"},{name:"group",query:"group"}];function Kt(a){D(new Ho(a,!1,!0))}class ue{}ue.DEFAULT="default";ue.MOTD="motd";ue.MODERATION="moderation";ue.EVENT="event";ue.NITRO="nitro";ue.SEARCH="search";ue.ALERT="alert";const hi=class{constructor(a,e=ue.DEFAULT,r=null,n=null,s=null,o=null){hi.ITEM_ID+=1,this._id=hi.ITEM_ID,this._messages=a,this._alertType=e,this._clickUrl=r,this._clickUrlText=n,this._title=s,this._imageUrl=o}get id(){return this._id}get messages(){return this._messages}set alertType(a){this._alertType=a}get alertType(){return this._alertType}get clickUrl(){return this._clickUrl}get clickUrlText(){return this._clickUrlText}get title(){return this._title}get imageUrl(){return this._imageUrl}};let fi=hi;fi.ITEM_ID=-1;class $e{}$e.FRIENDOFFLINE="friendoffline";$e.FRIENDONLINE="friendonline";$e.THIRDPARTYFRIENDOFFLINE="thirdpartyfriendoffline";$e.THIRDPARTYFRIENDONLINE="thirdpartyfriendonline";$e.ACHIEVEMENT="achievement";$e.BADGE_RECEIVED="badge_received";$e.INFO="info";$e.RECYCLEROK="recyclerok";$e.RESPECT="respect";$e.CLUB="club";$e.SOUNDMACHINE="soundmachine";$e.PETLEVEL="petlevel";$e.CLUBGIFT="clubgift";$e.BUYFURNI="buyfurni";$e.VIP="vip";$e.ROOMMESSAGESPOSTED="roommessagesposted";const Ii=class{constructor(a,e=$e.INFO,r=null,n=null){Ii.ITEM_ID+=1,this._id=Ii.ITEM_ID,this._message=a,this._notificationType=e,this._iconUrl=r,this._linkUrl=n}get id(){return this._id}get message(){return this._message}get notificationType(){return this._notificationType}get iconUrl(){return this._iconUrl}get linkUrl(){return this._linkUrl}};let ld=Ii;ld.ITEM_ID=-1;const Ei=class{constructor(a,e,r,n,s,o,c){Ei.ITEM_ID+=1,this._id=Ei.ITEM_ID,this._confirmType=a,this._message=e,this._onConfirm=r,this._onCancel=n,this._confirmText=s,this._cancelText=o,this._title=c}get id(){return this._id}get confirmType(){return this._confirmType}get message(){return this._message}get onConfirm(){return this._onConfirm}get onCancel(){return this._onCancel}get confirmText(){return this._confirmText}get cancelText(){return this._cancelText}get title(){return this._title}};let cd=Ei;cd.ITEM_ID=-1;class Gi{constructor(){this._credits=0,this._activityPoints=new Map,this._clubDays=0,this._clubPeriods=0,this._isVIP=!1,this._pastClubDays=0,this._pastVipDays=0,this._isExpiring=!1,this._minutesUntilExpiration=0,this._minutesSinceLastModified=0,this._lastUpdated=0}static from(e){const r=new Gi;return r._credits=e._credits,r._activityPoints=e._activityPoints,r._clubDays=e._clubDays,r._clubPeriods=e._clubPeriods,r._isVIP=e._isVIP,r._pastClubDays=e._pastClubDays,r._pastVipDays=e._pastVipDays,r._isExpiring=e._isExpiring,r._minutesUntilExpiration=e._minutesUntilExpiration,r._minutesSinceLastModified=e._minutesSinceLastModified,r._lastUpdated=e._lastUpdated,r}get credits(){return this._credits}set credits(e){this._lastUpdated=Nr(),this._credits=e}get activityPoints(){return this._activityPoints}set activityPoints(e){this._lastUpdated=Nr(),this._activityPoints=e}get clubDays(){return this._clubDays}set clubDays(e){this._lastUpdated=Nr(),this._clubDays=e}get clubPeriods(){return this._clubPeriods}set clubPeriods(e){this._lastUpdated=Nr(),this._clubPeriods=e}get hasClubLeft(){return this._clubDays>0||this._clubPeriods>0}get isVip(){return this._isVIP}set isVip(e){this._isVIP=e}get pastClubDays(){return this._pastClubDays}set pastClubDays(e){this._lastUpdated=Nr(),this._pastClubDays=e}get pastVipDays(){return this._pastVipDays}set pastVipDays(e){this._lastUpdated=Nr(),this._pastVipDays=e}get isExpiring(){return this._isExpiring}set isExpiring(e){this._isExpiring=e}get minutesUntilExpiration(){var e=(Nr()-this._lastUpdated)/6e4,r=this._minutesUntilExpiration-e;return r>0?r:0}set minutesUntilExpiration(e){this._lastUpdated=Nr(),this._minutesUntilExpiration=e}get minutesSinceLastModified(){return this._minutesSinceLastModified}set minutesSinceLastModified(e){this._lastUpdated=Nr(),this._minutesSinceLastModified=e}get lastUpdated(){return this._lastUpdated}get clubLevel(){return this.clubDays===0&&this.clubPeriods===0?ar.NO_CLUB:this.isVip?ar.VIP:ar.CLUB}}class to extends yr{}class ln extends to{constructor(e,r){super(e),this._id=-1,this._numQuestions=0,this._startMessage="",this._endMessage="",this._questionArray=null,this._pollType="",this._npsPoll=!1,this._id=r}get id(){return this._id}get summary(){return this._summary}set summary(e){this._summary=e}get headline(){return this._headline}set headline(e){this._headline=e}get numQuestions(){return this._numQuestions}set numQuestions(e){this._numQuestions=e}get startMessage(){return this._startMessage}set startMessage(e){this._startMessage=e}get endMessage(){return this._endMessage}set endMessage(e){this._endMessage=e}get questionArray(){return this._questionArray}set questionArray(e){this._questionArray=e}get pollType(){return this._pollType}set pollType(e){this._pollType=e}get npsPoll(){return this._npsPoll}set npsPoll(e){this._npsPoll=e}}ln.OFFER="RWPUW_OFFER";ln.ERROR="RWPUW_ERROR";ln.CONTENT="RWPUW_CONTENT";class Tn extends to{constructor(e,r=0,n=0,s=0){super(e),this._hue=r,this._saturation=n,this._lightness=s}get hue(){return this._hue}get saturation(){return this._saturation}get lightness(){return this._lightness}}Tn.PREVIEW="RWUBCPE_PREVIEW";Tn.CLEAR_PREVIEW="RWUBCPE_CLEAR_PREVIEW";const ud=class extends to{constructor(a,e){super(ud.CHAT_INPUT_CONTENT),this._chatMode="",this._userName="",this._chatMode=a,this._userName=e}get chatMode(){return this._chatMode}get userName(){return this._userName}};let wn=ud;wn.CHAT_INPUT_CONTENT="RWUCICE_CHAT_INPUT_CONTENT";wn.WHISPER="whisper";wn.SHOUT="shout";const dd=class extends to{constructor(a,e,r,n,s,o,c){super(dd.UPDATE_CHAT),this._objectId=a,this._category=e,this._botId=r,this._chat=n,this._automaticChat=s,this._chatDelay=o,this._mixSentences=c}get objectId(){return this._objectId}get category(){return this._category}get botId(){return this._botId}get chat(){return this._chat}get automaticChat(){return this._automaticChat}get chatDelay(){return this._chatDelay}get mixSentences(){return this._mixSentences}};let Bi=dd;Bi.UPDATE_CHAT="RWURBCE_UPDATE_CHAT";class we extends to{constructor(e,r,n,s){super(e),this._id=r,this._category=n,this._roomId=s}get id(){return this._id}get category(){return this._category}get roomId(){return this._roomId}}we.OBJECT_SELECTED="RWUROE_OBJECT_SELECTED";we.OBJECT_DESELECTED="RWUROE_OBJECT_DESELECTED";we.USER_REMOVED="RWUROE_USER_REMOVED";we.FURNI_REMOVED="RWUROE_FURNI_REMOVED";we.FURNI_ADDED="RWUROE_FURNI_ADDED";we.USER_ADDED="RWUROE_USER_ADDED";we.OBJECT_ROLL_OVER="RWUROE_OBJECT_ROLL_OVER";we.OBJECT_ROLL_OUT="RWUROE_OBJECT_ROLL_OUT";we.OBJECT_REQUEST_MANIPULATION="RWUROE_OBJECT_REQUEST_MANIPULATION";we.OBJECT_DOUBLE_CLICKED="RWUROE_OBJECT_DOUBLE_CLICKED";class Es{constructor(e){this.type=e,this.id=0,this.category=0,this.name="",this.description="",this.image=null,this.isWallItem=!1,this.isStickie=!1,this.isRoomOwner=!1,this.roomControllerLevel=0,this.isAnyRoomController=!1,this.expiration=-1,this.purchaseCatalogPageId=-1,this.purchaseOfferId=-1,this.extraParam="",this.isOwner=!1,this.stuffData=null,this.groupId=0,this.ownerId=0,this.ownerName="",this.usagePolicy=0,this.rentCatalogPageId=-1,this.rentOfferId=-1,this.purchaseCouldBeUsedForBuyout=!1,this.rentCouldBeUsedForBuyout=!1,this.availableForBuildersClub=!1,this.tileSizeX=1,this.tileSizeY=1}}Es.FURNI="IFI_FURNI";class md{constructor(e,r,n,s,o,c=!1){this.roomIndex=e,this.category=r,this.id=n,this.name=s,this.userType=o,this.isFriend=c}}class Cs{constructor(e){this.type=e,this.level=0,this.maximumLevel=0,this.experience=0,this.levelExperienceGoal=0,this.energy=0,this.maximumEnergy=0,this.happyness=0,this.maximumHappyness=0,this.respectsPetLeft=0,this.respect=0,this.age=0,this.name="",this.id=-1,this.image=null,this.petType=0,this.petBreed=0,this.petFigure="",this.posture="std",this.isOwner=!1,this.ownerId=-1,this.ownerName="",this.canRemovePet=!1,this.roomIndex=0,this.unknownRarityLevel=0,this.saddle=!1,this.rider=!1,this.breedable=!1,this.skillTresholds=[],this.publiclyRideable=0,this.fullyGrown=!1,this.dead=!1,this.rarityLevel=0,this.maximumTimeToLive=0,this.remainingTimeToLive=0,this.remainingGrowTime=0,this.publiclyBreedable=!1}}Cs.PET_INFO="IPI_PET_INFO";class _s{constructor(e){this.type=e,this.name="",this.motto="",this.webID=0,this.figure="",this.badges=[],this.carryItem=0,this.roomIndex=0,this.amIOwner=!1,this.amIAnyRoomController=!1,this.roomControllerLevel=0,this.ownerId=-1,this.ownerName="",this.botSkills=[]}}_s.RENTABLE_BOT="IRBI_RENTABLE_BOT";const gd=class{constructor(a){this.type=a,this.name="",this.motto="",this.achievementScore=0,this.webID=0,this.xp=0,this.userType=-1,this.figure="",this.badges=[],this.groupId=0,this.groupName="",this.groupBadgeId="",this.carryItem=0,this.roomIndex=0,this.isSpectatorMode=!1,this.allowNameChange=!1,this.amIOwner=!1,this.amIAnyRoomController=!1,this.roomControllerLevel=0,this.canBeKicked=!1,this.canBeBanned=!1,this.canBeMuted=!1,this.respectLeft=0,this.isIgnored=!1,this.isGuildRoom=!1,this.canTrade=!1,this.canTradeReason=0,this.targetRoomControllerLevel=0,this.isAmbassador=!1}get isOwnUser(){return this.type===gd.OWN_USER}};let et=gd;et.OWN_USER="IUI_OWN_USER";et.PEER="IUI_PEER";et.BOT="IUI_BOT";et.TRADE_REASON_OK=0;et.TRADE_REASON_SHUTDOWN=2;et.TRADE_REASON_NO_TRADING=3;et.DEFAULT_BOT_BADGE_ID="BOT";class rs{static getObjectName(e,r){const n=ye();let s=-1,o=null,c=0;switch(r){case Q.FLOOR:case Q.WALL:{const u=q().getRoomObject(n.roomId,e,r);if(!u)break;if(u.type.indexOf("poster")===0)o=m("${poster_"+parseInt(u.type.replace("poster",""))+"_name}");else{let g=null;const p=u.model.getValue(te.FURNITURE_TYPE_ID);if(r===Q.FLOOR?g=H().getFloorItemData(p):r===Q.WALL&&(g=H().getWallItemData(p)),!g)break;s=g.id,o=g.name}break}case Q.UNIT:{const u=n.userDataManager.getUserDataByIndex(e);if(!u)break;s=u.webID,o=u.name,c=u.type;break}}return!o||!o.length?null:new md(e,r,s,o,c)}static getFurniInfo(e,r){const n=ye(),s=new Es(Es.FURNI);s.id=e,s.category=r;const o=q().getRoomObject(n.roomId,e,r);if(!o)return;const c=o.model;c.getValue(sn.INFOSTAND_EXTRA_PARAM)&&(s.extraParam=c.getValue(sn.INFOSTAND_EXTRA_PARAM));const u=c.getValue(te.FURNITURE_DATA_FORMAT),g=cu.getData(u);g.initializeFromRoomObjectModel(c),s.stuffData=g;const p=o.type;if(p.indexOf("poster")===0){const f=parseInt(p.replace("poster",""));s.name=m("${poster_"+f+"_name}"),s.description=m("${poster_"+f+"_desc}")}else{const f=c.getValue(te.FURNITURE_TYPE_ID);let _=null;r===Q.FLOOR?_=H().getFloorItemData(f):r===Q.WALL&&(_=H().getWallItemData(f)),_&&(s.name=_.name,s.description=_.description,s.purchaseOfferId=_.purchaseOfferId,s.purchaseCouldBeUsedForBuyout=_.purchaseCouldBeUsedForBuyout,s.rentOfferId=_.rentOfferId,s.rentCouldBeUsedForBuyout=_.rentCouldBeUsedForBuyout,s.availableForBuildersClub=_.availableForBuildersClub,s.tileSizeX=_.tileSizeX,s.tileSizeY=_.tileSizeY)}p.indexOf("post_it")>-1&&(s.isStickie=!0);const d=c.getValue(te.FURNITURE_EXPIRY_TIME),h=c.getValue(te.FURNITURE_EXPIRTY_TIMESTAMP);s.expiration=d<0?d:Math.max(0,d-(Nr()-h)/1e3);let C=q().getRoomObjectImage(n.roomId,e,r,new Rt(180),64,null);(!C.data||C.data.width>140||C.data.height>200)&&(C=q().getRoomObjectImage(n.roomId,e,r,new Rt(180),1,null)),s.image=C.getImage(),s.isWallItem=r===Q.WALL,s.isRoomOwner=n.isRoomOwner,s.roomControllerLevel=n.controllerLevel,s.isAnyRoomController=H().isModerator,s.ownerId=c.getValue(te.FURNITURE_OWNER_ID),s.ownerName=c.getValue(te.FURNITURE_OWNER_NAME),s.usagePolicy=c.getValue(te.FURNITURE_USAGE_POLICY);const I=c.getValue(te.FURNITURE_GUILD_CUSTOMIZED_GUILD_ID);return I!==0&&(s.groupId=I),Vt(o)&&(s.isOwner=!0),s}static getUserInfo(e,r){const n=ye();let s=et.OWN_USER;r.webID!==H().userId&&(s=et.PEER);const o=new et(s);o.isSpectatorMode=n.isSpectator,o.name=r.name,o.motto=r.custom,o.achievementScore=r.activityPoints,o.webID=r.webID,o.roomIndex=r.roomIndex,o.userType=gt.USER;const c=q().getRoomObject(n.roomId,r.roomIndex,e);if(c&&(o.carryItem=c.model.getValue(te.FIGURE_CARRY_OBJECT)||0),s===et.OWN_USER&&(o.allowNameChange=H().canChangeName),o.amIOwner=n.isRoomOwner,o.isGuildRoom=n.isGuildRoom,o.roomControllerLevel=n.controllerLevel,o.amIAnyRoomController=H().isModerator,o.isAmbassador=H().isAmbassador,s===et.PEER){if(c){const p=c.model.getValue(te.FIGURE_FLAT_CONTROL);p!==null&&(o.targetRoomControllerLevel=p),o.canBeMuted=this.canBeMuted(o),o.canBeKicked=this.canBeKicked(o),o.canBeBanned=this.canBeBanned(o)}o.isIgnored=H().isUserIgnored(r.name),o.respectLeft=H().respectsLeft;const u=H().isSystemShutdown,g=n.tradeMode;if(u)o.canTrade=!1;else switch(g){case Sa.ROOM_CONTROLLER_REQUIRED:{const p=o.roomControllerLevel!==tt.NONE&&o.roomControllerLevel!==tt.GUILD_MEMBER,d=o.targetRoomControllerLevel!==tt.NONE&&o.targetRoomControllerLevel!==tt.GUILD_MEMBER;o.canTrade=p||d;break}case Sa.NO_TRADING:o.canTrade=!0;break;default:o.canTrade=!1;break}o.canTradeReason=et.TRADE_REASON_OK,u&&(o.canTradeReason=et.TRADE_REASON_SHUTDOWN),g!==Sa.FREE_TRADING&&(o.canTradeReason=et.TRADE_REASON_NO_TRADING)}return o.groupId=r.groupId,o.groupBadgeId=H().getGroupBadge(o.groupId),o.groupName=r.groupName,o.badges=n.userDataManager.getUserBadges(r.webID),o.figure=r.figure,o}static getBotInfo(e,r){const n=ye(),s=new et(et.BOT);s.name=r.name,s.motto=r.custom,s.webID=r.webID,s.roomIndex=r.roomIndex,s.userType=r.type;const o=q().getRoomObject(n.roomId,r.roomIndex,e);return o&&(s.carryItem=o.model.getValue(te.FIGURE_CARRY_OBJECT)||0),s.amIOwner=n.isRoomOwner,s.isGuildRoom=n.isGuildRoom,s.roomControllerLevel=n.controllerLevel,s.amIAnyRoomController=H().isModerator,s.isAmbassador=H().isAmbassador,s.badges=[et.DEFAULT_BOT_BADGE_ID],s.figure=r.figure,s}static getRentableBotInfo(e,r){const n=ye(),s=new _s(_s.RENTABLE_BOT);s.name=r.name,s.motto=r.custom,s.webID=r.webID,s.roomIndex=r.roomIndex,s.ownerId=r.ownerId,s.ownerName=r.ownerName,s.botSkills=r.botSkills;const o=q().getRoomObject(n.roomId,r.roomIndex,e);return o&&(s.carryItem=o.model.getValue(te.FIGURE_CARRY_OBJECT)||0),s.amIOwner=n.isRoomOwner,s.roomControllerLevel=n.controllerLevel,s.amIAnyRoomController=H().isModerator,s.badges=[et.DEFAULT_BOT_BADGE_ID],s.figure=r.figure,s}static getPetInfo(e){const r=ye(),n=r.userDataManager.getPetData(e.id);if(!n)return;const s=new ps(n.figure);let o=null;s.typeId===qr.MONSTERPLANT&&(e.level>=e.adultLevel?o="std":o="grw"+e.level);const c=e.ownerId===H().userId,u=new Cs(Cs.PET_INFO);return u.name=n.name,u.id=e.id,u.ownerId=e.ownerId,u.ownerName=e.ownerName,u.rarityLevel=e.rarityLevel,u.petType=s.typeId,u.petBreed=s.paletteId,u.petFigure=n.figure,u.posture=o,u.isOwner=c,u.roomIndex=n.roomIndex,u.level=e.level,u.maximumLevel=e.maximumLevel,u.experience=e.experience,u.levelExperienceGoal=e.levelExperienceGoal,u.energy=e.energy,u.maximumEnergy=e.maximumEnergy,u.happyness=e.happyness,u.maximumHappyness=e.maximumHappyness,u.respect=e.respect,u.respectsPetLeft=H().respectsPetLeft,u.age=e.age,u.saddle=e.saddle,u.rider=e.rider,u.breedable=e.breedable,u.fullyGrown=e.fullyGrown,u.dead=e.dead,u.rarityLevel=e.rarityLevel,u.skillTresholds=e.skillTresholds,u.canRemovePet=!1,u.publiclyRideable=e.publiclyRideable,u.maximumTimeToLive=e.maximumTimeToLive,u.remainingTimeToLive=e.remainingTimeToLive,u.remainingGrowTime=e.remainingGrowTime,u.publiclyBreedable=e.publiclyBreedable,(c||r.isRoomOwner||H().isModerator||r.controllerLevel>=tt.GUEST)&&(u.canRemovePet=!0),u}static checkGuildSetting(e){return e.isGuildRoom?e.roomControllerLevel>=tt.GUILD_ADMIN:e.roomControllerLevel>=tt.GUEST}static isValidSetting(e,r){const n=ye();if(!n.isPrivateRoom)return!1;const s=n.moderationSettings;let o=!1;return s&&(o=r(e,s)),o&&e.targetRoomControllerLevel<tt.ROOM_OWNER}static canBeMuted(e){const r=(n,s)=>{switch(s.allowMute){case Ar.MODERATION_LEVEL_USER_WITH_RIGHTS:return this.checkGuildSetting(n);default:return n.roomControllerLevel>=tt.ROOM_OWNER}};return this.isValidSetting(e,r)}static canBeKicked(e){const r=(n,s)=>{switch(s.allowKick){case Ar.MODERATION_LEVEL_ALL:return!0;case Ar.MODERATION_LEVEL_USER_WITH_RIGHTS:return this.checkGuildSetting(n);default:return n.roomControllerLevel>=tt.ROOM_OWNER}};return this.isValidSetting(e,r)}static canBeBanned(e){const r=(n,s)=>{switch(s.allowBan){case Ar.MODERATION_LEVEL_USER_WITH_RIGHTS:return this.checkGuildSetting(n);default:return n.roomControllerLevel>=tt.ROOM_OWNER}};return this.isValidSetting(e,r)}}class Ne{}Ne.GENERIC_SKILL=0;Ne.DRESS_UP=1;Ne.SETUP_CHAT=2;Ne.RANDOM_WALK=3;Ne.DANCE=4;Ne.CHANGE_BOT_NAME=5;Ne.SERVE_BEVERAGE=6;Ne.INCLIENT_LINK=7;Ne.NUX_PROCEED=8;Ne.CHANGE_BOT_MOTTO=9;Ne.NUX_TAKE_TOUR=10;Ne.NO_PICK_UP=12;Ne.NAVIGATOR_SEARCH=14;Ne.DONATE_TO_USER=24;Ne.DONATE_TO_ALL=25;const pd=class{constructor(a=-1,e=-1,r=-1,n="",s="",o="",c=null,u=0,g=0,p=null,d=null){this.senderId=a,this.senderCategory=e,this.roomId=r,this.text=n,this.formattedText=s,this.username=o,this.location=c,this.type=u,this.styleId=g,this.imageUrl=p,this.color=d,this.id=-1,this.width=0,this.height=0,this.elementRef=null,this.skipMovement=!1,this._top=0,this._left=0,this.id=++pd.BUBBLE_COUNTER}get top(){return this._top}set top(a){this._top=a,this.elementRef&&(this.elementRef.style.top=this._top+"px")}get left(){return this._left}set left(a){this._left=a,this.elementRef&&(this.elementRef.style.left=this._left+"px")}};let hd=pd;hd.BUBBLE_COUNTER=0;class Lr{}Lr.CHAT_DEFAULT=0;Lr.CHAT_WHISPER=1;Lr.CHAT_SHOUT=2;class Vl{constructor(e=0,r=0,n=0,s=0){this.id=e,this.type=r,this.color=n,this.light=s}}const pb=(a,e,r,n=0)=>!(a.left+n+a.width<e.left+n||a.left+n>e.left+n+e.width||a.top+a.height<e.top+r||a.top>e.top+r+e.height);class tr{static savePreset(e,r,n,s,o){ye().updateMoodlightData(e,r,n,s,o)}static changeState(){ye().toggleMoodlightState()}static previewDimmer(e,r,n){q().updateObjectRoomColor(ye().roomId,e,r,n)}static scaleBrightness(e){return~~((e-this.MIN_BRIGHTNESS)*(100-0)/(this.MAX_BRIGHTNESS-this.MIN_BRIGHTNESS)+0)}}tr.AVAILABLE_COLORS=[7665141,21495,15161822,15353138,15923281,8581961,0];tr.HTML_COLORS=["#74F5F5","#0053F7","#E759DE","#EA4532","#F2F851","#82F349","#000000"];tr.MIN_BRIGHTNESS=76;tr.MAX_BRIGHTNESS=255;const hb=130,fb=100,Ib=130,Eb=100,Cb=130,_b=100,fd=a=>{let e=0,r=0,n=0,s=0;for(;s<a.length;){switch(s%3){case 0:e=e+a.charCodeAt(s)*37;break;case 1:r=r+a.charCodeAt(s)*37;break;case 2:n=n+a.charCodeAt(s)*37;break}s++}return e=e%fb+hb,r=r%Eb+Ib,n=n%_b+Cb,`rgb(${e},${r},${n})`};class ms{static getMergedMannequinFigureContainer(e,r){const n=Tt().createFigureContainer(e),s=Tt().createFigureContainer(r);for(const o of this.MANNEQUIN_CLOTHING_PART_TYPES)n.removePart(o);for(const o of s.getPartTypeIds())n.updatePart(o,s.getPartSetId(o),s.getPartColorIds(o));return n}static transformAsMannequinFigure(e){for(const r of e.getPartTypeIds())this.MANNEQUIN_CLOTHING_PART_TYPES.indexOf(r)>=0||e.removePart(r);e.updatePart(this.MANNEQUIN_FIGURE[0],this.MANNEQUIN_FIGURE[1],this.MANNEQUIN_FIGURE[2])}}ms.MANNEQUIN_FIGURE=["hd",99999,[99998]];ms.MANNEQUIN_CLOTHING_PART_TYPES=[He.CHEST_ACCESSORY,He.COAT_CHEST,He.CHEST,He.LEGS,He.SHOES,He.WAIST_ACCESSORY];class $o{}$o.POSTURE_STAND=0;$o.POSTURE_SIT=1;class cs{constructor(e,r,n){this._id=e,this._category=r,this._name=n}get id(){return this._id}get category(){return this._category}get name(){return this._name}}class bb{constructor(e,r,n,s,o,c,u){this.id=e,this.category=r,this.name=n,this.requestRoomObjectId=s,this.targetRoomObjectId=o,this.requestInventoryStripId=c,this.replace=u}}const Ko="0",Id="1";class vr{}vr.UNSTARTED=-1;vr.ENDED=0;vr.PLAYING=1;vr.PAUSED=2;vr.BUFFERING=3;vr.CUED=5;function jt(a){D(new Jm(a))}const ro=a=>{const e=Math.floor(a/2);return a%2?(e+.5).toString():e.toString()};class pe{}pe.TOGGLE_FURNI_STATE=0;pe.RESET=1;pe.SET_FURNI_STATE=3;pe.MOVE_FURNI=4;pe.GIVE_SCORE=6;pe.CHAT=7;pe.TELEPORT=8;pe.JOIN_TEAM=9;pe.LEAVE_TEAM=10;pe.CHASE=11;pe.FLEE=12;pe.MOVE_AND_ROTATE_FURNI=13;pe.GIVE_SCORE_TO_PREDEFINED_TEAM=14;pe.TOGGLE_TO_RANDOM_STATE=15;pe.MOVE_FURNI_TO=16;pe.GIVE_REWARD=17;pe.CALL_ANOTHER_STACK=18;pe.KICK_FROM_ROOM=19;pe.MUTE_USER=20;pe.BOT_TELEPORT=21;pe.BOT_MOVE=22;pe.BOT_TALK=23;pe.BOT_GIVE_HAND_ITEM=24;pe.BOT_FOLLOW_AVATAR=25;pe.BOT_CHANGE_FIGURE=26;pe.BOT_TALK_DIRECT_TO_AVTR=27;class he{}he.STATES_MATCH=0;he.FURNIS_HAVE_AVATARS=1;he.ACTOR_IS_ON_FURNI=2;he.TIME_ELAPSED_MORE=3;he.TIME_ELAPSED_LESS=4;he.USER_COUNT_IN=5;he.ACTOR_IS_IN_TEAM=6;he.HAS_STACKED_FURNIS=7;he.STUFF_TYPE_MATCHES=8;he.STUFFS_IN_FORMATION=9;he.ACTOR_IS_GROUP_MEMBER=10;he.ACTOR_IS_WEARING_BADGE=11;he.ACTOR_IS_WEARING_EFFECT=12;he.NOT_STATES_MATCH=13;he.FURNI_NOT_HAVE_HABBO=14;he.NOT_ACTOR_ON_FURNI=15;he.NOT_USER_COUNT_IN=16;he.NOT_ACTOR_IN_TEAM=17;he.NOT_HAS_STACKED_FURNIS=18;he.NOT_FURNI_IS_OF_TYPE=19;he.NOT_STUFFS_IN_FORMATION=20;he.NOT_ACTOR_IN_GROUP=21;he.NOT_ACTOR_WEARS_BADGE=22;he.NOT_ACTOR_WEARING_EFFECT=23;he.DATE_RANGE_ACTIVE=24;he.ACTOR_HAS_HANDITEM=25;const Hl=a=>`${a.getFullYear()}/${("0"+(a.getMonth()+1)).slice(-2)}/${("0"+a.getDate()).slice(-2)} ${("0"+a.getHours()).slice(-2)}:${("0"+a.getMinutes()).slice(-2)}`;class ae{}ae.STUFF_SELECTION_OPTION_NONE=0;ae.STUFF_SELECTION_OPTION_BY_ID=1;ae.STUFF_SELECTION_OPTION_BY_ID_OR_BY_TYPE=2;ae.STUFF_SELECTION_OPTION_BY_ID_BY_TYPE_OR_FROM_CONTEXT=3;const Nb=`
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
uniform mat3 projectionMatrix;
varying vec2 vTextureCoord;
void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,Sb=`
varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec3 lineColor;
uniform vec3 color;
void main(void) {
    vec4 currentColor = texture2D(uSampler, vTextureCoord);
    vec3 colorLine = lineColor * currentColor.a;
    vec3 colorOverlay = color * currentColor.a;

    if(currentColor.r == 0.0 && currentColor.g == 0.0 && currentColor.b == 0.0 && currentColor.a > 0.0) {
        gl_FragColor = vec4(colorLine.r, colorLine.g, colorLine.b, currentColor.a);
    } else if(currentColor.a > 0.0) {
        gl_FragColor = vec4(colorOverlay.r, colorOverlay.g, colorOverlay.b, currentColor.a);
    }
}`;class Tb extends Zm{constructor(e,r){super(Nb,Sb),this.uniforms.lineColor=new Float32Array(3),this.uniforms.color=new Float32Array(3),this.lineColor=e,this.color=r}get lineColor(){return this._lineColor}set lineColor(e){const r=this.uniforms.lineColor;typeof e=="number"?(sr.hex2rgb(e,r),this._lineColor=e):(r[0]=e[0],r[1]=e[1],r[2]=e[2],this._lineColor=sr.rgb2hex(r))}get color(){return this._color}set color(e){const r=this.uniforms.color;typeof e=="number"?(sr.hex2rgb(e,r),this._color=e):(r[0]=e[0],r[1]=e[1],r[2]=e[2],this._color=sr.rgb2hex(r))}}const jr=class{static show(a){jr.applySelectionShader(jr.getRoomObject(a))}static hide(a){jr.clearSelectionShader(jr.getRoomObject(a))}static clearSelectionShaderFromFurni(a){for(const e of a)jr.clearSelectionShader(jr.getRoomObject(e))}static applySelectionShaderToFurni(a){for(const e of a)jr.applySelectionShader(jr.getRoomObject(e))}static getRoomObject(a){const e=q();return e.getRoomObject(e.activeRoomId,a,Q.FLOOR)}static applySelectionShader(a){if(!a)return;const e=a.visualization;if(e)for(const r of e.sprites)r.blendMode!==1&&(r.filters=[jr._selectionShader])}static clearSelectionShader(a){if(!a)return;const e=a.visualization;if(e)for(const r of e.sprites)r.filters=[]}};let gs=jr;gs._selectionShader=new Tb([1,1,1],[.6,.6,.6]);const bs="	";class Je{}Je.AVATAR_SAYS_SOMETHING=0;Je.AVATAR_WALKS_ON_FURNI=1;Je.AVATAR_WALKS_OFF_FURNI=2;Je.EXECUTE_ONCE=3;Je.TOGGLE_FURNI=4;Je.EXECUTE_PERIODICALLY=6;Je.AVATAR_ENTERS_ROOM=7;Je.GAME_STARTS=8;Je.GAME_ENDS=9;Je.SCORE_ACHIEVED=10;Je.COLLISION=11;Je.EXECUTE_PERIODICALLY_LONG=12;Je.BOT_REACHED_STUFF=13;Je.BOT_REACHED_AVATAR=14;const M=a=>{const{ref:e=null,innerRef:r=null,display:n=null,fit:s=!1,fitV:o=!1,grow:c=!1,shrink:u=!1,fullWidth:g=!1,fullHeight:p=!1,overflow:d=null,position:h=null,float:C=null,pointer:I=!1,visible:f=null,textColor:_=null,classNames:E=[],className:b="",style:T={},children:w=null,...O}=a,R=i.exports.useMemo(()=>{const A=[];return n&&n.length&&A.push("d-"+n),(s||g)&&A.push("w-100"),(s||p)&&A.push("h-100"),o&&A.push("vw-100","vh-100"),c&&A.push("flex-grow-1"),u&&A.push("flex-shrink-0"),d&&A.push("overflow-"+d),h&&A.push("position-"+h),C&&A.push("float-"+C),I&&A.push("cursor-pointer"),f!==null&&A.push(f?"visible":"invisible"),_&&A.push("text-"+_),E.length&&A.push(...E),A},[n,s,o,c,u,g,p,d,h,C,I,f,_,E]),x=i.exports.useMemo(()=>{let A=R.join(" ");return b.length&&(A+=" "+b),A.trim()},[R,b]),F=i.exports.useMemo(()=>{let A={};return Object.keys(T).length&&(A={...A,...T}),A},[T]);return t("div",{ref:r,className:x,style:F,...O,children:w})},Ed=i.exports.createContext({isCssGrid:!1}),vb=a=>t(Ed.Provider,{value:a.value,children:a.children}),wb=()=>i.exports.useContext(Ed),le=a=>{const{inline:e=!1,gap:r=2,maxContent:n=!1,columnCount:s=0,center:o=!1,alignSelf:c=null,alignItems:u=null,justifyContent:g=null,fullHeight:p=!0,classNames:d=[],style:h={},...C}=a,I=i.exports.useMemo(()=>{const _=[];return e?_.push("inline-grid"):_.push("grid"),r?_.push("gap-"+r):r===0&&_.push("gap-0"),n&&_.push("flex-basis-max-content"),c&&_.push("align-self-"+c),u&&_.push("align-items-"+u),g&&_.push("justify-content-"+g),!u&&!g&&o&&_.push("align-items-center","justify-content-center"),d.length&&_.push(...d),_},[e,r,n,c,u,g,o,d]),f=i.exports.useMemo(()=>{let _={};return s&&(_["--bs-columns"]=s.toString()),Object.keys(h).length&&(_={..._,...h}),_},[s,h]);return t(vb,{value:{isCssGrid:!0},children:t(M,{fullHeight:p,classNames:I,style:f,...C})})},Ue=a=>{const{columnMinWidth:e=40,columnMinHeight:r=40,columnCount:n=0,fullHeight:s=!1,maxContent:o=!0,overflow:c="auto",style:u={},...g}=a,p=i.exports.useMemo(()=>{let d={};return d["--nitro-grid-column-min-height"]=r+"px",n>1&&(d.gridTemplateColumns=`repeat(auto-fill, minmax(${e}px, 1fr))`),Object.keys(u).length&&(d={...d,...u}),d},[e,r,n,u]);return t(le,{columnCount:n,fullHeight:s,overflow:c,style:p,...g})},v=a=>{const{display:e="flex",column:r=void 0,reverse:n=!1,gap:s=null,center:o=!1,alignSelf:c=null,alignItems:u=null,justifyContent:g=null,classNames:p=[],...d}=a,h=i.exports.useMemo(()=>{const C=[];return r?n?C.push("flex-column-reverse"):C.push("flex-column"):n&&C.push("flex-row-reverse"),s&&C.push("gap-"+s),c&&C.push("align-self-"+c),u&&C.push("align-items-"+u),g&&C.push("justify-content-"+g),!u&&!g&&o&&C.push("align-items-center","justify-content-center"),p.length&&C.push(...p),C},[r,n,s,o,c,u,g,p]);return t(M,{display:e,classNames:h,...d})},L=a=>{const{variant:e="primary",size:r="",active:n=!1,disabled:s=!1,classNames:o=[],...c}=a,u=i.exports.useMemo(()=>{const g=["btn"];return e&&g.push("btn-"+e),r&&g.push("btn-"+r),n&&g.push("active"),s&&g.push("disabled"),o.length&&g.push(...o),g},[e,r,n,s,o]);return t(v,{center:!0,classNames:u,...c})},Kr=a=>{const{classNames:e=[],...r}=a,n=i.exports.useMemo(()=>{const s=["btn-group"];return e.length&&s.push(...e),s},[e]);return t(M,{classNames:n,...r})},Cd=i.exports.createContext({closers:null,setClosers:null,closeAll:null}),Rb=a=>t(Cd.Provider,{...a}),_d=()=>i.exports.useContext(Cd),Xo=a=>{const{alignItems:e="center",gap:r=1,children:n=null,...s}=a;return t(v,{alignItems:e,gap:r,...s,children:n})},Vi=a=>{const{headerText:e="",isExpanded:r=!1,gap:n=0,classNames:s=[],children:o=null,...c}=a,[u,g]=i.exports.useState(!1),{setClosers:p=null,closeAll:d=null}=_d(),h=()=>{d(),g(f=>!f)},C=i.exports.useCallback(()=>g(!1),[]),I=i.exports.useMemo(()=>{const f=["nitro-card-accordion-set"];return u&&f.push("active"),s&&s.length&&f.push(...s),f},[u,s]);return i.exports.useEffect(()=>{g(r)},[r]),i.exports.useEffect(()=>{const f=C;return p(_=>{const E=[..._];return E.push(f),E}),()=>{p(_=>{const E=[..._],b=E.indexOf(f);return b>=0&&E.splice(b,1),E})}},[C,p]),l(S,{classNames:I,gap:n,...c,children:[l(v,{pointer:!0,justifyContent:"between",className:"nitro-card-accordion-set-header px-2 py-1",onClick:h,children:[t("div",{className:"friend-header-text d-inline",children:e}),u&&t(Qc,{className:"fa-icon"}),!u&&t(Jc,{className:"fa-icon"})]}),u&&t(S,{fullHeight:!0,overflow:"auto",gap:0,className:"nitro-card-accordion-set-content p-1",children:o})]})},xb=a=>{const{...e}=a,[r,n]=i.exports.useState([]),s=i.exports.useCallback(()=>{for(const o of r)o()},[r]);return t(Rb,{value:{closers:r,setClosers:n,closeAll:s},children:t(S,{gap:0,...e})})},re=a=>{const{overflow:e="auto",classNames:r=[],...n}=a,s=i.exports.useMemo(()=>{const o=["container-fluid","content-area"];return r.length&&o.push(...r),o},[r]);return t(S,{classNames:s,overflow:e,...n})},yb=i.exports.createContext({theme:null}),Ob=a=>t(yb.Provider,{value:a.value,children:a.children}),ne=a=>{const{headerText:e=null,isGalleryPhoto:r=!1,noCloseButton:n=!1,hideButtonClose:s=!1,onReportPhoto:o=null,onCloseClick:c=null,justifyContent:u="center",alignItems:g="center",classNames:p=[],children:d=null,...h}=a,C=i.exports.useMemo(()=>{const f=["drag-handler","container-fluid","nitro-card-header"];return p.length&&f.push(...p),f},[p]);return t(S,{center:!0,position:"relative",classNames:C,...h,children:l(v,{fullWidth:!0,center:!0,className:"nitro-card-header-holder",children:[t("span",{className:"nitro-card-header-text",children:e}),r&&t(M,{position:"absolute",className:"end-4 nitro-card-header-report-camera",onClick:o,children:t(Im,{className:"fa-icon"})}),t(v,{center:!0,position:"absolute",className:"end-2 nitro-card-header-close",onMouseDownCapture:f=>{f.stopPropagation(),f.nativeEvent.stopImmediatePropagation()},onClick:c,children:!s&&t(xn,{className:"fa-icon w-12 h-12"})})]})})},bd=a=>{const{justifyContent:e="center",classNames:r=[],variant:n="muted",...s}=a,o=i.exports.useMemo(()=>{const c=["container-fluid","p-1"];return r.length&&c.push(...r),c.push("bg-"+n),c},[r,n]);return t(v,{justifyContent:e,classNames:o,...s})};class At{}At.CENTER="DWP_CENTER";At.TOP_CENTER="DWP_TOP_CENTER";At.TOP_LEFT="DWP_TOP_LEFT";At.NOTHING="DWP_NOTHING";const rn=[],Wl=0,jl=0,yn=a=>{const{uniqueKey:e=null,handleSelector:r=".drag-handler",windowPosition:n=At.CENTER,disableDrag:s=!1,dragStyle:o={},children:c=null,offsetLeft:u=0,offsetTop:g=0}=a,[p,d]=i.exports.useState(null),[h,C]=i.exports.useState(null),[I,f]=i.exports.useState({x:0,y:0}),[_,E]=i.exports.useState(!1),[b,T]=i.exports.useState(null),w=i.exports.useRef(),O=i.exports.useCallback(()=>{let z=400;for(const Ee of rn)z+=1,Ee.style.zIndex=z.toString()},[]),R=i.exports.useCallback(()=>{const z=rn.indexOf(w.current);if(z===-1)rn.push(w.current);else{if(z===rn.length-1)return;z>=0&&(rn.splice(z,1),rn.push(w.current))}O()},[O]),x=i.exports.useCallback(z=>{R()},[R]),F=i.exports.useCallback(z=>{R()},[R]),A=i.exports.useCallback((z,Ee)=>{f({x:z,y:Ee}),E(!0)},[]),k=i.exports.useCallback(z=>{A(z.clientX,z.clientY)},[A]),y=i.exports.useCallback(z=>{const Ee=z.touches[0];A(Ee.clientX,Ee.clientY)},[A]),P=i.exports.useCallback(z=>{d({x:z.clientX-I.x,y:z.clientY-I.y})},[I]),G=i.exports.useCallback(z=>{const Ee=z.touches[0];d({x:Ee.clientX-I.x,y:Ee.clientY-I.y})},[I]),B=i.exports.useCallback(()=>{if(!w.current||!b)return;let z=h.x+p.x,Ee=h.y+p.y;const ie=w.current.offsetLeft+z,Pe=w.current.offsetTop+Ee;if(Pe<Wl?Ee=-w.current.offsetTop:Pe+b.offsetHeight>=document.body.offsetHeight-Wl&&(Ee=document.body.offsetHeight-w.current.offsetHeight-w.current.offsetTop),ie+w.current.offsetWidth<jl?z=-w.current.offsetLeft:ie>=document.body.offsetWidth-jl&&(z=document.body.offsetWidth-w.current.offsetWidth-w.current.offsetLeft),d({x:0,y:0}),C({x:z,y:Ee}),E(!1),e!==null){const Qe={...Ai(`nitro.windows.${e}`)};Qe.offset={x:z,y:Ee},Li(`nitro.windows.${e}`,Qe)}},[b,p,h,e]),Y=i.exports.useCallback(z=>{B()},[B]),X=i.exports.useCallback(z=>{B()},[B]);return i.exports.useEffect(()=>{const z=w.current;if(!z)return;if(rn.push(z),O(),!s){const Pe=z.querySelector(r);Pe&&T(Pe)}let Ee=0,ie=0;switch(n){case At.TOP_CENTER:z.style.top=50+g+"px",z.style.left=`calc(50vw - ${z.offsetWidth/2+u}px)`;break;case At.CENTER:z.style.top=`calc(50vh - ${z.offsetHeight/2+g}px)`,z.style.left=`calc(50vw - ${z.offsetWidth/2+u}px)`;break;case At.TOP_LEFT:z.style.top=50+g+"px",z.style.left=50+u+"px";break}return d({x:0,y:0}),C({x:Ee,y:ie}),()=>{const Pe=rn.indexOf(z);Pe>=0&&rn.splice(Pe,1)}},[r,n,e,s,u,g,O]),i.exports.useEffect(()=>{if(!h&&!p)return;const z=w.current;z&&(z.style.transform=`translate(${h.x+p.x}px, ${h.y+p.y}px)`,z.style.visibility="visible")},[h,p]),i.exports.useEffect(()=>{if(b)return b.addEventListener(xe.MOUSE_DOWN,k),b.addEventListener(mr.TOUCH_START,y),()=>{b.removeEventListener(xe.MOUSE_DOWN,k),b.removeEventListener(mr.TOUCH_START,y)}},[b,k,y]),i.exports.useEffect(()=>{if(_)return document.addEventListener(xe.MOUSE_UP,Y),document.addEventListener(mr.TOUCH_END,X),document.addEventListener(xe.MOUSE_MOVE,P),document.addEventListener(mr.TOUCH_MOVE,G),()=>{document.removeEventListener(xe.MOUSE_UP,Y),document.removeEventListener(mr.TOUCH_END,X),document.removeEventListener(xe.MOUSE_MOVE,P),document.removeEventListener(mr.TOUCH_MOVE,G)}},[_,Y,P,X,G]),i.exports.useEffect(()=>{if(!e)return;const z=JSON.parse(window.localStorage.getItem(`nitro.windows.${e}`));!z||!z.offset||(d({x:0,y:0}),z.offset&&C(z.offset))},[e]),Si.exports.createPortal(t(M,{position:"absolute",innerRef:w,className:"draggable-window",onMouseDownCapture:x,onTouchStartCapture:F,style:o,children:c}),document.getElementById("draggable-windows-container"))},se=a=>{const{theme:e="primary",uniqueKey:r=null,handleSelector:n=".drag-handler",windowPosition:s=At.CENTER,disableDrag:o=!1,overflow:c="hidden",position:u="relative",gap:g=0,classNames:p=[],...d}=a,h=i.exports.useRef(),C=i.exports.useMemo(()=>{const I=["nitro-card","rounded"];return I.push(`theme-${e||"primary"}`),p.length&&I.push(...p),I},[e,p]);return t(Ob,{value:{theme:e},children:t(yn,{uniqueKey:r,handleSelector:n,windowPosition:s,disableDrag:o,children:t(S,{innerRef:h,overflow:c,position:u,gap:g,classNames:C,...d})})})},st=a=>{const{figure:e="",gender:r="M",headOnly:n=!1,direction:s=0,scale:o=1,classNames:c=[],style:u={},...g}=a,[p,d]=i.exports.useState(null),[h,C]=i.exports.useState(-1),I=i.exports.useRef(!1),f=i.exports.useMemo(()=>{const E=["avatar-image"];return c.length&&E.push(...c),E},[c]),_=i.exports.useMemo(()=>{let E={};return p&&p.length&&(E.backgroundImage=`url('${p}')`),o!==1&&(E.transform=`scale(${o})`,o%1||(E.imageRendering="pixelated")),Object.keys(u).length&&(E={...E,...u}),E},[p,o,u]);return i.exports.useEffect(()=>{const E=Tt().createAvatarImage(e,vi.LARGE,r,{resetFigure:w=>{I.current||C(Math.random())},dispose:()=>{},disposed:!1},null);if(!E)return;let b=Vo.FULL;n&&(b=Vo.HEAD),E.setDirection(b,s);const T=E.getCroppedImage(b);T&&d(T.src),E.dispose()},[e,r,s,n,h]),i.exports.useEffect(()=>(I.current=!1,()=>{I.current=!0}),[]),t(M,{classNames:f,style:_,...g})},Nd=a=>{const{imageUrl:e=null,fit:r=!0,style:n=null,...s}=a,o=i.exports.useMemo(()=>{const c={...n};return e&&(c.background=`url(${e}) center no-repeat`),c},[n,e]);return t(M,{fit:r,style:o,...s})},je=a=>{const{badgeCode:e=null,isGroup:r=!1,showInfo:n=!1,customTitle:s=null,isGrayscale:o=!1,scale:c=1,classNames:u=[],style:g={},children:p=null,...d}=a,[h,C]=i.exports.useState(null),I=i.exports.useMemo(()=>{const _=["badge-image"];return r&&_.push("group-badge"),o&&_.push("grayscale"),u.length&&_.push(...u),_},[u,r,o]),f=i.exports.useMemo(()=>{let _={};return h&&(_.backgroundImage=`url(${r?h.src:K("badge.asset.url").replace("%badgename%",e.toString())})`,_.width=h.width,_.height=h.height,c!==1&&(_.transform=`scale(${c})`,c%1||(_.imageRendering="pixelated"),_.width=h.width*c,_.height=h.height*c)),Object.keys(g).length&&(_={..._,...g}),_},[h,c,g]);return i.exports.useEffect(()=>{if(!e||!e.length)return;let _=!1;const E=T=>{if(T.badgeId!==e)return;const w=Xr.generateImage(new Bo(T.image));w.onload=()=>C(w),_=!0,H().events.removeEventListener(Ta.IMAGE_READY,E)};H().events.addEventListener(Ta.IMAGE_READY,E);const b=r?H().getGroupBadgeImage(e):H().getBadgeImage(e);if(b&&!_){const T=Xr.generateImage(new Bo(b));T.onload=()=>C(T)}return()=>H().events.removeEventListener(Ta.IMAGE_READY,E)},[e,r]),l(M,{classNames:I,style:f,...d,children:[n&&K("badge.descriptions.enabled",!0)&&l(M,{className:"badge-information text-black p-2",children:[t(N,{gfbold:!0,className:"mb-1",children:r?s:Qs(e)}),t("div",{className:"badge-desc",children:r?m("group.badgepopup.body"):Pi(e)})]}),p]})},Et=a=>{const{type:e="",classNames:r=[],style:n={},...s}=a,o=i.exports.useMemo(()=>{const g=["nitro-currency-icon"];return r.length&&g.push(...r),g},[r]),c=i.exports.useMemo(()=>{let g=K("currency.asset.icon.url","");return g=g.replace("%type%",e.toString()),`url(${g})`},[e]),u=i.exports.useMemo(()=>{let g={};return g.backgroundImage=c,Object.keys(n).length&&(g={...g,...n}),g},[n,c]);return t(M,{classNames:o,style:u,...s})},Hi=a=>{const{productType:e="s",productClassId:r=-1,direction:n=2,extraData:s="",scale:o=1,style:c={},...u}=a,[g,p]=i.exports.useState(null),d=i.exports.useMemo(()=>{var C;let h={};return(C=g==null?void 0:g.src)!=null&&C.length&&(h.backgroundImage=`url('${g.src}')`,h.width=g.width,h.height=g.height),o!==1&&(h.transform=`scale(${o})`,o%1||(h.imageRendering="pixelated")),Object.keys(c).length&&(h={...h,...c}),h},[g,o,c]);return i.exports.useEffect(()=>{let h=null;const C={imageReady:(I,f,_)=>{!_&&f&&(_=Xr.generateImage(f)),_.onload=()=>p(_)},imageFailed:null};switch(e.toLocaleLowerCase()){case ge.FLOOR:h=q().getFurnitureFloorImage(r,new Rt(n),64,C,0,s);break;case ge.WALL:h=q().getFurnitureWallImage(r,new Rt(n),64,C,0,s);break}if(h){const I=h.getImage();I.onload=()=>p(I)}},[e,r,n,s]),g?t(M,{classNames:["furni-image"],style:d,...u}):null},Sd=a=>{const{figure:e=null,userName:r=null,message:n=null,editable:s=!1,onChange:o=null}=a;return l(v,{overflow:"hidden",className:"nitro-gift-card text-black",children:[l("div",{className:"d-flex align-items-center justify-content-center gift-face flex-shrink-0",children:[!r&&t("div",{className:"gift-incognito"}),e&&t("div",{className:"gift-avatar",children:t(st,{figure:e,direction:2,headOnly:!0})})]}),t(v,{overflow:"hidden",className:"w-100 pt-4 pb-4 pe-4 ps-3",children:l(S,{grow:!0,overflow:"auto",justifyContent:"between",children:[!s&&t(N,{textBreak:!0,className:"gift-message",children:n}),s&&o!==null&&t("textarea",{className:"gift-message h-100",maxLength:140,value:n,onChange:c=>o(c.target.value),placeholder:m("catalog.gift_wrapping_new.message_hint")}),r&&t(N,{italics:!0,textEnd:!0,className:"pe-1",children:m("catalog.gift_wrapping_new.message_from",["name"],[r])})]})})]})},S=a=>{const{size:e=0,itemActive:r=!1,offset:n=0,column:s=!0,gap:o=2,classNames:c=[],...u}=a,{isCssGrid:g=!1}=wb(),p=i.exports.useMemo(()=>{const d=[];if(e){let h=`col-${e}`;g&&(h=`g-${h}`),d.push(h)}if(r&&d.push("active"),n){let h=`offset-${n}`;g&&(h=`g-start-${n}`),d.push(h)}return c.length&&d.push(...c),d},[e,r,n,g,c]);return t(v,{classNames:p,column:s,gap:o,...u})},xr=a=>{const{count:e=0,position:r="absolute",classNames:n=[],children:s=null,...o}=a,c=i.exports.useMemo(()=>{const u=["fw-bold","nitro-item-count"];return n.length&&u.push(...n),u},[n]);return l(M,{position:"absolute",classNames:c,...o,children:[e,s]})},gn=a=>{const{value:e=0}=a,r=e.toString().split("");return t(V,{children:r.map((n,s)=>t("i",{className:"limited-edition-number n-"+n},s))})},Td=a=>{const{uniqueNumber:e=0,uniqueSeries:r=0,classNames:n=[],children:s=null,...o}=a,c=i.exports.useMemo(()=>{const u=["unique-compact-plate","z-index-1"];return n.length&&u.push(...n),u},[n]);return l(M,{classNames:c,...o,children:[t("div",{children:t(gn,{value:e})}),t("div",{children:t(gn,{value:r})}),s]})},kb=a=>{const{uniqueLimitedItemsLeft:e=0,uniqueLimitedSeriesSize:r=0,classNames:n=[],...s}=a,o=i.exports.useMemo(()=>{const c=["unique-complete-plate"];return n.length&&c.push(...n),c},[n]);return t(M,{classNames:o,...s,children:l(S,{className:"plate-container",gap:0,children:[l(v,{justifyContent:"between",alignItems:"center",children:[m("unique.items.left"),t("div",{children:t(gn,{value:e})})]}),l(v,{justifyContent:"between",alignItems:"center",children:[m("unique.items.number.sold"),t("div",{children:t(gn,{value:r})})]})]})})},Re=a=>{const{itemImage:e=void 0,itemColor:r=void 0,itemActive:n=!1,itemCount:s=1,itemCountMinimum:o=1,itemUniqueSoldout:c=!1,itemUniqueNumber:u=-2,itemUnseen:g=!1,itemHighlight:p=!1,disabled:d=!1,center:h=!0,column:C=!0,style:I={},classNames:f=[],position:_="relative",overflow:E="hidden",children:b=null,...T}=a,w=i.exports.useMemo(()=>{const R=["layout-grid-item","border","border-2","border-muted","rounded"];return n&&R.push("active"),(c||u>0)&&R.push("unique-item"),c&&R.push("sold-out"),g&&R.push("unseen"),p&&R.push("has-highlight"),d&&R.push("disabled"),e===null&&R.push("icon","loading-icon"),f.length&&R.push(...f),R},[n,c,u,g,p,d,e,f]),O=i.exports.useMemo(()=>{let R={...I};return e&&!(c||u>0)&&(R.backgroundImage=`url(${e})`),r&&(R.backgroundColor=r),Object.keys(I).length&&(R={...R,...I}),R},[I,e,r,c,u]);return l(S,{center:h,pointer:!0,position:_,overflow:E,column:C,classNames:w,style:O,...T,children:[s>o&&t(xr,{count:s}),u>0&&l(V,{children:[t(M,{fit:!0,className:"unique-bg-override",style:{backgroundImage:`url(${e})`}}),t("div",{className:"position-absolute bottom-0 unique-item-counter",children:t(gn,{value:u})})]}),b]})},hn=a=>{const{imageUrl:e=null,className:r="",...n}=a;return t("img",{src:e,className:"no-select "+r,alt:"",...n})},Wi=a=>{const{...e}=a;return l(M,{classNames:["spinner-container"],...e,children:[t(M,{className:"spinner"}),t(M,{className:"spinner"}),t(M,{className:"spinner"})]})},Ab=a=>{const{roomId:e=-1,textureReceiver:r=null,onClose:n=null}=a,s=i.exports.useRef(),o=()=>{if(!s||!s.current)return null;const u=s.current.getBoundingClientRect();return new uu(Math.floor(u.x),Math.floor(u.y),Math.floor(u.width),Math.floor(u.height))},c=()=>{Jr(ir.CAMERA_SHUTTER),r(q().createTextureFromRoom(e,1,o()))};return t(yn,{handleSelector:".nitro-room-thumbnail-camera",children:l(v,{className:"nitro-room-thumbnail-camera pt-2 px-1",children:[t(v,{ref:s,className:"camera-frame"}),l(v,{gap:1,className:"align-items-end camera-buttons",children:[t(L,{variant:"danger",onClick:n,children:m("cancel")}),t(L,{variant:"success",onClick:c,children:m("navigator.thumbeditor.save")})]})]})})},ca=a=>{const{title:e="",onClose:r=null,classNames:n=[],children:s=null,type:o=ue.DEFAULT,...c}=a,u=i.exports.useMemo(()=>{const g=["nitro-alert"];return g.push("nitro-alert-"+o),n.length&&g.push(...n),g},[n,o]);return l(se,{classNames:u,theme:"primary",...c,children:[t(ne,{headerText:e,onCloseClick:r}),t(re,{grow:!0,justifyContent:"between",overflow:"hidden",className:"text-black",gap:0,children:s})]})};class Nt{}Nt.BOUNCE="bounce";Nt.SLIDE_LEFT="slideLeft";Nt.SLIDE_RIGHT="slideRight";Nt.FLIP_X="flipX";Nt.FADE_IN="fadeIn";Nt.FADE_DOWN="fadeDown";Nt.FADE_UP="fadeUp";Nt.HEAD_SHAKE="headShake";function Pb(a,e,r=300){switch(a){case Nt.BOUNCE:switch(e){default:return{};case bn:return{animationName:"bounceIn",animationDuration:`${r}ms`};case Dn:return{animationName:"bounceOut",animationDuration:`${r}ms`}}case Nt.SLIDE_LEFT:switch(e){default:return{};case bn:return{animationName:"slideInLeft",animationDuration:`${r}ms`};case Dn:return{animationName:"slideOutLeft",animationDuration:`${r}ms`}}case Nt.SLIDE_RIGHT:switch(e){default:return{};case bn:return{animationName:"slideInRight",animationDuration:`${r}ms`};case Dn:return{animationName:"slideOutRight",animationDuration:`${r}ms`}}case Nt.FLIP_X:switch(e){default:return{};case bn:return{animationName:"flipInX",animationDuration:`${r}ms`};case Dn:return{animationName:"flipOutX",animationDuration:`${r}ms`}}case Nt.FADE_UP:switch(e){default:return{};case bn:return{animationName:"fadeInUp",animationDuration:`${r}ms`};case Dn:return{animationName:"fadeOutDown",animationDuration:`${r}ms`}}case Nt.FADE_IN:switch(e){default:return{};case bn:return{animationName:"fadeIn",animationDuration:`${r}ms`};case Dn:return{animationName:"fadeOut",animationDuration:`${r}ms`}}case Nt.FADE_DOWN:switch(e){default:return{};case bn:return{animationName:"fadeInDown",animationDuration:`${r}ms`};case Dn:return{animationName:"fadeOutUp",animationDuration:`${r}ms`}}case Nt.HEAD_SHAKE:switch(e){default:return{};case bn:return{animationName:"headShake",animationDuration:`${r}ms`}}}return null}const Ns=a=>{const{type:e=null,inProp:r=!1,timeout:n=300,className:s=null,children:o=null}=a,[c,u]=i.exports.useState(!1);return i.exports.useEffect(()=>{let g=null;return r?u(!0):g=setTimeout(()=>{u(!1),clearTimeout(n)},n),()=>{g&&clearTimeout(g)}},[r,n]),t(Em,{in:r,timeout:n,children:g=>t("div",{className:(s??"")+" animate__animated",style:{...Pb(e,g,n)},children:c&&o})})},ji=a=>{const{fadesOut:e=!0,timeoutMs:r=8e3,onClose:n=null,overflow:s="hidden",classNames:o=[],...c}=a,[u,g]=i.exports.useState(!1),p=i.exports.useMemo(()=>{const d=["nitro-notification-bubble","rounded","p-2","notification-height"];return o.length&&d.push(...o),d},[o]);return i.exports.useEffect(()=>(g(!0),()=>g(!1)),[]),i.exports.useEffect(()=>{if(!e)return;const d=setTimeout(()=>{g(!1),setTimeout(()=>n(),300)},r);return()=>clearTimeout(d)},[e,r,n]),t(Ns,{type:Nt.FADE_IN,inProp:u,timeout:300,children:t(v,{overflow:s,classNames:p,onClick:n,...c})})},dn=a=>{const{figure:e="",typeId:r=-1,paletteId:n=-1,petColor:s=16777215,customParts:o=[],posture:c="std",headOnly:u=!1,direction:g=0,scale:p=1,style:d={},...h}=a,[C,I]=i.exports.useState(null),[f,_]=i.exports.useState(0),[E,b]=i.exports.useState(0),T=i.exports.useRef(!1),w=i.exports.useMemo(()=>{let O={};return C&&C.length&&(O.backgroundImage=`url(${C})`),p!==1&&(O.transform=`scale(${p})`,p%1||(O.imageRendering="pixelated")),O.width=f,O.height=E,Object.keys(d).length&&(O={...O,...d}),O},[C,p,d,f,E]);return i.exports.useEffect(()=>{let O=r,R=n,x=s,F=o,A=u;if(e&&e.length){const y=new ps(e);O=y.typeId,R=y.paletteId,x=y.color,F=y.customParts}O===16&&(A=!1);const k=q().getRoomObjectPetImage(O,R,x,new Rt(g*45),64,{imageReady:(y,P,G)=>{T.current||(G?(I(G.src),_(G.width),b(G.height)):P&&(I(Xr.generateImageUrl(P)),_(P.width),b(P.height)))},imageFailed:y=>{}},A,0,F,c);if(k){const y=k.getImage();y&&(I(y.src),_(y.width),b(y.height))}},[e,r,n,s,o,c,u,g]),i.exports.useEffect(()=>(T.current=!1,()=>{T.current=!0}),[]),t(M,{classNames:["pet-image"],style:w,...h})},vd=a=>{const{text:e="",progress:r=0,maxProgress:n=100,position:s="relative",justifyContent:o="center",classNames:c=[],children:u=null,...g}=a,p=i.exports.useMemo(()=>{const d=["nitro-progress-bar","text-white"];return c.length&&d.push(...c),d},[c]);return l(S,{position:s,justifyContent:o,classNames:p,...g,children:[e&&e.length>0&&t(v,{fit:!0,center:!0,position:"absolute",className:"nitro-progress-bar-text small",children:e}),t(M,{className:"nitro-progress-bar-inner",style:{width:~~((r-0)*(100-0)/(n-0)+0)+"%"}}),u]})},wd=a=>{const{level:e=0,classNames:r=[],children:n=null,...s}=a,o=i.exports.useMemo(()=>{const c=["nitro-rarity-level"];return r.length&&c.push(...r),c},[r]);return l(M,{classNames:o,...s,children:[t("div",{children:e}),n]})},ua=a=>{const{roomPreviewer:e=null,height:r=0,children:n=null}=a,[s,o]=i.exports.useState(null),c=i.exports.useRef(),u=g=>{e&&(g.shiftKey?e.changeRoomObjectDirection():e.changeRoomObjectState())};return i.exports.useEffect(()=>{if(!e)return;const g=d=>{!e||!s||!c.current||(e.updatePreviewRoomView(),s.canvasUpdated&&(c.current.style.backgroundImage=`url(${Xr.generateImageUrl(s.master)})`))};if(!s&&c.current&&e){let h=document.defaultView.getComputedStyle(c.current,null).backgroundColor;h=sr.rgbStringToHex(h),h=h.replace("#","0x"),e.backgroundColor=parseInt(h,16);const C=c.current.parentElement.clientWidth;e.getRoomCanvas(C,r);const I=e.getRenderingCanvas();o(I),I.canvasUpdated=!0,g()}mn().add(g);const p=new ResizeObserver(()=>{if(!e||!c.current)return;const d=c.current.parentElement.offsetWidth;e.modifyRoomCanvas(d,r),g()});return p.observe(c.current),()=>{p.disconnect(),mn().remove(g)}},[s,e,c,r]),l("div",{className:"room-preview-container",children:[t("div",{ref:c,className:"room-preview-image",style:{height:r},onClick:u}),n]})},da=a=>{const{roomId:e=-1,customUrl:r=null,shrink:n=!0,overflow:s="hidden",classNames:o=[],children:c=null,...u}=a,g=i.exports.useMemo(()=>{const d=["room-thumbnail","border"];return o.length&&d.push(...o),d},[o]),p=i.exports.useMemo(()=>r&&r.length?K("image.library.url")+r:K("thumbnails.url").replace("%thumbnail%",e.toString()),[r,e]);return l(M,{shrink:n,overflow:s,classNames:g,...u,children:[p&&t("img",{alt:"",src:p}),c]})},Rd=a=>{const{color:e="",message:r="",date:n="",senderName:s="",customTitle:o=null,onCloseClick:c=null}=a;return t(yn,{handleSelector:".drag-handler",children:l(S,{gap:0,alignItems:"center",className:`nitro-layout-trophy trophy-${e}`,children:[l(v,{center:!0,fullWidth:!0,position:"relative",className:"trophy-header drag-handler",children:[t(M,{position:"absolute",pointer:!0,className:"trophy-close",onClick:c}),t(N,{bold:!0,children:m("widget.furni.trophy.title")})]}),l(S,{className:"trophy-content py-1",gap:1,children:[o&&t(N,{bold:!0,children:o}),r]}),l(v,{alignItems:"center",justifyContent:"between",className:"trophy-footer mt-1",children:[t(N,{bold:!0,children:n}),t(N,{bold:!0,children:s})]})]})})},hr=a=>{const{userId:e=0,userName:r=null,classNames:n=[],pointer:s=!0,children:o=null,...c}=a,u=i.exports.useMemo(()=>{const g=["nitro-friends-spritesheet","icon-profile-sm"];return n.length&&g.push(...n),g},[n]);return t(M,{classNames:u,pointer:s,onClick:g=>jt(e),...c,children:o})},Zr=a=>{const{isActive:e=!1,count:r=0,overflow:n="hidden",position:s="relative",pointer:o=!0,classNames:c=[],children:u=null,...g}=a,p=i.exports.useMemo(()=>{const d=["nav-link","cursor-pointer","position-relative"];return e&&d.push("active"),c.length&&d.push(...c),d},[e,c]);return l(v,{pointer:o,position:s,classNames:p,...g,children:[t(v,{shrink:!0,center:!0,children:u}),r>0&&t(xr,{count:r})]})},fn=a=>{const{justifyContent:e="center",gap:r=1,classNames:n=[],children:s=null,subClassName:o="",...c}=a,u=i.exports.useMemo(()=>{const g=["container-fluid","nitro-card-tabs","pt-1","position-relative"];return n.length&&g.push(...n),g},[n]);return t(v,{classNames:u,...c,children:t("ul",{className:"nav nav-tabs border-0 "+o,children:s})})},Rn=(...a)=>a.filter(Boolean).join(" "),Db=a=>{const{classNames:e=[],...r}=a,n=i.exports.useMemo(()=>{const s=["form-group"];return e.length&&s.push(...e),s},[e]);return t(v,{classNames:n,...r})},Mb=a=>{const{variant:e="black",height:r=1,classNames:n=[],style:s={},...o}=a,c=i.exports.useMemo(()=>{const g=[];return e&&g.push("bg-"+e),n.length&&g.push(...n),g},[e,n]),u=i.exports.useMemo(()=>{let g={display:"list-item"};return r>0&&(g.height=r),Object.keys(s).length&&(g={...g,...s}),g},[r,s]);return t(M,{classNames:c,style:u,...o})},ma=a=>{var I,f;const{rows:e=[],overscan:r=5,scrollToBottom:n=!1,rowRender:s=null}=a,[o,c]=i.exports.useState(e.length-1),u=i.exports.useRef(null),{virtualItems:g=[],totalSize:p=0,scrollToIndex:d=null}=Cm({parentRef:u,size:e.length,overscan:r}),h=g.length>0&&((I=g==null?void 0:g[0])==null?void 0:I.start)||0,C=g.length>0?p-(((f=g==null?void 0:g[g.length-1])==null?void 0:f.end)||0):0;return i.exports.useEffect(()=>{n&&d(o)},[n,o,d]),l(M,{fit:!0,innerRef:u,position:"relative",overflow:"auto",children:[h>0&&t("div",{style:{minHeight:`${h}px`}}),g.map(_=>{const E=e[_.index];return E?t("div",{"data-index":_.index,ref:_.measureRef,children:s(E)},_.key):t(i.exports.Fragment,{},_.key)}),C>0&&t("div",{style:{minHeight:`${C}px`}})]})},N=a=>{const{variant:e=null,fontWeight:r=null,fontSize:n=0,align:s=null,bold:o=!1,gfbold:c=!1,underline:u=!1,italics:g=!1,truncate:p=!1,center:d=!1,textEnd:h=!1,small:C=!1,wrap:I=!1,noWrap:f=!1,textBreak:_=!1,...E}=a,b=i.exports.useMemo(()=>{const T=[""];return e&&T.push("text-"+e),o&&T.push("font-bold"),c&&T.push("goldfish-bold"),r&&T.push("fw-"+r),n&&T.push("fs-"+n),s&&T.push("text-"+s),u&&T.push("text-decoration-underline"),g&&T.push("font-italic"),p&&T.push("text-truncate"),d&&T.push("text-center"),h&&T.push("text-end"),C&&T.push("small"),I&&T.push("text-wrap"),f&&T.push("text-nowrap"),_&&T.push("text-break"),T},[e,r,n,s,o,c,u,g,p,d,h,C,I,f,_]);return t(M,{classNames:b,...E})},Lb=()=>Math.floor(Math.random()*30),Ub=({isError:a=!1,message:e="",percent:r=0})=>{const n=i.exports.useMemo(Lb,[]);return l(S,{fullHeight:!0,alignItems:"center",justifyContent:"center",className:"nitro-loading",children:[l("div",{className:"loading-stories",children:[t("div",{className:"loadingPhoto position-absolute","data-image":n}),t("div",{className:"imageOverlay position-absolute"})]}),t(S,{className:"text-center py-4",children:a&&e?t(M,{className:"fs-4 text-shadow",children:e}):l(V,{children:[t(M,{className:"fs-4 text-shadow",children:e}),t("div",{className:"nitro-loading-bar mt-2",children:t("div",{className:"nitro-loading-bar-inner",style:{width:`${r}%`}})}),t("div",{className:"percent",children:l("p",{children:[r.toFixed(),"%"]})})]})})]})},In=(a,e,r,n=!0)=>{i.exports.useEffect(()=>{if(n)return Array.isArray(a)?a.map(s=>e.addEventListener(s,r)):e.addEventListener(a,r),()=>{Array.isArray(a)?a.map(s=>e.removeEventListener(s,r)):e.removeEventListener(a,r)}},[a,e,n,r])},ql=(a,e)=>In(a,g_().events,e),Fb=(a,e)=>In(a,Ce().cameraManager.events,e),Gb=(a,e)=>In(a,Ce().localization.events,e),Mn=(a,e)=>In(a,Ce().events,e),Se=(a,e)=>In(a,q().events,e),ze=(a,e)=>In(a,$n().events,e),Bb=(a,e)=>In(a,H().events,e),Gn=(a,e,r=!0)=>In(a,Ce().soundManager.events,e,r),U=(a,e)=>{i.exports.useEffect(()=>{const r=new a(e);return Vs().registerMessageEvent(r),()=>Vs().removeMessageEvent(r)},[a,e])},lt=(a,e,r=!0)=>In(a,Qr,e,r),Vb=()=>{const[a,e]=i.exports.useState(!0),[r,n]=i.exports.useState([]),[s,o]=i.exports.useState(null),[c,u]=i.exports.useState(-1),[g,p]=i.exports.useState(0),d=i.exports.useMemo(()=>{let b=0;return r.forEach(T=>b+=or.getAchievementCategoryTotalUnseen(T)),b},[r]),h=i.exports.useMemo(()=>{let b=0;return r.forEach(T=>b+=T.getProgress()),b},[r]),C=i.exports.useMemo(()=>{let b=0;return r.forEach(T=>b+=T.getMaxProgress()),b},[r]),I=i.exports.useMemo(()=>~~((h-0)*(100-0)/(C-0)+0),[h,C]),f=i.exports.useMemo(()=>s===null?null:r.find(b=>b.code===s),[r,s]),_=i.exports.useMemo(()=>c===-1||!f?null:f.achievements.find(b=>b.achievementId===c),[f,c]),E=i.exports.useCallback((b,T)=>{n(w=>{const O=[...w];for(const R of O)if(R.code===b)for(const x of R.achievements)x.achievementId===T&&(x.unseen=0);return O})},[]);return U(eg,b=>{const w=b.getParser().achievement;n(O=>{const R=[...O],x=R.findIndex(F=>F.code===w.category);if(x===-1){const F=new yl(w.category);F.achievements.push(w),R.push(F)}else{const F=$t(R[x]),A=[...F.achievements],k=A.findIndex(P=>P.achievementId===w.achievementId);let y=null;k===-1?A.push(w):(y=A[k],A[k]=w),or.getAchievementIsIgnored(w)||(w.unseen++,y&&(w.unseen+=y.unseen)),F.achievements=A,R[x]=F}return R})}),U(tg,b=>{const T=b.getParser(),w=[];for(const O of T.achievements){const R=O.category;let x=w.find(F=>F.code===R);x||(x=new yl(R),w.push(x)),x.achievements.push(O)}n(w)}),U(rg,b=>{const T=b.getParser();p(T.score)}),i.exports.useEffect(()=>{a&&(D(new ng),e(!1))},[a]),i.exports.useEffect(()=>{!s||c===-1||E(s,c)},[s,c,E]),{achievementCategories:r,selectedCategoryCode:s,setSelectedCategoryCode:o,selectedAchievementId:c,setSelectedAchievementId:u,achievementScore:g,getTotalUnseen:d,getProgress:h,getMaxProgress:C,scaledProgressPercent:I,selectedCategory:f,selectedAchievement:_,setAchievementSeen:E}},ga=()=>ct(Vb),Hb=()=>{const[a,e]=i.exports.useState([]),[r,n]=i.exports.useState([]),[s,o]=i.exports.useState(-1),[c,u]=i.exports.useState(10),[g,p]=i.exports.useState(null);return Fb(ag.INITIALIZED,d=>{e(Array.from(Ds().effects.values()))}),U(sg,d=>{const h=d.getParser();p({credits:h.creditPrice,duckets:h.ducketPrice,publishDucketPrice:h.publishDucketPrice})}),i.exports.useEffect(()=>{if(!Ds().isLoaded){Ds().init(),D(new og);return}},[]),{availableEffects:a,cameraRoll:r,setCameraRoll:n,selectedPictureIndex:s,setSelectedPictureIndex:o,myLevel:c,price:g}},xd=()=>ct(Hb);class lr extends yr{}lr.SHOW_CATALOG="CE_SHOW_CATALOG";lr.HIDE_CATALOG="CE_HIDE_CATALOG";lr.TOGGLE_CATALOG="CE_TOGGLE_CATALOG";lr.SOLD_OUT="CE_SOLD_OUT";lr.APPROVE_NAME_RESULT="CE_APPROVE_NAME_RESULT";lr.PURCHASE_APPROVED="CE_PURCHASE_APPROVED";lr.INIT_GIFT="CE_INIT_GIFT";lr.CATALOG_RESET="CE_RESET";lr.CATALOG_INVISIBLE_PAGE_VISITED="CE_CATALOG_INVISIBLE_PAGE_VISITED";class Wb extends lr{constructor(e,r,n){super(lr.INIT_GIFT),this._pageId=e,this._offerId=r,this._extraData=n}get pageId(){return this._pageId}get offerId(){return this._offerId}get extraData(){return this._extraData}}const yd=class extends lr{constructor(a){super(yd.POST_MARKETPLACE),this._item=a}get item(){return this._item}};let qi=yd;qi.POST_MARKETPLACE="CE_POST_MARKETPLACE";const Od=class extends yr{constructor(a){super(Od.PURCHASE_SUCCESS),this._purchase=a}get purchase(){return this._purchase}};let pn=Od;pn.PURCHASE_SUCCESS="CPE_PURCHASE_SUCCESS";const kd=class extends yr{constructor(a){super(kd.PURCHASE_FAILED),this._code=a}get code(){return this._code}};let zn=kd;zn.PURCHASE_FAILED="CPFE_PURCHASE_FAILED";const Ad=class extends yr{constructor(a){super(Ad.NOT_ALLOWED),this._code=a}get code(){return this._code}};let Qo=Ad;Qo.NOT_ALLOWED="CPNAE_NOT_ALLOWED";class xt extends yr{}xt.WIDGETS_INITIALIZED="CWE_CWE_WIDGETS_INITIALIZED";xt.SELECT_PRODUCT="CWE_SELECT_PRODUCT";xt.SET_EXTRA_PARM="CWE_CWE_SET_EXTRA_PARM";xt.PURCHASE="CWE_PURCHASE";xt.COLOUR_ARRAY="CWE_COLOUR_ARRAY";xt.MULTI_COLOUR_ARRAY="CWE_MULTI_COLOUR_ARRAY";xt.COLOUR_INDEX="CWE_COLOUR_INDEX";xt.TEXT_INPUT="CWE_TEXT_INPUT";xt.DROPMENU_SELECT="CWE_CWE_DROPMENU_SELECT";xt.PURCHASE_OVERRIDE="CWE_PURCHASE_OVERRIDE";xt.SELLABLE_PET_PALETTES="CWE_SELLABLE_PET_PALETTES";xt.UPDATE_ROOM_PREVIEW="CWE_UPDATE_ROOM_PREVIEW";xt.GUILD_SELECTED="CWE_GUILD_SELECTED";xt.TOTAL_PRICE_WIDGET_INITIALIZED="CWE_TOTAL_PRICE_WIDGET_INITIALIZED";xt.PRODUCT_OFFER_UPDATED="CWE_CWE_PRODUCT_OFFER_UPDATED";xt.SET_PREVIEWER_STUFFDATA="CWE_CWE_SET_PREVIEWER_STUFFDATA";xt.EXTRA_PARAM_REQUIRED_FOR_BUY="CWE_CWE_EXTRA_PARAM_REQUIRED_FOR_BUY";xt.TOGGLE="CWE_CWE_TOGGLE";xt.BUILDER_SUBSCRIPTION_UPDATED="CWE_CWE_BUILDER_SUBSCRIPTION_UPDATED";xt.ROOM_CHANGED="CWE_CWE_ROOM_CHANGED";xt.SHOW_WARNING_TEXT="CWE_CWE_SHOW_WARNING_TEXT";const Pd=class extends yr{constructor(){super(Pd.SOLD_OUT)}};let Jo=Pd;Jo.SOLD_OUT="CPSOE_SOLD_OUT";const Dd=class extends yr{constructor(a,e){super(Dd.UPDATE_STUFF_DATA),this._offer=a,this._stuffData=e}get offer(){return this._offer}get stuffData(){return this._stuffData}};let jb=Dd;jb.UPDATE_STUFF_DATA="SRPSA_UPDATE_STUFF_DATA";class Bt extends yr{}Bt.SHOW_GUIDE_TOOL="GTE_SHOW_GUIDE_TOOL";Bt.HIDE_GUIDE_TOOL="GTE_HIDE_GUIDE_TOOL";Bt.TOGGLE_GUIDE_TOOL="GTE_TOGGLE_GUIDE_TOOL";Bt.CREATE_HELP_REQUEST="GTE_CREATE_HELP_REQUEST";Bt.CREATE_BULLY_REQUEST="GTE_CREATE_BULLY_REQUEST";class Zo extends yr{}Zo.INIT="HC_NAME_CHANGE_INIT";const Md=class extends yr{constructor(a,e,r){super(Md.FURNI_ADDED),this.id=a,this.spriteId=e,this.category=r}};let ea=Md;ea.FURNI_ADDED="IFAE_FURNI_ADDED";class Pr extends yr{}Pr.SHOW_THUMBNAIL="NE_SHOW_THUMBNAIL";Pr.HIDE_THUMBNAIL="NE_HIDE_THUMBNAIL";Pr.TOGGLE_THUMBNAIL="NE_TOGGLE_THUMBNAIL";const zl=a=>a&&a.length?a.replace(/\\r/g,"\r"):"",Yl=a=>{const e="0"+a;return e.substr(e.length-2,e.length)};let ks=null;const qb=()=>{const[a,e]=i.exports.useState([]),[r,n]=i.exports.useState([]),[s,o]=i.exports.useState([]),[c,u]=i.exports.useState(!1),[g,p]=i.exports.useState(!1),d=()=>K("notification",{}),h=k=>{const y=d();return y?y[k]:null},C=(k,y,P,G)=>{if(k.has(P))return k.get(P);const B=["notification",y,P].join(".");return Ce().localization.hasValue(B)||G?m(B,Array.from(k.keys()),Array.from(k.values())):null},I=(k,y)=>{let P=k.get("image");return P||(P=K("image.library.notifications.url","").replace("%image%",y.replace(/\./g,"_"))),m(P)},f=i.exports.useCallback((k,y=null,P=null,G=null,B=null,Y=null)=>{(!B||!B.length)&&(B=m("notifications.broadcast.title")),(!y||!y.length)&&(y=ue.DEFAULT);const X=new fi([zl(k)],y,P,G,B,Y);e(z=>[X,...z])},[]),_=i.exports.useCallback(()=>f(null,ue.NITRO),[f]),E=i.exports.useCallback((k,y,P=null,G=null)=>{if(c)return;const B=new ld(k,y,P,G);n(Y=>[B,...Y])},[c]),b=(k,y=null)=>{y||(y=new Map);const P=h("notification."+k);if(P)for(const Ee in P)y.set(Ee,P[Ee]);k==="floorplan_editor.error"&&y.set("message",y.get("message").replace(/[^a-zA-Z._ ]/g,""));const G=C(y,k,"title",!0),B=C(y,k,"message",!0).replace(/\\r/g,"\r"),Y=C(y,k,"linkTitle",!1),X=C(y,k,"linkUrl",!1),z=I(y,k);y.get("display")==="BUBBLE"?E(m(B),$e.INFO,z,X):f(m(B),k,X,Y,G,z),y.get("sound")&&Jr(y.get("sound"))},T=i.exports.useCallback((k,y,P,G=null,B=null,Y=null,X=null)=>{(!G||!G.length)&&(G=m("generic.confirm")),(!B||!B.length)&&(B=m("generic.cancel")),(!Y||!Y.length)&&(Y=m("notifications.broadcast.title"));const z=new cd(X,k,y,P,G,B,Y);o(Ee=>[z,...Ee])},[]),w=(k,y=null,P=!0)=>{f(k,ue.DEFAULT,y,m("mod.alert.link"),m("mod.alert.title"))},O=i.exports.useCallback((k,y="")=>{switch(k){case bt.ALERT_SCAM:f(m("inventory.trading.warning.other_not_offering"),null,null,null,m("inventory.trading.notification.title"));return;case bt.HOTEL_TRADING_DISABLED:case bt.YOU_NOT_ALLOWED:case bt.THEY_NOT_ALLOWED:case bt.ROOM_DISABLED:case bt.YOU_OPEN:case bt.THEY_OPEN:f(m(`inventory.trading.openfail.${k}`,["otherusername"],[y]),null,null,null,m("inventory.trading.openfail.title"));return;case bt.ERROR_WHILE_COMMIT:f(`${m("inventory.trading.notification.caption")}, ${m("inventory.trading.notification.commiterror.info")}`,null,null,null,m("inventory.trading.notification.title"));return;case bt.THEY_CANCELLED:f(m("inventory.trading.info.closed"),null,null,null,m("inventory.trading.notification.title"));return}},[f]),R=i.exports.useCallback(k=>{e(y=>{const P=[...y],G=P.findIndex(B=>k===B);return G>=0&&P.splice(G,1),P})},[]),x=i.exports.useCallback(k=>{n(y=>{const P=[...y],G=P.findIndex(B=>k===B);return G>=0&&P.splice(G,1),P})},[]),F=i.exports.useCallback(k=>{o(y=>{const P=[...y],G=P.findIndex(B=>k===B);return G>=0&&P.splice(G,1),P})},[]);U(ig,k=>{const y=k.getParser();if(y.userId!==H().userId)return;const P=m("notifications.text.respect.1"),G=m("notifications.text.respect.2",["count"],[y.respectsReceived.toString()]);E(P,$e.RESPECT),E(G,$e.RESPECT)}),U(lg,k=>{const y=k.getParser();f(y.message.replace(/\\r/g,"\r"),null,null,m("notifications.broadcast.title"))}),U(cg,k=>{const y=k.getParser(),P=m("achievements.levelup.desc"),G=Qs(y.data.badgeCode),B=H().getBadgeUrl(y.data.badgeCode),Y="questengine/achievements/"+y.data.category;E(P+" "+G,$e.ACHIEVEMENT,B,Y)}),U(ug,k=>{const y=k.getParser();y.numGifts<=0||E(y.numGifts.toString(),$e.CLUBGIFT,null,"catalog/open/"+K("catalog.links")["hc.hc_gifts"])}),U(dg,k=>{const y=k.getParser();w(y.message,y.url,!1)}),U(du,k=>{const y=k.getParser();if(y.amountChanged<=0||y.type!==5)return;const P=K("currency.asset.icon.url","").replace("%type%",y.type.toString());E(m("notifications.text.loyalty.received",["AMOUNT"],[y.amountChanged.toString()]),$e.INFO,P)}),U(mg,k=>{const y=k.getParser();w(y.message)}),U(gg,k=>{const y=k.getParser();f(m("opening.hours."+(y.userThrowOutAtClose?"disconnected":"closed"),["h","m"],[Yl(y.openHour),Yl(y.openMinute)]),ue.DEFAULT,null,null,m("opening.hours.title"))}),U(pg,k=>{const y=k.getParser(),P=m("notifications.text."+(y.boughtAsGift?"petbought":"petreceived"));let G=null;const B=q().getRoomObjectPetImage(y.pet.typeId,y.pet.paletteId,parseInt(y.pet.color,16),new Rt(45*3),64,null,!0);B&&(G=B.getImage().src),E(P,$e.PETLEVEL,G)}),U(hg,k=>{const P=k.getParser().messages.map(B=>zl(B)),G=new fi(P,ue.MOTD,null,null,m("notifications.motd.title"));e(B=>[G,...B])}),U(fg,k=>{const y=k.getParser();let P=null;const G=q().getRoomObjectPetImage(y.figureData.typeId,y.figureData.paletteId,parseInt(y.figureData.color,16),new Rt(45*3),64,null,!0);G&&(P=G.getImage().src),E(m("notifications.text.petlevel",["pet_name","level"],[y.petName,y.level.toString()]),$e.PETLEVEL,P)}),U(Ig,k=>{const y=k.getParser();u(!y.enabled)}),U(Eg,k=>{const y=k.getParser();if(!y.products||!y.products.length)return;const P=y.products[0];P&&E(m("notifications.text.club_gift.selected"),$e.INFO,Uo.getProductImageUrl(P.productType,P.furniClassId,P.extraParam))}),U(Cg,k=>{const y=k.getParser();f(m("maintenance.shutdown",["m","d"],[y.minutesUntilMaintenance.toString(),y.duration.toString()]),ue.DEFAULT,null,null,m("opening.hours.title"))}),U(_g,k=>{const y=k.getParser();w(y.message,y.url)}),U(bg,k=>{const y=k.getParser();b(y.type,y.parameters)}),U(Ng,k=>{const y=k.getParser();f(m("opening.hours.shutdown",["m"],[y.openMinute.toString()]),ue.DEFAULT,null,null,m("opening.hours.title"))}),U(Sg,k=>{const y=k.getParser();f(m("opening.hours.disconnected",["h","m"],[y.openHour.toString(),y.openMinute.toString()]),ue.DEFAULT,null,null,m("opening.hours.title"))}),U(Tg,k=>{const y=k.getParser();switch(y.errorCode){default:case 0:f(m("connection.server.error.desc",["errorCode"],[y.errorCode.toString()]),ue.ALERT,null,null,m("connection.server.error.title"));break;case 1001:case 1002:case 1003:case 1004:case 1005:case 1006:case 1007:case 1008:case 1009:case 1010:case 1011:case 1012:case 1013:case 1014:case 1015:case 1016:case 1017:case 1018:case 1019:k.connection.dispose();break;case 4013:f(m("connection.room.maintenance.desc"),ue.ALERT,null,null,m("connection.room.maintenance.title"));break}}),U(vg,k=>{const y=k.getParser();f(m(y.alertMessage),ue.DEFAULT,null,null,m(y.titleMessage?y.titleMessage:"notifications.broadcast.title"))});const A=i.exports.useCallback(()=>{if(!g)if(ni.isRunning()){if(ks)return;ks=setTimeout(()=>{A()},ni.totalRunningTime+5e3)}else ks&&(clearTimeout(ks),ks=null),E(m("mod.chatdisclaimer"),$e.INFO),p(!0)},[g,E]);return U(wg,A),{alerts:a,bubbleAlerts:r,confirms:s,simpleAlert:f,showNitroAlert:_,showTradeAlert:O,showConfirm:T,showSingleBubble:E,closeAlert:R,closeBubbleAlert:x,closeConfirm:F}},Xe=()=>ct(qb),zb=(a,e)=>{const[r,n]=i.exports.useState(()=>{if(typeof window>"u")return e;try{return Ai(a)??e}catch{return e}});return[r,o=>{try{const c=o instanceof Function?o(r):o;n(c),typeof window<"u"&&Li(a,c)}catch(c){mu.error(c)}}]},pa=zb,Yb=()=>pa(Js.CATALOG_PLACE_MULTIPLE_OBJECTS,!1),Ld=()=>ct(Yb),$b=()=>pa(Js.CATALOG_SKIP_PURCHASE_CONFIRMATION,!1),Ud=()=>ct($b),Kb=-12345678,Xb=()=>{const[a,e]=i.exports.useState(!1),[r,n]=i.exports.useState(!1),[s,o]=i.exports.useState(-1),[c,u]=i.exports.useState(-1),[g,p]=i.exports.useState(Sr.NORMAL),[d,h]=i.exports.useState(null),[C,I]=i.exports.useState(null),[f,_]=i.exports.useState(null),[E,b]=i.exports.useState(null),[T,w]=i.exports.useState([]),[O,R]=i.exports.useState(null),[x,F]=i.exports.useState([]),[A,k]=i.exports.useState(null),[y,P]=i.exports.useState(!1),[G,B]=i.exports.useState({quantity:1,extraData:null,extraParamRequired:!1,previewStuffData:null}),[Y,X]=i.exports.useState({}),[z,Ee]=i.exports.useState(!1),[ie,Pe]=Ld(),[Qe,pt]=Ud(),[Ze,Ft]=i.exports.useState(null),[We,qt]=i.exports.useState(null),[Er,Fe]=i.exports.useState(0),[Ie,Ye]=i.exports.useState(0),[yt,de]=i.exports.useState(0),[Oe,ot]=i.exports.useState(0),[Zt,fe]=i.exports.useState(0),[Me,Cr]=i.exports.useState(0),{simpleAlert:On=null}=Xe(),er=i.exports.useRef(new un),oo=i.exports.useCallback(()=>{o(-1),u(-1),h(null),I(null),_(null),b(null),w([]),R(null),F([]),e(!1)},[]),Rs=i.exports.useCallback(W=>{if(!W)return rr.MISSING_OFFER;if(Er<0||Er>=Ie)return rr.FURNI_LIMIT_REACHED;const $=ye();if(!$)return rr.NOT_IN_ROOM;if(!$.isRoomOwner)return rr.NOT_ROOM_OWNER;if(Oe<=0){const J=q();let oe=J.getRoomObjectCount($.roomId,Q.UNIT);for(;oe>0;){const ke=J.getRoomObjectByIndex($.roomId,oe,Q.UNIT),Ke=$.userDataManager.getUserDataByIndex(ke.id);if(Ke&&Ke.type===gt.USER&&Ke.roomIndex!==$.ownRoomIndex&&!Ke.isModerator)return rr.VISITORS_IN_ROOM;oe--}}return rr.OKAY},[Er,Ie,Oe]),kn=i.exports.useCallback(W=>{const $=ye();return!!(($&&W.page&&W.page.layoutCode!=="sold_ltd_items"&&g===Sr.NORMAL&&($.isRoomOwner||$.isGuildRoom&&$.controllerLevel>=tt.GUILD_MEMBER)||g===Sr.BUILDER&&Rs(W)===rr.OKAY)&&W.pricingModel!==it.PRICING_MODEL_BUNDLE&&W.product.productType!==ge.EFFECT&&W.product.productType!==ge.HABBO_CLUB)},[g,Rs]),An=i.exports.useCallback(W=>{if(!kn(W))return;const $=W.product;if(!$)return;let J=0;switch($.productType){case ge.FLOOR:J=Q.FLOOR;break;case ge.WALL:J=Q.WALL;break}q().processRoomObjectPlacement(Us.CATALOG,-W.offerId,J,$.productClassId,$.extraParam)&&(Ft(W),Ee(!0),e(!1))},[kn]),Zn=i.exports.useCallback((W,$)=>{const J=q();let oe=J.getRoomInstanceVariable(J.activeRoomId,te.ROOM_WALL_TYPE),ke=J.getRoomInstanceVariable(J.activeRoomId,te.ROOM_FLOOR_TYPE),Ke=J.getRoomInstanceVariable(J.activeRoomId,te.ROOM_LANDSCAPE_TYPE);switch(oe=oe&&oe.length?oe:"101",ke=ke&&ke.length?ke:"101",Ke=Ke&&Ke.length?Ke:"1.1",W){case"floor":J.updateRoomInstancePlaneType(J.activeRoomId,$,oe,Ke,!0);return;case"wallpaper":J.updateRoomInstancePlaneType(J.activeRoomId,ke,$,Ke,!0);return;case"landscape":J.updateRoomInstancePlaneType(J.activeRoomId,ke,oe,$,!0);return;default:J.updateRoomInstancePlaneType(J.activeRoomId,ke,oe,Ke,!0);return}},[]),xs=i.exports.useCallback(()=>{Ze&&(q().cancelRoomObjectInsert(),Ee(!1),Ft(null))},[Ze]),_n=i.exports.useCallback((W=!0)=>{Ee($=>($&&W&&Z("catalog/open"),!1))},[]),Pn=i.exports.useCallback((W=!1)=>{W||_n(),qt($=>{if($)switch($.category){case Q.FLOOR:q().removeRoomObjectFloor($.roomId,$.objectId);break;case Q.WALL:{switch($.furniData.className){case"floor":case"wallpaper":case"landscape":Zn("reset","");break;default:q().removeRoomObjectWall($.roomId,$.objectId);break}break}default:q().deleteRoomObject($.objectId,$.category);break}return null})},[_n,Zn]),Gt=i.exports.useCallback((W,$)=>{if($.pageId===W&&$!==d)return $;for(const J of $.children){const oe=Gt(W,J);if(oe)return oe}return null},[d]),Br=i.exports.useCallback((W,$)=>{if($.pageName===W&&$!==d)return $;for(const J of $.children){const oe=Br(W,J);if(oe)return oe}return null},[d]),es=i.exports.useCallback((W,$=!1)=>{if(!C||!C.size)return null;if($){const J=[],oe=C.get(W);if(oe&&oe.length)for(const ke of oe)ke.isVisible&&J.push(ke);if(J.length)return J}return C.get(W)},[C]),Vr=i.exports.useCallback((W,$)=>{W<0||(n(!0),o(W),W>-1&&D(new Rg(W,$,g)))},[g]),fm=i.exports.useCallback((W,$,J,oe,ke,Ke)=>{const Ot=new xi(W,$,J,oe,Ke);if(_(Ot),u(_e=>W!==-1?W:_e),P(!1),ke>-1&&Ot.offers.length){for(const _e of Ot.offers)if(_e.offerId===ke){b(_e);break}}},[]),tn=i.exports.useCallback((W,$=-1)=>{if(xs(),W.parent.pageName==="root"&&W.children.length){for(const ke of W.children)if(ke.isVisible){W=ke;break}}const J=[];let oe=W;for(;oe&&oe.pageName!=="root";)J.push(oe),oe=oe.parent;J.reverse(),w(ke=>{const Ke=ke.indexOf(W)>=0,Ot=W.isOpen;for(const _e of ke)_e.deactivate(),J.indexOf(_e)===-1&&_e.close();for(const _e of J)_e.activate(),_e.parent&&_e.open(),_e===W.parent&&_e.children.length&&_e.open();return Ke&&Ot?W.close():W.open(),J}),W.pageId>-1&&Vr(W.pageId,$)},[w,Vr,xs]),ys=i.exports.useCallback(W=>{if(W!==-1&&R(null),!a)er.current.requestById=W,e(!0);else{const $=Gt(W,d);$&&tn($)}},[a,d,Gt,tn]),ba=i.exports.useCallback(W=>{if(R(null),!a)er.current.requestByName=W,e(!0);else{const $=Br(W,d);$&&tn($)}},[a,d,Br,tn]),Na=i.exports.useCallback(W=>{if(R(null),!a)er.current.requestedByOfferId=W,e(!0);else{const $=es(W);if(!$||!$.length)return;tn($[0],W)}},[a,es,tn]),rl=i.exports.useCallback(()=>{},[]);return U(xg,W=>{const $=W.getParser(),J=new Map,oe=(ke,Ke,Ot)=>{const _e=new h_(ke,Ke,Ot);for(const _r of _e.offerIds)J.has(_r)?J.get(_r).push(_e):J.set(_r,[_e]);Ke++;for(const _r of ke.children)_e.addChild(oe(_r,Ke,_e));return _e};h(oe($.root,0,null)),I(J)}),U(yg,W=>{const $=W.getParser();if($.catalogType!==g)return;const J=[];for(const oe of $.offers){const ke=[],Ke=ds(oe.localizationId);for(const _e of oe.products){const _r=ci(_e.furniClassId,_e.productType);ke.push(new Wn(_e.productType,_e.furniClassId,_e.extraParam,_e.productCount,Ke,_r,_e.uniqueLimitedItem,_e.uniqueLimitedSeriesSize,_e.uniqueLimitedItemsLeft))}if(!ke.length)continue;const Ot=new it(oe.offerId,oe.localizationId,oe.rent,oe.priceCredits,oe.priceActivityPoints,oe.priceActivityPointsType,oe.giftable,oe.clubLevel,ke,oe.bundlePurchaseAllowed);(g===Sr.NORMAL||Ot.pricingModel!==it.PRICING_MODEL_BUNDLE&&Ot.pricingModel!==it.PRICING_MODEL_MULTI)&&J.push(Ot)}$.frontPageItems&&$.frontPageItems.length&&F($.frontPageItems),n(!1),s===$.pageId&&fm($.pageId,$.layoutCode,new Ku($.localization.images.concat(),$.localization.texts.concat()),J,$.offerId,$.acceptSeasonCurrencyAsCredits)}),U(Og,W=>{const $=W.getParser();St(new pn($.offer))}),U(kg,W=>{const $=W.getParser();St(new zn($.code))}),U(Ag,W=>{const $=W.getParser();St(new Qo($.code))}),U(Pg,W=>{W.getParser(),St(new Jo)}),U(Dg,W=>{const J=W.getParser().offer;if(!J||!J.products.length)return;J.products[0].uniqueLimitedItem;const ke=[],Ke=ds(J.localizationId);for(const _e of J.products){const _r=ci(_e.furniClassId,_e.productType);ke.push(new Wn(_e.productType,_e.furniClassId,_e.extraParam,_e.productCount,Ke,_r,_e.uniqueLimitedItem,_e.uniqueLimitedSeriesSize,_e.uniqueLimitedItemsLeft))}const Ot=new it(J.offerId,J.localizationId,J.rent,J.priceCredits,J.priceActivityPoints,J.priceActivityPointsType,J.giftable,J.clubLevel,ke,J.bundlePurchaseAllowed);(g===Sr.NORMAL||Ot.pricingModel!==it.PRICING_MODEL_BUNDLE&&Ot.pricingModel!==it.PRICING_MODEL_MULTI)&&(Ot.page=f,b(Ot),Ot.product&&Ot.product.productType===ge.WALL&&B(_e=>{const _r={..._e};return _r.extraData=Ot.product.extraParam||null,_r}))}),U(Mg,W=>{const $=W.getParser(),J=new f_($.productCode,$.palettes.slice());X(oe=>{const ke=[];oe.petPalettes&&ke.push(...oe.petPalettes);for(let Ke=0;Ke<ke.length;Ke++)if(ke[Ke].breed===J.breed){ke.splice(Ke,1);break}return ke.push(J),{...oe,petPalettes:ke}})}),U(Lg,W=>{const $=W.getParser();X(J=>{const oe=$.offers;return{...J,clubOffers:oe}})}),U(Ug,W=>{const $=W.getParser();X(J=>{const oe=$.groups;return{...J,groups:oe}})}),U(Fg,W=>{const $=W.getParser();X(J=>{const oe=new S_($);return{...J,giftConfiguration:oe}})}),U(Gg,W=>{const $=W.getParser();if(!$)return;let J="";$.result===1?J=m("inventory.marketplace.result.title.success"):J=m("inventory.marketplace.result.title.failure");const oe=m(`inventory.marketplace.result.${$.result}`);On(oe,ue.DEFAULT,null,null,J)}),U(gu,W=>{const $=W.getParser();X(J=>({...J,clubGifts:$}))}),U(Bg,W=>{const $=a;oo(),$&&On(m("catalog.alert.published.description"),ue.ALERT,null,null,m("catalog.alert.published.title"))}),U(Vg,W=>{const $=W.getParser();Fe($.furniCount),rl()}),U(Hg,W=>{const $=W.getParser();Ye($.furniLimit),de($.maxFurniLimit),ot($.secondsLeft),fe(Nr()),Cr($.secondsLeftWithGrace),rl()}),lt(pn.PURCHASE_SUCCESS,W=>Jr(ir.CREDITS)),Se(ol.PLACED,W=>{if(!z||W.type!==ol.PLACED)return;if(Pn(!0),!Ze){_n();return}let $=!1;const J=Ze.product;if(W.category===Q.WALL)switch(J.furnitureData.className){case"floor":case"wallpaper":case"landscape":$=W.placedOnFloor||W.placedOnWall;break;default:$=W.placedInRoom;break}else $=W.placedInRoom;if(!$){_n();return}switch(qt(new T_(W.roomId,W.objectId,W.category,W.wallLocation,W.x,W.y,W.direction,Ze)),g){case Sr.NORMAL:{switch(W.category){case Q.FLOOR:q().addFurnitureFloor(W.roomId,W.objectId,J.productClassId,new Rt(W.x,W.y,W.z),new Rt(W.direction),0,new qg);break;case Q.WALL:switch(J.furnitureData.className){case"floor":case"wallpaper":case"landscape":Zn(J.furnitureData.className,J.extraParam);break;default:q().addFurnitureWall(W.roomId,W.objectId,J.productClassId,new Rt(W.x,W.y,W.z),new Rt(W.direction*45),0,W.instanceData,0);break}}const oe=q().getRoomObject(W.roomId,W.objectId,W.category);oe&&oe.model.setValue(te.FURNITURE_ALPHA_MULTIPLIER,.5),Qe&&D(new sa(s,Ze.offerId,J.extraParam,1)),ie&&An(Ze);break}case Sr.BUILDER:{let oe=Ze.page.pageId;switch(oe===Kb&&(oe=-1),W.category){case Q.FLOOR:D(new jg(oe,Ze.offerId,J.extraParam,W.x,W.y,W.direction));break;case Q.WALL:D(new Wg(oe,Ze.offerId,J.extraParam,W.wallLocation));break}ie&&An(Ze);break}}}),lt(ea.FURNI_ADDED,W=>{const $=q();if(!(!We||We.productClassId!==W.spriteId||We.roomId!==$.activeRoomId)){switch(W.category){case ee.FLOOR:{const J=$.getRoomInstanceVariable($.activeRoomId,te.ROOM_FLOOR_TYPE);We.extraParam!==J&&D(new Lo(W.id));break}case ee.WALL_PAPER:{const J=$.getRoomInstanceVariable($.activeRoomId,te.ROOM_WALL_TYPE);We.extraParam!==J&&D(new Lo(W.id));break}case ee.LANDSCAPE:{const J=$.getRoomInstanceVariable($.activeRoomId,te.ROOM_LANDSCAPE_TYPE);We.extraParam!==J&&D(new Lo(W.id));break}default:D(new zg(W.id,We.category,We.wallLocation,We.x,We.y,We.direction))}ie||Pn()}}),i.exports.useEffect(()=>()=>b(null),[f]),i.exports.useEffect(()=>{if(!(!a||!d||!C||!er.current))switch(er.current.requestType){case un.REQUEST_TYPE_NONE:if(f)return;if(d.isBranch){for(const W of d.children)if(W&&W.isVisible){tn(W);return}}return;case un.REQUEST_TYPE_ID:ys(er.current.requestById),er.current.resetRequest();return;case un.REQUEST_TYPE_OFFER:Na(er.current.requestedByOfferId),er.current.resetRequest();return;case un.REQUEST_TYPE_NAME:ba(er.current.requestByName),er.current.resetRequest();return}},[a,d,C,f,tn,ys,Na,ba]),i.exports.useEffect(()=>{!O&&f&&f.pageId===-1&&ys(c)},[O,f,c,ys]),i.exports.useEffect(()=>{E&&B({quantity:1,extraData:null,extraParamRequired:!1,previewStuffData:null})},[E]),i.exports.useEffect(()=>{!a||d||(D(new Yg),D(new pu),D(new $g(g)),D(new Kg))},[a,d,g]),i.exports.useEffect(()=>(k(new Wo(q(),++Wo.PREVIEW_COUNTER)),()=>{k(W=>(W.dispose(),null))}),[]),{isVisible:a,setIsVisible:e,isBusy:r,pageId:s,previousPageId:c,currentType:g,rootNode:d,offersToNodes:C,currentPage:f,setCurrentPage:_,currentOffer:E,setCurrentOffer:b,activeNodes:T,searchResult:O,setSearchResult:R,frontPageItems:x,roomPreviewer:A,navigationHidden:y,setNavigationHidden:P,purchaseOptions:G,setPurchaseOptions:B,catalogOptions:Y,setCatalogOptions:X,getNodeById:Gt,getNodeByName:Br,activateNode:tn,openPageById:ys,openPageByName:ba,openPageByOfferId:Na,requestOfferToMover:An}},De=()=>ct(Xb),Qb=1e3,Jb=10,Zb=1e3;let eN=0,tN=0;const rN=()=>{const[a,e]=i.exports.useState([]),[r,n]=i.exports.useState([]),[s,o]=i.exports.useState([]),[c,u]=i.exports.useState(!1),g=h=>{h.id=eN++,e(C=>{const I=[...C];return I.push(h),I.length>Qb&&I.shift(),I})},p=h=>{n(C=>{const I=[...C];return I.push(h),I.length>Jb&&I.shift(),I})},d=h=>{h.id=tN++,o(C=>{const I=[...C];return I.push(h),I.length>Zb&&I.shift(),I})};return ze(Wt.STARTED,h=>u(!0)),U(Ts,h=>{if(!c)return;const C=h.getParser();r.length&&r[r.length-1].id===C.data.roomId||(g({id:-1,webId:-1,entityId:-1,name:C.data.roomName,timestamp:nd(),type:Rr.TYPE_ROOM_INFO,roomId:C.data.roomId}),p({id:C.data.roomId,name:C.data.roomName}),u(!1))}),U(hu,h=>{const C=h.getParser();d({id:-1,webId:C.senderId,entityId:-1,name:"",message:C.messageText,roomId:-1,timestamp:Ml(C.secondsSinceSent),type:Rr.TYPE_IM})}),U(fu,h=>{const C=h.getParser();d({id:-1,webId:C.senderId,entityId:-1,name:"",message:C.messageText,roomId:-1,timestamp:Ml(),type:Rr.TYPE_IM})}),{addChatEntry:g,chatHistory:a,roomHistory:r,messengerHistory:s}},ha=()=>ct(rN),nN=()=>{const[a,e]=i.exports.useState([]),[r,n]=i.exports.useState([]),[s,o]=i.exports.useState([]),[c,u]=i.exports.useState([]),[g,p]=i.exports.useState(null),d=i.exports.useMemo(()=>{const T=a.filter(w=>w.online);return T.sort((w,O)=>w.name<O.name?-1:w.name>O.name?1:0),T},[a]),h=i.exports.useMemo(()=>{const T=a.filter(w=>!w.online);return T.sort((w,O)=>w.name<O.name?-1:w.name>O.name?1:0),T},[a]),C=T=>D(new wi(T.id)),I=(T,w)=>w!==T.relationshipStatus&&D(new As(T.id,w)),f=T=>{for(const w of a)if(w.id===T)return w;return null},_=T=>!(T===H().userId||f(T)||r.find(w=>w.requesterUserId===T)||s.indexOf(T)>=0),E=(T,w)=>{if(!_(T))return!1;o(O=>{const R=[...O];return R.push(T),R}),D(new Iu(w))},b=(T,w)=>{T===-1&&!w?(D(new al(!0)),n([])):n(O=>{const R=[...O],x=R.findIndex(F=>F.id===T);return x===-1?O:(D(w?new sp(R[x].id):new al(!1,R[x].id)),R.splice(x,1),R)})};return U(Qg,T=>{const w=T.getParser();p(new sb(w.userFriendLimit,w.normalFriendLimit,w.extendedFriendLimit,w.categories)),D(new Xg)}),U(Jg,T=>{const w=T.getParser();e(O=>{const R=[...O];for(const x of w.fragment){const F=R.findIndex(k=>k.id===x.id),A=new Ht;A.populate(x),F>-1?R[F]=A:R.push(A)}return R})}),U(Zg,T=>{const w=T.getParser();e(O=>{const R=[...O],x=F=>{const A=R.findIndex(k=>k.id===F.id);if(A===-1){const k=new Ht;k.populate(F),R.unshift(k)}else R[A].populate(F)};for(const F of w.addedFriends)x(F);for(const F of w.updatedFriends)x(F);for(const F of w.removedFriendIds){const A=R.findIndex(k=>k.id===F);A>-1&&R.splice(A,1)}return R})}),U(ep,T=>{const w=T.getParser();n(O=>{const R=[...O];for(const x of w.requests){const F=R.findIndex(A=>A.requesterUserId===x.requesterUserId);if(F>0)R[F]=$t(R[F]),R[F].populate(x);else{const A=new Ll;A.populate(x),R.push(A)}}return R})}),U(tp,T=>{const O=T.getParser().request;n(R=>{const x=[...R];if(x.findIndex(A=>A.requesterUserId===O.requesterUserId)===-1){const A=new Ll;A.populate(O),x.push(A)}return x})}),i.exports.useEffect(()=>{D(new rp);const T=setInterval(()=>D(new np),12e4);return()=>{clearInterval(T)}},[]),{friends:a,requests:r,sentRequests:s,dismissedRequestIds:c,setDismissedRequestIds:u,settings:g,onlineFriends:d,offlineFriends:h,getFriend:f,canRequestFriend:_,requestFriend:E,requestResponse:b,followFriend:C,updateRelationship:I}},cr=()=>ct(nN),sN=()=>{const[a,e]=i.exports.useState([]),[r,n]=i.exports.useState(-1),[s,o]=i.exports.useState([]),[c,u]=i.exports.useState(Ur.HIDDEN),{getFriend:g=null}=cr(),{simpleAlert:p=null}=Xe(),d=i.exports.useMemo(()=>a.filter(_=>s.indexOf(_.threadId)===-1),[a,s]),h=i.exports.useMemo(()=>r>0&&d.find(_=>_.threadId===r||null),[r,d]),C=_=>{let E=a.find(b=>b.participant&&b.participant.id===_);if(E){const b=s.indexOf(E.threadId);b>=0&&o(T=>{const w=[...T];return w.splice(b,1),w})}else{const b=g(_);if(!b)return null;E=new Ui(b),E.addMessage(null,m("messenger.moderationinfo"),0,null,Fr.SECURITY_NOTIFICATION),E.setRead(),e(T=>{const w=[...T];return w.push(E),w})}return E},I=_=>{o(E=>{const b=[...E];return b.indexOf(_)>=0?E:(b.push(_),b)}),r===_&&n(-1)},f=(_,E,b,T=0,w=null,O=Fr.CHAT)=>{if(!_||!b||!b.length)return;const R=E===H().userId;R&&b.length<=255&&D(new ap(_.participant.id,b)),e(x=>{const F=[...x],A=F.findIndex(k=>k.threadId===_.threadId);return A===-1?x:(_=$t(F[A]),R&&_.groups.length===1&&Jr(ir.MESSENGER_NEW_THREAD),_.addMessage(O===Fr.ROOM_INVITE?null:E,b,T,w,O),r===_.threadId&&_.setRead(),F[A]=_,!R&&_.unread&&Jr(ir.MESSENGER_MESSAGE_RECEIVED),F)})};return U(hu,_=>{const E=_.getParser(),b=C(E.senderId);b&&f(b,E.senderId,E.messageText,E.secondsSinceSent,E.extraData)}),U(fu,_=>{const E=_.getParser(),b=C(E.senderId);b&&f(b,E.senderId,E.messageText,0,null,Fr.ROOM_INVITE)}),U(op,_=>{const E=_.getParser();p(`Received room invite error: ${E.errorCode},recipients: ${E.failedRecipients}`,ue.DEFAULT,null,null,m("friendlist.alert.title"))}),i.exports.useEffect(()=>{r<=0||e(_=>{const E=[..._],b=E.findIndex(T=>T.threadId===r);return b>=0&&(E[b]=$t(E[b]),E[b].setRead()),E})},[r]),i.exports.useEffect(()=>{u(_=>{if(!d.length)return Ur.HIDDEN;let E=!1;for(const b of d)if(b.unreadCount>0){E=!0;break}return E?Ur.UNREAD:Ur.SHOW})},[d]),{messageThreads:a,activeThread:h,iconState:c,visibleThreads:d,getMessageThread:C,setActiveThreadId:n,closeThread:I,sendMessage:f}},Fd=()=>ct(sN),oN=()=>{const[a,e]=i.exports.useState(!1),[r,n]=i.exports.useState(null),[s,o]=i.exports.useState(null),[c,u]=i.exports.useState(null),[g,p]=i.exports.useState(!1),[d,h]=i.exports.useState(null);return U(ip,C=>{let I=C.getParser();!I||I&&!I.games.length||(o(I.games[0]),n(I.games))}),U(lp,C=>{let I=C.getParser();I&&u(I)}),U(cp,C=>{let I=C.getParser();I&&p(I.isInMaintenance)}),U(up,C=>{let I=C.getParser();if(I)switch(I.gameTypeId){case 2:return console.log("snowwar");default:return h(I.url)}}),i.exports.useEffect(()=>{a&&(D(new dp),yi())},[a]),{isVisible:a,setIsVisible:e,games:r,accountStatus:c,selectedGame:s,setSelectedGame:o,gameOffline:g,gameURL:d,setGameURL:h}},fa=()=>ct(oN),aN=()=>{const[a,e]=i.exports.useState(null);return U(mp,r=>{const n=r.getParser(),s={badgeBases:[],badgeSymbols:[],badgePartColors:[],groupColorsA:[],groupColorsB:[]};n.bases.forEach((c,u)=>s.badgeBases.push({id:u,images:c})),n.symbols.forEach((c,u)=>s.badgeSymbols.push({id:u,images:c})),n.partColors.forEach((c,u)=>s.badgePartColors.push({id:u,color:c})),n.colorsA.forEach((c,u)=>s.groupColorsA.push({id:u,color:c})),n.colorsB.forEach((c,u)=>s.groupColorsB.push({id:u,color:c}));const o=(c,u)=>c.id<u.id?-1:c.id>u.id?1:0;s.badgeBases.sort(o),s.badgeSymbols.sort(o),s.badgePartColors.sort(o),s.groupColorsA.sort(o),s.groupColorsB.sort(o),e(s)}),i.exports.useEffect(()=>{D(new gp)},[]),{groupCustomize:a}},no=()=>ct(aN),iN=()=>{const[a,e]=i.exports.useState(null),[r,n]=i.exports.useState(null),{simpleAlert:s=null,showConfirm:o=null}=Xe(),c=(u,g)=>{const p={reportType:u,reportedUserId:-1,reportedChats:[],cfhCategory:-1,cfhTopic:-1,roomId:-1,roomName:"",messageId:-1,threadId:-1,groupId:-1,extraData:"",roomObjectId:-1,message:"",currentStep:0};switch(u){case Ve.BULLY:case Ve.EMERGENCY:case Ve.IM:p.reportedUserId=g.reportedUserId,p.currentStep=kt.SELECT_CHATS;break;case Ve.ROOM:p.roomId=g.roomId,p.roomName=g.roomName,p.currentStep=kt.SELECT_TOPICS;break;case Ve.THREAD:p.groupId=g.groupId,p.threadId=g.threadId,p.currentStep=kt.SELECT_TOPICS;break;case Ve.MESSAGE:p.groupId=g.groupId,p.threadId=g.threadId,p.messageId=g.messageId,p.currentStep=kt.SELECT_TOPICS;break;case Ve.PHOTO:p.extraData=g.extraData,p.roomId=g.roomId,p.reportedUserId=g.reportedUserId,p.roomObjectId=g.roomObjectId,p.currentStep=kt.SELECT_TOPICS;break}e(p)};return U(hp,u=>{const g=u.getParser();let p=g.messageText;switch(g.resultType){case Yo.TOO_MANY_PENDING_CALLS_CODE:D(new pp),s(m("help.cfh.error.pending"),ue.MODERATION,null,null,m("help.cfh.error.title"));break;case Yo.HAS_ABUSIVE_CALL_CODE:s(m("help.cfh.error.abusive"),ue.MODERATION,null,null,m("help.cfh.error.title"));break;default:p.trim().length===0&&(p=m("help.cfh.sent.text")),s(p,ue.MODERATION,null,null,m("help.cfh.sent.title"))}}),U(fp,u=>{const g=u.getParser(),p=g.messageText.length===0?m("help.cfh.closed."+db(g.closeReason)):g.messageText;s(p,ue.MODERATION,null,null,m("mod.alert.title"))}),U(Ep,u=>{const g=u.getParser();g.count>0&&o(m("help.emergency.pending.title")+`
`+g.pendingCalls[0].message,()=>{D(new Ip)},null,m("help.emergency.pending.button.discard"),m("help.emergency.pending.button.keep"),m("help.emergency.pending.message.subtitle"))}),U(Cp,u=>{s("Your pending calls were deleted",ue.MODERATION,null,null,m("mod.alert.title"))}),U(_p,u=>{const g=u.getParser();s(g.message,ue.MODERATION,null,null,m("help.cfh.reply.title"))}),U(bp,u=>{const g=u.getParser();s(m("help.emergency.global_mute.message"),ue.MODERATION,g.infoUrl,m("help.emergency.global_mute.link"),m("help.emergency.global_mute.subtitle"))}),U(Np,u=>{const g=u.getParser();n(g)}),{activeReport:a,setActiveReport:e,sanctionInfo:r,setSanctionInfo:n,report:c}},Or=()=>ct(iN),Ia=()=>{const[a,e]=i.exports.useState([]),r=i.exports.useMemo(()=>!!a.length,[a]),n=i.exports.useCallback(()=>{let o=-1;return e(c=>{const u=[...c];return o=u.length?u[u.length-1]+1:0,u.push(o),u}),o},[]),s=i.exports.useCallback(o=>{e(c=>{const u=[...c],g=u.indexOf(o);return g===-1?c:(u.splice(g,1),u)})},[]);return{isVisible:r,activate:n,deactivate:s}},lN=a=>D(new Tp(a)),cN=(a,e)=>D(new vp(a,...e)),uN=()=>{const[a,e]=i.exports.useState(new Map),r=i.exports.useCallback(g=>{var p;return((p=a.get(g))==null?void 0:p.length)||0},[a]),n=i.exports.useMemo(()=>{let g=0;for(const p of a.keys())g+=r(p);return g},[a,r]),s=i.exports.useCallback(g=>{let p=!0;return e(d=>{if(!d.has(g))return p=!1,d;const h=new Map(d);return h.delete(g),lN(g),h}),p},[]),o=i.exports.useCallback((g,p)=>{let d=!0;return e(h=>{if(!h.has(g))return d=!1,h;const C=new Map(h),I=C.get(g);if(I)for(const f of p)I.splice(I.indexOf(f),1);return cN(g,p),C}),d},[]),c=i.exports.useCallback((g,p)=>a.has(g)?a.get(g).indexOf(p)>=0:!1,[a]),u=i.exports.useCallback((g,p)=>{e(d=>{if(!d.has(g))return d;const h=new Map(d),C=h.get(g),I=C.indexOf(p);return I>=0&&C.splice(I,1),h})},[]);return U(Sp,g=>{const p=g.getParser();e(d=>{const h=new Map(d);for(const C of p.categories){let I=h.get(C);I||(I=[],h.set(C,I));const f=p.getItemsByCategory(C);for(const _ of f)I.indexOf(_)===-1&&I.push(_)}return h})}),{getCount:r,getFullCount:n,resetCategory:s,resetItems:o,isUnseen:c,removeUnseen:u}},fr=()=>ct(uN),dN=()=>{const[a,e]=i.exports.useState(!0),[r,n]=i.exports.useState([]),[s,o]=i.exports.useState(new Map),[c,u]=i.exports.useState([]),[g,p]=i.exports.useState(null),{isVisible:d=!1,activate:h=null,deactivate:C=null}=Ia(),{isUnseen:I=null,resetCategory:f=null}=fr(),_=K("user.badges.max.slots",5),E=O=>c.indexOf(O)>=0,b=()=>c.length<_,T=O=>{u(R=>{const x=[...R],F=x.indexOf(O);if(F===-1){if(!b())return R;x.push(O)}else x.splice(F,1);const A=new yp;for(let k=0;k<_;k++)A.addActivatedBadge(x[k]??"");return D(A),x})},w=O=>r.indexOf(O)===-1?0:s.get(O)??0;return U(wp,O=>{const R=O.getParser(),x=[];o(F=>{const A=new Map(F);return R.getAllBadgeCodes().forEach(k=>{const y=r.indexOf(k)>=0,P=R.getBadgeId(k);A.set(k,P),!y&&x.push(k)}),A}),u(R.getActiveBadgeCodes()),n(F=>[...F,...x])}),U(Rp,O=>{const R=O.getParser(),x=I(qe.BADGE,R.badgeId);n(F=>{const A=[...F];return x?A.unshift(R.badgeCode):A.push(R.badgeCode),A}),o(F=>{const A=new Map(F);return A.set(R.badgeCode,R.badgeId),A})}),i.exports.useEffect(()=>{!r||!r.length||p(O=>{let R=O;return R&&r.indexOf(R)===-1&&(R=null),R||(R=r[0]),R})},[r]),i.exports.useEffect(()=>{if(d)return()=>{f(qe.BADGE)}},[d,f]),i.exports.useEffect(()=>{!d||!a||(D(new xp),e(!1))},[d,a]),{badgeCodes:r,activeBadgeCodes:c,selectedBadgeCode:g,setSelectedBadgeCode:p,isWearingBadge:E,canWearBadges:b,toggleBadge:T,getBadgeId:w,activate:h,deactivate:C}},Ea=()=>ct(dN),mN=()=>{const[a,e]=i.exports.useState(!0),[r,n]=i.exports.useState([]),[s,o]=i.exports.useState(null),{isVisible:c=!1,activate:u=null,deactivate:g=null}=Ia(),{isUnseen:p=null,resetCategory:d=null}=fr();return U(Op,h=>{const C=h.getParser();n(I=>{const f=[...I],_=f.map(b=>b.botData.id),E=[];for(const b of C.items.values())_.indexOf(b.id)===-1&&E.push(b);for(const b of _){let T=!0;for(const R of C.items.values())if(R.id===b){T=!1;break}if(!T)continue;const w=f.findIndex(R=>R.botData.id===b),O=f[w];w===-1||!O||(fs()===O.botData.id&&(qs(),Z("inventory/open")),f.splice(w,1))}for(const b of E){const T={botData:b};p(qe.BOT,b.id)?f.unshift(T):f.push(T)}return f})}),U(kp,h=>{const C=h.getParser();n(I=>{const f=[...I];if(f.findIndex(T=>T.botData.id===C.item.id)>=0)return I;const E={botData:C.item};return p(qe.BOT,E.botData.id)?f.unshift(E):f.push(E),f})}),U(Ap,h=>{const C=h.getParser();n(I=>{const f=[...I],_=f.findIndex(E=>E.botData.id===C.itemId);return _===-1?I:(f.splice(_,1),fs()===C.itemId&&(qs(),Z("inventory/show")),f)})}),i.exports.useEffect(()=>{!r||!r.length||o(h=>{let C=h;return C&&r.indexOf(C)===-1&&(C=null),C||(C=r[0]),C})},[r]),i.exports.useEffect(()=>{if(c)return()=>{d(qe.BOT)}},[c,d]),i.exports.useEffect(()=>{!c||!a||(D(new Pp),e(!1))},[c,a]),{botItems:r,selectedBot:s,setSelectedBot:o,activate:u,deactivate:g}},Gd=()=>ct(mN);let bo=null;const gN=()=>{const[a,e]=i.exports.useState(!0),[r,n]=i.exports.useState([]),[s,o]=i.exports.useState(null),{isVisible:c=!1,activate:u=null,deactivate:g=null}=Ia(),{isUnseen:p=null,resetCategory:d=null}=fr(),h=f=>{if(!(!r||!r.length))return r.filter(_=>_.type===f)},C=f=>{if(!(!r||!r.length)){for(const _ of r){const E=_.getItemById(f);if(E&&E.isWallItem)return _}return null}},I=f=>{if(!(!r||!r.length)){for(const _ of r){const E=_.getItemById(f);if(E&&!E.isWallItem)return _}return null}};return U(Eu,f=>{const _=f.getParser();n(E=>{const b=[...E];for(const T of _.items){let w=0,O=null;for(;w<b.length;){const R=b[w];let x=0;for(;x<R.items.length;){const F=R.items[x];if(F.id===T.itemId){F.update(T);const A=[...R.items];A[x]=F,R.items=A,O=R;break}x++}if(O)break;w++}if(O)O.hasUnseenItems=!0,b[w]=$t(O);else{const R=new js(T);kl(b,R,p(qe.FURNI,T.itemId)),St(new ea(R.id,R.type,R.category))}}return b})}),U(si,f=>{const _=f.getParser();bo||(bo=new Array(_.totalFragments));const E=F_(_.fragment,_.totalFragments,_.fragmentNumber,bo);E&&(n(b=>{const T=[...b],w=G_(T);for(const O of w){if(E.get(O))continue;let R=0;for(;R<T.length;){const x=T[R],F=x.remove(O);if(!F){R++;continue}fs()===F.ref&&(qs(),Is(x)||Z("inventory/show")),x.getTotalCount()<=0&&(T.splice(R,1),x.dispose());break}}for(const O of E.keys()){if(w.indexOf(O)>=0)continue;const R=E.get(O);if(!R)continue;const x=new js(R);kl(T,x,p(qe.FURNI,O)),St(new ea(x.id,x.type,x.category))}return T}),bo=null)}),U(Dp,f=>{e(!0)}),U(Cu,f=>{const _=f.getParser();n(E=>{const b=[...E];let T=0;for(;T<b.length;){const w=b[T],O=w.remove(_.itemId);if(!O){T++;continue}fs()===O.ref&&(qs(),Is(w)||Z("inventory/show")),w.getTotalCount()<=0&&(b.splice(T,1),w.dispose());break}return b})}),U(Mp,f=>{}),i.exports.useEffect(()=>{!r||!r.length||o(f=>{let _=f;return _&&r.indexOf(_)===-1&&(_=null),_||(_=r[0]),_})},[r]),i.exports.useEffect(()=>{if(c)return()=>{d(qe.FURNI)&&n(f=>{const _=[...f];for(const E of _)E.hasUnseenItems=!1;return _})}},[c,d]),i.exports.useEffect(()=>{!c||!a||(D(new Lp),e(!1))},[c,a]),{isVisible:c,groupItems:r,setGroupItems:n,selectedItem:s,setSelectedItem:o,activate:u,deactivate:g,getWallItemById:C,getFloorItemById:I,getItemsByType:h}},Xn=()=>ct(gN);let No=null;const pN=()=>{const[a,e]=i.exports.useState(!0),[r,n]=i.exports.useState([]),[s,o]=i.exports.useState(null),{isVisible:c=!1,activate:u=null,deactivate:g=null}=Ia(),{isUnseen:p=null,resetCategory:d=null}=fr();return U(Up,h=>{const C=h.getParser();No||(No=new Array(C.totalFragments));const I=W_(C.fragment,C.totalFragments,C.fragmentNumber,No);I&&(n(f=>{const _=[...f];return H_(_,I,p),_}),No=null)}),U(Fp,h=>{const C=h.getParser();n(I=>{const f=[...I];return td(C.pet,f,p(qe.PET,C.pet.id)),f})}),U(Gp,h=>{const C=h.getParser();n(I=>{const f=[...I];return rd(C.petId,f),f})}),i.exports.useEffect(()=>{!r||!r.length||o(h=>{let C=h;return C&&r.indexOf(C)===-1&&(C=null),C||(C=r[0]),C})},[r]),i.exports.useEffect(()=>{if(c)return()=>{d(qe.PET)}},[c,d]),i.exports.useEffect(()=>{!c||!a||(D(new Bp),e(!1))},[c,a]),{petItems:r,selectedPet:s,setSelectedPet:o,activate:u,deactivate:g}},Bd=()=>ct(pN),hN=()=>{const[a,e]=i.exports.useState(null),[r,n]=i.exports.useState(null),[s,o]=i.exports.useState(rt.TRADING_STATE_READY),{groupItems:c=[],setGroupItems:u=null,activate:g=null,deactivate:p=null}=Xn(),{simpleAlert:d=null,showTradeAlert:h=null}=Xe(),C=s>=rt.TRADING_STATE_RUNNING,I=()=>{switch(s){case rt.TRADING_STATE_RUNNING:!r.itemCount&&!a.accepts&&d(m("inventory.trading.warning.other_not_offering"),null,null,null),a.accepts?D(new Zp):D(new eh);return;case rt.TRADING_STATE_CONFIRMING:D(new Jp),o(rt.TRADING_STATE_CONFIRMED);return}},f=E=>{const b=E.getLastItem();b&&D(new th(b.id))},_=()=>{if(C)switch(s){case rt.TRADING_STATE_RUNNING:D(new nh);return;default:D(new rh);return}};return U(Vp,E=>{const b=E.getParser();!a||!r||(a.userId===b.userID?e(T=>{const w=$t(T);return w.accepts=b.userAccepts,w}):r.userId===b.userID&&n(T=>{const w=$t(T);return w.accepts=b.userAccepts,w}))}),U(Wp,E=>{const b=E.getParser();b.reason===Hp.ERROR_WHILE_COMMIT?h(bt.ERROR_WHILE_COMMIT):a&&b.userID!==a.userId&&h(bt.THEY_CANCELLED),e(null),n(null),o(rt.TRADING_STATE_READY)}),U(jp,E=>{E.getParser(),e(null),n(null),o(rt.TRADING_STATE_READY)}),U(qp,E=>{E.getParser(),o(rt.TRADING_STATE_COUNTDOWN)}),U(zp,E=>{const b=E.getParser(),T=Dl(b.firstUserItemArray),w=Dl(b.secondUserItemArray);e(O=>{const R=$t(O);R.userId===b.firstUserID?(R.creditsCount=b.firstUserNumCredits,R.itemCount=b.firstUserNumItems,R.userItems=T):(R.creditsCount=b.secondUserNumCredits,R.itemCount=b.secondUserNumItems,R.userItems=w);const x=[];for(const F of R.userItems.getValues()){let A=0;for(;A<F.getTotalCount();){const k=F.getItemByIndex(A);k&&x.push(k.ref),A++}}return u(F=>{const A=[...F];for(const k of A)k.lockItemIds(x);return A}),R}),n(O=>{const R=$t(O);return R.userId===b.firstUserID?(R.creditsCount=b.firstUserNumCredits,R.itemCount=b.firstUserNumItems,R.userItems=T):(R.creditsCount=b.secondUserNumCredits,R.itemCount=b.secondUserNumItems,R.userItems=w),R})}),U(Yp,E=>{E.getParser()}),U($p,E=>{const b=E.getParser(),T=new Al,w=ye().userDataManager.getUserData(b.userID);T.userItems=new Fs;const O=new Al,R=ye().userDataManager.getUserData(b.otherUserID);O.userItems=new Fs,w.webID===H().userId?(T.userId=w.webID,T.userName=w.name,T.canTrade=b.userCanTrade,O.userId=R.webID,O.userName=R.name,O.canTrade=b.otherUserCanTrade):R.webID===H().userId&&(T.userId=R.webID,T.userName=R.name,T.canTrade=b.otherUserCanTrade,O.userId=w.webID,O.userName=w.name,O.canTrade=b.userCanTrade),e(T),n(O),o(rt.TRADING_STATE_RUNNING)}),U(Kp,E=>{const b=E.getParser();h(b.reason,b.otherUserName)}),U(Xp,E=>{E.getParser(),h(bt.THEY_NOT_ALLOWED)}),U(Qp,E=>{E.getParser(),h(bt.YOU_NOT_ALLOWED)}),i.exports.useEffect(()=>{if(s===rt.TRADING_STATE_READY)return;const E=g();return()=>p(E)},[s,g,p]),{ownUser:a,otherUser:r,tradeState:s,setTradeState:o,isTrading:C,groupItems:c,progressTrade:I,removeItem:f,stopTrading:_}},Vd=()=>ct(hN),fN=()=>{const[a,e]=i.exports.useState(null),[r,n]=i.exports.useState([]),[s,o]=i.exports.useState([]),[c,u]=i.exports.useState([]),[g,p]=i.exports.useState([]),[d,h]=i.exports.useState([]),[C,I]=i.exports.useState([]),{simpleAlert:f=null}=Xe(),_=P=>{r.indexOf(P)>=0||n(G=>[...G,P])},E=P=>{n(G=>{const B=[...G],Y=B.indexOf(P);return Y>=0&&B.splice(Y),B})},b=P=>{r.indexOf(P)>=0?E(P):_(P)},T=P=>{s.indexOf(P)>=0||o(G=>[...G,P])},w=P=>{o(G=>{const B=[...G],Y=B.indexOf(P);return Y>=0&&B.splice(Y),B})},O=P=>{s.indexOf(P)>=0?w(P):T(P)},R=P=>{c.indexOf(P)>=0||u(G=>[...G,P])},x=P=>{u(G=>{const B=[...G],Y=B.indexOf(P);return Y>=0&&B.splice(Y),B})},F=P=>{c.indexOf(P)>=0?x(P):R(P)},A=P=>{g.indexOf(P)>=0||p(G=>[...G,P])},k=P=>{p(G=>{const B=[...G],Y=B.indexOf(P);return Y>=0&&B.splice(Y),B})},y=P=>{s.indexOf(P)>=0?k(P):A(P)};return U(sh,P=>{const B=P.getParser().data;e(B),h(B.issues)}),U(oh,P=>{const G=P.getParser();h(B=>{const Y=[...B],X=Y.findIndex(z=>z.issueId===G.issueData.issueId);return X>=0?Y[X]=G.issueData:(Y.push(G.issueData),Jr(ir.MODTOOLS_NEW_TICKET)),Y})}),U(ah,P=>{P.getParser()}),U(ih,P=>{P.getParser()&&f("Failed to pick issue",ue.DEFAULT,null,null,"Error")}),U(lh,P=>{const G=P.getParser();h(B=>{const Y=[...B],X=Y.findIndex(z=>z.issueId===G.issueId);return X>=0&&Y.splice(X,1),Y})}),U(ch,P=>{P.getParser().success?f("Moderation action was successfull",ue.MODERATION,null,null,"Success"):f("There was a problem applying tht moderation action",ue.MODERATION,null,null,"Error")}),U(uh,P=>{const G=P.getParser();I(G.callForHelpCategories)}),U(dh,P=>{P.getParser()}),{settings:a,openRooms:r,openRoomChatlogs:s,openUserChatlogs:g,openUserInfos:c,cfhCategories:C,tickets:d,openRoomInfo:_,closeRoomInfo:E,toggleRoomInfo:b,openRoomChatlog:T,closeRoomChatlog:w,toggleRoomChatlog:O,openUserInfo:R,closeUserInfo:x,toggleUserInfo:F,openUserChatlog:A,closeUserChatlog:k,toggleUserChatlog:y}},ws=()=>ct(fN),IN=()=>{const[a,e]=i.exports.useState(null),[r,n]=i.exports.useState(null),[s,o]=i.exports.useState(null),[c,u]=i.exports.useState(null),[g,p]=i.exports.useState({roomInfo:null,state:Ae.NONE}),[d,h]=i.exports.useState(null),[C,I]=i.exports.useState({settingsReceived:!1,homeRoomId:0,enteredGuestRoom:null,currentRoomOwner:!1,currentRoomId:0,currentRoomIsStaffPick:!1,createdFlatId:0,avatarId:0,roomPicker:!1,eventMod:!1,currentRoomRating:0,canRate:!0}),{simpleAlert:f=null}=Xe();return U(mh,_=>{const E=_.getParser();D(new Ho(E.roomId,!1,!1))}),U(gh,_=>{const E=_.getParser();E.canCreate||f(m(`navigator.cannotcreateevent.error.${E.errorCode}`),null,null,null,m("navigator.cannotcreateevent.title"))}),U(bu,_=>{D(new ph),D(new _u)}),U(hh,_=>{const E=_.getParser();I(b=>{const T={...b};return T.eventMod=E.securityLevel>=jo.MODERATOR,T.roomPicker=E.securityLevel>=jo.COMMUNITY,T})}),U(fh,_=>{const E=_.getParser();Kt(E.roomId)}),U(Nu,_=>{const E=_.getParser();I(b=>{const T={...b};return T.enteredGuestRoom=null,T.currentRoomOwner=E.isOwner,T.currentRoomId=E.roomId,T}),D(new Ho(E.roomId,!0,!1)),Bs.available&&Bs.call("legacyTrack","navigator","private",[E.roomId])}),U(Ts,_=>{const E=_.getParser();if(E.roomEnter)p({roomInfo:null,state:Ae.NONE}),I(b=>{const T={...b};return T.enteredGuestRoom=E.data,T.currentRoomIsStaffPick=E.staffPick,!(T.createdFlatId===E.data.roomId)&&E.data.displayRoomEntryAd&&K("roomenterad.habblet.enabled",!1)&&Ys.openRoomEnterAd(),T.createdFlatId=0,T.enteredGuestRoom&&T.enteredGuestRoom.habboGroupId>0,T});else if(E.roomForward){if(E.data.ownerName!==H().userName&&!E.isGroupMember)switch(E.data.doorMode){case nt.DOORBELL_STATE:p(b=>{const T={...b};return T.roomInfo=E.data,T.state=Ae.START_DOORBELL,T});return;case nt.PASSWORD_STATE:p(b=>{const T={...b};return T.roomInfo=E.data,T.state=Ae.START_PASSWORD,T});return}if(E.data.doorMode===nt.NOOB_STATE&&!H().isAmbassador&&!H().isRealNoob&&!H().isModerator)return;Vn(E.data.roomId)}else I(b=>{const T={...b};return T.enteredGuestRoom=E.data,T.currentRoomIsStaffPick=E.staffPick,T})}),U(Ih,_=>{const E=_.getParser();I(b=>{const T={...b};return T.currentRoomRating=E.totalLikes,T.canRate=E.canLike,T})}),U(Eh,_=>{const E=_.getParser();(!E.userName||E.userName.length===0)&&p(b=>{const T={...b};return T.state=Ae.STATE_WAITING,T})}),U(Ch,_=>{const E=_.getParser();(!E.userName||E.userName.length===0)&&p(b=>{const T={...b};return T.state=Ae.STATE_ACCEPTED,T})}),U(_h,_=>{const E=_.getParser();(!E.userName||E.userName.length===0)&&p(b=>{const T={...b};return T.state=Ae.STATE_NO_ANSWER,T})}),U(bh,_=>{switch(_.getParser().errorCode){case-100002:p(b=>{const T={...b};return T.state=Ae.STATE_WRONG_PASSWORD,T});return;case 4009:f(m("navigator.alert.need.to.be.vip"),ue.DEFAULT,null,null,m("generic.alert.title"));return;case 4010:f(m("navigator.alert.invalid_room_name"),ue.DEFAULT,null,null,m("generic.alert.title"));return;case 4011:f(m("navigator.alert.cannot_perm_ban"),ue.DEFAULT,null,null,m("generic.alert.title"));return;case 4013:f(m("navigator.alert.room_in_maintenance"),ue.DEFAULT,null,null,m("generic.alert.title"));return}}),U(Nh,_=>{const E=_.getParser();u(E.topLevelContexts),o(E.topLevelContexts.length?E.topLevelContexts[0]:null)}),U(Sh,_=>{const E=_.getParser();o(b=>{let T=b;if(T||(T=c&&c.length&&c[0]||null),!T)return null;if(E.result.code!==T.code&&c&&c.length)for(const w of c)w.code===E.result.code&&(T=w);for(const w of c)w.code===E.result.code&&(T=w);return T}),h(E.result)}),U(Th,_=>{const E=_.getParser();e(E.categories)}),U(vh,_=>{const E=_.getParser();n(E.categories)}),U(wh,_=>{const E=_.getParser();Vn(E.roomId)}),U(Rh,_=>{const E=_.getParser();let b=!1;if(I(O=>{b=O.settingsReceived;const R={...O};return R.homeRoomId=E.homeRoomId,R.settingsReceived=!0,R}),b)return;let T=-1,w=-1;K("friend.id")!==void 0&&parseInt(K("friend.id"))>0&&(T=0,D(new wi(parseInt(K("friend.id"))))),K("forward.type")!==void 0&&K("forward.id")!==void 0&&(T=parseInt(K("forward.type")),w=parseInt(K("forward.id"))),T===2?Kt(w):T===-1&&E.roomIdToEnter>0&&(Z("navigator/close"),E.roomIdToEnter!==E.homeRoomId?Vn(E.roomIdToEnter):Vn(E.homeRoomId))}),U(xh,_=>{const E=_.getParser();switch(E.reason){case va.REASON_FULL:f(m("navigator.guestroomfull.text"),ue.DEFAULT,null,null,m("navigator.guestroomfull.title"));break;case va.REASON_QUEUE_ERROR:f(m(`room.queue.error.${E.parameter}`),ue.DEFAULT,null,null,m("room.queue.error.title"));break;case va.REASON_BANNED:f(m("navigator.banned.text"),ue.DEFAULT,null,null,m("navigator.banned.title"));break;default:f(m("room.queue.error.title"),ue.DEFAULT,null,null,m("room.queue.error.title"));break}yi()}),U(yh,_=>Z("navigator/show")),{categories:a,doorData:g,setDoorData:p,topLevelContext:s,topLevelContexts:c,searchResult:d,navigatorData:C}},kr=()=>ct(IN),EN=()=>{const[a,e]=i.exports.useState(new Gi),r=i.exports.useMemo(()=>K("hc.disabled",!1),[]),n=i.exports.useMemo(()=>r||a.clubDays>0?Mr.ACTIVE:a.pastVipDays>0||a.pastVipDays>0?Mr.EXPIRED:Mr.NONE,[a,r]),s=o=>{if(o===-1)return a.credits;for(const[c,u]of a.activityPoints.entries())if(c===o)return u;return 0};return U(Oh,o=>{const c=o.getParser();e(u=>{const g=$t(u);return g.credits=parseFloat(c.credits),u.credits!==g.credits&&Jr(ir.CREDITS),g})}),U(kh,o=>{const c=o.getParser();e(u=>{const g=$t(u);return g.activityPoints=c.currencies,g})}),U(du,o=>{const c=o.getParser();e(u=>{const g=$t(u);return g.activityPoints=new Map(g.activityPoints),g.activityPoints.set(c.type,c.amount),c.type===0&&Jr(ir.DUCKETS),g})}),U(Ph,o=>{const c=o.getParser(),u=c.productName;u!=="club_habbo"&&u!=="habbo_club"||e(g=>{const p=$t(g);return p.clubDays=Math.max(0,c.daysToPeriodEnd),p.clubPeriods=Math.max(0,c.periodsSubscribedAhead),p.isVip=c.isVip,p.pastClubDays=c.pastClubDays,p.pastVipDays=c.pastVipDays,p.isExpiring=c.responseType===Ah.RESPONSE_TYPE_DISCOUNT_AVAILABLE,p.minutesUntilExpiration=c.minutesUntilExpiration,p.minutesSinceLastModified=c.minutesSinceLastModified,p})}),i.exports.useEffect(()=>{if(r)return;D(new il("habbo_club"));const o=setInterval(()=>D(new il("habbo_club")),5e4);return()=>clearInterval(o)},[r]),i.exports.useEffect(()=>{D(new Dh)},[]),{purse:a,hcDisabled:r,clubStatus:n,getCurrencyAmount:s}},Qn=()=>ct(EN),CN=(a,e)=>{i.exports.useEffect(()=>{if(!a)return;const r=n=>e(n);return Qr.addEventListener(we.FURNI_ADDED,r),()=>{Qr.removeEventListener(we.FURNI_ADDED,r)}},[a,e])},Ir=(a,e)=>{i.exports.useEffect(()=>{if(!a)return;const r=n=>e(n);return Qr.addEventListener(we.FURNI_REMOVED,r),()=>{Qr.removeEventListener(we.FURNI_REMOVED,r)}},[a,e])},_N=a=>{lt(we.OBJECT_DESELECTED,a)},bN=a=>{lt(we.OBJECT_ROLL_OUT,a)},NN=a=>{lt(we.OBJECT_ROLL_OVER,a)},zi=a=>{lt(we.OBJECT_SELECTED,a)},Hd=(a,e)=>{i.exports.useEffect(()=>{if(!a)return;const r=n=>e(n);return Qr.addEventListener(we.USER_ADDED,r),()=>{Qr.removeEventListener(we.USER_ADDED,r)}},[a,e])},Wd=(a,e)=>{i.exports.useEffect(()=>{if(!a)return;const r=n=>e(n);return Qr.addEventListener(we.USER_REMOVED,r),()=>{Qr.removeEventListener(we.USER_REMOVED,r)}},[a,e])},SN=()=>{const[a,e]=i.exports.useState(null),[r,n]=i.exports.useState(!1);return U(Mh,s=>{const o=s.getParser();o&&e(o)}),{promoteInformation:a,isExtended:r,setPromoteInformation:e,setIsExtended:n}},Yi=()=>ct(SN),TN=()=>{const[a,e]=i.exports.useState(null),[r,n]=i.exports.useState(null),[s,o]=i.exports.useState(null),[c,u]=i.exports.useState(0),g=(d,h,C,I=!1)=>{if(!r)return;const f=sr.hslToRGB(((d&255)<<16)+((h&255)<<8)+(C&255));I&&u(f),!d&&!h&&!C?r.tint=0:r.tint=f},p=d=>{if(!s)return;const h=d>>16&255,C=d>>8&255,I=d&255;s.red=h/255,s.green=C/255,s.blue=I/255};return lt(Tn.PREVIEW,d=>g(d.hue,d.saturation,d.lightness)),lt(Tn.CLEAR_PREVIEW,d=>{r&&(r.tint=c)}),Se(Lh.ROOM_BACKGROUND_COLOR,d=>{Bn.isRoomPreviewerId(d.roomId)||(d.enable?g(d.hue,d.saturation,d.lightness,!0):g(0,0,0,!0))}),Se(Uh.ROOM_COLOR,d=>{if(Bn.isRoomPreviewerId(d.roomId))return;let h=0,C=255;d.bgOnly||(h=d.color,C=d.brightness),p(sr.hslToRGB((sr.rgbToHSL(h)&16776960)+C))}),Se([gr.INITIALIZED,gr.DISPOSED],d=>{if(Bn.isRoomPreviewerId(d.roomId))return;const h=ye();if(h)switch(d.type){case gr.INITIALIZED:xl(d.roomId),e(h);return;case gr.DISPOSED:e(null);return}}),ze([Wt.CREATED,Wt.ENDED],d=>{switch(d.type){case Wt.CREATED:y_(d.session);return;case Wt.ENDED:e(null);return}}),Se([ht.SELECTED,ht.DESELECTED,ht.ADDED,ht.REMOVED,ht.PLACED,ht.REQUEST_MOVE,ht.REQUEST_ROTATE,ht.MOUSE_ENTER,ht.MOUSE_LEAVE,ht.DOUBLE_CLICK],d=>{if(Bn.isRoomPreviewerId(d.roomId))return;let h=null;switch(d.type){case ht.SELECTED:k_(d)||(h=new we(we.OBJECT_SELECTED,d.objectId,d.category,d.roomId));break;case ht.DESELECTED:h=new we(we.OBJECT_DESELECTED,d.objectId,d.category,d.roomId);break;case ht.ADDED:{let C=null;switch(d.category){case Q.FLOOR:case Q.WALL:C=we.FURNI_ADDED;break;case Q.UNIT:C=we.USER_ADDED;break}C&&(h=new we(C,d.objectId,d.category,d.roomId));break}case ht.REMOVED:{let C=null;switch(d.category){case Q.FLOOR:case Q.WALL:C=we.FURNI_REMOVED;break;case Q.UNIT:C=we.USER_REMOVED;break}C&&(h=new we(C,d.objectId,d.category,d.roomId));break}case ht.REQUEST_MOVE:Hs(a,d.objectId,d.category)&&ls(d.objectId,d.category,Dr.OBJECT_MOVE);break;case ht.REQUEST_ROTATE:Hs(a,d.objectId,d.category)&&ls(d.objectId,d.category,Dr.OBJECT_ROTATE_POSITIVE);break;case ht.MOUSE_ENTER:h=new we(we.OBJECT_ROLL_OVER,d.objectId,d.category,d.roomId);break;case ht.MOUSE_LEAVE:h=new we(we.OBJECT_ROLL_OUT,d.objectId,d.category,d.roomId);break;case ht.DOUBLE_CLICK:h=new we(we.OBJECT_DOUBLE_CLICKED,d.objectId,d.category,d.roomId);break}h&&St(h)}),i.exports.useEffect(()=>{if(!a)return;const d=Ce(),h=q(),C=a.roomId,I=1,f=Math.floor(window.innerWidth),_=Math.floor(window.innerHeight),E=d.application.renderer;E&&(E.view.style.width=`${f}px`,E.view.style.height=`${_}px`,E.resolution=window.devicePixelRatio,E.resize(f,_));const b=h.getRoomInstanceDisplay(C,I,f,_,Fh.SCALE_ZOOMED_IN),T=q().getRoomInstanceRenderingCanvas(C,I);if(!b||!T)return;const w=new Bo(Gh.WHITE),O=new Bh,R=T.master;w.tint=0,w.width=f,w.height=_,R.addChildAt(w,0),R.filters=[O],n(w),o(O);const x=h.getRoomInstanceGeometry(C,I);if(x){const k=h.getRoomInstanceVariable(C,ao.ROOM_MIN_X)||0,y=h.getRoomInstanceVariable(C,ao.ROOM_MAX_X)||0,P=h.getRoomInstanceVariable(C,ao.ROOM_MIN_Y)||0,G=h.getRoomInstanceVariable(C,ao.ROOM_MAX_Y)||0;let B=(k+y)/2,Y=(P+G)/2;const X=20;B=B+(X-1),Y=Y+(X-1);const z=Math.sqrt(X*X+X*X)*Math.tan(30/180*Math.PI);x.location=new Rt(B,Y,z)}const F=d.application.stage;if(!F)return;F.addChild(b),xl(a.roomId);const A=k=>{const y=Math.floor(window.innerWidth),P=Math.floor(window.innerHeight);E.view.style.width=`${y}px`,E.view.style.height=`${P}px`,E.resolution=window.devicePixelRatio,E.resize(y,P),w.width=y,w.height=P,O_(y,P,1),d.application.render()};return window.addEventListener("resize",A),()=>{n(null),o(null),u(0),window.removeEventListener("resize",A)}},[a]),{roomSession:a}},Ge=()=>ct(TN),vN=()=>{const[a,e]=i.exports.useState(-1),[r,n]=i.exports.useState(-1),[s,o]=i.exports.useState(0),{roomSession:c=null}=Ge(),u=()=>{const d=sr.rgbToHSL(s),[h,C,I,f]=Qt.int_to_8BitVals(d);D(new Vh(a,C,I,f))},g=()=>c.useMultistateItem(a),p=()=>{St(new Tn(Tn.CLEAR_PREVIEW)),e(-1),n(-1),o(0)};return Se(ve.REQUEST_BACKGROUND_COLOR,d=>{if(!Hs(c,d.objectId,d.category))return;const C=q().getRoomObject(d.roomId,d.objectId,d.category).model;e(d.objectId),n(d.category);const I=parseInt(C.getValue(te.FURNITURE_ROOM_BACKGROUND_COLOR_HUE)),f=parseInt(C.getValue(te.FURNITURE_ROOM_BACKGROUND_COLOR_SATURATION)),_=parseInt(C.getValue(te.FURNITURE_ROOM_BACKGROUND_COLOR_LIGHTNESS)),E=Qt.eight_bitVals_to_int(0,I,f,_),b=sr.hslToRGB(E);o(b)}),Ir(a!==-1&&r!==-1,d=>{d.id!==a||d.category!==r||p()}),i.exports.useEffect(()=>{if(a===-1||r===-1)return;const d=sr.rgbToHSL(s),[h,C,I,f]=Qt.int_to_8BitVals(d);St(new Tn(Tn.PREVIEW,C,I,f))},[a,r,s]),{objectId:a,color:s,setColor:o,applyToner:u,toggleToner:g,onClose:p}},wN=vN,RN=()=>{const[a,e]=i.exports.useState(-1),[r,n]=i.exports.useState(-1),[s,o]=i.exports.useState("1"),[c,u]=i.exports.useState(""),[g,p]=i.exports.useState(""),[d,h]=i.exports.useState(""),[C,I]=i.exports.useState(""),{simpleAlert:f=null}=Xe(),_=()=>{e(-1),n(-1),o("1"),u(""),p(""),h(""),I("")};return Se([ve.REQUEST_BADGE_DISPLAY_ENGRAVING,ve.REQUEST_ACHIEVEMENT_RESOLUTION_ENGRAVING],E=>{const b=q().getRoomObject(E.roomId,E.objectId,E.category);if(!b)return;const T=new $s;T.initializeFromRoomObjectModel(b.model),e(E.objectId),n(E.category),o("1"),u(Qs(T.getValue(1))),p(Pi(T.getValue(1))),h(T.getValue(2)),I(T.getValue(3))}),Se(ve.REQUEST_ACHIEVEMENT_RESOLUTION_FAILED,E=>{const b=q().getRoomObject(E.roomId,E.objectId,E.category);!b||b.model.getValue(te.FURNITURE_OWNER_ID)!==H().userId||f(`${m("resolution.failed.subtitle")} ${m("resolution.failed.text")}`,null,null,null,m("resolution.failed.title"))}),Ir(a!==-1&&r!==-1,E=>{E.id!==a||E.category!==r||_()}),{objectId:a,category:r,color:s,badgeName:c,badgeDesc:g,date:d,senderName:C,onClose:_}},xN=RN,Ci="MONSTERPLANT_SEED_CONFIRMATION",_i="PURCHASABLE_CLOTHING_CONFIRMATION",jd="GROUP_FURNITURE",qd="EFFECTBOX_OPEN",bi="MYSTERYTROPHY_OPEN_DIALOG",yN=()=>{const[a,e]=i.exports.useState(-1),[r,n]=i.exports.useState(null),[s,o]=i.exports.useState(null),[c,u]=i.exports.useState(-1),[g,p]=i.exports.useState(null),[d,h]=i.exports.useState(!1),[C,I]=i.exports.useState(-1),{roomSession:f=null}=Ge(),_=()=>{e(-1),p(null),h(!1),n(null)},E=()=>{o(null),u(-1)},b=T=>{if(T)switch(T){case"use_friend_furni":f.useMultistateItem(a);break;case"use_monsterplant_seed":o(Ci),u(a);break;case"use_random_teleport":q().useRoomObject(a,Q.FLOOR);break;case"use_purchaseable_clothing":o(_i),u(a);break;case"use_mystery_box":f.useMultistateItem(a);break;case"use_mystery_trophy":o(bi),u(a);break;case"join_group":Fi(g.guildId),h(!0);return;case"go_to_group_homeroom":g&&Kt(g.guildHomeRoomId);break}_()};return Se([ve.OPEN_FURNI_CONTEXT_MENU,ve.CLOSE_FURNI_CONTEXT_MENU,ve.REQUEST_MONSTERPLANT_SEED_PLANT_CONFIRMATION_DIALOG,ve.REQUEST_PURCHASABLE_CLOTHING_CONFIRMATION_DIALOG,ve.REQUEST_EFFECTBOX_OPEN_DIALOG,ve.REQUEST_MYSTERYBOX_OPEN_DIALOG,ve.REQUEST_MYSTERYTROPHY_OPEN_DIALOG],T=>{const w=q().getRoomObject(f.roomId,T.objectId,T.category);if(w)switch(I(w.model.getValue(te.FURNITURE_OWNER_ID)),T.type){case ve.REQUEST_MONSTERPLANT_SEED_PLANT_CONFIRMATION_DIALOG:if(!Vt(w))return;u(w.id),o(Ci),_();return;case ve.REQUEST_EFFECTBOX_OPEN_DIALOG:if(!Vt(w))return;u(w.id),o(qd),_();return;case ve.REQUEST_PURCHASABLE_CLOTHING_CONFIRMATION_DIALOG:if(!Vt(w))return;u(w.id),o(_i),_();return;case ve.REQUEST_MYSTERYBOX_OPEN_DIALOG:f.useMultistateItem(w.id),_();return;case ve.REQUEST_MYSTERYTROPHY_OPEN_DIALOG:if(!Vt(w))return;u(w.id),o(bi),_();return;case ve.OPEN_FURNI_CONTEXT_MENU:switch(e(w.id),T.contextMenu){case Mt.FRIEND_FURNITURE:n(Mt.FRIEND_FURNITURE);return;case Mt.MONSTERPLANT_SEED:Vt(w)&&n(Mt.MONSTERPLANT_SEED);return;case Mt.MYSTERY_BOX:n(Mt.MYSTERY_BOX);return;case Mt.MYSTERY_TROPHY:Vt(w)&&n(Mt.MYSTERY_TROPHY);return;case Mt.RANDOM_TELEPORT:n(Mt.RANDOM_TELEPORT);return;case Mt.PURCHASABLE_CLOTHING:Vt(w)&&n(Mt.PURCHASABLE_CLOTHING);return}return;case ve.CLOSE_FURNI_CONTEXT_MENU:w.id===a&&_();return}}),U(Hh,T=>{const w=T.getParser();e(w.objectId),p(w),h(w.userIsMember),n(jd)}),{objectId:a,mode:r,confirmMode:s,confirmingObjectId:c,groupData:g,isGroupMember:d,objectOwnerId:C,closeConfirm:E,processAction:b,onClose:_}},ON=yN,kN=()=>{const[a,e]=i.exports.useState(-1),[r,n]=i.exports.useState([]),[s,o]=i.exports.useState(null),[c,u]=i.exports.useState([]),[g,p]=i.exports.useState(null),[d,h]=i.exports.useState(new Map),[C,I]=i.exports.useState(!1),{groupItems:f=[],getItemsByType:_=null,activate:E=null,deactivate:b=null}=Xn(),{simpleAlert:T=null}=Xe(),w=s&&d.get(s.name)||null,O=()=>{n([]),o(null),u([]),h(new Map)},R=()=>{e(-1),O()},x=()=>{I(!0),D(new Kh(a,s.name))},F=A=>{o(A),d.get(A.name)||D(new Xh(A.name))};return Se(ve.OPEN_WIDGET,A=>{A.widget===Wh.CRAFTING&&(e(A.objectId),O(),D(new jh(A.objectId)))}),U(qh,A=>{const k=A.getParser();if(!k.isActive()){e(-1);return}n(y=>{const P=[];for(const G of k.recipes){const B=q().roomContentLoader._activeObjectTypeIds.get(G.itemName),Y=q().getFurnitureFloorIconUrl(B);P.push({name:G.recipeName,localizedName:m("roomItem.name."+B),iconUrl:Y})}return P}),p(k.ingredients)}),U(zh,A=>{const k=A.getParser();h(y=>{const P=new Map(y);return P.set(s.name,k.ingredients),P})}),U(Yh,A=>{o(null),I(!1),A.getParser().result&&T(m("crafting.info.result.ok"))}),U($h,A=>{}),i.exports.useEffect(()=>{!g||!g.length||u(A=>{const k=[];for(const y of g){const P=q().roomContentLoader._activeObjectTypeIds.get(y),G=q().getFurnitureFloorIconUrl(P),B=_(P);let Y=0;if(B)for(const X of B)Y+=X.items.length;k.push({name:y,iconUrl:G,count:Y})}return k})},[f,g,_]),i.exports.useEffect(()=>{if(a===-1)return;const A=E();return()=>b(A)},[a,E,b]),{objectId:a,recipes:r,ingredients:c,selectedRecipe:s,requiredIngredients:w,isCrafting:C,selectRecipe:F,craft:x,onClose:R}},AN=kN,PN=()=>{const[a,e]=i.exports.useState([]),[r,n]=i.exports.useState(0),[s,o]=i.exports.useState(0),[c,u]=i.exports.useState(0),[g,p]=i.exports.useState(0),[d,h]=i.exports.useState(16777215),[C,I]=i.exports.useState(255),[f,_]=i.exports.useState(0),[E,b]=i.exports.useState(0),[T,w]=i.exports.useState(0),{roomSession:O=null}=Ge(),R=()=>O.isRoomOwner||O.controllerLevel>=tt.GUEST||H().isModerator,x=A=>{const k=a[A-1];k&&(n(k.id),_(k.type),b(k.color),w(k.light))},F=()=>{if(s===0)return;const A=r-1;if(r<1||r>a.length)return;const k=a[A];!k||f===k.type&&E===k.color&&T===k.light||(e(y=>{const P=[...y];return P[A]=new Vl(k.id,f,E,T),P}),tr.savePreset(k.id,f,E,T,!0))};return Se(ve.REQUEST_DIMMER,A=>{R()&&O.requestMoodlightSettings()}),ze(Qh.ROOM_DIMMER_PRESETS,A=>{const k=[];let y=0;for(;y<A.presetCount;){const P=A.getPreset(y);P&&k.push(new Vl(P.id,P.type,P.color,P.brightness)),y++}e(k),n(A.selectedPresetId)}),Se(Jh.ROOM_COLOR,A=>{Bn.isRoomPreviewerId(A.roomId)||(u(s),o(A.state),n(A.presetId),p(A.effectId),_(A.effectId),h(A.color),b(A.color),I(A.brightness),w(A.brightness))}),i.exports.useEffect(()=>{s===0&&c===0||tr.previewDimmer(E,T,f===2)},[s,c,E,T,f]),{presets:a,selectedPresetId:r,dimmerState:s,lastDimmerState:c,effectId:g,color:d,brightness:C,selectedEffectId:f,setSelectedEffectId:_,selectedColor:E,setSelectedColor:b,selectedBrightness:T,setSelectedBrightness:w,selectPresetId:x,applyChanges:F}},DN=PN,MN=()=>{const[a,e]=i.exports.useState(-1),[r,n]=i.exports.useState(-1),[s,o]=i.exports.useState(0),c=()=>{e(-1),n(-1),o(0)},u=()=>{ye().connection.send(new Zh(a)),c()};return Se(ve.REQUEST_CREDITFURNI,g=>{const p=q().getRoomObject(g.roomId,g.objectId,g.category);!p||!Vt(p)||(e(g.objectId),n(g.category),o(p.model.getValue(te.FURNITURE_CREDIT_VALUE)||0))}),Ir(a!==-1&&r!==-1,g=>{g.id!==a||g.category!==r||c()}),{objectId:a,value:s,redeem:u,onClose:c}},LN=MN,UN=()=>{const[a,e]=i.exports.useState(-1),[r,n]=i.exports.useState(-1),[s,o]=i.exports.useState(-1),[c,u]=i.exports.useState([]),{roomSession:g=null}=Ge(),p=()=>{e(-1),n(-1),o(-1),u([])};return Se(ve.REQUEST_EXTERNAL_IMAGE,d=>{const h=q().getRoomObject(d.roomId,d.objectId,d.category),C=q().getRoomObjects(g==null?void 0:g.roomId,Q.WALL);if(!h)return;const I=[];C.forEach(_=>{if(_.type!=="external_image_wallitem_poster_small")return null;const E=_.model.getValue(te.FURNITURE_DATA),b=JSON.parse(E);I.push(b)}),e(d.objectId),n(d.category),u(I);const f=JSON.parse(h.model.getValue(te.FURNITURE_DATA));o(_=>{let E=0;return f&&(E=I.findIndex(b=>b.u===f.u)),E<0&&(E=0),E})}),Ir(a!==-1&&r!==-1,d=>{d.id!==a||d.category!==r||p()}),{objectId:a,currentPhotoIndex:s,currentPhotos:c,onClose:p}},FN=UN,GN=()=>{const[a,e]=i.exports.useState(-1),[r,n]=i.exports.useState(-1),[s,o]=i.exports.useState(0),[c,u]=i.exports.useState([]),[g,p]=i.exports.useState([]),[d,h]=i.exports.useState(null),[C,I]=i.exports.useState(0),f=()=>{e(-1),n(-1),o(0),u([]),p([]),h(null)},_=E=>{ye().connection.send(new nf(a,E)),f()};return U(ef,E=>{const b=E.getParser();e(b.furniId),I(b.start?1:2)}),U(tf,E=>f()),U(rf,E=>f()),Se(ve.REQUEST_FRIEND_FURNITURE_ENGRAVING,E=>{const b=q().getRoomObject(E.roomId,E.objectId,E.category);if(!b)return;const T=b.model.getValue(te.FURNITURE_DATA),w=b.model.getValue(te.FURNITURE_FRIENDFURNI_ENGRAVING);T[0]!=="1"||T.length!==6||(e(E.objectId),n(E.category),o(w),u([T[1],T[2]]),p([T[3],T[4]]),h(T[5]),I(0))}),Ir(a!==-1&&r!==-1,E=>{E.id!==a||E.category!==r||f()}),{objectId:a,type:s,usernames:c,figures:g,date:d,stage:C,onClose:f,respond:_}},BN=GN,VN=["perteam","mostwins","classic"],HN=["alltime","daily","weekly","monthly"],WN=()=>{const[a,e]=i.exports.useState(new Map),{roomSession:r=null}=Ge(),n=o=>VN[o],s=o=>HN[o];return Se(ve.REQUEST_HIGH_SCORE_DISPLAY,o=>{const c=q().getRoomObject(o.roomId,o.objectId,o.category);if(!c)return;const u=c.model.getValue(te.FURNITURE_DATA_FORMAT),g=cu.getData(u);g.initializeFromRoomObjectModel(c.model),e(p=>{const d=new Map(p);return d.set(c.id,g),d})}),Se(ve.REQUEST_HIDE_HIGH_SCORE_DISPLAY,o=>{o.roomId===r.roomId&&e(c=>{const u=new Map(c);return u.delete(o.objectId),u})}),{stuffDatas:a,getScoreType:n,getClearType:s}},jN=WN,qN="internalLink",zN=()=>(Se(ve.REQUEST_INTERNAL_LINK,a=>{const e=q().getRoomObject(a.roomId,a.objectId,a.category);if(!e)return;let n=e.model.getValue(te.FURNITURE_DATA)[qN];(!n||!n.length)&&(n=e.model.getValue(te.FURNITURE_INTERNAL_LINK)),n&&n.length&&Z(n)}),{}),YN=zN,$N=()=>{const[a,e]=i.exports.useState(-1),[r,n]=i.exports.useState(-1),[s,o]=i.exports.useState(null),[c,u]=i.exports.useState(null),[g,p]=i.exports.useState(ar.NO_CLUB),[d,h]=i.exports.useState(null),C=()=>{e(-1),n(-1),o(null),u(null),h(null)},I=()=>{a!==-1&&(D(new sf(a)),C())},f=()=>{a!==-1&&(D(new oi(a)),C())},_=()=>{a!==-1&&D(new of(a,d))};return Se(ve.REQUEST_MANNEQUIN,E=>{const b=q().getRoomObject(E.roomId,E.objectId,E.category);if(!b)return;const T=b.model,w=T.getValue(te.FURNITURE_MANNEQUIN_FIGURE)||null,O=T.getValue(te.FURNITURE_MANNEQUIN_GENDER)||null,R=Tt().createFigureContainer(w),x=Tt().getFigureClubLevel(R,O,ms.MANNEQUIN_CLOTHING_PART_TYPES);e(E.objectId),n(E.category),o(w),u(O),p(x),h(T.getValue(te.FURNITURE_MANNEQUIN_NAME)||null)}),Ir(a!==-1&&r!==-1,E=>{E.id!==a||E.category!==r||C()}),{objectId:a,figure:s,gender:c,clubLevel:g,name:d,setName:h,saveFigure:I,wearFigure:f,saveName:_,onClose:C}},KN=$N,XN=()=>{const[a,e]=i.exports.useState(-1),[r,n]=i.exports.useState(-1),[s,o]=i.exports.useState(-1),[c,u]=i.exports.useState(new Fs),[g,p]=i.exports.useState([]),{roomSession:d=null}=Ge(),{showSingleBubble:h=null,simpleAlert:C=null}=Xe(),I=()=>{e(-1),n(-1)},f=i.exports.useCallback((T,w)=>D(new af(T,w)),[]),_=i.exports.useCallback(T=>D(new lf(T)),[]),E=i.exports.useCallback((T,w)=>D(new oi(T,w)),[]);Se(ve.REQUEST_PLAYLIST_EDITOR,T=>{var O,R,x;const w=q().getRoomObject(T.roomId,T.objectId,T.category);if(w){if(Vt(w)){e(T.objectId),n(T.category),(O=Ce().soundManager.musicController)==null||O.requestUserSongDisks(),(x=(R=Ce().soundManager.musicController)==null?void 0:R.getRoomItemPlaylist())==null||x.requestPlayList();return}(d.isRoomOwner||d.controllerLevel>=tt.GUEST||H().isModerator)&&D(new oi(T.objectId,-2))}}),Ir(a!==-1&&r!==-1,T=>{T.id!==a||T.category!==r||I()}),Gn(Su.NPE_SONG_CHANGED,T=>{o(T.position)}),Gn(cf.NOTIFY_PLAYED_SONG,T=>{h(m("soundmachine.notification.playing",["songname","songauthor"],[T.name,T.creator]),$e.SOUNDMACHINE)}),Gn(uf.SDIR_SONG_DISK_INVENTORY_RECEIVENT_EVENT,T=>{var w;u((w=Ce().soundManager.musicController)==null?void 0:w.songDiskInventory.clone())}),Gn(ll.PLUE_PLAY_LIST_UPDATED,T=>{var w,O;p((O=(w=Ce().soundManager.musicController)==null?void 0:w.getRoomItemPlaylist())==null?void 0:O.entries.concat())}),Gn(ll.PLUE_PLAY_LIST_FULL,T=>{C(m("playlist.editor.alert.playlist.full"),ue.ALERT,"","",m("playlist.editor.alert.playlist.full.title"))});const b=T=>{var w,O;a!==-1&&(T instanceof si?T.getParser().fragmentNumber===0&&((w=Ce().soundManager.musicController)==null||w.requestUserSongDisks()):(O=Ce().soundManager.musicController)==null||O.requestUserSongDisks())};return U(si,b),U(Cu,b),U(Eu,b),{objectId:a,diskInventory:c,playlist:g,currentPlayingIndex:s,onClose:I,addToPlaylist:f,removeFromPlaylist:_,togglePlayPause:E}},QN=XN,$l="floor",JN="wallpaper",Kl="landscape",ZN="poster",eS=()=>{const[a,e]=i.exports.useState(-1),[r,n]=i.exports.useState(-1),[s,o]=i.exports.useState(null),[c,u]=i.exports.useState(null),[g,p]=i.exports.useState(!1),[d,h]=i.exports.useState(null),[C,I]=i.exports.useState(null),[f,_]=i.exports.useState(-1),[E,b]=i.exports.useState(null),[T,w]=i.exports.useState(!1),[O,R]=i.exports.useState(null),{roomSession:x=null}=Ge(),F=()=>{e(-1),n(-1),o(null),u(null),p(!1),h(null),I(null),_(-1),b(null),w(!1),R(null)},A=()=>{a!==-1&&(x.openGift(a),q().changeObjectModelData(q().activeRoomId,a,Q.FLOOR,te.FURNITURE_DISABLE_PICKING_ANIMATION,1))},k=i.exports.useMemo(()=>({imageReady:(y,P,G)=>{!G&&P&&(G=Xr.generateImage(P)),R(G.src)},imageFailed:null}),[]);return ze(df.RSPE_PRESENT_OPENED,y=>{let P=null;y.itemType===ge.FLOOR?P=H().getFloorItemData(y.classId):y.itemType===ge.WALL&&(P=H().getWallItemData(y.classId));let G=!1;if(y.placedInRoom){const B=q().getRoomObject(x.roomId,y.placedItemId,Q.FLOOR);B&&(G=Vt(B))}switch(y.itemType){case ge.WALL:{if(P)switch(P.className){case $l:case Kl:case JN:let B=null;P.className===$l?B=m("inventory.furni.item.floor.name"):P.className===Kl?B=m("inventory.furni.item.landscape.name"):B=m("inventory.furni.item.wallpaper.name"),u(B);break;case ZN:{const Y=y.productCode;let X=null;Y.indexOf("poster")===0&&(X=Y.replace("poster",""));const z=H().getProductData(Y);let Ee=null;z?Ee=z.name:P&&(Ee=P.name),u(Ee),R(q().getFurnitureWallIconUrl(y.classId,X));break}default:{u(P.name||null),R(q().getFurnitureWallIconUrl(y.classId));break}}break}case ge.HABBO_CLUB:u(m("widget.furni.present.hc"));break;default:{if(y.placedItemType===ge.PET){const Y=y.petFigureString;if(Y&&Y.length){const X=new ps(Y),z=q().getRoomObjectPetImage(X.typeId,X.paletteId,X.color,new Rt(90),64,k,!0,0,X.customParts);z&&R(z.getImage().src)}}else{const Y=q().getFurnitureFloorImage(y.classId,new Rt(90),64,k);Y&&R(Y.getImage().src)}const B=H().getProductData(y.productCode);u(B&&B.name||P.name);break}}e(0),n(y.classId),o(y.itemType),p(G),_(y.placedItemId),b(y.placedItemType),w(y.placedInRoom)}),Se(ve.REQUEST_PRESENT,y=>{const P=q().getRoomObject(y.roomId,y.objectId,y.category);if(!P)return null;F(),e(y.objectId),n(-1),u(P.model.getValue(te.FURNITURE_DATA)||""),p(Vt(P)),h(P.model.getValue(te.FURNITURE_PURCHASER_NAME)||null),I(P.model.getValue(te.FURNITURE_PURCHASER_FIGURE)||null)}),Ir(a!==-1,y=>{y.id===a&&F(),y.id===f&&T&&w(!1)}),{objectId:a,classId:r,itemType:s,text:c,isOwnerOfFurniture:g,senderName:d,senderFigure:C,placedItemId:f,placedItemType:E,placedInRoom:T,imageUrl:O,openPresent:A,onClose:F}},tS=eS,rS="internalLink",nS=()=>{const[a,e]=i.exports.useState(0);return Se(ve.REQUEST_ROOM_LINK,r=>{const n=q().getRoomObject(r.roomId,r.objectId,r.category);if(!n)return;let o=n.model.getValue(te.FURNITURE_DATA)[rS];(!o||!o.length)&&(o=n.model.getValue(te.FURNITURE_INTERNAL_LINK)),!(!o||!o.length)&&(o=parseInt(o,10),!isNaN(o)&&(e(o),D(new Ho(o,!1,!1))))}),U(Ts,r=>{!a||r.getParser().data.roomId!==a||e(0)}),{}},sS=nS,oS=()=>{const[a,e]=i.exports.useState(-1),[r,n]=i.exports.useState(-1),[s,o]=i.exports.useState(""),[c,u]=i.exports.useState(""),[g,p]=i.exports.useState("0"),[d,h]=i.exports.useState(""),[C,I]=i.exports.useState(!1),{getWallItemById:f=null}=Xn(),_=()=>{D(new gf(a,c,g,d)),e(-1),n(-1),o(""),u(""),p("0"),h(""),I(!1)};return U(mf,E=>{const b=E.getParser();e(b.itemId),n(Q.WALL);const T=f(b.itemId);let w="post_it";if(T){const O=q().getFurnitureWallName(T.type);O.match("post_it_")&&(w=O)}o(w),u(b.location),p("FFFF33"),h(""),I(!0)}),{objectId:a,color:g,setColor:p,text:d,setText:h,canModify:C,onClose:_}},aS=oS,Ua=40,iS=()=>{const[a,e]=i.exports.useState(-1),[r,n]=i.exports.useState(-1),[s,o]=i.exports.useState(0),[c,u]=i.exports.useState(-1),g=()=>{e(-1),n(-1),o(0),u(-1)},p=(d,h=!1)=>{d||(d=0),d=Math.abs(d),h||d>Ua&&(d=Ua),o(parseFloat(d.toFixed(2))),h||u(d*100)};return U(pf,d=>{const h=d.getParser();a===h.furniId&&p(h.height,!0)}),Se(ve.REQUEST_STACK_HEIGHT,d=>{if(!Hs(ye(),d.objectId,d.category))return;const h=q().getRoomObject(d.roomId,d.objectId,d.category);h&&(e(d.objectId),n(d.category),o(h.getLocation().z),u(-1))}),Ir(a!==-1&&r!==-1,d=>{d.id!==a||d.category!==r||g()}),i.exports.useEffect(()=>{if(a===-1||c===-1)return;const d=setTimeout(()=>D(new ai(a,~~c)),10);return()=>clearTimeout(d)},[a,c]),{objectId:a,height:s,maxHeight:Ua,onClose:g,updateHeight:p}},lS=iS,cS=()=>{const[a,e]=i.exports.useState(-1),[r,n]=i.exports.useState(-1),[s,o]=i.exports.useState("0"),[c,u]=i.exports.useState(""),[g,p]=i.exports.useState(""),[d,h]=i.exports.useState(!1),C=()=>{e(-1),n(-1),o("0"),u(""),p(""),h(!1)},I=E=>{E!==s&&(o(E),q().modifyRoomObjectData(a,r,E,c))},f=E=>{u(E),q().modifyRoomObjectData(a,r,s,E)},_=()=>q().deleteRoomObject(a,r);return Se(ve.REQUEST_STICKIE,E=>{const b=q().getRoomObject(E.roomId,E.objectId,E.category);if(!b)return;const T=b.model.getValue(te.FURNITURE_ITEMDATA);if(T.length<6)return;let w=null,O=null;T.indexOf(" ")>0?(w=T.slice(0,T.indexOf(" ")),O=T.slice(T.indexOf(" ")+1,T.length)):w=T,e(E.objectId),n(E.category),o(w||"0"),u(O||""),p(b.type||"post_it"),h(ye().isRoomOwner||H().isModerator||Vt(b))}),Ir(a!==-1&&r!==-1,E=>{E.id!==a||E.category!==r||C()}),{objectId:a,color:s,text:c,type:g,canModify:d,updateColor:I,updateText:f,trash:_,onClose:C}},uS=cS,dS=()=>{const[a,e]=i.exports.useState(-1),[r,n]=i.exports.useState(-1),[s,o]=i.exports.useState("1"),[c,u]=i.exports.useState(""),[g,p]=i.exports.useState(""),[d,h]=i.exports.useState(""),C=()=>{e(-1),n(-1),o("1"),u(""),p(""),h("")};return Se(ve.REQUEST_TROPHY,I=>{const f=q().getRoomObject(I.roomId,I.objectId,I.category);if(!f)return;let _=f.model.getValue(te.FURNITURE_DATA);f.model.getValue(te.FURNITURE_EXTRAS),e(I.objectId),n(I.category),o(f.model.getValue(te.FURNITURE_COLOR)||"1");const E=_.substring(0,_.indexOf("	"));_=_.substring(E.length+1,_.length);const b=_.substring(0,_.indexOf("	")),T=_.substr(b.length+1,_.length);u(E),p(b),h(T)}),Ir(a!==-1&&r!==-1,I=>{I.id!==a||I.category!==r||C()}),{objectId:a,color:s,senderName:c,date:g,message:d,onClose:C}},mS=dS,gS=0,pS=1,hS=2,fS=3,IS=()=>{const[a,e]=i.exports.useState(-1),[r,n]=i.exports.useState(-1),[s,o]=i.exports.useState(null),[c,u]=i.exports.useState(null),[g,p]=i.exports.useState(null),[d,h]=i.exports.useState(-1),[C,I]=i.exports.useState(null),[f,_]=i.exports.useState(null),[E,b]=i.exports.useState(!1),T=()=>{e(-1),n(-1),o(null),u(null),p(null),h(-1),I(null),_(null),b(!1)},w=()=>D(new io(a,gS)),O=()=>D(new io(a,pS)),R=()=>E&&s&&s.length&&D(new io(a,hS)),x=()=>E&&s&&s.length&&D(new io(a,fS)),F=A=>{if(C===A){I(null),D(new cl(a,""));return}I(A),D(new cl(a,A))};return Se(ve.REQUEST_YOUTUBE,A=>{if(Bn.isRoomPreviewerId(A.roomId))return;const k=q().getRoomObject(A.roomId,A.objectId,A.category);k&&(e(A.objectId),n(A.category),b(H().hasSecurity(jo.EMPLOYEE)||Vt(k)),D(new hf(A.objectId)))}),U(ff,A=>{const k=A.getParser();a===-1||a!==k.furniId||(o(k.videoId),u(k.startAtSeconds),p(k.endAtSeconds),h(k.state))}),U(If,A=>{const k=A.getParser();a===-1||a!==k.furniId||(_(k.playlists),I(k.selectedPlaylistId),o(null),h(-1),p(null),u(null))}),U(Ef,A=>{const k=A.getParser();if(!(a===-1||a!==k.furniId))switch(k.commandId){case 1:h(vr.PLAYING);break;case 2:h(vr.PAUSED);break}}),Ir(a!==-1&&r!==-1,A=>{A.id!==a||A.category!==r||T()}),{objectId:a,videoId:s,videoStart:c,videoEnd:g,currentVideoState:d,selectedVideo:C,playlists:f,onClose:T,previous:w,next:O,pause:R,play:x,selectVideo:F}},ES=IS,CS=()=>{const[a,e]=i.exports.useState(null),[r,n]=i.exports.useState([]),[s,o]=i.exports.useState(""),[c,u]=i.exports.useState([]),[g,p]=i.exports.useState(0),[d,h]=i.exports.useState(ae.STUFF_SELECTION_OPTION_NONE),{showConfirm:C=null}=Xe(),I=()=>{const _=E=>{E&&(E instanceof Tu?D(new Sf(E.id,r,s,c,g,E.stuffTypeSelectionCode)):E instanceof vu?D(new Tf(E.id,r,s,c,E.stuffTypeSelectionCode)):E instanceof wu&&D(new vf(E.id,r,s,c,E.stuffTypeSelectionCode)))};R_(a.id)?_(a):C(m("wiredfurni.nonowner.change.confirm.body"),()=>{_(a)},null,null,null,m("wiredfurni.nonowner.change.confirm.title"))},f=(_,E)=>{!a||!d||_<=0||u(b=>{const T=[...b],w=b.indexOf(_);return w>=0?(T.splice(w,1),gs.hide(_)):T.length<a.maximumItemSelectionCount&&(T.push(_),gs.show(_)),T})};return U(Cf,_=>{_.getParser(),e(null)}),U(_f,_=>{const E=_.getParser();e(E.definition)}),U(bf,_=>{const E=_.getParser();e(E.definition)}),U(Nf,_=>{const E=_.getParser();e(E.definition)}),i.exports.useEffect(()=>{if(a)return()=>{n([]),o(""),p(0),u(_=>(_&&_.length&&gs.clearSelectionShaderFromFurni(_),[])),h(ae.STUFF_SELECTION_OPTION_NONE)}},[a]),{trigger:a,setTrigger:e,intParams:r,setIntParams:n,stringParam:s,setStringParam:o,furniIds:c,setFurniIds:u,actionDelay:g,setActionDelay:p,setAllowsFurni:h,saveWired:I,selectObjectForWired:f}},Te=()=>ct(CS),_S=()=>{const[a,e]=i.exports.useState(null),[r,n]=i.exports.useState(null),[s,o]=i.exports.useState([]),[c,u]=i.exports.useState([]),[g,p]=i.exports.useState(null),[d,h]=i.exports.useState(-1),[C,I]=i.exports.useState(!1),{friends:f=[]}=cr(),{selectObjectForWired:_=null}=Te(),{roomSession:E=null}=Ge(),b=x=>{o(F=>{const A=[...F];return A.splice(x,1),A})},T=x=>{u(F=>{const A=[...F],k=A.splice(x,1)[0];return g===k&&p(null),A})},w=x=>{p(x),u([])},O=(x,F)=>{const A=rs.getObjectName(x,F);A&&(n(A),F!==Q.UNIT&&u([]))},R=(x,F)=>{let A=null;switch(F){case Q.FLOOR:case Q.WALL:A=rs.getFurniInfo(x,F),A&&_(x,F);break;case Q.UNIT:{const k=E.userDataManager.getUserDataByIndex(x);if(!k)break;switch(k.type){case gt.PET:E.userDataManager.requestPetInfo(k.webID),h(k.webID);break;case gt.USER:A=rs.getUserInfo(F,k);break;case gt.BOT:A=rs.getBotInfo(F,k);break;case gt.RENTABLE_BOT:A=rs.getRentableBotInfo(F,k);break}}}A&&e(A)};return ze(wf.USER_DATA_UPDATED,x=>{if(!x.addedUsers.length)return;let F=[];x.addedUsers.forEach(A=>{A.webID!==H().userId&&f.find(k=>k.id===A.webID)&&F.push(new md(A.roomIndex,Q.UNIT,A.webID,A.name,A.type,!0))}),F.length&&o(A=>{const k=[...A];return F.forEach(y=>{const P=k.findIndex(G=>G.id===y.id);P>-1&&k.splice(P,1),k.push(y)}),k})}),ze(Rf.PET_INFO,x=>{const F=x.petInfo;if(!F||F.id!==d)return;const A=rs.getPetInfo(F);A&&(e(A),h(-1))}),ze(xf.PET_STATUS_UPDATE,x=>{}),Se(ul.USE_PRODUCT_FROM_INVENTORY,x=>{}),Se(ul.USE_PRODUCT_FROM_ROOM,x=>{const F=q().getRoomObject(E.roomId,x.objectId,Q.FLOOR);if(!F||!Vt(F))return;const A=F.model.getValue(te.FURNITURE_OWNER_ID),k=F.model.getValue(te.FURNITURE_TYPE_ID),y=H().getFloorItemData(k),P=y.customParams.split(" "),G=P.length?parseInt(P[0]):-1;if(G===-1)return;const B=[],Y=q().getRoomObjects(E.roomId,Q.UNIT);for(const X of Y){const z=E.userDataManager.getUserDataByIndex(X.id);let Ee=!1;if(!(!z||z.type!==gt.PET)){if(z.ownerId===A){z.hasSaddle&&y.specialType===ee.PET_SADDLE&&(Ee=!0);const ie=z.figure.split(" ");if((ie.length?parseInt(ie[0]):-1)===G){if(y.specialType===ee.MONSTERPLANT_REVIVAL&&!z.canRevive||y.specialType===ee.MONSTERPLANT_REBREED&&(z.petLevel<7||z.canRevive||z.canBreed)||y.specialType===ee.MONSTERPLANT_FERTILIZE&&(z.petLevel>=7||z.canRevive))continue;B.push(new bb(z.roomIndex,Q.UNIT,z.name,x.objectId,X.id,-1,Ee))}}}}p(null),B.length&&u(B)}),Se(ht.REQUEST_MANIPULATION,x=>{Hs(E,x.objectId,x.category)&&I(!0)}),zi(x=>{R(x.id,x.category)}),_N(x=>{e(null),u([])}),NN(x=>{a||x.category!==Q.UNIT||O(x.id,x.category)}),bN(x=>{!r||x.category!==Q.UNIT||r.roomIndex!==x.id||n(null)}),lt([we.FURNI_REMOVED,we.USER_REMOVED],x=>{if(r&&r.category===x.category&&r.roomIndex===x.id&&n(null),x.category===Q.UNIT){let F=s.findIndex(A=>A.roomIndex===x.id);F>-1&&o(A=>A.filter(k=>k.roomIndex===x.id)),F=c.findIndex(A=>A.id===x.id),F>-1&&u(A=>A.filter(k=>k.id!==x.id))}else x.category===Q.FLOOR&&c.findIndex(A=>A.id===x.id)>-1&&u(A=>A.filter(k=>k.requestRoomObjectId!==x.id));a&&(a instanceof Es?a.id===x.id&&e(null):(a instanceof et||a instanceof _s||a instanceof Cs)&&a.roomIndex===x.id&&e(null))}),i.exports.useEffect(()=>{a&&(n(null),o([]),u([]))},[a]),i.exports.useEffect(()=>{r&&o([])},[r]),i.exports.useEffect(()=>{E.isDecorating=C},[E,C]),{avatarInfo:a,setAvatarInfo:e,activeNameBubble:r,setActiveNameBubble:n,nameBubbles:s,productBubbles:c,confirmingProduct:g,isDecorating:C,setIsDecorating:I,removeNameBubble:b,removeProductBubble:T,updateConfirmingProduct:w,getObjectName:O}},bS=_S,NS=()=>{const[a,e]=i.exports.useState(""),[r,n]=i.exports.useState(!1),[s,o]=i.exports.useState(!1),[c,u]=i.exports.useState(!1),[g,p]=i.exports.useState(!1),[d,h]=i.exports.useState(0),{showNitroAlert:C=null,showConfirm:I=null}=Xe(),{roomSession:f=null}=Ge(),_=(E,b,T="",w=0)=>{if(E==="")return null;const O=E.split(" ");if(O.length>0){const R=O[0];let x="";if(O.length>1&&(x=O[1]),R.charAt(0)===":"&&x==="x"){const F=q().selectedAvatarId;if(F>-1){const A=f.userDataManager.getUserDataByIndex(F);A&&(x=A.name,E=E.replace(" x"," "+A.name))}}switch(R.toLowerCase()){case":shake":return ml.init(2500,5e3),ml.turnVisualizationOn(),null;case":rotate":return dl.init(2500,5e3),dl.turnVisualizationOn(),null;case":d":case";d":pr()===ar.VIP&&f.sendExpressionMessage($r.LAUGH.ordinal);break;case"o/":case"_o/":return f.sendExpressionMessage($r.WAVE.ordinal),null;case":kiss":if(pr()===ar.VIP)return f.sendExpressionMessage($r.BLOW.ordinal),null;break;case":jump":if(pr()===ar.VIP)return f.sendExpressionMessage($r.JUMP.ordinal),null;break;case":idle":return f.sendExpressionMessage($r.IDLE.ordinal),null;case"_b":return f.sendExpressionMessage($r.RESPECT.ordinal),null;case":sign":return f.sendSignMessage(parseInt(x)),null;case":iddqd":case":flip":return q().events.dispatchEvent(new ii(f.roomId,-1,!0)),null;case":zoom":return q().events.dispatchEvent(new ii(f.roomId,parseFloat(x),!1)),null;case":screenshot":const F=q().createTextureFromRoom(f.roomId,1),A=new Image;return A.src=Xr.generateImageUrl(F),window.open("").document.write(A.outerHTML),null;case":pickall":return(f.isRoomOwner||H().isModerator)&&I(m("room.confirm.pick_all"),()=>{H().sendSpecialCommandMessage(":pickall")},null,null,null,m("generic.alert.title")),null;case":ejectall":return(f.isRoomOwner||H().isModerator||f.controllerLevel>=tt.GUEST)&&I(m("room.confirm.eject_all"),()=>{H().sendSpecialCommandMessage(":ejectall")},null,null,null,m("generic.alert.title")),null;case":furni":return Z("furni-chooser/"),null;case":chooser":return Z("user-chooser/"),null;case":floor":case":bcfloor":return f.controllerLevel>=tt.ROOM_OWNER&&Z("floor-editor/show"),null;case":togglefps":return mn().maxFPS>0?mn().maxFPS=0:mn().maxFPS=K("system.animation.fps"),null;case":client":case":nitro":case":billsonnn":return C(),null;case":settings":return(f.isRoomOwner||H().isModerator)&&D(new Ru(f.roomId)),null}}switch(b){case Lr.CHAT_DEFAULT:f.sendChatMessage(E,w);break;case Lr.CHAT_SHOUT:f.sendShoutMessage(E,w);break;case Lr.CHAT_WHISPER:f.sendWhisperMessage(T,E,w);break}};return ze(br.FLOOD_EVENT,E=>{p(!0),h(parseFloat(E.message))}),zi(E=>{if(E.category!==Q.UNIT)return;const b=f.userDataManager.getUserDataByIndex(E.id);b&&e(b.name)}),Se(ht.DESELECTED,E=>e("")),i.exports.useEffect(()=>{if(!g)return;let E=0;const b=setInterval(()=>{h(T=>(E=(T||0)-1,E)),E<0&&(clearInterval(b),p(!1))},1e3);return()=>clearInterval(b)},[g]),i.exports.useEffect(()=>{if(!c)return;let E=null;return c&&(E=setTimeout(()=>{u(!1),n(!1)},1e4)),()=>clearTimeout(E)},[c]),i.exports.useEffect(()=>{r?s||(o(!0),f.sendChatTypingMessage(r)):s&&(o(!1),f.sendChatTypingMessage(r))},[f,r,s]),{selectedUsername:a,floodBlocked:g,floodBlockedSeconds:d,setIsTyping:n,setIsIdle:u,sendChat:_}},SS=NS,Xl=new Map,Ql=new Map,Jl=new Map,TS=()=>{const[a,e]=i.exports.useState([]),[r,n]=i.exports.useState({mode:ft.CHAT_MODE_FREE_FLOW,weight:ft.CHAT_BUBBLE_WIDTH_NORMAL,speed:ft.CHAT_SCROLL_SPEED_NORMAL,distance:50,protection:ft.FLOOD_FILTER_NORMAL}),{roomSession:s=null}=Ge(),{addChatEntry:o}=ha(),c=i.exports.useRef(!1),u=i.exports.useMemo(()=>{if(!r)return 6e3;switch(r.speed){case ft.CHAT_SCROLL_SPEED_FAST:return 3e3;case ft.CHAT_SCROLL_SPEED_NORMAL:return 6e3;case ft.CHAT_SCROLL_SPEED_SLOW:return 12e3}},[r]),g=h=>{const C=Tt().createAvatarImage(h,vi.LARGE,null,{resetFigure:_=>{c.current||g(_)},dispose:()=>{},disposed:!1});if(!C)return;const I=C.getCroppedImage(Vo.HEAD),f=C.getPartColor(He.CHEST);return Xl.set(h,f&&f.rgb||16777215),C.dispose(),Ql.set(h,I.src),I.src},p=h=>{let C=Ql.get(h);return C||(C=g(h)),C},d=(h,C,I,f=64,_=null)=>{let E=Jl.get(h+_);if(E)return E;const b=new ps(h),T=b.typeId,w=q().getRoomObjectPetImage(T,b.paletteId,b.color,new Rt(C*45),f,null,!1,0,b.customParts,_);return w&&(E=Xr.generateImageUrl(w.data),Jl.set(h+_,E)),E};return ze(br.CHAT_EVENT,h=>{const C=q().getRoomObject(s.roomId,h.objectId,Q.UNIT),I=C?Xu(s.roomId,C==null?void 0:C.id,Q.UNIT):new vn,f=C?s.userDataManager.getUserDataByIndex(h.objectId):new yf(-1);let _="",E=0,b=null,T=h.chatType,w=h.style,O=0,R=h.message;if(f){O=f.type;const k=f.figure;switch(O){case gt.PET:b=d(k,2,!0,64,C.model.getValue(te.FIGURE_POSTURE)),new ps(k).typeId;break;case gt.USER:b=p(k);break;case gt.RENTABLE_BOT:case gt.BOT:w=Af.BOT;break}E=Xl.get(k),_=f.name}switch(T){case br.CHAT_TYPE_RESPECT:R=m("widgets.chatbubble.respect",["username"],[_]),K("respect.options").enabled&&Jr(K("respect.options").sound);break;case br.CHAT_TYPE_PETREVIVE:case br.CHAT_TYPE_PET_REBREED_FERTILIZE:case br.CHAT_TYPE_PET_SPEED_FERTILIZE:{let k="widget.chatbubble.petrevived";T===br.CHAT_TYPE_PET_REBREED_FERTILIZE?k="widget.chatbubble.petrefertilized;":T===br.CHAT_TYPE_PET_SPEED_FERTILIZE&&(k="widget.chatbubble.petspeedfertilized");let y=null;if(q().getRoomObject(s.roomId,h.extraParam,Q.UNIT)){const G=s.userDataManager.getUserDataByIndex(C.id);G&&(y=G.name)}R=m(k,["petName","userName"],[_,y]);break}case br.CHAT_TYPE_PETRESPECT:R=m("widget.chatbubble.petrespect",["petname"],[_]);break;case br.CHAT_TYPE_PETTREAT:R=m("widget.chatbubble.pettreat",["petname"],[_]);break;case br.CHAT_TYPE_HAND_ITEM_RECEIVED:R=m("widget.chatbubble.handitem",["username","handitem"],[_,m("handitem"+h.extraParam)]);break;case br.CHAT_TYPE_MUTE_REMAINING:{const k=(h.extraParam>0?Math.floor(h.extraParam/3600):0).toString(),y=(h.extraParam>0?Math.floor(h.extraParam%3600/60):0).toString(),P=(h.extraParam%60).toString();R=m("widget.chatbubble.mutetime",["hours","minutes","seconds"],[k,y,P]);break}}const x=z_(R),F=E&&("#"+E.toString(16).padStart(6,"0")||null),A=new hd(f.roomIndex,Q.UNIT,s.roomId,R,x,_,new vn(I.x,I.y),T,w,b,F);e(k=>[...k,A]),o({id:-1,webId:f.webID,entityId:f.roomIndex,name:_,imageUrl:b,style:w,chatType:T,entityType:f.type,message:x,timestamp:nd(),type:Rr.TYPE_CHAT,roomId:s.roomId,color:F})}),Se(Of.ROOM_DRAG,h=>{if(!a.length||h.roomId!==s.roomId)return;const C=h.offsetX;a.forEach(I=>I.elementRef&&(I.left+=C))}),U(Ts,h=>{const C=h.getParser();C.roomEnter&&n(C.chat)}),U(kf,h=>{const C=h.getParser();n(C.chat)}),i.exports.useEffect(()=>(c.current=!1,()=>{c.current=!0}),[]),{chatMessages:a,setChatMessages:e,chatSettings:r,getScrollSpeed:u}},vS=TS,wS=()=>{const[a,e]=i.exports.useState([]),r=o=>{a.indexOf(o)>=0||e([...a,o])},n=o=>{const c=a.indexOf(o);if(c===-1)return;const u=[...a];u.splice(c,1),e(u)},s=(o,c)=>{ye().sendDoorbellApprovalMessage(o,c),n(o)};return ze(wa.DOORBELL,o=>r(o.userName)),ze(wa.RSDE_REJECTED,o=>n(o.userName)),ze(wa.RSDE_ACCEPTED,o=>n(o.userName)),{users:a,addUser:r,removeUser:n,answer:s}},RS=wS,xS=()=>{const[a,e]=i.exports.useState(null),[r,n]=i.exports.useState(!1),s=()=>n(!1);return U(Pf,o=>{const c=o.getParser();n(!0),e(c.words)}),{wordsFilter:a,isVisible:r,setWordsFilter:e,onClose:s}},yS=xS,OS=()=>{const[a,e]=i.exports.useState([]),{requests:r=[],dismissedRequestIds:n=[],setDismissedRequestIds:s=null}=cr(),o=i.exports.useMemo(()=>a.filter(u=>n.indexOf(u.request.requesterUserId)===-1),[a,n]),c=u=>{s(g=>{if(g.indexOf(u)>=0)return g;const p=[...g];return p.push(u),p})};return Hd(!0,u=>{if(u.category!==Q.UNIT)return;const g=ye().userDataManager.getUserDataByIndex(u.id);if(!g||g.type!==gl.getTypeNumber(gl.USER))return;const p=r.find(h=>h.requesterUserId===g.webID);if(!p||a.find(h=>h.request.requesterUserId===g.webID))return;const d=[...a];d.push({roomIndex:g.roomIndex,request:p}),e(d)}),Wd(!0,u=>{if(u.category!==Q.UNIT)return;const g=a.findIndex(d=>d.roomIndex===u.id);if(g===-1)return;const p=[...a];p.splice(g,1),e(p)}),i.exports.useEffect(()=>{const u=[];for(const g of r){const p=ye().userDataManager.getUserData(g.requesterUserId);p&&u.push({roomIndex:p.roomIndex,request:g})}e(u)},[r]),{displayedRequests:o,hideFriendRequest:c}},kS=OS,AS=()=>{const[a,e]=i.exports.useState(null),{roomSession:r=null}=Ge(),n=()=>e(null),s=c=>c&&q().selectRoomObject(ye().roomId,c.id,c.category),o=()=>{const c=H(),u=q().getRoomObjects(r.roomId,Q.WALL),g=q().getRoomObjects(r.roomId,Q.FLOOR),p=u.map(h=>{if(h.id<0)return null;let C=h.type;if(C.startsWith("poster"))C=m(`poster_${C.replace("poster","")}_name`);else{const I=h.model.getValue(te.FURNITURE_TYPE_ID),f=c.getWallItemData(I);f&&f.name.length&&(C=f.name)}return new cs(h.id,Q.WALL,C)}),d=g.map(h=>{if(h.id<0)return null;let C=h.type;const I=h.model.getValue(te.FURNITURE_TYPE_ID),f=c.getFloorItemData(I);return f&&f.name.length&&(C=f.name),new cs(h.id,Q.FLOOR,C)});e([...p,...d].sort((h,C)=>h.name<C.name?-1:1))};return CN(!!a,c=>{if(c.id<0)return;const u=q().getRoomObject(ye().roomId,c.id,c.category);if(!u)return;let g=null;switch(c.category){case Q.WALL:{let p=u.type;if(p.startsWith("poster"))p=m(`poster_${p.replace("poster","")}_name`);else{const d=u.model.getValue(te.FURNITURE_TYPE_ID),h=H().getWallItemData(d);h&&h.name.length&&(p=h.name)}g=new cs(u.id,Q.WALL,p);break}case Q.FLOOR:{let p=u.type;const d=u.model.getValue(te.FURNITURE_TYPE_ID),h=H().getFloorItemData(d);h&&h.name.length&&(p=h.name),g=new cs(u.id,Q.FLOOR,p)}}e(p=>[...p,g].sort((d,h)=>d.name<h.name?-1:1))}),Ir(!!a,c=>{c.id<0||e(u=>{const g=[...u];for(let p=0;p<g.length;p++){const d=g[p];if(!(d.id!==c.id||d.category!==c.category)){g.splice(p,1);break}}return g})}),{items:a,onClose:n,selectItem:s,populateChooser:o}},PS=AS,DS=()=>{const[a,e]=i.exports.useState(!1),[r,n]=i.exports.useState(-1),[s,o]=i.exports.useState(""),[c,u]=i.exports.useState(""),[g,p]=i.exports.useState(""),d=()=>{p(""),u(""),o(""),n(-1),e(!1)},h=()=>{D(new Df(r,c))},C=f=>{u(f),g.length>0&&p("")},I=f=>{if(!(!f||f===0))switch(f){case 1:return m("catalog.alert.petname.long");case 2:return m("catalog.alert.petname.short");case 3:return m("catalog.alert.petname.chars");case 4:default:return m("catalog.alert.petname.bobba")}};return ze(pl.RSOPPE_OPEN_PET_PACKAGE_REQUESTED,f=>{if(!f)return;const _=q().getRoomObject(f.session.roomId,f.objectId,Q.FLOOR);n(f.objectId),o(_.type),e(!0)}),ze(pl.RSOPPE_OPEN_PET_PACKAGE_RESULT,f=>{f&&(f.nameValidationStatus===0&&d(),f.nameValidationStatus!==0&&p(I(f.nameValidationStatus)))}),{isVisible:a,errorResult:g,petName:c,objectType:s,onChangePetName:C,onConfirm:h,onClose:d}},MS=DS,LS=()=>{const{roomSession:a=null}=Ge(),e=s=>a.sendPollStartMessage(s),r=s=>a.sendPollRejectMessage(s),n=(s,o,c)=>a.sendPollAnswerMessage(s,o,c);return ze(Ra.OFFER,s=>{const o=new ln(ln.OFFER,s.id);o.summary=s.summary,o.headline=s.headline,St(o)}),ze(Ra.ERROR,s=>{const o=new ln(ln.ERROR,s.id);o.summary=s.summary,o.headline=s.headline,St(o)}),ze(Ra.CONTENT,s=>{const o=new ln(ln.CONTENT,s.id);o.startMessage=s.startMessage,o.endMessage=s.endMessage,o.numQuestions=s.numQuestions,o.questionArray=s.questionArray,o.npsPoll=s.npsPoll,St(o)}),{startPoll:e,rejectPoll:r,answerPoll:n}},US=LS,FS=()=>{const[a,e]=i.exports.useState(null);Ge();const r=()=>e(null),n=o=>o&&q().selectRoomObject(ye().roomId,o.id,o.category),s=()=>{const o=ye(),c=q().getRoomObjects(o.roomId,Q.UNIT);e(c.map(u=>{if(u.id<0)return null;const g=o.userDataManager.getUserDataByIndex(u.id);return g?new cs(g.roomIndex,Q.UNIT,g.name):null}).sort((u,g)=>u.name<g.name?-1:1))};return Hd(!!a,o=>{if(o.id<0)return;const c=ye().userDataManager.getUserDataByIndex(o.id);c&&e(u=>{const g=[...u];return g.push(new cs(c.roomIndex,Q.UNIT,c.name)),g.sort((p,d)=>p.name<d.name?-1:1),g})}),Wd(!!a,o=>{o.id<0||e(c=>{const u=[...c];for(let g=0;g<u.length;g++){const p=u[g];if(!(p.id!==o.id||p.category!==o.category)){u.splice(g,1);break}}return u})}),{items:a,onClose:r,selectItem:n,populateChooser:s}},GS=FS,Zl=4e3,BS=3,VS=()=>{const[a,e]=i.exports.useState(-1),[r,n]=i.exports.useState(null),[s,o]=i.exports.useState(!1),[c,u]=i.exports.useState(null),[g,p]=i.exports.useState(new Map),[d,h]=i.exports.useState(new Map),{answerPoll:C=null}=US(),{roomSession:I=null}=Ge(),f=()=>{e(-1),n(null)},_=E=>{s||!r||(C(a,r.id,[E]),o(!0))};return ze(xa.ANSWERED,E=>{const b=I.userDataManager.getUserData(E.userId);b&&(p(E.answerCounts),h(T=>{if(!T.has(b.roomIndex)){const w=new Map(d);return w.set(b.roomIndex,{value:E.value,secondsLeft:BS}),w}return T}),q().updateRoomObjectUserGesture(I.roomId,b.roomIndex,us.getGestureId(E.value==="0"?us.GESTURE_SAD:us.GESTURE_SMILE)))}),ze(xa.FINISHED,E=>{r&&r.id===E.questionId&&(p(E.answerCounts),o(!0),u(b=>(b&&clearTimeout(b),setTimeout(()=>f(),Zl)))),h(new Map)}),ze(xa.QUESTION,E=>{e(E.id),n(E.question),o(!1),p(new Map),h(new Map),u(b=>{if(b&&clearTimeout(b),E.duration>0){const T=E.duration<1e3?Zl:E.duration;return setTimeout(()=>f(),T)}return null})}),i.exports.useEffect(()=>{const E=()=>{h(T=>{const w=[];if(T.forEach((R,x)=>{R.secondsLeft--,R.secondsLeft<=0&&w.push(x)}),w.length===0)return T;const O=new Map(T);return w.forEach(R=>O.delete(R)),O})},b=setInterval(()=>E(),1e3);return()=>clearInterval(b)},[]),i.exports.useEffect(()=>()=>{u(E=>(E&&clearTimeout(E),null))},[]),{question:r,answerSent:s,answerCounts:g,userAnswers:d,vote:_}},HS=VS,WS=()=>{const[a,e]=i.exports.useState(null),[r,n]=i.exports.useState(null),[s,o]=i.exports.useState(0),[c,u]=i.exports.useState(0),[g,p]=i.exports.useState(0),[d,h]=pa("nitro.screensize",{width:window.innerWidth,height:window.innerHeight}),C=_=>{o(_),D(new Lf(_))},I=_=>{H().giveRespect(_),u(H().respectsLeft)},f=_=>{H().givePetRespect(_),p(H().respectsPetLeft)};return U(bu,_=>{const E=_.getParser();e(E.userInfo),n(E.userInfo.figure),u(E.userInfo.respectsRemaining),p(E.userInfo.respectsPetRemaining)}),U(Mf,_=>{const E=_.getParser();n(E.figure)}),U(xu,_=>{const E=_.getParser();o(E.chatType)}),i.exports.useEffect(()=>{const _=Ai("nitro.screensize");if(_&&(_.width!==window.innerWidth||_.height!==window.innerHeight)){let b=window.localStorage.length;for(;b>0;){const T=window.localStorage.key(b);T&&T.startsWith("nitro.window")&&window.localStorage.removeItem(T),b--}}const E=b=>h({width:window.innerWidth,height:window.innerHeight});return window.addEventListener("resize",E),()=>{window.removeEventListener("resize",E)}},[h]),{userInfo:a,userFigure:r,chatStyleId:s,userRespectRemaining:c,petRespectRemaining:g,respectUser:I,respectPet:f,updateChatStyleId:C}},En=()=>ct(WS),jS=a=>i.exports.useEffect(a,[]),zd=a=>jS(()=>a()),Yd=a=>{const{achievement:e=null,scale:r=1,...n}=a;return e?t(je,{badgeCode:or.getAchievementBadgeCode(e),isGrayscale:!or.getAchievementHasStarted(e),scale:r,...n}):null},qS=a=>{const{achievement:e=null}=a,{selectedAchievement:r=null,setSelectedAchievementId:n=null}=ga();return e?t(Re,{itemActive:r===e,itemUnseen:e.unseen>0,onClick:s=>n(e.achievementId),children:t(Yd,{achievement:e})}):null},zS=a=>{const{achievements:e=null}=a;return t(Ue,{columnCount:6,columnMinWidth:50,columnMinHeight:50,children:e&&e.length>0&&e.map((r,n)=>t(qS,{achievement:r},n))})},YS=a=>{const{achievement:e=null}=a;return e?l(v,{shrink:!0,className:"bg-muted rounded p-2 text-black",gap:2,overflow:"hidden",children:[l(S,{center:!0,gap:1,children:[t(Yd,{className:"nitro-achievements-badge-image",achievement:e,scale:2}),t(N,{fontWeight:"bold",children:m("achievements.details.level",["level","limit"],[or.getAchievementLevel(e).toString(),e.levelCount.toString()])})]}),l(S,{fullWidth:!0,justifyContent:"center",overflow:"hidden",children:[l(S,{gap:1,children:[t(N,{fontWeight:"bold",truncate:!0,children:Qs(or.getAchievementBadgeCode(e))}),t(N,{textBreak:!0,children:Pi(or.getAchievementBadgeCode(e))})]}),(e.levelRewardPoints>0||e.scoreLimit>0)&&l(S,{gap:1,children:[e.levelRewardPoints>0&&l(v,{alignItems:"center",gap:1,children:[t(N,{truncate:!0,className:"small",children:m("achievements.details.reward")}),l(v,{center:!0,className:"fw-bold small",gap:1,children:[e.levelRewardPoints,t(Et,{type:e.levelRewardPointType})]})]}),e.scoreLimit>0&&t(vd,{text:m("achievements.details.progress",["progress","limit"],[(e.currentPoints+e.scoreAtStartOfLevel).toString(),(e.scoreLimit+e.scoreAtStartOfLevel).toString()]),progress:e.currentPoints+e.scoreAtStartOfLevel,maxProgress:e.scoreLimit+e.scoreAtStartOfLevel})]})]})]}):null},$S=a=>{const{category:e=null}=a,{selectedAchievement:r=null,setSelectedAchievementId:n=null}=ga();return i.exports.useEffect(()=>{var s,o;e&&(r||n((o=(s=e==null?void 0:e.achievements)==null?void 0:s[0])==null?void 0:o.achievementId))},[e,r,n]),e?l(S,{fullHeight:!0,justifyContent:"between",children:[t(zS,{achievements:e.achievements}),!!r&&t(YS,{achievement:r})]}):null},KS=a=>{const{category:e=null,selectedCategoryCode:r=null,setSelectedCategoryCode:n=null}=a;if(!e)return null;const s=or.getAchievementCategoryProgress(e),o=or.getAchievementCategoryMaxProgress(e),c=or.getAchievementCategoryImageUrl(e,s),u=or.getAchievementCategoryTotalUnseen(e);return l(Re,{itemActive:r===e.code,itemCount:u,itemCountMinimum:0,gap:1,onClick:g=>n(e.code),children:[t(N,{fullWidth:!0,center:!0,small:!0,className:"pt-1",children:m(`quests.${e.code}.name`)}),t(Nd,{position:"relative",imageUrl:c,children:l(N,{fullWidth:!0,center:!0,position:"absolute",variant:"white",style:{fontSize:12,bottom:9},children:[s," / ",o]})})]})},XS=a=>{const{categories:e=null,selectedCategoryCode:r=null,setSelectedCategoryCode:n=null}=a;return t(Ue,{columnCount:3,columnMinWidth:90,columnMinHeight:100,children:e&&e.length>0&&e.map((s,o)=>t(KS,{category:s,selectedCategoryCode:r,setSelectedCategoryCode:n},o))})},QS=a=>{const[e,r]=i.exports.useState(!1),{achievementCategories:n=[],selectedCategoryCode:s=null,setSelectedCategoryCode:o=null,achievementScore:c=0,getProgress:u=0,getMaxProgress:g=0,selectedCategory:p=null}=ga();return i.exports.useEffect(()=>{const d={linkReceived:h=>{const C=h.split("/");if(!(C.length<2))switch(C[1]){case"show":r(!0);return;case"hide":r(!1);return;case"toggle":r(I=>!I);return}},eventUrlPrefix:"achievements/"};return Ct(d),()=>_t(d)},[]),e?l(se,{uniqueKey:"achievements",className:"nitro-achievements",theme:"primary",children:[t(ne,{headerText:m("inventory.achievements"),onCloseClick:d=>r(!1)}),p&&l(bd,{position:"relative",className:"justify-content-center align-items-center cursor-pointer",gap:3,children:[t(M,{onClick:d=>o(null),className:"nitro-achievements-back-arrow"}),l(S,{grow:!0,gap:0,children:[t(N,{fontSize:4,fontWeight:"bold",className:"text-small",children:m(`quests.${p.code}.name`)}),t(N,{children:m("achievements.details.categoryprogress",["progress","limit"],[p.getProgress().toString(),p.getMaxProgress().toString()])})]}),t(hn,{imageUrl:or.getAchievementCategoryImageUrl(p,null,!0)})]}),l(re,{gap:1,children:[!p&&l(V,{children:[t(XS,{categories:n,selectedCategoryCode:s,setSelectedCategoryCode:o}),l(S,{grow:!0,justifyContent:"end",gap:1,children:[t(N,{small:!0,center:!0,children:m("achievements.categories.score",["score"],[c.toString()])}),t(vd,{text:m("achievements.categories.totalprogress",["progress","limit"],[u.toString(),g.toString()]),progress:u,maxProgress:g})]})]}),p&&t($S,{category:p})]})]}):null},JS=a=>{const{figureData:e=null}=a,[r,n]=i.exports.useState(-1),s=o=>{o<lo.MIN_DIRECTION&&(o=lo.MAX_DIRECTION+(o+1)),o>lo.MAX_DIRECTION&&(o=o-(lo.MAX_DIRECTION+1)),e.direction=o};return i.exports.useEffect(()=>{if(e)return e.notify=()=>n(o=>o+1),()=>{e.notify=null}},[e]),l(S,{className:"figure-preview-container",overflow:"hidden",position:"relative",children:[t(st,{figure:e.getFigureString(),direction:e.direction,scale:2}),t(M,{className:"avatar-shadow"}),t(M,{className:"arrow-container",children:t("i",{className:"icon arrow-left",onClick:o=>s(e.direction+1)})})]})},Ms=a=>{const{icon:e=null,selected:r=!1,classNames:n=[],children:s=null,...o}=a,c=i.exports.useMemo(()=>{const u=["nitro-avatar-editor-spritesheet"];return e&&e.length&&u.push(e+"-icon"),r&&u.push("selected"),n.length&&u.push(...n),u},[e,r,n]);return t(M,{classNames:c,...o})},ZS=a=>{const{partItem:e=null,children:r=null,...n}=a,[s,o]=i.exports.useState(-1),c=K("hc.disabled",!1);return i.exports.useEffect(()=>{const u=()=>o(g=>g+1);return e.notify=u,()=>e.notify=null},[e]),l(Re,{itemImage:e.isClear?void 0:e.imageUrl,itemActive:e.isSelected,...n,children:[!c&&e.isHC&&t("i",{className:"icon hc-icon position-absolute"}),e.isClear&&t(Ms,{icon:"clear"}),e.isSellable&&t(Ms,{icon:"sellable",position:"absolute",className:"end-1 bottom-1"}),r]})},eT=a=>{const{model:e=null,category:r=null,setMaxPaletteCount:n=null}=a,s=i.exports.useRef(null),o=i.exports.useCallback(c=>{const u=r.parts.indexOf(c);if(u===-1)return;e.selectPart(r.name,u);const g=r.getCurrentPart();n(g.maxColorIndex||1)},[e,r,n]);return i.exports.useEffect(()=>{!e||!r||!s||!s.current||(s.current.scrollTop=0)},[e,r]),t(Ue,{innerRef:s,columnCount:3,columnMinHeight:50,children:r.parts.length>0&&r.parts.map((c,u)=>t(ZS,{partItem:c,onClick:g=>o(c)},u))})},tT=a=>{const{itemImage:e=void 0,itemColor:r=void 0,itemActive:n=!1,itemCount:s=1,itemCountMinimum:o=1,itemUniqueSoldout:c=!1,itemUniqueNumber:u=-2,itemUnseen:g=!1,itemHighlight:p=!1,disabled:d=!1,center:h=!0,column:C=!0,style:I={},classNames:f=[],position:_="relative",overflow:E="hidden",children:b=null,...T}=a,w=i.exports.useMemo(()=>{const R=["layout-grid-item","color-picker-frame"];return n&&R.push("active"),(c||u>0)&&R.push("unique-item"),c&&R.push("sold-out"),g&&R.push("unseen"),p&&R.push("has-highlight"),d&&R.push("disabled"),e===null&&R.push("icon","loading-icon"),f.length&&R.push(...f),R},[n,c,u,g,p,d,e,f]),O=i.exports.useMemo(()=>{let R={...I};return e&&(R.backgroundImage=`url(${e})`),r&&(R.backgroundColor=r),Object.keys(I).length&&(R={...R,...I}),R},[I,e,r]);return l(S,{center:h,pointer:!0,position:_,overflow:E,column:C,classNames:w,style:O,...T,children:[s>o&&t(xr,{count:s}),u>0&&l(V,{children:[t(M,{fit:!0,className:"unique-bg-override",style:{backgroundImage:`url(${e})`}}),t("div",{className:"position-absolute bottom-0 unique-item-counter",children:t(gn,{value:u})})]}),b]})},rT=a=>{const{colorItem:e=null,children:r=null,...n}=a,[s,o]=i.exports.useState(-1),c=K("hc.disabled",!1);return i.exports.useEffect(()=>{const u=()=>o(g=>g+1);return e.notify=u,()=>e.notify=null},[e]),l(tT,{itemHighlight:!0,itemColor:e.color,itemActive:e.isSelected,className:"color-picker-frame clear-bg",...n,children:[!c&&e.isHC&&t("i",{className:"icon hc-icon position-absolute"}),r]})},ec=a=>{const{model:e=null,category:r=null,paletteSet:n=[],paletteIndex:s=-1}=a,o=i.exports.useRef(null),c=i.exports.useCallback(u=>{const g=n.indexOf(u);g!==-1&&e.selectColor(r.name,g,s)},[e,r,n,s]);return i.exports.useEffect(()=>{!e||!r||!o||!o.current||(o.current.scrollTop=0)},[e,r]),t(Ue,{className:"py-1",innerRef:o,gap:1,columnCount:5,columnMinWidth:13,children:n.length>0&&n.map((u,g)=>t(rT,{colorItem:u,onClick:p=>c(u)},g))})},nT=a=>{const{model:e=null,gender:r=null,setGender:n=null}=a,[s,o]=i.exports.useState(null),[c,u]=i.exports.useState(1),g=i.exports.useCallback(p=>{const d=e.categories.get(p);if(d){d.init(),o(d);for(const h of d.parts)if(!(!h||!h.isSelected)){u(h.maxColorIndex||1);break}}},[e]);return i.exports.useEffect(()=>{e.init();for(const p of e.categories.keys()){g(p);break}},[e,g]),!e||!s?null:t(le,{children:l(S,{className:"choose-clothing overflow-auto",children:[l(v,{justifyContent:"center",gap:4,children:[e.canSetGender&&l(V,{children:[l(v,{center:!0,pointer:!0,className:"category-item",gap:3,onClick:p=>n(ce.MALE),children:[t(Ms,{icon:"male",selected:r===ce.MALE}),t(N,{bold:!0,children:m("avatareditor.generic.boy")})]}),l(v,{center:!0,pointer:!0,className:"category-item",gap:3,onClick:p=>n(ce.FEMALE),children:[t(Ms,{icon:"female",selected:r===ce.FEMALE}),t(N,{bold:!0,children:m("avatareditor.generic.girl")})]})]}),!e.canSetGender&&e.categories&&e.categories.size>0&&Array.from(e.categories.keys()).map(p=>{const d=e.categories.get(p);return t(v,{center:!0,pointer:!0,className:"category-item",onClick:h=>g(p),children:t(Ms,{icon:d.name,selected:s===d})},p)})]}),t(S,{className:"h-50",size:5,overflow:"hidden",children:t(eT,{model:e,category:s,setMaxPaletteCount:u})}),l(S,{size:5,overflow:"hidden",className:"h-50",children:[c>=1&&t(ec,{model:e,category:s,paletteSet:s.getPalette(0),paletteIndex:0}),c===2&&t(ec,{model:e,category:s,paletteSet:s.getPalette(1),paletteIndex:1})]})]})})},sT=a=>{const{figureData:e=null,savedFigures:r=[],setSavedFigures:n=null,loadAvatarInEditor:s=null}=a,o=K("hc.disabled",!1),c=i.exports.useCallback(p=>{if(p>=r.length||p<0)return;const[d,h]=r[p];s(d.getFigureString(),h)},[r,s]),u=i.exports.useCallback(p=>{if(!e||p>=r.length||p<0)return;const d=[...r],h=e.getFigureString(),C=e.gender;d[p]=[Tt().createFigureContainer(h),C],n(d),D(new Uf(p+1,h,C))},[e,r,n]),g=i.exports.useMemo(()=>{if(!r||!r.length)return[];const p=[];return r.forEach(([d,h],C)=>{let I=0;d&&(I=Tt().getFigureClubLevel(d,h)),p.push(l(Re,{position:"relative",overflow:"hidden",className:"nitro-avatar-editor-wardrobe-figure-preview",children:[d&&t(st,{figure:d.getFigureString(),gender:h,direction:2}),t(M,{className:"avatar-shadow"}),!o&&I>0&&t(Et,{className:"position-absolute top-1 start-1",type:"hc"}),l(v,{gap:1,className:"button-container",children:[t(L,{fullWidth:!0,onClick:f=>u(C),children:m("avatareditor.wardrobe.save")}),d&&t(L,{fullWidth:!0,onClick:f=>c(C),disabled:I>pr(),children:m("generic_usable.button.use")})]})]},C))}),p},[r,o,u,c]);return t(Ue,{columnCount:5,columnMinWidth:80,columnMinHeight:140,children:g})},oT="hr-100.hd-180-7.ch-215-66.lg-270-79.sh-305-62.ha-1002-70.wa-2007",aT="hr-515-33.hd-600-1.ch-635-70.lg-716-66-62.sh-735-68",iT=a=>{const[e,r]=i.exports.useState(!1),[n,s]=i.exports.useState(null),[o,c]=i.exports.useState(null),[u,g]=i.exports.useState(null),[p,d]=i.exports.useState(null),[h,C]=i.exports.useState([]),[I,f]=i.exports.useState([]),[_,E]=i.exports.useState([]),[b,T]=i.exports.useState(!1),[w,O]=i.exports.useState(null),[R,x]=i.exports.useState(null),[F,A]=i.exports.useState(!0),[k,y]=i.exports.useState(!1),P=i.exports.useMemo(()=>K("avatar.wardrobe.max.slots",10),[]);U(Ff,ie=>{const Pe=ie.getParser();C(Pe.figureSetIds),f(Pe.boundsFurnitureNames)}),U(Gf,ie=>{const Pe=ie.getParser(),Qe=[];let pt=0;for(;pt<P;)Qe.push([null,null]),pt++;for(let[Ze,[Ft,We]]of Pe.looks.entries()){const qt=Tt().createFigureContainer(Ft);Qe[Ze-1]=[qt,We]}E(Qe)});const G=i.exports.useCallback(ie=>{u&&d(u.get(ie))},[u]),B=i.exports.useCallback(()=>{const ie=new Map;ie.set(cn.GENERIC,new P_),ie.set(cn.HEAD,new J_),ie.set(cn.TORSO,new eb),ie.set(cn.LEGS,new Z_),g(ie)},[]),Y=i.exports.useCallback(()=>{const ie=new Map,Pe=new ce,Qe=new ce;Pe.loadAvatarData(oT,ce.MALE),Qe.loadAvatarData(aT,ce.FEMALE),ie.set(ce.MALE,Pe),ie.set(ce.FEMALE,Qe),s(ie),c(ie.get(ce.MALE))},[]),X=i.exports.useCallback((ie,Pe,Qe=!0)=>{Pe=mt.getGender(Pe);let pt=o;Pe!==pt.gender&&(pt=n.get(Pe)),ie!==pt.getFigureString()&&pt.loadAvatarData(ie,Pe),pt!==o&&c(pt),Qe&&(O(o.getFigureString()),x(o.gender))},[n,o]),z=i.exports.useCallback(ie=>{switch(ie){case dr.ACTION_CLEAR:X(o.getFigureStringWithFace(0,!1),o.gender,!1),B();return;case dr.ACTION_RESET:X(w,R),B();return;case dr.ACTION_RANDOMIZE:const Pe=Q_(o,o.gender,pr(),h,[ce.FACE]);X(Pe,o.gender,!1),B();return;case dr.ACTION_SAVE:D(new yu(o.gender,o.getFigureString())),r(!1);return}},[o,w,R,h,X,B]),Ee=i.exports.useCallback(ie=>{ie=mt.getGender(ie),c(n.get(ie))},[n]);return i.exports.useEffect(()=>{const ie={linkReceived:Pe=>{const Qe=Pe.split("/");if(!(Qe.length<2))switch(Qe[1]){case"show":r(!0);return;case"hide":r(!1);return;case"toggle":r(pt=>!pt);return}},eventUrlPrefix:"avatar-editor/"};return Ct(ie),()=>_t(ie)},[]),i.exports.useEffect(()=>{E(new Array(P))},[P]),i.exports.useEffect(()=>{b&&(d(null),D(new Bf))},[b]),i.exports.useEffect(()=>{p&&T(!1)},[p]),i.exports.useEffect(()=>{u&&G(cn.GENERIC)},[u,G]),i.exports.useEffect(()=>{if(o)return mt.CURRENT_FIGURE=o,B(),()=>mt.CURRENT_FIGURE=null},[o,B]),i.exports.useEffect(()=>(mt.FIGURE_SET_IDS=h,mt.BOUND_FURNITURE_NAMES=I,B(),()=>{mt.FIGURE_SET_IDS=null,mt.BOUND_FURNITURE_NAMES=null}),[h,I,B]),i.exports.useEffect(()=>{if(e&&!n){Y(),y(!0);return}},[e,n,Y]),i.exports.useEffect(()=>{!e||!k||!F||(X(H().figure,H().gender),A(!1))},[e,k,F,X]),i.exports.useEffect(()=>{if(!e)return()=>{A(!0)}},[e]),!e||!o?null:l(se,{uniqueKey:"avatar-editor",className:"nitro-avatar-editor",children:[t(ne,{headerText:m("avatareditor.title"),onCloseClick:ie=>r(!1)}),l(fn,{className:"avatar-editor-tabs",children:[u&&u.size>0&&Array.from(u.keys()).map(ie=>{const Pe=p&&p.name===ie;return t(Zr,{isActive:Pe,onClick:Qe=>G(ie),children:m(`avatareditor.category.${ie}`)},ie)}),t(Zr,{isActive:b,onClick:ie=>T(!0),children:m("avatareditor.category.wardrobe")})]}),t(re,{children:l(le,{children:[l(S,{size:6,overflow:"hidden",children:[p&&!b&&t(nT,{model:p,gender:o.gender,setGender:Ee}),b&&t(sT,{figureData:o,savedFigures:_,setSavedFigures:E,loadAvatarInEditor:X})]}),l(S,{size:3,overflow:"hidden",children:[t(JS,{figureData:o}),t(S,{className:"randomize-container position-absolute",children:t("i",{className:"icon randomize-icon",onClick:ie=>z(dr.ACTION_RANDOMIZE)})}),l(S,{grow:!0,gap:1,children:[l(Kr,{children:[t(L,{variant:"secondary",onClick:ie=>z(dr.ACTION_RESET),children:t(_m,{className:"fa-icon"})}),t(L,{variant:"secondary",onClick:ie=>z(dr.ACTION_CLEAR),children:t(Ti,{className:"fa-icon"})}),t(L,{variant:"secondary",onClick:ie=>z(dr.ACTION_RANDOMIZE),children:t(bm,{className:"fa-icon"})})]}),t(L,{className:"w-100",variant:"success",onClick:ie=>z(dr.ACTION_SAVE),children:m("avatareditor.save")})]})]})]})})]})},lT=5,cT=a=>{const{onClose:e=null,onEdit:r=null,onDelete:n=null}=a,{cameraRoll:s=null,setCameraRoll:o=null,selectedPictureIndex:c=-1,setSelectedPictureIndex:u=null}=xd(),{simpleAlert:g=null}=Xe(),p=i.exports.useRef(),d=c>-1?s[c]:null,h=()=>{if(!p||!p.current)return null;const I=p.current.getBoundingClientRect();return new uu(Math.floor(I.x),Math.floor(I.y),Math.floor(I.width),Math.floor(I.height))},C=()=>{if(c>-1){u(-1);return}const I=q().createTextureFromRoom(ye().roomId,1,h()),f=[...s];f.length>=lT&&(g(m("camera.full.body")),f.pop()),Jr(ir.CAMERA_SHUTTER),f.push(new tb(I,Xr.generateImageUrl(I))),o(f)};return t(yn,{uniqueKey:"nitro-camera-capture",children:l(S,{center:!0,className:"nitro-camera-capture",gap:0,children:[d&&t("img",{alt:"",className:"camera-area",src:d.imageUrl}),l("div",{className:"camera-canvas drag-handler",children:[t("div",{className:"position-absolute header-close",onClick:e,children:t(xn,{className:"fa-icon"})}),!d&&t("div",{ref:p,className:"camera-area camera-view-finder"}),d&&t("div",{className:"camera-area camera-frame",children:l("div",{className:"camera-frame-preview-actions w-100 position-absolute bottom-0 py-2 text-center",children:[t("button",{className:"btn btn-success me-3",title:m("camera.editor.button.tooltip"),onClick:r,children:m("camera.editor.button.text")}),t("button",{className:"btn btn-danger",onClick:n,children:m("camera.delete.button.text")})]})}),t("div",{className:"d-flex justify-content-center",children:t("div",{className:"camera-button",title:m("camera.take.photo.button.tooltip"),onClick:C})})]}),s.length>0&&t(v,{gap:2,justifyContent:"center",className:"camera-roll d-flex justify-content-center py-2",children:s.map((I,f)=>t("img",{alt:"",src:I.imageUrl,onClick:_=>u(f)},f))})]})})},uT=a=>{const{base64Url:e=null,onCloseClick:r=null,onCancelClick:n=null,price:s=null}=a,[o,c]=i.exports.useState(null),[u,g]=i.exports.useState(null),[p,d]=i.exports.useState(0),[h,C]=i.exports.useState(!1),[I,f]=i.exports.useState(!1),[_,E]=i.exports.useState(0),b=i.exports.useMemo(()=>K("camera.publish.disabled",!1),[]);U(Vf,w=>{d(O=>O+1),f(!1)}),U(Hf,w=>{const O=w.getParser();g(O.extraDataId),E(O.secondsToWait),C(O.ok),f(!1)}),U(Wf,w=>{const O=w.getParser();c(K("camera.url")+"/"+O.url)});const T=(w,O=null)=>{switch(w){case"close":r();return;case"buy":if(I)return;f(!0),D(new qf(""));return;case"publish":if(I)return;f(!0),D(new jf);return;case"cancel":n();return}};return i.exports.useEffect(()=>{e&&q().saveBase64AsScreenshot(e)},[e]),s?l(se,{className:"nitro-camera-checkout",theme:"primary",children:[t(ne,{headerText:m("camera.confirm_phase.title"),onCloseClick:w=>T("close")}),l(re,{children:[l(v,{center:!0,children:[o&&o.length&&t(hn,{className:"picture-preview border",imageUrl:o}),(!o||!o.length)&&t(v,{center:!0,className:"picture-preview border",children:t(N,{bold:!0,children:m("camera.loading")})})]}),l(v,{justifyContent:"between",alignItems:"center",className:"bg-muted rounded p-2",children:[l(S,{size:b?10:6,gap:1,children:[t(N,{bold:!0,children:m("camera.purchase.header")}),(s.credits>0||s.duckets>0)&&l(v,{gap:1,children:[t(N,{children:m("catalog.purchase.confirmation.dialog.cost")}),s.credits>0&&l(v,{gap:1,children:[t(N,{bold:!0,children:s.credits}),t(Et,{type:-1})]}),s.duckets>0&&l(v,{gap:1,children:[t(N,{bold:!0,children:s.duckets}),t(Et,{type:5})]})]}),p>0&&l(N,{children:[t(N,{bold:!0,children:m("camera.purchase.count.info")})," ",p,t("u",{className:"ms-1 cursor-pointer",onClick:()=>Z("inventory/toggle"),children:m("camera.open.inventory")})]})]}),t(v,{alignItems:"center",children:t(L,{variant:"success",disabled:I,onClick:w=>T("buy"),children:m(p?"camera.buy.another.button.text":"buy")})})]}),!b&&l(v,{justifyContent:"between",alignItems:"center",className:"bg-muted rounded p-2",children:[l(S,{gap:1,children:[t(N,{bold:!0,children:m(h?"camera.publish.successful":"camera.publish.explanation")}),t(N,{children:m(h?"camera.publish.success.short.info":"camera.publish.detailed.explanation")}),h&&t("a",{href:u,rel:"noreferrer",target:"_blank",children:m("camera.link.to.published")}),!h&&s.publishDucketPrice>0&&l(v,{gap:1,children:[t(N,{children:m("catalog.purchase.confirmation.dialog.cost")}),l(v,{gap:1,children:[t(N,{bold:!0,children:s.publishDucketPrice}),t(Et,{type:5})]})]}),_>0&&t("div",{className:"mt-1 text-center fw-bold",children:m("camera.publish.wait",["minutes"],[Math.ceil(_/60).toString()])})]}),!h&&t(v,{className:"d-flex align-items-end",children:t(L,{variant:"success",disabled:I||_>0,onClick:w=>T("publish"),children:m("camera.publish.button.text")})})]}),t(N,{center:!0,children:m("camera.warning.disclaimer")}),t(v,{justifyContent:"end",children:t(L,{onClick:w=>T("cancel"),children:m("generic.cancel")})})]})]}):null},dT=a=>{const{effect:e=null,thumbnailUrl:r=null,isActive:n=!1,isLocked:s=!1,selectEffect:o=null,removeEffect:c=null}=a;return l(Re,{title:m(s?`camera.effect.required.level ${e.minLevel}`:`camera.effect.name.${e.name}`),itemActive:n,onClick:u=>!n&&o(),children:[n&&t(L,{variant:"danger",className:"rounded-circle remove-effect",onClick:c,children:t(xn,{className:"fa-icon"})}),!s&&r&&r.length>0&&t("div",{className:"effect-thumbnail-image border",children:t("img",{alt:"",src:r})}),s&&l(N,{center:!0,bold:!0,children:[t("div",{children:t(Zc,{className:"fa-icon"})}),e.minLevel]})]})},mT=a=>{const{myLevel:e=0,selectedEffects:r=[],effects:n=[],thumbnails:s=[],processAction:o=null}=a;return t(le,{columnCount:3,overflow:"auto",children:n&&n.length>0&&n.map((c,u)=>{const g=s.find(d=>d.effectName===c.name),p=r.findIndex(d=>d.effect.name===c.name)>-1;return t(dT,{effect:c,thumbnailUrl:g&&g.thumbnailUrl||null,isActive:p,isLocked:c.minLevel>e,selectEffect:()=>o("select_effect",c.name),removeEffect:()=>o("remove_effect",c.name)},u)})})},tc=[zs.COLORMATRIX,zs.COMPOSITE],gT=a=>{const{picture:e=null,availableEffects:r=null,myLevel:n=1,onClose:s=null,onCancel:o=null,onCheckout:c=null}=a,[u,g]=i.exports.useState(tc[0]),[p,d]=i.exports.useState(null),[h,C]=i.exports.useState([]),[I,f]=i.exports.useState([]),[_,E]=i.exports.useState(!1),b=i.exports.useMemo(()=>r.filter(y=>y.colorMatrix),[r]),T=i.exports.useMemo(()=>r.filter(y=>y.texture),[r]),w=i.exports.useCallback(()=>u===zs.COLORMATRIX?b:T,[u,b,T]),O=i.exports.useCallback(y=>!y||!y.length||!h||!h.length?-1:h.findIndex(P=>P.effect.name===y),[h]),R=i.exports.useMemo(()=>O(p),[p,O]),x=i.exports.useMemo(()=>p&&h[R]||null,[p,R,h]),F=i.exports.useCallback(y=>{const P=R;P!==-1&&C(G=>{const B=[...G],Y=B[P];return B[R]=new ya(Y.effect,y),B})},[R,C]),A=i.exports.useMemo(()=>Ds().applyEffects(e.texture,h,_).src,[e,h,_]),k=i.exports.useCallback((y,P=null)=>{switch(y){case"close":s();return;case"cancel":o();return;case"checkout":c(A);return;case"change_tab":g(String(P));return;case"select_effect":{if(O(P)>=0)return;const B=r.find(Y=>Y.name===P);if(!B)return;C(Y=>[...Y,new ya(B,1)]),d(B.name);return}case"remove_effect":{let G=O(P);if(G===-1)return;C(B=>{const Y=[...B];return Y.splice(G,1),Y}),p===P&&d(null);return}case"clear_effects":d(null),C([]);return;case"download":{const G=new Image;G.src=A,window.open("").document.write(G.outerHTML);return}case"zoom":E(!_);return}},[_,r,p,A,O,o,c,s,E,C]);return i.exports.useEffect(()=>{const y=[];for(const P of r)y.push(new rb(P.name,Ds().applyEffects(e.texture,[new ya(P,1)],!1).src));f(y)},[e,r]),l(se,{className:"nitro-camera-editor",children:[t(ne,{headerText:m("camera.editor.button.text"),onCloseClick:y=>k("close")}),t(fn,{children:tc.map(y=>t(Zr,{isActive:u===y,onClick:P=>k("change_tab",y),children:t("i",{className:"icon icon-camera-"+y})},y))}),t(re,{children:l(le,{children:[t(S,{size:5,overflow:"hidden",children:t(mT,{myLevel:n,selectedEffects:h,effects:w(),thumbnails:I,processAction:k})}),l(S,{size:7,justifyContent:"between",overflow:"hidden",children:[l(S,{center:!0,children:[t(hn,{imageUrl:A,className:"picture-preview"}),p&&l(S,{center:!0,fullWidth:!0,gap:1,children:[t(N,{children:m("camera.effect.name."+p)}),t(Pt,{className:"nitro-slider",min:0,max:1,step:.01,value:x.alpha,onChange:y=>F(y),renderThumb:(y,P)=>t("div",{...y,children:P.valueNow})})]})]}),l(v,{justifyContent:"between",children:[l(Kr,{children:[t(L,{onClick:y=>k("clear_effects"),children:t(Ti,{className:"fa-icon"})}),t(L,{onClick:y=>k("download"),children:t(Nm,{className:"fa-icon"})}),l(L,{onClick:y=>k("zoom"),children:[_&&t(Sm,{className:"fa-icon"}),!_&&t(Tm,{className:"fa-icon"})]})]}),l(v,{gap:1,children:[t(L,{onClick:y=>k("cancel"),children:m("generic.cancel")}),t(L,{onClick:y=>k("checkout"),children:m("camera.preview.button.text")})]})]})]})]})})]})},ns=0,So=1,rc=2,nc=3,pT=a=>{const[e,r]=i.exports.useState(ns),[n,s]=i.exports.useState(null),{availableEffects:o=[],selectedPictureIndex:c=-1,cameraRoll:u=[],setCameraRoll:g=null,myLevel:p=0,price:d={credits:0,duckets:0,publishDucketPrice:0}}=xd(),h=I=>{switch(I){case"close":r(ns);return;case"edit":r(rc);return;case"delete":g(f=>{const _=[...f];return _.splice(c,1),_});return;case"editor_cancel":r(So);return}},C=I=>{s(I),r(nc)};return ze(Wt.ENDED,I=>r(ns)),i.exports.useEffect(()=>{const I={linkReceived:f=>{const _=f.split("/");if(!(_.length<2))switch(_[1]){case"show":r(So);return;case"hide":r(ns);return;case"toggle":r(E=>E?ns:So);return}},eventUrlPrefix:"camera/"};return Ct(I),()=>_t(I)},[]),e===ns?null:l(V,{children:[e===So&&t(cT,{onClose:()=>h("close"),onEdit:()=>h("edit"),onDelete:()=>h("delete")}),e===rc&&t(gT,{picture:u[c],myLevel:p,onClose:()=>h("close"),onCancel:()=>h("editor_cancel"),onCheckout:C,availableEffects:o}),e===nc&&t(uT,{base64Url:n,onCloseClick:()=>h("close"),onCancelClick:()=>h("editor_cancel"),price:d})]})},hT=a=>{const{itemId:e=-1,state:r=null,product:n=null,active:s=!1,onClick:o=null}=a,c=u=>{let g=H().getFloorItemDataByName(u),p=null;return g?p=q().getFurnitureFloorIconUrl(g.id):(g=H().getWallItemDataByName(u),g&&(p=q().getFurnitureWallIconUrl(g.id))),p};return l(S,{fit:!0,center:!0,pointer:!0,className:`campaign-spritesheet campaign-day-generic-bg rounded calendar-item ${s?"active":""}`,onClick:()=>o(e),children:[r===Ut.STATE_UNLOCKED&&t(v,{center:!0,className:"campaign-spritesheet unlocked-bg",children:t(v,{center:!0,className:"campaign-spritesheet campaign-opened",children:n&&t(hn,{imageUrl:n.customImage?K("image.library.url")+n.customImage:c(n.productName)})})}),r!==Ut.STATE_UNLOCKED&&l(v,{center:!0,className:"campaign-spritesheet locked-bg",children:[r===Ut.STATE_LOCKED_AVAILABLE&&t(M,{className:"campaign-spritesheet available"}),(r===Ut.STATE_LOCKED_EXPIRED||r===Ut.STATE_LOCKED_FUTURE)&&t(M,{className:"campaign-spritesheet unavailable"})]})]})},Fa=5,fT=a=>{const{onClose:e=null,campaignName:r=null,currentDay:n=null,numDays:s=null,missedDays:o=null,openedDays:c=null,openPackage:u=null,receivedProducts:g=null}=a,[p,d]=i.exports.useState(n),[h,C]=i.exports.useState(Math.max(0,p-1)),I=w=>c.includes(w)?Ut.STATE_UNLOCKED:w>n?Ut.STATE_LOCKED_FUTURE:o.includes(w)?Ut.STATE_LOCKED_EXPIRED:Ut.STATE_LOCKED_AVAILABLE,f=w=>{switch(I(w)){case Ut.STATE_UNLOCKED:return m("campaign.calendar.info.unlocked");case Ut.STATE_LOCKED_FUTURE:return m("campaign.calendar.info.future");case Ut.STATE_LOCKED_EXPIRED:return m("campaign.calendar.info.expired");default:return m("campaign.calendar.info.available.desktop")}},_=()=>{const w=p+1;w!==s&&(d(w),h+Fa<w+1&&C(h+1))},E=()=>{const w=p-1;w<0||(d(w),h>w&&C(h-1))},b=w=>{if(p===w){I(w)===Ut.STATE_LOCKED_AVAILABLE&&u(w,!1);return}d(w)},T=()=>{const w=p;I(w)!==Ut.STATE_UNLOCKED&&u(w,!0)};return l(se,{className:"nitro-campaign-calendar",theme:"primary",children:[t(ne,{headerText:m(`campaign.calendar.${r}.title`),onCloseClick:e}),l(re,{children:[l(le,{fullHeight:!1,justifyContent:"between",alignItems:"center",children:[t(S,{size:1}),t(S,{size:10,children:l(v,{justifyContent:"between",alignItems:"center",gap:1,children:[l(S,{gap:1,children:[t(N,{fontSize:3,children:m("campaign.calendar.heading.day",["number"],[(p+1).toString()])}),t(N,{children:f(p)})]}),t("div",{children:H().isModerator&&t(L,{variant:"danger",onClick:T,children:"Force open"})})]})}),t(S,{size:1})]}),l(v,{fullHeight:!0,gap:2,children:[t(v,{center:!0,children:t(M,{pointer:!0,className:"campaign-spritesheet prev",onClick:E})}),t(S,{center:!0,fullWidth:!0,children:t(le,{fit:!0,columnCount:Fa,gap:1,children:[...Array(Fa)].map((w,O)=>{const R=h+O;return t(S,{overflow:"hidden",children:t(hT,{itemId:R,state:I(R),active:p===R,product:g.has(R)?g.get(R):null,onClick:b})},O)})})}),t(v,{center:!0,children:t(M,{pointer:!0,className:"campaign-spritesheet next",onClick:_})})]})]})]})},IT=a=>{const[e,r]=i.exports.useState(null),[n,s]=i.exports.useState(-1),[o,c]=i.exports.useState(new Map),[u,g]=i.exports.useState(!1),p=(d,h=!1)=>{e&&(s(d),D(h?new zf(e.campaignName,d):new Yf(e.campaignName,d)))};return U($f,d=>{const h=d.getParser();h&&r(h.calendarData)}),U(Kf,d=>{const h=d.getParser();if(!h)return;const C=n;h.doorOpened&&(r(I=>{const f=I.clone();return f.openedDays.push(n),f}),c(I=>{const f=new Map(I);return f.set(C,new nb(h.productName,h.customImage,h.furnitureClassName)),f})),s(-1)}),i.exports.useEffect(()=>{const d={linkReceived:h=>{const C=h.split("/");if(!(C.length<2))switch(C[1]){case"calendar":g(!0);break}},eventUrlPrefix:"openView/"};return Ct(d),()=>_t(d)},[]),t(V,{children:e&&u&&t(fT,{onClose:()=>g(!1),campaignName:e.campaignName,currentDay:e.currentDay,numDays:e.campaignDays,openedDays:e.openedDays,missedDays:e.missedDays,openPackage:p,receivedProducts:o})})},$i=a=>{const{icon:e=0}=a,r=i.exports.useMemo(()=>K("catalog.asset.icon.url").replace("%name%",e.toString()),[e]);return t(hn,{className:"catalog-icon",imageUrl:r,style:{width:20,height:20}})},ET=a=>{const{variant:e="primary",size:r="",active:n=!1,disabled:s=!1,classNames:o=[],...c}=a,u=i.exports.useMemo(()=>{const g=["gift-color-btn"];return e&&g.push("btn-"+e),r&&g.push("btn-"+r),n&&g.push("active"),s&&g.push("disabled"),o.length&&g.push(...o),g},[e,r,n,s,o]);return t(v,{center:!0,classNames:u,...c})},CT=a=>{const[e,r]=i.exports.useState(!1),[n,s]=i.exports.useState(0),[o,c]=i.exports.useState(0),[u,g]=i.exports.useState(""),[p,d]=i.exports.useState(""),[h,C]=i.exports.useState(!0),[I,f]=i.exports.useState(""),[_,E]=i.exports.useState([]),[b,T]=i.exports.useState(0),[w,O]=i.exports.useState(0),[R,x]=i.exports.useState(0),[F,A]=i.exports.useState(0),[k,y]=i.exports.useState(0),[P,G]=i.exports.useState(!1),{catalogOptions:B=null}=De(),{friends:Y}=cr(),{giftConfiguration:X=null}=B,[z,Ee]=i.exports.useState([]),[ie,Pe]=i.exports.useState([]),[Qe,pt]=i.exports.useState(!0),Ze=i.exports.useCallback(()=>{r(!1),s(0),c(0),g(""),d(""),C(!0),f(""),T(0),O(0),pt(!1),Pe([]),_.length&&x(_[0].id)},[_]),Ft=i.exports.useMemo(()=>X?X.defaultStuffTypes.findIndex(fe=>fe===z[b])>-1:!1,[z,X,b]),We=i.exports.useMemo(()=>X?(z[b]*1e3+X.ribbonTypes[w]).toString():"",[X,b,w,z]),qt=i.exports.useMemo(()=>{if(!X||Ft)return!1;const fe=z[b];return!(fe===8||fe>=3&&fe<=6)},[X,b,Ft,z]),Er=i.exports.useMemo(()=>Ft?z[b]:R,[Ft,z,b,R]),Fe=Y.filter(fe=>fe.id!==-1),Ie=fe=>{const Me=fe.target.value;let Cr=[];Me.length>0&&(Cr=Fe.sort().filter(On=>On.name.includes(Me))),d(Me),pt(!0),Pe(Cr)},Ye=fe=>{d(fe),pt(!1)},yt=i.exports.useCallback(fe=>{switch(fe){case"prev_box":T(Me=>Me===0?F:Me-1);return;case"next_box":T(Me=>Me===F?0:Me+1);return;case"prev_ribbon":O(Me=>Me===0?k:Me-1);return;case"next_ribbon":O(Me=>Me===k?0:Me+1);return;case"buy":if(!p||p.length===0){G(!0);return}D(new Xf(n,o,u,p,I,Er,b,w,h));return}},[Er,u,F,k,I,o,n,p,b,w,h]);U(Qf,fe=>G(!0)),lt([pn.PURCHASE_SUCCESS,lr.INIT_GIFT],fe=>{switch(fe.type){case pn.PURCHASE_SUCCESS:Ze();return;case lr.INIT_GIFT:const Me=fe;Ze(),s(Me.pageId),c(Me.offerId),g(Me.extraData),r(!0);return}}),i.exports.useEffect(()=>{G(!1)},[p]);const de=i.exports.useCallback(()=>{X&&Ee(fe=>{let Me=[...X.boxTypes];return Me.push(X.defaultStuffTypes[Math.floor(Math.random()*(X.defaultStuffTypes.length-1))]),A(Me.length-1),y(Me.length-1),Me})},[X]);if(i.exports.useEffect(()=>{if(!X)return;const fe=[];for(const Me of X.stuffTypes){const Cr=H().getFloorItemData(Me);Cr&&Cr.colors&&Cr.colors.length>0&&fe.push({id:Me,color:Qt.makeColorNumberHex(Cr.colors[0])})}de(),fe.length&&(x(fe[0].id),E(fe))},[X,de]),i.exports.useEffect(()=>{e&&de()},[de,e]),!X||!X.isEnabled||!e)return null;const Oe="catalog.gift_wrapping_new.box."+(Ft?"default":z[b]),ot=`catalog.gift_wrapping_new.ribbon.${w}`,Zt="catalog.gift_wrapping_new."+(Ft?"freeprice":"price");return l(se,{uniqueKey:"catalog-gift",className:"nitro-catalog-gift",theme:"primary",children:[t(ne,{headerText:m("catalog.gift_wrapping.title"),onCloseClick:Ze}),l(re,{className:"text-black",children:[l(Db,{column:!0,children:[t(N,{children:m("catalog.gift_wrapping.receiver")}),t("input",{type:"text",className:Rn("form-control form-control-sm",P&&"is-invalid"),value:p,onChange:fe=>Ie(fe)}),ie.length>0&&Qe&&t(S,{className:"autocomplete-gift-container",children:ie.map(fe=>t(M,{className:"autocomplete-gift-item",onClick:Me=>Ye(fe.name),children:fe.name},fe.id))}),P&&t(M,{className:"invalid-feedback",children:m("catalog.gift_wrapping.receiver_not_found.title")})]}),t(Sd,{figure:H().figure,userName:H().userName,message:I,editable:!0,onChange:fe=>f(fe)}),l(M,{className:"form-check",children:[t("input",{className:"form-check-input",type:"checkbox",name:"showMyFace",checked:h,onChange:fe=>C(Me=>!Me)}),t("label",{className:"form-check-label",children:m("catalog.gift_wrapping.show_face.title")})]}),l(v,{alignItems:"center",gap:2,children:[R&&t(M,{className:"gift-preview",children:t(Hi,{productType:ge.FLOOR,productClassId:Er,extraData:We})}),l(S,{gap:1,children:[l(v,{gap:2,children:[l(Kr,{children:[t(L,{variant:"primary",onClick:()=>yt("prev_box"),children:t(zr,{className:"fa-icon"})}),t(L,{variant:"primary",onClick:()=>yt("next_box"),children:t(Yr,{className:"fa-icon"})})]}),l(S,{gap:1,children:[t(N,{fontWeight:"bold",children:m(Oe)}),l(v,{alignItems:"center",gap:1,children:[m(Zt,["price"],[X.price.toString()]),t(Et,{type:-1})]})]})]}),l(v,{alignItems:"center",gap:2,className:qt?"":"opacity-50 pointer-events-none",children:[l(Kr,{children:[t(L,{variant:"primary",onClick:()=>yt("prev_ribbon"),children:t(zr,{className:"fa-icon"})}),t(L,{variant:"primary",onClick:()=>yt("next_ribbon"),children:t(Yr,{className:"fa-icon"})})]}),t(N,{fontWeight:"bold",children:m(ot)})]})]})]}),l(S,{gap:1,className:qt?"":"opacity-50 pointer-events-none",children:[t(N,{fontWeight:"bold",children:m("catalog.gift_wrapping.pick_color")}),t(Kr,{fullWidth:!0,className:"gap-2",children:_.map(fe=>t(ET,{variant:"dark",active:fe.id===R,disabled:!qt,style:{backgroundColor:fe.color},onClick:()=>x(fe.id)},fe.id))})]}),l(v,{justifyContent:"between",alignItems:"center",children:[t(L,{variant:"link",onClick:Ze,className:"text-black",children:m("cancel")}),t(L,{variant:"success",onClick:()=>yt("buy"),children:m("catalog.gift_wrapping.give_gift")})]})]})]})},_T=a=>{const[e,r]=i.exports.useState(""),{currentType:n=null,rootNode:s=null,offersToNodes:o=null,searchResult:c=null,setSearchResult:u=null,setCurrentPage:g=null}=De();return i.exports.useEffect(()=>{let p=e==null?void 0:e.toLocaleLowerCase().replace(" ","");if(!p||!p.length){u(null);return}const d=setTimeout(()=>{const h=H().getAllFurnitureData({loadFurnitureData:null});if(!h||!h.length)return;const C=[],I=[];for(const E of h){if(n===Sr.BUILDER&&!E.availableForBuildersClub||n===Sr.NORMAL&&E.excludeDynamic)continue;const b=[E.className,E.name,E.description].join(" ").replace(/ /gi,"").toLowerCase();if(n===Sr.BUILDER&&E.purchaseOfferId===-1&&E.rentOfferId===-1)E.furniLine!==""&&I.indexOf(E.furniLine)<0&&b.indexOf(p)>=0&&I.push(E.furniLine);else if([...Rl(o,E.purchaseOfferId),...Rl(o,E.rentOfferId)].length&&(b.indexOf(p)>=0&&C.push(E),C.length===250))break}const f=[];for(const E of C)f.push(new b_(E));let _=[];Yu(p,I,s,_),u(new v_(p,f,_.filter(E=>E.isVisible))),g(new xi(-1,"default_3x3",new Ku([],[]),f,!1,1))},300);return()=>clearTimeout(d)},[o,n,s,e,g,u]),l(v,{gap:1,className:"position-relative",children:[t(v,{fullWidth:!0,alignItems:"center",position:"relative",children:t("input",{type:"text",className:"form-control form-control-sm",placeholder:m("generic.search"),value:e,onChange:p=>r(p.target.value)})}),(!e||!e.length)&&t("i",{className:"icon icon-pen position-absolute catalog-search-button"}),e&&!!e.length&&t(L,{variant:"primary",className:"catalog-search-button",onClick:p=>r(""),children:t("i",{className:"icon icon-clear position-absolute catalog-clear-button"})})]})},$d=a=>{const{node:e=null,child:r=!1}=a;return t(V,{children:e&&e.children.length>0&&e.children.map((n,s)=>n.isVisible?t(Kd,{node:n,child:r},s):null)})},Kd=a=>{const{node:e=null,child:r=!1}=a,{activateNode:n=null}=De();return l(V,{children:[l(Re,{style:{marginLeft:`${(e.depth-2)*10}px`},gap:1,column:!1,itemActive:e.isActive,onClick:s=>n(e),children:[t($i,{icon:e.iconId}),t(N,{grow:!0,truncate:!0,children:e.localization}),e.isBranch&&l(V,{children:[e.isOpen&&t(Qc,{className:"fa-icon"}),!e.isOpen&&t(Jc,{className:"fa-icon"})]})]}),e.isOpen&&e.isBranch&&t($d,{node:e,child:!0})]})},bT=a=>{const{node:e=null}=a,{searchResult:r=null}=De();return l(V,{children:[t(_T,{}),t(S,{fullHeight:!0,className:"nitro-catalog-navigation-grid-container grid-bg w-100 p-1",overflow:"hidden",children:l(Ue,{gap:1,columnCount:1,children:[r&&r.filteredNodes.length>0&&r.filteredNodes.map((n,s)=>t(Kd,{node:n},s)),!r&&t($d,{node:e})]})})]})},NT=a=>{const{currentPage:e=null,activateNode:r=null,rootNode:n=null,getNodeById:s=null}=De();return t(V,{children:l(v,{className:"catalog-header",children:[l(S,{gap:0,className:"catalog-header-content",children:[e&&n&&t($i,{icon:s(e.pageId,n).iconId}),e&&n&&t(N,{bold:!0,className:"catalog-header-title h-100",children:s(e.pageId,n).localization}),t(N,{className:"catalog-header-desc",dangerouslySetInnerHTML:{__html:e&&e.localization.getText(0)}})]}),t(v,{className:"catalog-header-image",style:{backgroundImage:`url(${e&&e.localization.getImage(0)})`}})]})})},ST=a=>{const{columnCount:e=5,...r}=a,[n,s]=i.exports.useState(!1),[o,c]=i.exports.useState(null),{currentOffer:u=null,setPurchaseOptions:g=null}=De(),{badgeCodes:p=[],activate:d=null,deactivate:h=null}=Ea(),C=i.exports.useMemo(()=>{if(!o)return null;const I=new $s;return I.setValue(["0",o,"",""]),I},[o]);return i.exports.useEffect(()=>{u&&g(I=>{const f={...I};return f.extraParamRequired=!0,f.extraData=C&&C.getValue(1)||null,f.previewStuffData=C,f})},[u,C,g]),i.exports.useEffect(()=>{if(!n)return;const I=d();return()=>h(I)},[n,d,h]),i.exports.useEffect(()=>(s(!0),()=>s(!1)),[]),t(Ue,{columnCount:e,...r,children:p&&p.length>0&&p.map((I,f)=>t(Re,{itemActive:o===I,onClick:_=>c(I),children:t(je,{badgeCode:I})},f))})},Ca=a=>{const{currentPage:e=null,setCurrentOffer:r=null}=De();return i.exports.useEffect(()=>{!e||!e.offers.length||r(e.offers[0])},[e,r]),null},TT=a=>{const{itemImage:e=void 0,itemColor:r=void 0,itemActive:n=!1,itemCount:s=1,itemCountMinimum:o=1,itemUniqueSoldout:c=!1,itemUniqueNumber:u=-2,itemUnseen:g=!1,itemHighlight:p=!1,disabled:d=!1,center:h=!0,column:C=!0,style:I={},classNames:f=[],position:_="relative",overflow:E="hidden",children:b=null,...T}=a,w=i.exports.useMemo(()=>{const R=["layout-catalog-grid-item","justify-content-end"];return n&&R.push("active"),(c||u>0)&&R.push("unique-item"),c&&R.push("sold-out"),g&&R.push("unseen"),p&&R.push("has-highlight"),d&&R.push("disabled"),e===null&&R.push("icon","loading-icon"),f.length&&R.push(...f),R},[n,c,u,g,p,d,e,f]),O=i.exports.useMemo(()=>{let R={...I};return e&&(R.backgroundImage=`url(${e})`),r&&(R.backgroundColor=r),Object.keys(I).length&&(R={...R,...I}),R},[I,e,r]);return l(S,{pointer:!0,position:_,overflow:E,column:C,classNames:w,style:O,...T,children:[s>o&&t(xr,{count:s}),u>0&&l(V,{children:[t(M,{fit:!0,className:"unique-bg-override",style:{backgroundImage:`url(${e})`}}),t("div",{className:"position-absolute unique-item-counter",children:t(gn,{value:u})})]}),b]})},vT=a=>{const{offer:e=null,separator:r=!1}=a,{purchaseOptions:n=null}=De(),{quantity:s=1}=n;return e?l(V,{children:[e.priceInCredits>0&&l(v,{alignItems:"end",justifyContent:"end",gap:1,className:"grid-price-view",children:[t(N,{bold:!0,children:e.priceInCredits*s}),t("i",{className:"icon icon-small-coin"})]}),r&&e.priceInCredits>0&&e.priceInActivityPoints>0&&t(Ss,{className:"fa-icon"}),e.priceInActivityPoints>0&&l(v,{alignItems:"end",justifyContent:"end",gap:1,className:"grid-price-view",children:[t(N,{bold:!0,children:e.priceInActivityPoints*s}),t("i",{className:"icon icon-small-"+e.activityPointType})]})]}):null},Ki=a=>{const{offer:e=null,selectOffer:r=null,itemActive:n=!1,...s}=a,[o,c]=i.exports.useState(!1),{requestOfferToMover:u=null}=De(),{isVisible:g=!1}=Xn(),p=i.exports.useMemo(()=>e.pricingModel===it.PRICING_MODEL_BUNDLE?null:e.product.getIconUrl(e),[e]),d=C=>{switch(C.type){case xe.MOUSE_DOWN:r(e),c(!0);return;case xe.MOUSE_UP:c(!1);return;case xe.ROLL_OUT:if(!o||!n||!g)return;u(e);return}},h=e.product;return h?l(S,{className:"catalog-grid-active cursor-pointer",gap:0,itemActive:n,onMouseDown:d,onMouseUp:d,onMouseOut:d,children:[t(TT,{itemImage:p,itemCount:e.pricingModel===it.PRICING_MODEL_MULTI?h.productCount:1,itemUniqueSoldout:h.uniqueLimitedItemSeriesSize&&!h.uniqueLimitedItemsLeft,itemUniqueNumber:h.uniqueLimitedItemSeriesSize,...s,children:e.product.productType===ge.ROBOT&&t(st,{figure:e.product.extraParam,headOnly:!0,direction:3})}),t(v,{alignItems:"end",justifyContent:"end",fullWidth:!0,gap:0,children:t(S,{gap:0,children:t(vT,{offer:e})})})]}):null},so=a=>{const{columnCount:e=5,children:r=null,...n}=a,{currentOffer:s=null,setCurrentOffer:o=null,currentPage:c=null,setPurchaseOptions:u=null}=De(),g=i.exports.useRef();if(i.exports.useEffect(()=>{g&&g.current&&(g.current.scrollTop=0)},[c]),!c)return null;const p=d=>{d.activate(),!d.isLazy&&(o(d),d.product&&d.product.productType===ge.WALL&&u(h=>{const C={...h};return C.extraData=d.product.extraParam||null,C}))};return l(Ue,{innerRef:g,columnCount:e,...n,children:[c.offers&&c.offers.length>0&&c.offers.map((d,h)=>t(Ki,{itemActive:s&&s.offerId===d.offerId,offer:d,selectOffer:p},h)),r]})},_a=a=>{const{children:e=null,...r}=a,{currentOffer:n=null}=De();return!n||n.pricingModel!==it.PRICING_MODEL_SINGLE||!n.product.isUniqueLimitedItem?null:l(M,{...r,children:[t(kb,{uniqueLimitedItemsLeft:n.product.uniqueLimitedItemsLeft,uniqueLimitedSeriesSize:n.product.uniqueLimitedItemSeriesSize}),e]})},Gr=a=>{const{noGiftOption:e=!1,purchaseCallback:r=null}=a;i.exports.useState(!1);const[n,s]=i.exports.useState(Be.NONE);pa(Js.CATALOG_SKIP_PURCHASE_CONFIRMATION,!1);const{currentOffer:o=null,currentPage:c=null,purchaseOptions:u=null,setPurchaseOptions:g=null}=De(),{getCurrencyAmount:p=null}=Qn(),d=i.exports.useCallback(f=>{switch(f.type){case pn.PURCHASE_SUCCESS:s(Be.NONE);return;case zn.PURCHASE_FAILED:s(Be.FAILED);return;case Qo.NOT_ALLOWED:s(Be.FAILED);return;case Jo.SOLD_OUT:s(Be.SOLD_OUT);return}},[]);lt(pn.PURCHASE_SUCCESS,d),lt(zn.PURCHASE_FAILED,d),lt(Qo.NOT_ALLOWED,d),lt(Jo.SOLD_OUT,d);const h=i.exports.useMemo(()=>{if(!o||u.extraParamRequired&&(!u.extraData||!u.extraData.length))return!1;if(o.pricingModel===it.PRICING_MODEL_SINGLE){const f=o.product;if(f&&f.isUniqueLimitedItem)return!f.uniqueLimitedItemsLeft}return!1},[o,u]),C=(f=!1)=>{if(!o)return;if(pr()<o.clubLevel){Z("habboUI/open/hccenter");return}if(f){St(new Wb(o.page.pageId,o.offerId,u.extraData));return}if(s(Be.PURCHASE),r){r();return}let _=o.page.pageId;D(new sa(_,o.offerId,u.extraData,u.quantity))};if(i.exports.useEffect(()=>{o&&s(Be.NONE)},[o,g]),i.exports.useEffect(()=>{let f=null;return(n===Be.CONFIRM||n===Be.FAILED)&&(f=setTimeout(()=>s(Be.NONE),3e3)),()=>{f&&clearTimeout(f)}},[n]),!o)return null;const I=()=>{const f=o.priceInCredits*u.quantity,_=o.priceInActivityPoints*u.quantity;if(pr()<o.clubLevel)return t(L,{variant:"danger",disabled:!0,children:m("catalog.alert.hc.required")});if(h)return t("div",{className:"unique-sold-out-blocker",children:t("div",{children:m("catalog.alert.limited_edition_sold_out.title")})});if(f>p(-1))return t(L,{variant:"danger",disabled:!0,children:m("catalog.alert.notenough.title")});if(_>p(o.activityPointType))return t(L,{variant:"danger",disabled:!0,children:m("catalog.alert.notenough.activitypoints.title."+o.activityPointType)});switch(n){case Be.CONFIRM:return t(L,{variant:"warning",onClick:E=>C(),children:m("catalog.marketplace.confirm_title")});case Be.PURCHASE:return t(L,{disabled:!0,children:t(Wi,{})});case Be.FAILED:return t(L,{variant:"danger",children:m("generic.failed")});case Be.SOLD_OUT:return t(L,{variant:"danger",children:m("generic.failed")+" - "+m("catalog.alert.limited_edition_sold_out.title")});case Be.NONE:default:return t(L,{variant:"success",disabled:u.extraParamRequired&&(!u.extraData||!u.extraData.length),onClick:E=>s(Be.CONFIRM),children:m("catalog.purchase_confirmation."+(o.isRentOffer?"rent":"buy"))})}};return l(V,{children:[!e&&!o.isRentOffer&&!o.product.isUniqueLimitedItem&&t(L,{disabled:u.quantity>1||!o.giftable||h||u.extraParamRequired&&(!u.extraData||!u.extraData.length),onClick:f=>C(!0),children:m("catalog.purchase_confirmation.gift")}),t(I,{})]})},Xd=a=>{const{offer:e=null,separator:r=!1}=a,{purchaseOptions:n=null}=De(),{quantity:s=1}=n;return e?l(V,{children:[e.priceInCredits>0&&l(v,{alignItems:"center",gap:1,children:[t(N,{bold:!0,children:e.priceInCredits*s}),t(Et,{type:-1})]}),r&&e.priceInCredits>0&&e.priceInActivityPoints>0&&t(Ss,{size:"xs",color:"black",className:"fa-icon"}),e.priceInActivityPoints>0&&l(v,{alignItems:"center",gap:1,children:[l(N,{bold:!0,children:[" ",e.priceInActivityPoints*s]}),t(Et,{type:e.activityPointType})]})]}):null},Cn=a=>{const{gap:e=1,...r}=a,{currentOffer:n=null}=De();return t(v,{gap:e,...r,children:t(Xd,{offer:n})})},Jn=a=>{const{currentOffer:e=null,roomPreviewer:r=null,purchaseOptions:n=null}=De(),{previewStuffData:s=null}=n;return i.exports.useEffect(()=>{if(!e||e.pricingModel===it.PRICING_MODEL_BUNDLE||!r)return;const o=e.product;if(o)switch(r.reset(!1),o.productType){case ge.FLOOR:{if(!o.furnitureData)return;if(o.furnitureData.specialType===ee.FIGURE_PURCHASABLE_SET){const u=H().getFloorItemData(o.furnitureData.id).customParams.split(",").map(d=>parseInt(d)),g=[];for(const d of u)Tt().isValidFigureSetForGender(d,H().gender)&&g.push(d);const p=Tt().getFigureStringWithFigureIds(H().figure,H().gender,g);r.addAvatarIntoRoom(p,o.productClassId)}else r.addFurnitureIntoRoom(o.productClassId,new Rt(90),s,o.extraParam);return}case ge.WALL:{if(!o.furnitureData)return;switch(o.furnitureData.specialType){case ee.FLOOR:r.updateObjectRoom(o.extraParam);return;case ee.WALL_PAPER:r.updateObjectRoom(null,o.extraParam);return;case ee.LANDSCAPE:{r.updateObjectRoom(null,null,o.extraParam);const c=H().getWallItemDataByName("window_double_default");c&&r.addWallItemIntoRoom(c.id,new Rt(90),c.customParams);return}default:r.updateObjectRoom("default","default","default"),r.addWallItemIntoRoom(o.productClassId,new Rt(90),o.extraParam);return}}case ge.ROBOT:r.addAvatarIntoRoom(o.extraParam,0);return;case ge.EFFECT:r.addAvatarIntoRoom(H().figure,o.productClassId);return}},[e,s,r]),e?e.pricingModel===it.PRICING_MODEL_BUNDLE?t(S,{fit:!0,overflow:"hidden",className:"bg-muted p-2 rounded",children:t(Ue,{fullWidth:!0,columnCount:4,className:"nitro-catalog-layout-bundle-grid",children:e.products.length>0&&e.products.map((o,c)=>t(Re,{itemImage:o.getIconUrl(e),itemCount:o.productCount},c))})}):t(ua,{roomPreviewer:r,height:235}):null},wT=a=>{const{page:e=null}=a,{currentOffer:r=null}=De();return l(V,{children:[t(Ca,{}),l(le,{children:[l(S,{size:7,overflow:"hidden",children:[t(so,{shrink:!0}),l(S,{gap:1,overflow:"hidden",children:[t(N,{truncate:!0,shrink:!0,fontWeight:"bold",children:m("catalog_selectbadge")}),t(ST,{})]})]}),l(S,{center:!r,size:5,overflow:"hidden",children:[!r&&l(V,{children:[!!e.localization.getImage(1)&&t("img",{alt:"",src:e.localization.getImage(1)}),t(N,{center:!0,dangerouslySetInnerHTML:{__html:e.localization.getText(0)}})]}),r&&l(V,{children:[t(M,{position:"relative",overflow:"hidden",children:t(Jn,{})}),l(S,{grow:!0,gap:1,children:[t(_a,{fullWidth:!0}),t(N,{grow:!0,truncate:!0,children:r.localizationName}),t(v,{justifyContent:"end",children:t(Cn,{alignItems:"end"})}),t(Gr,{})]})]})]})]})]})},Yn=a=>{const{...e}=a,{currentOffer:r=null}=De();return!r||!r.badgeCode||!r.badgeCode.length?null:t(je,{badgeCode:r.badgeCode,...e})},RT=1,xT=100,Xi=a=>{const{currentOffer:e=null,purchaseOptions:r=null,setPurchaseOptions:n=null}=De(),{quantity:s=1}=r,o=c=>{isNaN(c)&&(c=1),c=Math.max(c,RT),c=Math.min(c,xT),c!==s&&n(u=>{const g={...u};return g.quantity=c,g})};return!e||!e.bundlePurchaseAllowed?null:l(V,{children:[t(N,{children:m("catalog.bundlewidget.spinner.select.amount")}),l(v,{alignItems:"center",gap:1,children:[t(eu,{className:"text-black cursor-pointer fa-icon",onClick:c=>o(s-1)}),t("input",{type:"number",className:"form-control form-control-sm quantity-input",value:s,onChange:c=>o(c.target.valueAsNumber)}),t(tu,{className:"text-black cursor-pointer fa-icon",onClick:c=>o(s+1)})]})]})},yT=a=>{const{page:e=null}=a,[r,n]=i.exports.useState(new Map),{currentOffer:s=null,setCurrentOffer:o=null}=De(),[c,u]=i.exports.useState(!1),g=(I,f)=>!I.product.furnitureData.colorIndex||!f.product.furnitureData.colorIndex||I.product.furnitureData.colorIndex>f.product.furnitureData.colorIndex?1:I==f?0:-1,p=(I,f)=>I.product.furnitureData.className>f.product.furnitureData.className?1:I==f?0:-1,d=I=>{I.activate(),o(I)},h=(I,f)=>{const _=`${f}*${I}`,E=e.offers.findIndex(b=>b.product.furnitureData.fullName===_);E>-1&&d(e.offers[E])},C=i.exports.useMemo(()=>{const I=[],f=new Map,_=new Map;return e.offers.sort(g),e.offers.forEach(E=>{if(!E.product)return;const b=E.product.furnitureData;if(!b||!b.hasIndexedColor)I.push(E);else{const T=b.className,w=b.colorIndex;_.has(T)||_.set(T,[]);let O=16777215;if(b.colors){for(let R of b.colors)R!==16777215&&(O=R);_.get(T).indexOf(O)===-1&&(_.get(T)[w]=O)}f.has(T)||(I.push(E),f.set(T,!0))}}),I.sort(p),n(_),I},[e.offers]);return l(le,{children:[t(S,{size:7,overflow:"hidden",children:l(Ue,{columnCount:5,children:[(!c||!s||!r.has(s.product.furnitureData.className))&&C.map((I,f)=>t(Ki,{itemActive:s&&(s.product.furnitureData.hasIndexedColor?s.product.furnitureData.className===I.product.furnitureData.className:s.offerId===I.offerId),offer:I,selectOffer:d},f)),c&&s&&r.has(s.product.furnitureData.className)&&r.get(s.product.furnitureData.className).map((I,f)=>t(Re,{itemHighlight:!0,itemActive:s.product.furnitureData.colorIndex===f,itemColor:sr.int2rgb(I),className:"clear-bg",onClick:_=>h(f,s.product.furnitureData.className)},f))]})}),l(S,{center:!s,size:5,overflow:"hidden",children:[!s&&l(V,{children:[!!e.localization.getImage(1)&&t("img",{alt:"",src:e.localization.getImage(1)}),t(N,{center:!0,dangerouslySetInnerHTML:{__html:e.localization.getText(0)}})]}),s&&l(V,{children:[l(M,{position:"relative",overflow:"hidden",children:[t(Jn,{}),t(Yn,{position:"absolute",className:"bg-muted rounded bottom-1 end-1"}),s.product.furnitureData.hasIndexedColor&&t(L,{position:"absolute",className:"bottom-1 start-1",onClick:I=>u(f=>!f),children:t(ru,{className:"fa-icon"})})]}),l(S,{grow:!0,gap:1,children:[t(_a,{fullWidth:!0}),t(N,{grow:!0,truncate:!0,children:s.localizationName}),l(v,{justifyContent:"between",children:[t(S,{gap:1,children:t(Xi,{})}),t(Cn,{justifyContent:"end",alignItems:"end"})]}),t(Gr,{})]})]})]})]})},OT=a=>{const{page:e=null}=a,{currentOffer:r=null,currentPage:n=null}=De();return l("div",{children:[l(S,{className:"position-relative catalog-default-image",center:!r,size:5,overflow:"hidden",children:[!r&&t(V,{children:!!e.localization.getImage(1)&&t("img",{className:"catalog-image-column",alt:"",src:e.localization.getImage(1)})}),r&&l(V,{children:[l(M,{position:"relative",overflow:"hidden",children:[t(Jn,{}),t(Cn,{className:"credits-default-layout credits-bg py-1 px-2 bottom-1 end-1",justifyContent:"end",alignItems:"end"}),t(_a,{fullWidth:!0,position:"absolute",className:"top-1"}),t(Yn,{position:"absolute",className:"bg-muted rounded top-1 end-1"})]}),t(S,{grow:!0,gap:1,children:t(N,{bold:!0,variant:"white",className:"item-title",grow:!0,truncate:!0,children:r.localizationName})})]})]}),t(S,{className:"grid-bg item-picker p-2",size:7,overflow:"hidden",children:t(so,{})}),t(v,{gap:1,className:"quanity-container mt-2",children:t(Xi,{})}),t(v,{gap:2,className:"purchase-buttons align-items-end mt-2",children:t(Gr,{})})]})},kT=a=>{const{...e}=a,{currentOffer:r=null,purchaseOptions:n=null}=De(),{previewStuffData:s=null}=n,o=i.exports.useMemo(()=>{if(!r||!s)return null;const c=s.getValue(2);return!c||!c.length?null:c},[r,s]);return o?t(je,{badgeCode:o,isGroup:!0,...e}):null},Qd=a=>{const[e,r]=i.exports.useState(0),{currentOffer:n=null,catalogOptions:s=null,setPurchaseOptions:o=null}=De(),{groups:c=null}=s,u=i.exports.useMemo(()=>{if(!c||!c.length)return null;const p=c[e];if(!p)return null;const d=new $s;return d.setValue(["0",p.groupId.toString(),p.badgeCode,p.colorA,p.colorB]),d},[e,c]);if(i.exports.useEffect(()=>{n&&o(p=>{const d={...p};return d.extraParamRequired=!0,d.extraData=u&&u.getValue(1)||null,d.previewStuffData=u,d})},[n,u,o]),i.exports.useEffect(()=>{D(new Ou)},[]),!c||!c.length)return l(M,{className:"bg-muted rounded p-1 text-black text-center",children:[m("catalog.guild_selector.members_only"),t(L,{className:"mt-1",children:m("catalog.guild_selector.find_groups")})]});const g=c[e];return l(v,{gap:1,children:[!!g&&l(v,{overflow:"hidden",className:"rounded border",children:[t(M,{fullHeight:!0,style:{width:"20px",backgroundColor:"#"+g.colorA}}),t(M,{fullHeight:!0,style:{width:"20px",backgroundColor:"#"+g.colorB}})]}),t("select",{className:"form-select form-select-sm",value:e,onChange:p=>r(parseInt(p.target.value)),children:c.map((p,d)=>t("option",{value:d,children:p.groupName},d))})]})},AT=a=>{const{page:e=null}=a,{currentOffer:r=null}=De();return l(S,{children:[l(S,{className:"position-relative",center:!r,size:5,overflow:"hidden",children:[!r&&l(V,{children:[!!e.localization.getImage(1)&&t("img",{alt:"",src:e.localization.getImage(1)}),t(N,{className:"py-5",center:!0,dangerouslySetInnerHTML:{__html:e.localization.getText(0)}})]}),r&&l(V,{children:[l(M,{position:"relative",overflow:"hidden",children:[t(Jn,{}),t(kT,{position:"absolute",className:"top-1 end-1"}),t(Cn,{className:"credits-default-layout credits-bg py-1 px-2 bottom-1 end-1",justifyContent:"end",alignItems:"end"})]}),l(S,{grow:!0,gap:1,children:[t(N,{bold:!0,variant:"white",className:"item-title",grow:!0,truncate:!0,children:r.localizationName}),t(v,{justifyContent:"between"})]}),t(M,{grow:!0,children:t(Qd,{})})]})]}),t(S,{className:"grid-bg group-furni-picker p-2",size:7,overflow:"hidden",children:t(so,{})}),t(v,{gap:2,className:"purchase-buttons align-items-end mt-2",children:t(Gr,{})})]})},PT=a=>{const{page:e=null}=a;i.exports.useState(0);const{currentOffer:r=null,setCurrentOffer:n=null,catalogOptions:s=null}=De();return i.exports.useEffect(()=>{D(new Ou)},[e]),l(V,{children:[t(Ca,{}),l(S,{children:[t(S,{className:"p-1",overflow:"hidden",children:t(N,{className:"group-forum-page",dangerouslySetInnerHTML:{__html:e.localization.getText(1)}})}),t(S,{overflow:"hidden",gap:1,children:!!r&&t(V,{children:l(S,{grow:!0,gap:0,children:[t(N,{truncate:!0,children:r.localizationName}),t(M,{grow:!0,children:t(Qd,{})}),t(v,{justifyContent:"end",children:t(Cn,{alignItems:"end"})}),t(Gr,{noGiftOption:!0})]})})})]})]})},DT=a=>{const{page:e=null}=a;return l(S,{children:[l(S,{gap:4,overflow:"hidden",className:"p-3",children:[t(N,{bold:!0,dangerouslySetInnerHTML:{__html:e.localization.getText(2)}}),t(N,{overflow:"auto",dangerouslySetInnerHTML:{__html:e.localization.getText(0)}}),t(N,{dangerouslySetInnerHTML:{__html:e.localization.getText(1)}})]}),l(S,{center:!0,size:5,overflow:"hidden",children:[t(hn,{imageUrl:e.localization.getImage(1)}),t(L,{onClick:()=>Z("groups/create"),children:m("catalog.start.guild.purchase.button")})]})]})},MT=a=>{const{page:e=null}=a;return t("div",{className:"h-100 nitro-catalog-layout-info-loyalty text-black d-flex flex-row",children:t("div",{className:"overflow-auto h-100 d-flex flex-column info-loyalty-content",children:t("div",{dangerouslySetInnerHTML:{__html:e.localization.getText(0)}})})})},Jd=a=>{const{page:e=null}=a,r=e.localization.getImage(1);return l(S,{grow:!0,className:"bg-muted rounded text-black p-2",overflow:"hidden",children:[l(v,{alignItems:"center",gap:2,children:[r&&t("img",{alt:"",src:r}),t(M,{className:"fs-5",dangerouslySetInnerHTML:{__html:e.localization.getText(1)}})]}),t(S,{grow:!0,alignItems:"center",overflow:"auto",children:t(M,{dangerouslySetInnerHTML:{__html:e.localization.getText(2)}})}),t(v,{alignItems:"center",children:t(M,{className:"fw-bold",dangerouslySetInnerHTML:{__html:e.localization.getText(3)}})})]})},LT=a=>t(Jd,{...a}),UT=a=>{const{page:e=null}=a,[r,n]=i.exports.useState(""),[s,o]=i.exports.useState(""),[c,u]=i.exports.useState(-1),[g,p]=i.exports.useState([]),[d,h]=i.exports.useState(!1),[C,I]=i.exports.useState(1),{categories:f=null}=kr(),{setIsVisible:_=null}=De(),{promoteInformation:E,isExtended:b,setIsExtended:T}=Yi();i.exports.useEffect(()=>{b&&(u(E.data.flatId),n(E.data.eventName),o(E.data.eventDescription),I(E.data.categoryId),h(b),T(!1))},[b,r,s,C]);const w=()=>{u(-1),n(""),o(""),I(1),T(!1),_(!1)},O=()=>{const R=e.pageId,x=e.offers.length>=1?e.offers[0].offerId:-1,F=c,A=r,k=s,y=C;D(new eI(R,x,F,A,d,k,y)),w()};return U(Jf,R=>{const x=R.getParser();x&&p(x.rooms)}),i.exports.useEffect(()=>{D(new Zf),D(new _u)},[]),l(V,{children:[t(N,{bold:!0,center:!0,children:m("roomad.catalog_header")}),l(S,{size:12,overflow:"hidden",className:"text-black",children:[t(M,{children:m("roomad.catalog_text",["duration"],["120"])}),l(M,{className:"bg-muted rounded p-1",children:[l(S,{gap:2,children:[t(N,{bold:!0,children:m("navigator.category")}),t("select",{className:"form-select form-select-sm",value:C,onChange:R=>I(parseInt(R.target.value)),disabled:d,children:f&&f.map((R,x)=>t("option",{value:R.id,children:m(R.name)},x))})]}),l(S,{gap:1,children:[t(N,{bold:!0,children:m("roomad.catalog_name")}),t("input",{type:"text",className:"form-control form-control-sm",maxLength:64,value:r,onChange:R=>n(R.target.value),readOnly:d})]}),l(S,{gap:1,children:[t(N,{bold:!0,children:m("roomad.catalog_description")}),t("textarea",{className:"form-control form-control-sm",maxLength:64,value:s,onChange:R=>o(R.target.value),readOnly:d})]}),l(S,{gap:1,children:[t(N,{bold:!0,children:m("roomad.catalog_roomname")}),l("select",{className:"form-select form-select-sm",value:c,onChange:R=>u(parseInt(R.target.value)),disabled:d,children:[t("option",{value:-1,disabled:!0,children:m("roomad.catalog_roomname")}),g&&g.map((R,x)=>t("option",{value:R.roomId,children:R.roomName},x))]})]}),t(S,{gap:1,children:t(L,{variant:!r||!s||c===-1?"danger":"success",onClick:O,disabled:!r||!s||c===-1,children:m(d?"roomad.extend.event":"buy")})})]})]})]})},Zd=a=>{const{columnCount:e=5,children:r=null,...n}=a,{currentOffer:s=null}=De(),o=i.exports.useRef();return i.exports.useEffect(()=>{o&&o.current&&(o.current.scrollTop=0)},[s]),s?l(Ue,{innerRef:o,columnCount:5,...n,children:[s.products&&s.products.length>0&&s.products.map((c,u)=>t(Re,{itemImage:c.getIconUrl(),itemCount:c.productCount},u)),r]}):null},em=a=>{const{gap:e=1,...r}=a,{currentOffer:n=null}=De();return t(v,{gap:e,alignItems:"center",classNames:["bg-muted","p-1","rounded"],...r,children:t(Xd,{separator:!0,offer:n})})},FT=a=>{const{page:e=null}=a;return l(V,{children:[t(Ca,{}),l(le,{children:[l(S,{size:7,overflow:"hidden",children:[!!e.localization.getText(2)&&t(N,{dangerouslySetInnerHTML:{__html:e.localization.getText(2)}}),t(S,{grow:!0,overflow:"hidden",className:"bg-muted p-2 rounded",children:t(Zd,{fullWidth:!0,className:"nitro-catalog-layout-bundle-grid"})})]}),l(S,{size:5,overflow:"hidden",gap:1,children:[!!e.localization.getText(1)&&t(N,{center:!0,small:!0,overflow:"auto",children:e.localization.getText(1)}),l(S,{grow:!0,position:"relative",overflow:"hidden",gap:0,children:[!!e.localization.getImage(1)&&t("img",{alt:"",className:"flex-grow-1",src:e.localization.getImage(1)}),t(Yn,{position:"absolute",className:"bg-muted rounded bottom-0 start-0"}),t(em,{position:"absolute",className:"bottom-0 end-0"})]}),t(S,{gap:1,children:t(Gr,{})})]})]})]})},GT=a=>{const{page:e=null}=a;return l(V,{children:[t(Ca,{}),t(S,{children:!!e.localization.getText(1)&&t(N,{center:!0,small:!0,overflow:"auto",children:e.localization.getText(1)})}),l(le,{children:[l(S,{size:5,overflow:"hidden",gap:1,children:[l(S,{grow:!0,position:"relative",overflow:"hidden",gap:0,children:[!!e.localization.getImage(1)&&t("img",{alt:"",className:"flex-grow-1",src:e.localization.getImage(1)}),t(Yn,{position:"absolute",className:"bg-muted rounded bottom-0 start-0"}),t(em,{position:"absolute",className:"bottom-0 end-0"})]}),t(S,{gap:1,children:t(Gr,{})})]}),l(S,{size:7,overflow:"hidden",children:[!!e.localization.getText(2)&&t(N,{dangerouslySetInnerHTML:{__html:e.localization.getText(2)}}),t(S,{grow:!0,overflow:"hidden",className:"grid-bg p-2",children:t(Zd,{fullWidth:!0,className:"nitro-catalog-layout-bundle-grid"})})]})]})]})},BT=a=>{const{imageUrl:e=null}=a,[r,n]=i.exports.useState("");return i.exports.useEffect(()=>{n(e??K("catalog.asset.image.url").replace("%name%","catalog_header_roombuilder"))},[e]),t(v,{center:!0,fullWidth:!0,className:"nitro-catalog-header",children:t("img",{src:r,onError:({currentTarget:s})=>{s.src=K("catalog.asset.image.url").replace("%name%","catalog_header_roombuilder")}})})},VT=a=>{const{page:e=null}=a,[r,n]=i.exports.useState(-1),[s,o]=i.exports.useState(""),{currentOffer:c=null,currentPage:u=null}=De(),g=p=>{var d;return(d=Ce().soundManager.musicController)==null?void 0:d.playSong(p,Ps.PRIORITY_PURCHASE_PREVIEW,15,0,0,0)};return U(tI,p=>{const d=p.getParser();d.officialSongId===s&&n(d.songId)}),i.exports.useEffect(()=>{if(!c)return;const p=c.product;if(p){if(p.extraParam.length>0){const d=parseInt(p.extraParam);d>0?n(d):(o(p.extraParam),D(new rI(p.extraParam)))}else o(""),n(-1);return()=>{var d;return(d=Ce().soundManager.musicController)==null?void 0:d.stop(Ps.PRIORITY_PURCHASE_PREVIEW)}}},[c]),i.exports.useEffect(()=>()=>{var p;return(p=Ce().soundManager.musicController)==null?void 0:p.stop(Ps.PRIORITY_PURCHASE_PREVIEW)},[]),t(V,{children:l(le,{children:[l(S,{size:7,overflow:"hidden",children:[K("catalog.headers")&&t(BT,{imageUrl:u.localization.getImage(0)}),t(so,{})]}),l(S,{center:!c,size:5,overflow:"hidden",children:[!c&&l(V,{children:[!!e.localization.getImage(1)&&t(hn,{imageUrl:e.localization.getImage(1)}),t(N,{center:!0,dangerouslySetInnerHTML:{__html:e.localization.getText(0)}})]}),c&&l(V,{children:[l(v,{center:!0,overflow:"hidden",style:{height:140},children:[c.product.productType!==ge.BADGE&&l(V,{children:[t(Jn,{}),t(Yn,{className:"bg-muted rounded bottom-1 end-1"})]}),c.product.productType===ge.BADGE&&t(Yn,{className:"scale-2"})]}),l(S,{grow:!0,gap:1,children:[t(_a,{fullWidth:!0}),t(N,{grow:!0,truncate:!0,children:c.localizationName}),r>-1&&t(L,{onClick:()=>g(r),children:m("play_preview_button")}),l(v,{justifyContent:"between",children:[t(S,{gap:1,children:t(Xi,{})}),t(Cn,{justifyContent:"end",alignItems:"end"})]}),t(Gr,{})]})]})]})]})})},HT=["floors","walls","views"],WT=a=>{const{columnCount:e=5,children:r=null,...n}=a,[s,o]=i.exports.useState(null),[c,u]=i.exports.useState(-1),[g,p]=i.exports.useState(null),{currentPage:d=null,currentOffer:h=null,setCurrentOffer:C=null,setPurchaseOptions:I=null}=De(),f=i.exports.useRef(),_=b=>{b&&p(T=>{const w=[...T];return w[c]=b,w})};if(i.exports.useEffect(()=>{if(!d)return;const b=[[],[],[]];for(const T of d.offers){if(T.pricingModel!==it.PRICING_MODEL_SINGLE&&T.pricingModel!==it.PRICING_MODEL_MULTI)continue;const w=T.product;if(!w||w.productType!==ge.WALL&&w.productType!==ge.FLOOR||!w.furnitureData)continue;switch(w.furnitureData.className){case"floor":b[0].push(T);break;case"wallpaper":b[1].push(T);break;case"landscape":b[2].push(T);break}}o(b),u(0),p([b[0][0],b[1][0],b[2][0]])},[d]),i.exports.useEffect(()=>{c===-1||!g||C(g[c])},[c,g,C]),i.exports.useEffect(()=>{c===-1||!g||!h||I(b=>{const T={...b};return T.extraData=g[c].product.extraParam,T.extraParamRequired=!0,T})},[h,c,g,I]),i.exports.useEffect(()=>{f&&f.current&&(f.current.scrollTop=0)},[c]),!s||c===-1)return null;const E=s[c];return l(V,{children:[t(Kr,{className:"purchase-buttons",children:HT.map((b,T)=>t(L,{active:c===T,onClick:w=>u(T),children:m(`catalog.spaces.tab.${b}`)},T))}),t(S,{className:"grid-bg item-picker p-2",size:7,overflow:"hidden",children:l(Ue,{columnCount:e,...n,children:[E&&E.length>0&&E.map((b,T)=>t(Ki,{itemActive:h&&h===b,offer:b,selectOffer:w=>_(w)},T)),r]})})]})},jT=a=>{const{page:e=null}=a,{currentOffer:r=null,roomPreviewer:n=null}=De();return i.exports.useEffect(()=>{n.updatePreviewObjectBoundingRectangle(new vn)},[n]),l(S,{children:[l(S,{center:!r,size:5,overflow:"hidden",children:[!r&&l(V,{children:[!!e.localization.getImage(1)&&t("img",{alt:"",src:e.localization.getImage(1)}),t(N,{center:!0,dangerouslySetInnerHTML:{__html:e.localization.getText(0)}})]}),r&&l(V,{children:[l(M,{position:"relative",overflow:"hidden",children:[t(Jn,{}),t(Cn,{className:"credits-default-layout credits-bg py-1 px-2 bottom-1 end-1",justifyContent:"end",alignItems:"end"}),t(N,{bold:!0,variant:"white",className:"item-title",grow:!0,truncate:!0,children:r.localizationName})]}),t(v,{gap:2,className:"purchase-buttons align-items-end mt-2",children:t(Gr,{})})]})]}),t(S,{size:7,overflow:"hidden",children:t(WT,{})})]})},qT=a=>{const{page:e=null}=a,[r,n]=i.exports.useState(""),{currentOffer:s=null,setPurchaseOptions:o=null}=De();return i.exports.useEffect(()=>{s&&o(c=>{const u={...c};return u.extraData=r,u})},[s,r,o]),l(S,{children:[t(S,{className:"pt-2",center:!s,overflow:"hidden",children:l(V,{children:[!!e.localization.getImage(1)&&t("img",{alt:"",src:e.localization.getImage(1)}),t(N,{small:!0,center:!0,dangerouslySetInnerHTML:{__html:e.localization.getText(0)}})]})}),l(S,{size:7,overflow:"hidden",children:[t(S,{className:"grid-bg item-picker p-2",size:7,overflow:"hidden",children:t(so,{})}),s&&t(V,{children:l(S,{grow:!0,gap:1,children:[t(N,{grow:!0,center:!0,truncate:!0,children:s.localizationName}),t(v,{justifyContent:"end",children:t(Cn,{alignItems:"end",className:"credits-bg py-1 px-2"})}),t(v,{gap:2,className:"purchase-buttons align-items-end mt-2",children:t(Gr,{})})]})}),t("textarea",{className:"flex-grow-1 form-control w-100 trophy-text",defaultValue:r||"",onChange:c=>n(c.target.value)})]})]})},zT=a=>{const[e,r]=i.exports.useState(null),[n,s]=i.exports.useState(Be.NONE),{currentPage:o=null,catalogOptions:c=null}=De(),{purse:u=null,getCurrencyAmount:g=null}=Qn(),{clubOffers:p=null}=c,d=i.exports.useCallback(b=>{switch(b.type){case pn.PURCHASE_SUCCESS:s(Be.NONE);return;case zn.PURCHASE_FAILED:s(Be.FAILED);return}},[]);lt(pn.PURCHASE_SUCCESS,d),lt(zn.PURCHASE_FAILED,d);const h=i.exports.useCallback(b=>{let T="";return b.months>0&&(T=m("catalog.vip.item.header.months",["num_months"],[b.months.toString()])),b.extraDays>0&&(T!==""&&(T+=" "),T+=" "+m("catalog.vip.item.header.days",["num_days"],[b.extraDays.toString()])),T},[]),C=i.exports.useCallback(()=>{if(!u)return"";const b=u.clubDays>0||u.clubPeriods>0?"extension.":"subscription.",T=e.months===0?"days":"months",w=e.months===0?e.extraDays:e.months;return m("catalog.vip.buy.confirm."+b+T).replace("%NUM_"+T.toUpperCase()+"%",w.toString())},[e,u]);i.exports.useCallback(()=>{let b=m("catalog.vip.buy.confirm.end_date");return b=b.replace("%month%",e.month.toString()),b=b.replace("%day%",e.day.toString()),b=b.replace("%year%",e.year.toString()),b},[e]);const I=i.exports.useMemo(()=>{const b=u.clubDays,w=u.clubPeriods*31+b;return m("catalog.vip.extend.info",["days"],[w.toString()])},[u]),f=i.exports.useCallback(()=>{e&&(s(Be.PURCHASE),D(new sa(o.pageId,e.offerId,null,1)))},[e,o]),_=i.exports.useCallback(b=>{s(Be.NONE),r(b)},[]),E=i.exports.useCallback(()=>{if(!e)return null;if(e.priceCredits>g(-1))return t(L,{fullWidth:!0,variant:"danger",children:m("catalog.alert.notenough.title")});if(e.priceActivityPoints>g(e.priceActivityPointsType))return t(L,{fullWidth:!0,variant:"danger",children:m("catalog.alert.notenough.activitypoints.title."+e.priceActivityPointsType)});switch(n){case Be.CONFIRM:return t(L,{variant:"warning",onClick:f,children:m("catalog.marketplace.confirm_title")});case Be.PURCHASE:return t(L,{variant:"primary",disabled:!0,children:t(Wi,{})});case Be.FAILED:return t(L,{variant:"danger",disabled:!0,children:m("generic.failed")});case Be.NONE:default:return t(L,{variant:"success",onClick:()=>s(Be.CONFIRM),children:m("buy")})}},[e,n,f,g]);return i.exports.useEffect(()=>{p||D(new nI(1))},[p]),l(S,{fullHeight:!0,children:[l(v,{fullHeight:!0,center:!0,overflow:"hidden",children:[o.localization.getImage(1)&&t("img",{alt:"",src:o.localization.getImage(1)}),l(S,{className:"px-2",children:[t(N,{bold:!0,children:m("catalog.vip.extend.title")}),t(N,{small:!0,overflow:"auto",dangerouslySetInnerHTML:{__html:I}})]})]}),l(S,{fullHeight:!0,size:7,overflow:"hidden",justifyContent:"between",children:[t(Ue,{columnCount:1,className:"nitro-catalog-layout-vip-buy-grid",children:p&&p.length>0&&p.map((b,T)=>l(Re,{column:!1,center:!1,alignItems:"center",justifyContent:"between",itemActive:e===b,className:"p-1",onClick:()=>_(b),children:[t("i",{className:"icon-hc-banner"}),l(S,{justifyContent:"end",gap:0,children:[t(N,{textEnd:!0,children:h(b)}),l(v,{justifyContent:"end",gap:1,children:[b.priceCredits>0&&l(v,{alignItems:"center",justifyContent:"end",gap:1,children:[t(N,{children:b.priceCredits}),t(Et,{type:-1})]}),b.priceActivityPoints>0&&l(v,{alignItems:"center",justifyContent:"end",gap:1,children:[t(N,{children:b.priceActivityPoints}),t(Et,{type:b.priceActivityPointsType})]})]})]})]},T))}),t(S,{size:5,overflow:"hidden",children:e&&t(S,{fullWidth:!0,grow:!0,justifyContent:"end",children:l(v,{alignItems:"end",children:[l(S,{grow:!0,gap:0,children:[t(N,{fontWeight:"bold",children:C()}),l(v,{gap:1,children:[e.priceCredits>0&&l(v,{alignItems:"center",justifyContent:"end",gap:1,children:[t(N,{children:e.priceCredits}),t(Et,{type:-1})]}),e.priceActivityPoints>0&&l(v,{alignItems:"center",justifyContent:"end",gap:1,children:[t(N,{children:e.priceActivityPoints}),t(Et,{type:e.priceActivityPointsType})]})]})]}),E()]})})}),t(N,{small:!0,center:!0,className:"pb-2",dangerouslySetInnerHTML:{__html:m("catalog.vip.buy.hccenter")}})]})]})},YT=a=>{const{text:e=null}=a,[r,n]=i.exports.useState(""),[s,o]=i.exports.useState(!1),{simpleAlert:c=null}=Xe(),u=()=>{!r||!r.length||s||(D(new aI(r)),o(!0))};return U(sI,g=>{const p=g.getParser();let d=m("catalog.alert.voucherredeem.ok.description");p.productName&&(d=m("catalog.alert.voucherredeem.ok.description.furni",["productName","productDescription"],[p.productName,p.productDescription])),c(d,null,null,null,m("catalog.alert.voucherredeem.ok.title")),o(!1),n("")}),U(oI,g=>{const p=g.getParser();c(m(`catalog.alert.voucherredeem.error.description.${p.errorCode}`),null,null,null,m("catalog.alert.voucherredeem.error.title")),o(!1)}),l(S,{className:"voucher-box p-2",gap:1,children:[t(N,{className:"px-1",children:e}),l(v,{className:"voucher-form",gap:5,children:[t("input",{type:"text",className:"form-control form-control-sm",value:r,onChange:g=>n(g.target.value)}),t(L,{variant:"primary",onClick:u,disabled:s,children:m("redeem")})]})]})},To=a=>{const{item:e=null,position:r="relative",pointer:n=!0,overflow:s="hidden",fullHeight:o=!0,classNames:c=[],children:u=null,...g}=a,p=i.exports.useMemo(()=>{const h=["nitro-front-page-item"];return c.length&&h.push(...c),h},[c]);if(!e)return null;const d=K("image.library.url")+e.itemPromoImage;return l(Nd,{imageUrl:d,classNames:p,position:r,fullHeight:o,pointer:n,overflow:s,...g,children:[t(N,{position:"absolute",variant:"white",className:"nitro-front-page-item-text p-2 m-2 bottom-0",children:e.itemName}),u]})},$T=a=>{const{page:e=null,hideNavigation:r=null}=a,{frontPageItems:n=[]}=De(),s=i.exports.useCallback(o=>{switch(o.type){case hl.ITEM_CATALOGUE_PAGE:Z(`catalog/open/${o.catalogPageLocation}`);return;case hl.ITEM_PRODUCT_OFFER:Z(`catalog/open/${o.productOfferId}`);return}},[]);return i.exports.useEffect(()=>{r()},[e,r]),l(le,{children:[t(S,{size:4,children:n[0]&&t(To,{item:n[0],onClick:o=>s(n[0])})}),l(S,{size:8,children:[n[1]&&t(To,{item:n[1],onClick:o=>s(n[1])}),n[2]&&t(To,{item:n[2],onClick:o=>s(n[2])}),n[3]&&t(To,{item:n[3],onClick:o=>s(n[3])}),t(YT,{text:e.localization.getText(1)})]})]})},Ni=1,Fo=2,tm=a=>{const{offerData:e=null,type:r=Fo,onClick:n=null}=a,s=i.exports.useMemo(()=>e?m((e.furniType===2?"wallItem":"roomItem")+`.name.${e.furniId}`):"",[e]),o=i.exports.useCallback(()=>{if(!e)return"";if(e.status===qn.SOLD)return m("catalog.marketplace.offer.sold");if(e.timeLeftMinutes<=0)return m("catalog.marketplace.offer.expired");const c=Math.max(1,e.timeLeftMinutes),u=Math.floor(c/60);let p=c-u*60+" "+m("catalog.marketplace.offer.minutes");return u>0&&(p=u+" "+m("catalog.marketplace.offer.hours")+" "+p),m("catalog.marketplace.offer.time_left",["time"],[p])},[e]);return l(Re,{shrink:!0,center:!1,column:!1,alignItems:"center",className:"p-1",children:[t(S,{style:{width:40,height:40},children:t(Re,{column:!1,itemImage:N_(e.furniType===Xs.TYPE_FLOOR?ge.FLOOR:ge.WALL,e.furniId,e.extraData),itemUniqueNumber:e.isUniqueLimitedItem?e.stuffData.uniqueNumber:0})}),l(S,{grow:!0,gap:0,children:[t(N,{fontWeight:"bold",children:s}),r===Ni&&l(V,{children:[t(N,{children:m("catalog.marketplace.offer.price_own_item",["price"],[e.price.toString()])}),t(N,{children:o()})]}),r===Fo&&l(V,{children:[t(N,{children:m("catalog.marketplace.offer.price_public_item",["price","average"],[e.price.toString(),e.averagePrice>0?e.averagePrice.toString():"-"])}),t(N,{children:m("catalog.marketplace.offer_count",["count"],[e.offerCount.toString()])})]})]}),l(S,{gap:1,children:[r===Ni&&e.status!==qn.SOLD&&t(L,{variant:"secondary",onClick:()=>n(e),children:m("catalog.marketplace.offer.pick")}),r===Fo&&l(V,{children:[t(L,{variant:"secondary",onClick:()=>n(e),children:m("buy")}),t(L,{variant:"secondary",disabled:!0,children:m("catalog.marketplace.view_more")})]})]})]})},KT=a=>{const[e,r]=i.exports.useState(0),[n,s]=i.exports.useState([]),{simpleAlert:o=null}=Xe();U(iI,p=>{const d=p.getParser();if(!d)return;const h=d.offers.map(C=>{const I=new Xs(C.offerId,C.furniId,C.furniType,C.extraData,C.stuffData,C.price,C.status,C.averagePrice,C.offerCount);return I.timeLeftMinutes=C.timeLeftMinutes,I});r(d.creditsWaiting),s(h)}),U(lI,p=>{const d=p.getParser();if(d){if(!d.success){o(m("catalog.marketplace.cancel_failed"),ue.DEFAULT,null,null,m("catalog.marketplace.operation_failed.topic"));return}s(h=>h.filter(C=>C.offerId!==d.offerId))}});const c=i.exports.useMemo(()=>n.filter(p=>p.status===qn.SOLD),[n]),u=i.exports.useCallback(()=>{s(p=>{const d=c.map(h=>h.offerId);return p.filter(h=>d.indexOf(h.offerId)===-1)}),D(new cI)},[c]),g=p=>{D(new dI(p.offerId))};return i.exports.useEffect(()=>{D(new uI)},[]),l(S,{overflow:"hidden",children:[e<=0&&t(N,{center:!0,className:"bg-muted rounded p-1",children:m("catalog.marketplace.redeem.no_sold_items")}),e>0&&l(S,{center:!0,gap:1,className:"bg-muted rounded p-2",children:[t(N,{children:m("catalog.marketplace.redeem.get_credits",["count","credits"],[c.length.toString(),e.toString()])}),t(L,{className:"mt-1",onClick:u,children:m("catalog.marketplace.offer.redeem")})]}),l(S,{gap:1,overflow:"hidden",children:[t(N,{truncate:!0,shrink:!0,fontWeight:"bold",children:m("catalog.marketplace.items_found",["count"],[n.length.toString()])}),t(S,{overflow:"auto",className:"nitro-catalog-layout-marketplace-grid",children:n.length>0&&n.map(p=>t(tm,{offerData:p,type:Ni,onClick:g},p.offerId))})]})]})},XT=a=>{const{searchType:e=null,sortTypes:r=null,onSearch:n=null}=a,[s,o]=i.exports.useState(r?r[0]:3),[c,u]=i.exports.useState(""),[g,p]=i.exports.useState(0),[d,h]=i.exports.useState(0),C=i.exports.useCallback(f=>{o(f),(e===Lt.BY_ACTIVITY||e===Lt.BY_VALUE)&&n({minPrice:-1,maxPrice:-1,query:"",type:f})},[n,e]),I=i.exports.useCallback(()=>{const f=g>0?g:-1,_=d>0?d:-1;n({minPrice:f,maxPrice:_,type:s,query:c})},[d,g,n,c,s]);return i.exports.useEffect(()=>{if(!r||!r.length)return;const f=r[0];o(f),(e===Lt.BY_ACTIVITY||Lt.BY_VALUE===e)&&n({minPrice:-1,maxPrice:-1,query:"",type:f})},[n,e,r]),l(S,{gap:1,children:[l(v,{alignItems:"center",gap:1,children:[t(N,{className:"col-3",children:m("catalog.marketplace.sort_order")}),t("select",{className:"form-select form-select-sm",value:s,onChange:f=>C(parseInt(f.target.value)),children:r.map(f=>t("option",{value:f,children:m(`catalog.marketplace.sort.${f}`)},f))})]}),e===Lt.ADVANCED&&l(V,{children:[l(v,{alignItems:"center",gap:1,children:[t(N,{className:"col-3",children:m("catalog.marketplace.search_name")}),t("input",{className:"form-control form-control-sm",type:"text",value:c,onChange:f=>u(f.target.value)})]}),l(v,{alignItems:"center",gap:1,children:[t(N,{className:"col-3",children:m("catalog.marketplace.search_price")}),l(v,{fullWidth:!0,gap:1,children:[t("input",{className:"form-control form-control-sm",type:"number",min:0,value:g,onChange:f=>p(f.target.valueAsNumber)}),t("input",{className:"form-control form-control-sm",type:"number",min:0,value:d,onChange:f=>h(f.target.valueAsNumber)})]})]}),t(L,{variant:"secondary",className:"mx-auto",onClick:I,children:m("generic.search")})]})]})},QT=[1,2],JT=[3,4,5,6],ZT=[1,2,3,4,5,6],ev=a=>{const[e,r]=i.exports.useState(Lt.BY_ACTIVITY),[n,s]=i.exports.useState(0),[o,c]=i.exports.useState(new Map),[u,g]=i.exports.useState({minPrice:-1,maxPrice:-1,query:"",type:3}),{getCurrencyAmount:p=null}=Qn(),{simpleAlert:d=null,showConfirm:h=null}=Xe(),C=i.exports.useCallback(_=>{g(_),D(new mI(_.minPrice,_.maxPrice,_.query,_.type))},[]),I=i.exports.useMemo(()=>{switch(e){case Lt.BY_ACTIVITY:return JT;case Lt.BY_VALUE:return QT;case Lt.ADVANCED:return ZT}return[]},[e]),f=i.exports.useCallback(_=>{if(_.price>p(-1)){d(m("catalog.alert.notenough.credits.description"),ue.DEFAULT,null,null,m("catalog.alert.notenough.title"));return}const E=_.offerId;h(m("catalog.marketplace.confirm_header"),()=>{D(new fl(E))},null,null,null,m("catalog.marketplace.confirm_title"))},[p,d,h]);return U(gI,_=>{const E=_.getParser();if(!E)return;const b=new Map;E.offers.forEach(T=>{const w=new Xs(T.offerId,T.furniId,T.furniType,T.extraData,T.stuffData,T.price,T.status,T.averagePrice,T.offerCount);w.timeLeftMinutes=T.timeLeftMinutes,b.set(T.offerId,w)}),s(E.totalItemsFound),c(b)}),U(pI,_=>{const E=_.getParser();if(E)switch(E.result){case 1:C(u);break;case 2:c(b=>{const T=new Map(b);return T.delete(E.requestedOfferId),T}),d(m("catalog.marketplace.not_available_header"),ue.DEFAULT,null,null,m("catalog.marketplace.not_available_title"));break;case 3:c(b=>{const T=new Map(b),w=T.get(E.requestedOfferId);return w&&(w.offerId=E.offerId,w.price=E.newPrice,w.offerCount--,T.set(w.offerId,w)),T.delete(E.requestedOfferId),T}),h(m("catalog.marketplace.confirm_higher_header")+`
`+m("catalog.marketplace.confirm_price",["price"],[E.newPrice.toString()]),()=>{D(new fl(E.offerId))},null,null,null,m("catalog.marketplace.confirm_higher_title"));break;case 4:d(m("catalog.alert.notenough.credits.description"),ue.DEFAULT,null,null,m("catalog.alert.notenough.title"));break}}),l(V,{children:[l(Kr,{children:[t(L,{active:e===Lt.BY_ACTIVITY,onClick:()=>r(Lt.BY_ACTIVITY),children:m("catalog.marketplace.search_by_activity")}),t(L,{active:e===Lt.BY_VALUE,onClick:()=>r(Lt.BY_VALUE),children:m("catalog.marketplace.search_by_value")}),t(L,{active:e===Lt.ADVANCED,onClick:()=>r(Lt.ADVANCED),children:m("catalog.marketplace.search_advanced")})]}),t(XT,{sortTypes:I,searchType:e,onSearch:C}),l(S,{gap:1,overflow:"hidden",children:[t(N,{truncate:!0,shrink:!0,fontWeight:"bold",children:m("catalog.marketplace.items_found",["count"],[o.size.toString()])}),t(S,{className:"nitro-catalog-layout-marketplace-grid",overflow:"auto",children:Array.from(o.values()).map((_,E)=>t(tm,{offerData:_,type:Fo,onClick:f},E))})]})]})},tv=a=>{const{page:e=null}=a,[r,n]=i.exports.useState(-1),[s,o]=i.exports.useState([]),[c,u]=i.exports.useState(-1),[g,p]=i.exports.useState([]),[d,h]=i.exports.useState(-1),[C,I]=i.exports.useState(!1),[f,_]=i.exports.useState("");i.exports.useState(!0);const[E,b]=i.exports.useState(-1),{currentOffer:T=null,setCurrentOffer:w=null,setPurchaseOptions:O=null,catalogOptions:R=null,roomPreviewer:x=null}=De(),{petPalettes:F=null}=R,A=i.exports.useMemo(()=>!g.length||d===-1?16777215:g[d][0],[g,d]),k=i.exports.useMemo(()=>r===-1||!s.length||c===-1?"":m(`pet.breed.${r}.${s[c].breedId}`),[r,s,c]),y=i.exports.useMemo(()=>{if(!s.length||c===-1)return"";const B=s[c].paletteId;let Y=16777215;if(r<=7){if(d===-1)return"";Y=g[d][0]}let X=Y.toString(16).toUpperCase();for(;X.length<6;)X="0"+X;return`${B}
${X}`},[s,c,r,g,d]),P=i.exports.useMemo(()=>{let B="";switch(E){case 1:B="catalog.alert.petname.long";break;case 2:B="catalog.alert.petname.short";break;case 3:B="catalog.alert.petname.chars";break;case 4:B="catalog.alert.petname.bobba";break}return!B||!B.length?"":m(B)},[E]),G=i.exports.useCallback(()=>{if(E===-1){D(new hI(f,1));return}if(E===0){D(new sa(e.pageId,T.offerId,`${f}
${y}`,1));return}},[e,T,f,y,E]);return U(fI,B=>{const Y=B.getParser();b(Y.result),Y.result===0?G():St(new zn(-1))}),i.exports.useEffect(()=>{if(!e||!e.offers.length)return;const B=e.offers[0];w(B),n(C_(B.localizationId)),I(!1)},[e,w]),i.exports.useEffect(()=>{if(!T)return;const B=T.product.productData;if(B){if(F)for(const Y of F){if(Y.breed!==B.type)continue;const X=[];for(const z of Y.palettes)z.sellable&&X.push(z);u(X.length?0:-1),o(X);return}u(-1),o([]),D(new II(B.type))}},[T,F]),i.exports.useEffect(()=>{if(r===-1)return;const B=__(r,s);h(B.length?0:-1),p(B)},[r,s]),i.exports.useEffect(()=>{if(!x||(x.reset(!1),r===-1||!s.length||c===-1))return;let B=`${r} ${s[c].paletteId}`;r<=7&&(B+=` ${A.toString(16)}`),x.addPetIntoRoom(B)},[x,r,s,c,A]),i.exports.useEffect(()=>{b(-1)},[f]),T?t(S,{children:l(S,{center:!T,size:5,overflow:"hidden",children:[!T&&l(V,{children:[!!e.localization.getImage(1)&&t("img",{alt:"",src:e.localization.getImage(1)}),t(N,{center:!0,dangerouslySetInnerHTML:{__html:e.localization.getText(0)}})]}),T&&l(V,{children:[l(M,{position:"relative",overflow:"hidden",children:[t(Jn,{}),t(Cn,{className:"credits-default-layout credits-bg py-1 px-2 bottom-1 end-1",justifyContent:"end",alignItems:"end"}),t(Yn,{position:"absolute",className:"bg-muted rounded bottom-1 end-1"}),r>-1&&r<=7&&t(L,{position:"absolute",className:"bottom-1 start-1",onClick:B=>I(!C),children:t(ru,{className:"fa-icon"})})]}),t(S,{size:7,overflow:"hidden",children:l(Ue,{className:"grid-bg group-furni-picker p-2",columnCount:7,children:[!C&&s.length>0&&s.map((B,Y)=>t(Re,{itemActive:c===Y,onClick:X=>u(Y),children:t(dn,{typeId:r,paletteId:B.paletteId,direction:2,headOnly:!0})},Y)),C&&g.length>0&&g.map((B,Y)=>t(Re,{itemHighlight:!0,itemActive:d===Y,itemColor:sr.int2rgb(B[0]),className:"clear-bg",onClick:X=>h(Y)},Y))]})}),l(S,{grow:!0,gap:1,children:[t(N,{truncate:!0,children:k}),l(S,{grow:!0,gap:1,children:[t("input",{type:"text",className:"form-control form-control-sm w-100",placeholder:m("widgets.petpackage.name.title"),value:f,onChange:B=>_(B.target.value)}),E>0&&t(M,{className:"invalid-feedback d-block m-0",children:P})]}),t(v,{gap:2,className:"purchase-buttons align-items-end mt-2",children:t(Gr,{purchaseCallback:G})})]})]})]})}):null},rv=a=>{const{offer:e=null,isAvailable:r=!1,daysRequired:n=0,onSelect:s=null}=a,o=i.exports.useCallback(()=>{if(!e||!e.products.length)return"";const u=e.products[0];return Uo.getProductImageUrl(u.productType,u.furniClassId,u.extraParam)},[e]),c=i.exports.useCallback(()=>{if(!e||!e.products.length)return"";const u=e.products[0],g=Uo.getProductCategory(u.productType,u.furniClassId)===2?"wallItem.name."+u.furniClassId:"roomItem.name."+u.furniClassId;return m(g)},[e]);return i.exports.useCallback(()=>{if(!e||!e.products.length)return"";const u=e.products[0],g=Uo.getProductCategory(u.productType,u.furniClassId)===2?"wallItem.desc."+u.furniClassId:"roomItem.desc."+u.furniClassId;return m(g)},[e]),i.exports.useCallback(()=>Math.floor(n/31),[n]),l(Re,{center:!1,column:!1,alignItems:"center",className:"p-1",children:[t(hn,{imageUrl:o()}),t(N,{grow:!0,fontWeight:"bold",children:c()}),t(L,{variant:"secondary",onClick:()=>s(e.localizationId),disabled:!r,children:m("catalog.club_gift.select")})]})},nv=a=>{const{purse:e=null}=Qn(),{catalogOptions:r=null,setCatalogOptions:n=null}=De(),{clubGifts:s=null}=r,{showConfirm:o=null}=Xe(),c=i.exports.useCallback(()=>s?s.giftsAvailable>0?m("catalog.club_gift.available",["amount"],[s.giftsAvailable.toString()]):s.daysUntilNextGift>0?m("catalog.club_gift.days_until_next",["days"],[s.daysUntilNextGift.toString()]):e.isVip?m("catalog.club_gift.not_available"):m("catalog.club_gift.no_club"):"",[s,e]),u=i.exports.useCallback(p=>{o(m("catalog.club_gift.confirm"),()=>{D(new EI(p)),n(d=>(d.clubGifts.giftsAvailable--,{...d}))},null)},[n,o]),g=i.exports.useMemo(()=>s.offers.sort((d,h)=>s.getOfferExtraData(d.offerId).daysRequired-s.getOfferExtraData(h.offerId).daysRequired),[s]);return l(V,{children:[t(N,{truncate:!0,shrink:!0,fontWeight:"bold",children:c()}),t(Ue,{columnCount:1,className:"nitro-catalog-layout-vip-gifts-grid",children:s.offers.length>0&&g.map(p=>t(rv,{offer:p,isAvailable:s.getOfferExtraData(p.offerId).isSelectable&&s.giftsAvailable>0,onSelect:u,daysRequired:s.getOfferExtraData(p.offerId).daysRequired},p.offerId))})]})},sv=(a,e)=>{if(!a)return null;const r={page:a,hideNavigation:e};switch(a.layoutCode){case"frontpage_featured":return null;case"frontpage4":return t($T,{...r});case"pets":return t(tv,{...r});case"pets2":return t(LT,{...r});case"pets3":return t(Jd,{...r});case"vip_buy":return t(zT,{...r});case"guild_frontpage":return t(DT,{...r});case"guild_forum":return t(PT,{...r});case"guild_custom_furni":return t(AT,{...r});case"club_gifts":return t(nv,{...r});case"marketplace_own_items":return t(KT,{...r});case"marketplace":return t(ev,{...r});case"single_bundle":return t(GT,{...r});case"room_bundle":return t(FT,{...r});case"spaces_new":return t(jT,{...r});case"trophies":return t(qT,{...r});case"info_loyalty":return t(MT,{...r});case"badge_display":return t(wT,{...r});case"roomads":return t(UT,{...r});case"default_3x3_color_grouping":return t(yT,{...r});case"soundmachine":return t(VT,{...r});case"bots":case"default_3x3":default:return t(OT,{...r})}},ov=a=>{const[e,r]=i.exports.useState(null),[n,s]=i.exports.useState(0),[o,c]=i.exports.useState("0"),{catalogOptions:u=null,setCatalogOptions:g=null}=De(),{marketplaceConfiguration:p=null}=u,{showConfirm:d=null}=Xe(),h=E=>{c(E);const b=parseInt(E);isNaN(b)||b===n||s(parseInt(E))};if(U(CI,E=>{const b=E.getParser();g(T=>{const w={...T};return w.marketplaceConfiguration=b,w})}),lt(qi.POST_MARKETPLACE,E=>r(E.item)),i.exports.useEffect(()=>{!e||p||D(new _I)},[e,p]),i.exports.useEffect(()=>{if(e)return()=>s(0)},[e]),!p||!e)return null;const C=e?m(e.isWallItem?"wallItem.name."+e.type:"roomItem.name."+e.type):"",I=e?m(e.isWallItem?"wallItem.desc."+e.type:"roomItem.desc."+e.type):"",f=()=>Math.max(Math.ceil(p.commission*.01*n),1),_=()=>{!e||n<p.minimumPrice||d(m("inventory.marketplace.confirm_offer.info",["furniname","price"],[C,n.toString()]),()=>{D(new bI(n,e.isWallItem?2:1,e.id)),r(null)},()=>{r(null)},null,null,m("inventory.marketplace.confirm_offer.title"))};return l(se,{className:"nitro-catalog-layout-marketplace-post-offer",theme:"primary",children:[t(ne,{headerText:m("inventory.marketplace.make_offer.title"),onCloseClick:E=>r(null)}),t(re,{overflow:"hidden",children:l(le,{fullHeight:!0,children:[t(S,{center:!0,className:"bg-muted rounded p-2",size:4,overflow:"hidden",children:t(Hi,{productType:e.isWallItem?ge.WALL:ge.FLOOR,productClassId:e.type,extraData:e.extra.toString()})}),l(S,{size:8,justifyContent:"between",overflow:"hidden",children:[l(S,{grow:!0,gap:1,children:[t(N,{fontWeight:"bold",children:C}),t(N,{truncate:!0,shrink:!0,children:I})]}),l(S,{overflow:"auto",children:[t(N,{italics:!0,children:m("inventory.marketplace.make_offer.expiration_info",["time"],[p.offerTime.toString()])}),l("div",{className:"input-group has-validation",children:[t("input",{className:"form-control form-control-sm",type:"number",min:0,value:o,onChange:E=>h(E.target.value),placeholder:m("inventory.marketplace.make_offer.price_request")}),(n<p.minimumPrice||isNaN(n))&&t(M,{className:"invalid-feedback d-block",children:m("inventory.marketplace.make_offer.min_price",["minprice"],[p.minimumPrice.toString()])}),n>p.maximumPrice&&!isNaN(n)&&t(M,{className:"invalid-feedback d-block",children:m("inventory.marketplace.make_offer.max_price",["maxprice"],[p.maximumPrice.toString()])}),!(n<p.minimumPrice||n>p.maximumPrice||isNaN(n))&&t(M,{className:"invalid-feedback d-block",children:m("inventory.marketplace.make_offer.final_price",["commission","finalprice"],[f().toString(),(n+f()).toString()])})]}),t(L,{disabled:n<p.minimumPrice||n>p.maximumPrice||isNaN(n),onClick:_,children:m("inventory.marketplace.make_offer.post")})]})]})]})})]})},av=a=>{const{isVisible:e=!1,setIsVisible:r=null,rootNode:n=null,currentPage:s=null,navigationHidden:o=!1,setNavigationHidden:c=null,activeNodes:u=[],searchResult:g=null,setSearchResult:p=null,openPageByName:d=null,openPageByOfferId:h=null,activateNode:C=null,getNodeById:I}=De();return i.exports.useEffect(()=>{const f={linkReceived:_=>{const E=_.split("/");if(!(E.length<2))switch(E[1]){case"show":r(!0);return;case"hide":r(!1);return;case"toggle":r(b=>!b);return;case"open":if(E.length>2)if(E.length===4)switch(E[2]){case"offerId":h(parseInt(E[3]));return}else d(E[2]);else r(!0);return}},eventUrlPrefix:"catalog/"};return Ct(f),()=>_t(f)},[r,h,d]),l(V,{children:[e&&l(se,{uniqueKey:"catalog",className:"nitro-catalog",style:K("catalog.headers")?{width:710}:{},children:[t(ne,{headerText:m("catalog.title"),onCloseClick:f=>r(!1)}),t(fn,{subClassName:"w-100",children:n&&n.children.length>0&&n.children.map(f=>f.isVisible?t(Zr,{isActive:f.isActive,onClick:_=>{g&&p(null),C(f)},children:l(v,{gap:K("catalog.tab.icons")?1:0,alignItems:"center",children:[K("catalog.tab.icons")&&t($i,{icon:f.iconId}),f.localization]})},f.pageId):null)}),t(NT,{node:n}),t(re,{children:l(le,{children:[!o&&t(S,{className:"catalog-left",size:4,overflow:"hidden",children:u&&u.length>0&&t(bT,{node:u[0]})}),t(S,{size:o?12:8,overflow:"hidden",children:sv(s,()=>c(!0))})]})})]}),t(CT,{}),t(ov,{})]})},iv=a=>{const[e,r]=i.exports.useState(!1),[n,s]=i.exports.useState(""),{chatHistory:o=[]}=ha(),c=i.exports.useRef(null),u=i.exports.useMemo(()=>{if(n.length===0)return o;let g=n.toLowerCase();return o.filter(p=>p.message&&p.message.toLowerCase().includes(g)||p.name&&p.name.toLowerCase().includes(g))},[o,n]);return i.exports.useEffect(()=>{c&&c.current&&e&&(c.current.scrollTop=c.current.scrollHeight)},[e]),i.exports.useEffect(()=>{const g={linkReceived:p=>{const d=p.split("/");if(!(d.length<2))switch(d[1]){case"show":r(!0);return;case"hide":r(!1);return;case"toggle":r(h=>!h);return}},eventUrlPrefix:"chat-history/"};return Ct(g),()=>_t(g)},[]),e?t(V,{children:e&&l(v,{gap:2,className:"nitro-chat-history",children:[t(S,{className:"chat-history-content h-100",children:t(S,{className:"h-100",children:t(ma,{rows:u,estimateSize:35,rowRender:g=>l(v,{alignItems:"center",className:"p-1",gap:2,children:[t(N,{variant:"muted",children:g.timestamp}),g.type===Rr.TYPE_CHAT&&l("div",{className:"bubble-container",style:{position:"relative"},children:[g.style===0&&t("div",{className:"user-container-bg",style:{backgroundColor:g.color}}),l("div",{className:`chat-bubble bubble-${g.style} type-${g.chatType}`,style:{maxWidth:"100%"},children:[t("div",{className:"user-container",children:g.imageUrl&&g.imageUrl.length>0&&t("div",{className:"user-image",style:{backgroundImage:`url(${g.imageUrl})`}})}),l("div",{className:"chat-content",children:[t("b",{className:"username mr-1",dangerouslySetInnerHTML:{__html:`${g.name}: `}}),t("span",{className:"message",dangerouslySetInnerHTML:{__html:`${g.message}`}})]})]})]}),g.type===Rr.TYPE_ROOM_INFO&&l(V,{children:[t("i",{className:"icon icon-small-room"}),t(N,{textBreak:!0,wrap:!0,grow:!0,children:g.name})]})]})})})}),t(v,{className:"chat-toggle",onClick:g=>r(!1)})]})}):null},wr=32,Ln=64,Ls="x0123456789abcdefghijklmnopq";class It{}It.DOOR=0;It.UP=1;It.DOWN=2;It.SET=3;It.UNSET=4;const lv={x:"101010",0:"0065ff",1:"0091ff",2:"00bcff",3:"00e8ff",4:"00ffea",5:"00ffbf",6:"00ff93",7:"00ff68",8:"00ff3d",9:"19ff00",a:"44ff00",b:"70ff00",c:"9bff00",d:"f2ff00",e:"ffe000",f:"ffb500",g:"ff8900",h:"ff5e00",i:"ff3200",j:"ff0700",k:"ff0023",l:"ff007a",m:"ff00a5",n:"ff00d1",o:"ff00fc",p:"d600ff",q:"aa00ff"};class cv{constructor(){this._currentAction=It.SET,this._currentHeight=Ls[1]}get currentAction(){return this._currentAction}set currentAction(e){this._currentAction=e}get currentHeight(){return this._currentHeight}set currentHeight(e){this._currentHeight=e}clear(){this._currentAction=It.SET,this._currentHeight=Ls[1]}}class vo{constructor(e,r){this._height=e,this._isBlocked=r}get height(){return this._height}set height(e){this._height=e}get isBlocked(){return this._isBlocked}set isBlocked(e){this._isBlocked=e}}const uv=(a,e)=>{let r=a*wr/2-e*wr/2;const n=a*wr/4+e*wr/4;return r=r+1024,[r,n]},dv=(a,e)=>{const r=a-1024,n=(r/(wr/2)+e/(wr/4))/2,s=(e/(wr/4)-r/(wr/2))/2;return[n,s]},ta=a=>{switch(a=parseInt(a.toString()),a){case 0:return-2;case 1:return-1;case 3:return 1;default:return 0}},wo=a=>{switch(a){case .25:return 0;case .5:return 1;case 2:return 3;default:return 2}},Fn=class extends NI{constructor(){const a=wr*Ln+20,e=wr*Ln/2+100;super({width:a,height:e,backgroundColor:0,antialias:!0,autoDensity:!0,resolution:1,sharedLoader:!0,sharedTicker:!0}),this._tilemap=[],this._doorLocation=new vn(0,0),this._width=0,this._height=0,this._isHolding=!1,this._lastUsedTile=new vn(-1,-1),this._actionSettings=new cv}initialize(){if(this._isInitialized)return;const a=ku().getCollection("floor_editor");a&&(this._assetCollection=a,this._tilemapRenderer=new SI(a.baseTexture),this.registerEventListeners(),this.stage.addChild(this._tilemapRenderer),this._isInitialized=!0)}registerEventListeners(){const a=new vn;this._tilemapRenderer.containsPoint=e=>(this._tilemapRenderer.worldTransform.applyInverse(e,a),this.tileHitDetection(a,!1)),this._tilemapRenderer.on("pointerup",()=>{this._isHolding=!1}),this._tilemapRenderer.on("pointerout",()=>{this._isHolding=!1}),this._tilemapRenderer.on("pointerdown",e=>{if(!(e.data.originalEvent instanceof PointerEvent)&&!(e.data.originalEvent instanceof TouchEvent))return;const r=e.data.originalEvent;if(r instanceof MouseEvent&&r.button===2)return;const n=e.data.global;this.tileHitDetection(n,!0)}),this._tilemapRenderer.on("click",e=>{if(!(e.data.originalEvent instanceof PointerEvent)||e.data.originalEvent.button===2)return;const n=e.data.global;this.tileHitDetection(n,!0,!0)})}tileHitDetection(a,e,r=!1){const n=this._tilemapRenderer.pointsBuf,s=vm,o=n.length;e&&(this._isHolding=!0);for(let c=0;c<o;c+=s){const u=c+s,g=n.slice(c,u),p=wr,d=wr/2,h=Math.floor(a.x),C=Math.floor(a.y),I=g[2],f=g[3],_=I+p/2,E=f+d/2,b=Math.abs(h-_),T=Math.abs(C-E);if(b/(p*.5)+T/(d*.5)<=1){if(this._isHolding){const[O,R]=dv(I,f);r?this.onClick(O,R):(this._lastUsedTile.x!==O||this._lastUsedTile.y!==R)&&(this._lastUsedTile.x=O,this._lastUsedTile.y=R,this.onClick(O,R))}return!0}}return!1}onClick(a,e){const r=this._tilemap[e][a],n=Ls.indexOf(r.height);let s=0;switch(this._actionSettings.currentAction){case It.DOOR:r.height!=="x"&&(this._doorLocation.x=a,this._doorLocation.y=e,this.renderTiles());return;case It.UP:if(r.height==="x")return;s=n+1;break;case It.DOWN:if(r.height==="x"||n<=1)return;s=n-1;break;case It.SET:s=Ls.indexOf(this._actionSettings.currentHeight);break;case It.UNSET:s=0;break}if(s===-1||n===s)return;s>0&&(a+1>this._width&&(this._width=a+1),e+1>this._height&&(this._height=e+1));const o=Ls[s];o&&(r.isBlocked||(this._tilemap[e][a].height=o,this.renderTiles()))}renderTiles(){this.tilemapRenderer.clear();for(let a=0;a<this._tilemap.length;a++)for(let e=0;e<this.tilemap[a].length;e++){const r=this.tilemap[a][e];let n=r.height;this._doorLocation.x===e&&this._doorLocation.y===a&&(n=Fn.TILE_DOOR),r.isBlocked&&(n=Fn.TILE_BLOCKED);const[s,o]=uv(e,a);this._tilemapRenderer.tile(this._assetCollection.getTexture(`floor_editor_${n}`),s,o)}}setTilemap(a,e){this._tilemap=[];const r=a.split("\r");let n=0,s=r.length;for(let o=0;o<s;o++){const c=r[o];if(c.length===0){r.splice(o,1),s=r.length,o--;continue}c.length>n&&(n=c.length)}for(let o=0;o<s;o++){this._tilemap[o]=[];const c=r[o];for(let u=0;u<n;u++){const g=e[o]&&e[o][u]||!1,p=c[u];p!=="x"&&p!=="X"&&p?this._tilemap[o][u]=new vo(p,g):this._tilemap[o][u]=new vo("x",g)}for(let u=n;u<Ln;u++)this.tilemap[o][u]=new vo("x",!1)}for(let o=s;o<Ln;o++){this.tilemap[o]||(this.tilemap[o]=[]);for(let c=0;c<Ln;c++)this.tilemap[o][c]=new vo("x",!1)}this._width=n,this._height=s}getCurrentTilemapString(){if(this._tilemap[this._height-1][this._width-1].height==="x"){this._width=-1,this._height=-1;for(let r=Ln-1;r>=0;r--)if(this._tilemap[r])for(let n=Ln-1;n>=0;n--){if(!this._tilemap[r][n])continue;this._tilemap[r][n].height!=="x"&&(n+1>this._width&&(this._width=n+1),r+1>this._height&&(this._height=r+1))}}const e=[];for(let r=0;r<this._height;r++){const n=[];for(let s=0;s<this._width;s++){const o=this._tilemap[r][s];n[s]=o.height}e[r]=n.join("")}return e.join("\r")}clear(){this._tilemapRenderer.interactive=!1,this._tilemap=[],this._doorLocation.set(-1,-1),this._width=0,this._height=0,this._isHolding=!1,this._lastUsedTile.set(-1,-1),this._actionSettings.clear(),this._tilemapRenderer.clear()}get tilemapRenderer(){return this._tilemapRenderer}get tilemap(){return this._tilemap}get doorLocation(){return this._doorLocation}set doorLocation(a){this._doorLocation=a}get actionSettings(){return this._actionSettings}static get instance(){return Fn._INSTANCE||(Fn._INSTANCE=new Fn),Fn._INSTANCE}};let Dt=Fn;Dt._INSTANCE=null;Dt.TILE_BLOCKED="r_blocked";Dt.TILE_DOOR="r_door";const rm=i.exports.createContext({originalFloorplanSettings:null,setOriginalFloorplanSettings:null,visualizationSettings:null,setVisualizationSettings:null}),mv=a=>t(rm.Provider,{...a}),Qi=()=>i.exports.useContext(rm),gv=a=>{const{gap:e=1,children:r=null,...n}=a,[s,o]=i.exports.useState(!1),[c,u]=i.exports.useState(!1),{originalFloorplanSettings:g=null,setOriginalFloorplanSettings:p=null,setVisualizationSettings:d=null}=Qi(),h=i.exports.useRef(null);U(TI,I=>{const f=I.getParser();p(_=>{const E={..._};return E.reservedTiles=f.blockedTilesMap,Dt.instance.setTilemap(E.tilemap,E.reservedTiles),E}),o(!0),h.current.scrollTo(Dt.instance.view.width/3,0)}),U(vI,I=>{const f=I.getParser();p(_=>{const E={..._};return E.entryPoint=[f.x,f.y],E.entryPointDir=f.direction,E}),d(_=>{const E={..._};return E.entryPointDir=f.direction,E}),Dt.instance.doorLocation=new vn(f.x,f.y),u(!0)});const C=I=>{const f=h.current;if(f)switch(I){case"up":f.scrollBy({top:-10});break;case"down":f.scrollBy({top:10});break;case"left":f.scrollBy({left:-10});break;case"right":f.scrollBy({left:10});break}};return i.exports.useEffect(()=>()=>{Dt.instance.clear(),d(I=>({wallHeight:g.wallHeight,thicknessWall:g.thicknessWall,thicknessFloor:g.thicknessFloor,entryPointDir:I.entryPointDir}))},[g.thicknessFloor,g.thicknessWall,g.wallHeight,d]),i.exports.useEffect(()=>{!c||!s||Dt.instance.renderTiles()},[c,s]),i.exports.useEffect(()=>{D(new wI),D(new RI),Dt.instance.tilemapRenderer.interactive=!0,h.current&&h.current.appendChild(Dt.instance.renderer.view)},[]),l(S,{gap:e,...n,children:[l(le,{overflow:"hidden",gap:1,children:[t(S,{center:!0,size:1,children:t(L,{className:"d-md-none",onClick:I=>C("left"),children:t(nu,{className:"fa-icon"})})}),l(S,{overflow:"hidden",size:10,gap:1,children:[t(v,{justifyContent:"center",className:"d-md-none",children:t(L,{shrink:!0,onClick:I=>C("up"),children:t(wm,{className:"fa-icon"})})}),t(M,{overflow:"auto",innerRef:h}),t(v,{justifyContent:"center",className:"d-md-none",children:t(L,{shrink:!0,onClick:I=>C("down"),children:t(Rm,{className:"fa-icon"})})})]}),t(S,{center:!0,size:1,children:t(L,{className:"d-md-none",onClick:I=>C("right"),children:t(su,{className:"fa-icon"})})})]}),r]})},sc=a=>a.replace(/\r\n|\r|\n/g,`
`).toLowerCase(),pv=a=>{const{onCloseClick:e=null}=a,[r,n]=i.exports.useState(""),{originalFloorplanSettings:s=null}=Qi(),o=()=>{D(new Au(r.split(`
`).join("\r"),s.entryPoint[0],s.entryPoint[1],s.entryPointDir,ta(s.thicknessWall),ta(s.thicknessFloor),s.wallHeight-1))};return zd(()=>{n(sc(s.tilemap))}),l(se,{theme:"primary",className:"floorplan-import-export",children:[t(ne,{headerText:m("floor.plan.editor.import.export"),onCloseClick:e}),l(re,{children:[t("textarea",{className:"h-100",value:r,onChange:c=>n(c.target.value)}),l(v,{justifyContent:"between",children:[t(L,{onClick:c=>n(sc(s.tilemap)),children:m("floor.plan.editor.revert.to.last.received.map")}),t(L,{onClick:o,children:m("floor.plan.editor.save")})]})]})]})},oc=0,Ro=16,hv=0,fv=26,Iv=a=>{const{visualizationSettings:e=null,setVisualizationSettings:r=null}=Qi(),[n,s]=i.exports.useState(It.SET),[o,c]=i.exports.useState(0),u=_=>{s(_),Dt.instance.actionSettings.currentAction=_},g=()=>{r(_=>{const E={..._};return E.entryPointDir<7?++E.entryPointDir:E.entryPointDir=0,E})},p=_=>{(isNaN(_)||_<=0)&&(_=0),_>26&&(_=26),c(_),Dt.instance.actionSettings.currentHeight=_.toString(36)},d=_=>{r(E=>{const b={...E};return b.thicknessFloor=_,b})},h=_=>{r(E=>{const b={...E};return b.thicknessWall=_,b})},C=_=>{(isNaN(_)||_<=0)&&(_=oc),_>Ro&&(_=Ro),r(E=>{const b={...E};return b.wallHeight=_,b})},I=()=>{let _=e.wallHeight+1;_>Ro&&(_=Ro),C(_)},f=()=>{let _=e.wallHeight-1;_<=0&&(_=oc),C(_)};return l(S,{children:[l(v,{gap:1,children:[l(S,{size:5,gap:1,children:[t(N,{bold:!0,children:m("floor.plan.editor.draw.mode")}),l(v,{gap:3,children:[l(v,{gap:1,children:[t(Re,{itemActive:n===It.SET,onClick:_=>u(It.SET),children:t("i",{className:"icon icon-set-tile"})}),t(Re,{itemActive:n===It.UNSET,onClick:_=>u(It.UNSET),children:t("i",{className:"icon icon-unset-tile"})})]}),l(v,{gap:1,children:[t(Re,{itemActive:n===It.UP,onClick:_=>u(It.UP),children:t("i",{className:"icon icon-increase-height"})}),t(Re,{itemActive:n===It.DOWN,onClick:_=>u(It.DOWN),children:t("i",{className:"icon icon-decrease-height"})})]}),t(Re,{itemActive:n===It.DOOR,onClick:_=>u(It.DOOR),children:t("i",{className:"icon icon-set-door"})})]})]}),l(S,{alignItems:"center",size:4,children:[t(N,{bold:!0,children:m("floor.plan.editor.enter.direction")}),t("i",{className:`icon icon-door-direction-${e.entryPointDir} cursor-pointer`,onClick:g})]}),l(S,{size:3,children:[t(N,{bold:!0,children:m("floor.editor.wall.height")}),l(v,{alignItems:"center",gap:1,children:[t(eu,{className:"cursor-pointer fa-icon",onClick:f}),t("input",{type:"number",className:"form-control form-control-sm quantity-input",value:e.wallHeight,onChange:_=>C(_.target.valueAsNumber)}),t(tu,{className:"cursor-pointer fa-icon",onClick:I})]})]})]}),l(v,{gap:1,children:[l(S,{size:6,children:[l(N,{bold:!0,children:[m("floor.plan.editor.tile.height"),": ",o]}),t(Pt,{className:"nitro-slider",min:hv,max:fv,step:1,value:o,onChange:_=>p(_),renderThumb:({style:_,...E},b)=>t("div",{style:{backgroundColor:`#${lv[b.valueNow.toString(33)]}`,..._},...E,children:b.valueNow})})]}),l(S,{size:6,children:[t(N,{bold:!0,children:m("floor.plan.editor.room.options")}),l(v,{className:"align-items-center",children:[l("select",{className:"form-control form-control-sm",value:e.thicknessWall,onChange:_=>h(parseInt(_.target.value)),children:[t("option",{value:0,children:m("navigator.roomsettings.wall_thickness.thinnest")}),t("option",{value:1,children:m("navigator.roomsettings.wall_thickness.thin")}),t("option",{value:2,children:m("navigator.roomsettings.wall_thickness.normal")}),t("option",{value:3,children:m("navigator.roomsettings.wall_thickness.thick")})]}),l("select",{className:"form-control form-control-sm",value:e.thicknessFloor,onChange:_=>d(parseInt(_.target.value)),children:[t("option",{value:0,children:m("navigator.roomsettings.floor_thickness.thinnest")}),t("option",{value:1,children:m("navigator.roomsettings.floor_thickness.thin")}),t("option",{value:2,children:m("navigator.roomsettings.floor_thickness.normal")}),t("option",{value:3,children:m("navigator.roomsettings.floor_thickness.thick")})]})]})]})]})]})},Ev=a=>{const[e,r]=i.exports.useState(!1),[n,s]=i.exports.useState(!1),[o,c]=i.exports.useState({tilemap:"",reservedTiles:[],entryPoint:[0,0],entryPointDir:2,wallHeight:-1,thicknessWall:1,thicknessFloor:1}),[u,g]=i.exports.useState({entryPointDir:2,wallHeight:-1,thicknessWall:1,thicknessFloor:1}),p=()=>{D(new Au(Dt.instance.getCurrentTilemapString(),Dt.instance.doorLocation.x,Dt.instance.doorLocation.y,u.entryPointDir,ta(u.thicknessWall),ta(u.thicknessFloor),u.wallHeight-1))},d=()=>{g({wallHeight:o.wallHeight,thicknessWall:o.thicknessWall,thicknessFloor:o.thicknessFloor,entryPointDir:o.entryPointDir}),Dt.instance.doorLocation=new vn(o.entryPoint[0],o.entryPoint[1]),Dt.instance.setTilemap(o.tilemap,o.reservedTiles),Dt.instance.renderTiles()};return Se(gr.DISPOSED,h=>r(!1)),U(xI,h=>{const C=h.getParser();c(I=>{const f={...I};return f.tilemap=C.model,f.wallHeight=C.wallHeight+1,f}),g(I=>{const f={...I};return f.wallHeight=C.wallHeight+1,f})}),U(yI,h=>{const C=h.getParser();c(I=>{const f={...I};return f.thicknessFloor=wo(C.thicknessFloor),f.thicknessWall=wo(C.thicknessWall),f}),g(I=>{const f={...I};return f.thicknessFloor=wo(C.thicknessFloor),f.thicknessWall=wo(C.thicknessWall),f})}),i.exports.useEffect(()=>{const h={linkReceived:C=>{const I=C.split("/");if(!(I.length<2))switch(I[1]){case"show":r(!0);return;case"hide":r(!1);return;case"toggle":r(f=>!f);return}},eventUrlPrefix:"floor-editor/"};return Ct(h),()=>_t(h)},[]),i.exports.useEffect(()=>{Dt.instance.initialize()},[]),l(mv,{value:{originalFloorplanSettings:o,setOriginalFloorplanSettings:c,visualizationSettings:u,setVisualizationSettings:g},children:[e&&l(se,{uniqueKey:"floorpan-editor",className:"nitro-floorplan-editor",theme:"primary",children:[t(ne,{headerText:m("floor.plan.editor.title"),onCloseClick:()=>r(!1)}),l(re,{overflow:"hidden",children:[t(Iv,{}),t(gv,{overflow:"hidden"}),l(v,{justifyContent:"between",children:[t(L,{onClick:d,children:m("floor.plan.editor.reload")}),l(Kr,{children:[t(L,{disabled:!0,children:m("floor.plan.editor.preview")}),t(L,{onClick:h=>s(!0),children:m("floor.plan.editor.import.export")}),t(L,{onClick:p,children:m("floor.plan.editor.save")})]})]})]})]}),n&&t(pv,{onCloseClick:()=>s(!1)})]})},Cv=a=>{const{friend:e=null}=a,[r,n]=i.exports.useState(!1),{followFriend:s=null}=cr(),o=i.exports.useRef();return i.exports.useEffect(()=>{const c=u=>{const g=o.current;g&&u.target!==g&&!g.contains(u.target)&&n(!1)};return document.addEventListener(xe.MOUSE_CLICK,c),()=>document.removeEventListener(xe.MOUSE_CLICK,c)},[]),e?l("div",{ref:o,className:"btn find-friends-active friend-bar-item "+(r?"friend-bar-item-active":""),onClick:c=>n(u=>!u),children:[l("div",{className:`friend-bar-item-head position-absolute ${e.id>0?"avatar":"group"}`,children:[e.id>0&&t(st,{headOnly:!0,figure:e.figure,direction:2}),e.id<=0&&t(je,{isGroup:!0,badgeCode:e.figure})]}),t("div",{className:"friend-bar-text",children:e.name}),r&&l("div",{className:"d-flex pt-3 justify-content-between",children:[t(M,{className:"nitro-friends-spritesheet icon-friendbar-chat cursor-pointer",onClick:c=>la(e.id)}),e.followingAllowed&&t(M,{className:"nitro-friends-spritesheet icon-friendbar-visit cursor-pointer",onClick:c=>s(e)}),t(M,{className:"nitro-friends-spritesheet icon-profile cursor-pointer",onClick:c=>jt(e.id)})]})]}):l("div",{ref:o,className:"btn find-friends friend-bar-item friend-bar-search",children:[t("div",{className:"friend-bar-item-head position-absolute"}),t("div",{className:"friend-bar-text",children:m("friend.bar.find.title")})]})},Ga=3,_v=a=>{const{onlineFriends:e=null}=a,[r,n]=i.exports.useState(0),s=i.exports.useRef();return l(v,{innerRef:s,alignItems:"center",className:"friend-bar",children:[t("button",{className:"friend-bar-button left",disabled:r<=0,onClick:o=>n(r-1)}),Array.from(Array(Ga),(o,c)=>t(Cv,{friend:e[r+c]||null},c)),t("button",{className:"friend-bar-button right",disabled:!(e.length>Ga&&r+Ga<=e.length-1),onClick:o=>n(r+1)})]})},ac=a=>{const{headerText:e="",isExpanded:r=!1,gap:n=0,classNames:s=[],children:o=null,...c}=a,[u,g]=i.exports.useState(!1),{setClosers:p=null,closeAll:d=null}=_d(),h=()=>{g(f=>!f)},C=i.exports.useCallback(()=>g(!1),[]),I=i.exports.useMemo(()=>{const f=["nitro-card-accordion-set"];return u&&f.push("active"),s&&s.length&&f.push(...s),f},[u,s]);return i.exports.useEffect(()=>{g(r)},[r]),i.exports.useEffect(()=>{const f=C;return p(_=>{const E=[..._];return E.push(f),E}),()=>{p(_=>{const E=[..._],b=E.indexOf(f);return b>=0&&E.splice(b,1),E})}},[C,p]),l(S,{classNames:I,gap:n,...c,children:[l(v,{pointer:!0,justifyContent:"between",className:"nitro-card-accordion-set-header px-2 py-1",onClick:h,children:[t(N,{children:e}),u&&t(ra,{className:"fa-icon"}),!u&&t(na,{className:"fa-icon"})]}),u&&t(S,{fullHeight:!0,overflow:"auto",gap:0,className:"nitro-card-accordion-set-content p-1",children:o})]})},bv=a=>{const{friend:e=null,selected:r=!1,selectFriend:n=null}=a,[s,o]=i.exports.useState(!1),{followFriend:c=null,updateRelationship:u=null}=cr(),g=I=>{I.stopPropagation(),c(e)},p=I=>{I.stopPropagation(),la(e.id)},d=I=>{I.stopPropagation(),o(!0)},h=(I,f)=>{I.stopPropagation(),u(e,f),o(!1)},C=()=>{if(!e)return"none";switch(e.relationshipStatus){case Ht.RELATIONSHIP_HEART:return"heart";case Ht.RELATIONSHIP_SMILE:return"smile";case Ht.RELATIONSHIP_BOBBA:return"bobba";default:return"none"}};return e?l(Xo,{justifyContent:"between",className:`friend-tab px-2 py-1 ${r&&"bg-primary text-white"}`,onClick:I=>n(e.id),children:[l(v,{alignItems:"center",gap:1,children:[t(M,{onClick:I=>I.stopPropagation(),children:t(hr,{userId:e.id})}),t("div",{children:e.name})]}),l(v,{alignItems:"center",gap:1,children:[!s&&l(V,{children:[e.followingAllowed&&t(M,{pointer:!0,onClick:g,className:"nitro-friends-spritesheet icon-follow",title:m("friendlist.tip.follow")}),e.online&&t(M,{pointer:!0,className:"nitro-friends-spritesheet icon-chat",onClick:p,title:m("friendlist.tip.im")}),e.id>0&&t(M,{className:`nitro-friends-spritesheet icon-${C()} cursor-pointer`,onClick:d,title:m("infostand.link.relationship")})]}),s&&l(V,{children:[t(M,{pointer:!0,className:"nitro-friends-spritesheet icon-heart",onClick:I=>h(I,Ht.RELATIONSHIP_HEART)}),t(M,{pointer:!0,className:"nitro-friends-spritesheet icon-smile",onClick:I=>h(I,Ht.RELATIONSHIP_SMILE)}),t(M,{pointer:!0,className:"nitro-friends-spritesheet icon-bobba",onClick:I=>h(I,Ht.RELATIONSHIP_BOBBA)}),t(M,{pointer:!0,className:"nitro-friends-spritesheet icon-none",onClick:I=>h(I,Ht.RELATIONSHIP_NONE)})]})]})]}):null},ic=a=>{const{list:e=null,selectedFriendsIds:r=null,selectFriend:n=null}=a;return!e||!e.length?null:t(V,{children:e.map((s,o)=>t(bv,{friend:s,selected:r&&r.indexOf(s.id)>=0,selectFriend:n},o))})},Nv=a=>{const{request:e=null}=a,{requestResponse:r=null}=cr();return e?l(Xo,{justifyContent:"between",className:"px-2 py-1",children:[l(v,{alignItems:"center",gap:1,children:[t(hr,{userId:e.id}),t("div",{children:e.name})]}),l(v,{alignItems:"center",gap:1,children:[t(M,{className:"nitro-friends-spritesheet icon-accept cursor-pointer",onClick:n=>r(e.id,!0)}),t(M,{className:"nitro-friends-spritesheet icon-deny cursor-pointer",onClick:n=>r(e.id,!1)})]})]}):null},Sv=a=>{const{children:e=null,...r}=a,{requests:n=[],requestResponse:s=null}=cr();return n.length?l(Vi,{...r,children:[l(S,{fullHeight:!0,justifyContent:"between",gap:1,children:[t(S,{gap:0,children:n.map((o,c)=>t(Nv,{request:o},c))}),t(v,{justifyContent:"center",className:"px-2 py-1",children:t(L,{onClick:o=>s(-1,!1),children:m("friendlist.requests.dismissall")})})]}),e]}):null},Tv=a=>{const{selectedFriendsIds:e=null,removeFriendsText:r=null,removeSelectedFriends:n=null,onCloseClick:s=null}=a;return l(se,{className:"nitro-friends-remove-confirmation",theme:"primary",children:[t(ne,{headerText:m("friendlist.removefriendconfirm.title"),onCloseClick:s}),l(re,{className:"text-black",children:[t("div",{children:r}),l(v,{gap:1,children:[t(L,{fullWidth:!0,variant:"danger",disabled:e.length===0,onClick:n,children:m("generic.ok")}),t(L,{fullWidth:!0,onClick:s,children:m("generic.cancel")})]})]})]})},vv=a=>{const{selectedFriendsIds:e=null,onCloseClick:r=null,sendRoomInvite:n=null}=a,[s,o]=i.exports.useState("");return l(se,{className:"nitro-friends-room-invite",uniqueKey:"nitro-friends-room-invite",theme:"friendlist",children:[t(ne,{headerText:m("friendlist.invite.title"),onCloseClick:r}),l(re,{className:"text-black",children:[m("friendlist.invite.summary",["count"],[e.length.toString()]),t("textarea",{className:"form-control",value:s,maxLength:255,onChange:c=>o(c.target.value)}),t(N,{center:!0,className:"bg-muted rounded p-1",children:m("friendlist.invite.note")}),l(v,{gap:1,children:[t(L,{fullWidth:!0,variant:"success",disabled:s.length===0||e.length===0,onClick:()=>n(s),children:m("friendlist.invite.send")}),t(L,{fullWidth:!0,onClick:r,children:m("generic.cancel")})]})]})]})},wv=a=>{const{...e}=a,[r,n]=i.exports.useState(""),[s,o]=i.exports.useState(null),[c,u]=i.exports.useState(null),{canRequestFriend:g=null,requestFriend:p=null}=cr();return U(OI,d=>{const h=d.getParser();o(h.friends),u(h.others)}),i.exports.useEffect(()=>{if(!r||!r.length)return;const d=setTimeout(()=>{!r||!r.length||D(new kI(r))},500);return()=>clearTimeout(d)},[r]),t(Vi,{...e,children:l(S,{className:"h-100",children:[t(S,{children:t("input",{type:"text",className:"w-100 friend-search",placeholder:m("generic.search"),value:r,maxLength:50,onChange:d=>n(d.target.value)})}),l(S,{children:[s&&l(V,{children:[s.length===0&&t(N,{gfbold:!0,className:"px-2 py-1",children:m("friendlist.search.nofriendsfound")}),s.length>0&&l(S,{gap:0,children:[t(N,{gfbold:!0,className:"px-2 py-1",children:m("friendlist.search.friendscaption",["cnt"],[s.length.toString()])}),t("hr",{className:"mx-2 mt-0 mb-1 text-black"}),t(S,{gap:0,children:s.map(d=>l(Xo,{justifyContent:"between",className:"px-2 py-1",children:[l(v,{alignItems:"center",gap:1,children:[t(hr,{userId:d.avatarId}),t("div",{children:d.avatarName})]}),t(v,{alignItems:"center",gap:1,children:d.isAvatarOnline&&t(M,{className:"nitro-friends-spritesheet icon-chat cursor-pointer",onClick:h=>la(d.avatarId),title:m("friendlist.tip.im")})})]},d.avatarId))})]})]}),c&&l(V,{children:[c.length===0&&t(N,{gfbold:!0,className:"px-2 py-1",children:m("friendlist.search.noothersfound")}),c.length>0&&l(S,{gap:0,children:[t(N,{gfbold:!0,className:"px-2 py-1",children:m("friendlist.search.otherscaption",["cnt"],[c.length.toString()])}),t("hr",{className:"mx-2 mt-0 mb-1 text-black"}),t(S,{gap:0,children:c.map(d=>l(Xo,{justifyContent:"between",className:"px-2 py-1",children:[l(v,{alignItems:"center",gap:1,children:[t(hr,{userId:d.avatarId}),t("div",{children:d.avatarName})]}),t(v,{alignItems:"center",gap:1,children:g(d.avatarId)&&t(M,{className:"nitro-friends-spritesheet icon-add cursor-pointer",onClick:h=>p(d.avatarId,d.avatarName),title:m("friendlist.tip.addfriend")})})]},d.avatarId))})]})]})]})]})})},Rv=a=>{const[e,r]=i.exports.useState(!1),[n,s]=i.exports.useState([]),[o,c]=i.exports.useState(!1),[u,g]=i.exports.useState(!1),{onlineFriends:p=[],offlineFriends:d=[],requests:h=[],requestFriend:C=null}=cr(),I=i.exports.useMemo(()=>{if(!n||!n.length)return"";const b=[];for(const T of n){let w=p.find(O=>O.id===T);w||(w=d.find(O=>O.id===T)),w&&b.push(w.name)}return m("friendlist.removefriendconfirm.userlist",["user_names"],[b.join(", ")])},[d,p,n]),f=i.exports.useCallback(b=>{b<0||s(T=>{const w=[...T],O=w.indexOf(b);return O>-1?w.splice(O,1):w.push(b),w})},[s]),_=b=>{!n.length||!b||!b.length||b.length>255||(D(new AI(b,n)),c(!1))},E=()=>{n.length!==0&&(s(b=>(D(new PI(...b)),[])),g(!1))};return i.exports.useEffect(()=>{const b={linkReceived:T=>{const w=T.split("/");if(!(w.length<2))switch(w[1]){case"show":r(!0);return;case"hide":r(!1);return;case"toggle":r(O=>!O);return;case"request":if(w.length<4)return;C(parseInt(w[2]),w[3])}},eventUrlPrefix:"friends/"};return Ct(b),()=>_t(b)},[C]),e?l(V,{children:[l(se,{className:"nitro-friends",uniqueKey:"nitro-friends",theme:"friendlist",children:[t(ne,{headerText:m("friendlist.friends"),onCloseClick:b=>r(!1)}),t(re,{overflow:"hidden",gap:1,className:"text-black p-0",children:l(xb,{fullHeight:!0,overflow:"hidden",children:[l(Vi,{className:"friend-headers",headerText:m("friendlist.friends"),isExpanded:!0,children:[t(ac,{headerText:m("friendlist.friends")+` (${p.length})`,isExpanded:!0,children:t(ic,{list:p,selectedFriendsIds:n,selectFriend:f})}),t(ac,{headerText:m("friendlist.friends.offlinecaption")+` (${d.length})`,isExpanded:!0,children:t(ic,{list:d,selectedFriendsIds:n,selectFriend:f})}),n&&n.length===0&&l(v,{gap:1,className:"friend-active-tab p-1",children:[t("div",{className:"friend-follow-icon"}),t("div",{className:"friend-profile-icon"}),t("div",{className:"friend-delete-icon"})]}),n&&n.length>0&&l(v,{gap:1,className:"friend-active-tab p-1",children:[t("div",{className:"friend-follow-icon active",onClick:()=>c(!0)}),t("div",{className:"friend-profile-icon active"}),t("div",{className:"friend-delete-icon active",onClick:b=>g(!0)})]})]}),t(Sv,{className:"friend-headers",headerText:m("friendlist.tab.friendrequests")+` (${h.length})`,isExpanded:!1}),t(wv,{className:"search-headers",headerText:m("people.search.title")})]})}),t("div",{className:"friendlist-bottom p-1"})]}),o&&t(vv,{selectedFriendsIds:n,onCloseClick:()=>c(!1),sendRoomInvite:_}),u&&t(Tv,{selectedFriendsIds:n,removeFriendsText:I,onCloseClick:()=>g(!1),removeSelectedFriends:E})]}):null},xv=a=>{const{itemImage:e=void 0,itemColor:r=void 0,itemActive:n=!1,itemCount:s=1,itemCountMinimum:o=1,itemUniqueSoldout:c=!1,itemUniqueNumber:u=-2,itemUnseen:g=!1,itemHighlight:p=!1,disabled:d=!1,center:h=!0,column:C=!0,style:I={},classNames:f=[],position:_="relative",overflow:E="hidden",children:b=null,...T}=a,w=i.exports.useMemo(()=>{const R=["layout-grid-item-messenger"];return n&&R.push("active"),(c||u>0)&&R.push("unique-item"),c&&R.push("sold-out"),g&&R.push("unseen"),p&&R.push("has-highlight"),d&&R.push("disabled"),e===null&&R.push("icon","loading-icon"),f.length&&R.push(...f),R},[n,c,u,g,p,d,e,f]),O=i.exports.useMemo(()=>{let R={...I};return e&&(R.backgroundImage=`url(${e})`),r&&(R.backgroundColor=r),Object.keys(I).length&&(R={...R,...I}),R},[I,e,r]);return l(S,{center:h,pointer:!0,position:_,overflow:E,column:C,classNames:w,style:O,...T,children:[s>o&&t(xr,{count:s}),u>0&&l(V,{children:[t(M,{fit:!0,className:"unique-bg-override",style:{backgroundImage:`url(${e})`}}),t("div",{className:"position-absolute bottom-0 unique-item-counter",children:t(gn,{value:u})})]}),b]})},yv=a=>{const{thread:e=null,group:r=null}=a,n=i.exports.useMemo(()=>r.type===jn.GROUP_CHAT&&sd(r.chats[0].extraData),[r]),s=i.exports.useMemo(()=>!e||!r?!1:!!(r.type===jn.PRIVATE_CHAT&&r.userId===H().userId||n&&r.chats.length&&n.userId===H().userId),[e,r,n]);return!e||!r?null:r.userId?l(V,{children:[l(v,{fullWidth:!0,justifyContent:s?"end":"start",gap:2,children:[r.type===jn.PRIVATE_CHAT&&!s&&t(M,{shrink:!0,className:"message-avatar",children:t(st,{figure:e.participant.figure,direction:2})}),n&&!s&&t(M,{shrink:!0,className:"message-avatar",children:t(st,{figure:n.figure,direction:2})}),l(M,{className:"message-bubble text-black mt-2 py-1 px-2 messages-group-"+(s?"right":"left"),children:[l(M,{className:"username",children:[s&&H().userName,!s&&(n?n.username:e.participant.name)]}),r.chats.map((o,c)=>t(M,{className:"text-break",children:o.message},c))]}),s&&t(M,{shrink:!0,className:"message-avatar",children:t(st,{figure:H().figure,direction:4})})]}),r.chats.length>0&&t(v,{className:`text-black ${s?"":"px-5"}`,children:t(N,{variant:"muted",className:s?"px-1":"px-3",children:Tr.format((new Date().getTime()-r.chats[r.chats.length-1].date.getTime())/1e3,".ago",2)})})]}):t(V,{children:r.chats.map((o,c)=>t(v,{fullWidth:!0,gap:2,justifyContent:"start",children:l(M,{className:"w-100 text-break",children:[o.type===Fr.SECURITY_NOTIFICATION&&l(v,{gap:2,alignItems:"center",className:"thread-message mb-2 px-2 py-1 ",children:[t(M,{className:"nitro-friends-spritesheet icon-warning flex-shrink-0 px-3"}),t(M,{children:o.message})]}),o.type===Fr.ROOM_INVITE&&l(v,{gap:2,alignItems:"center",className:"bg-light rounded mb-2 px-2 py-1 small text-black",children:[t(M,{className:"messenger-notification-icon flex-shrink-0"}),l(M,{children:[m("messenger.invitation")+" ",o.message]})]})]})},c))})},Ov=a=>{const{thread:e=null}=a;return e.setRead(),t(V,{children:e.groups.length>0&&e.groups.map((r,n)=>t(yv,{thread:e,group:r},n))})},kv=a=>{const[e,r]=i.exports.useState(!1),[n,s]=i.exports.useState(-1),[o,c]=i.exports.useState(""),{visibleThreads:u=[],activeThread:g=null,getMessageThread:p=null,sendMessage:d=null,setActiveThreadId:h=null,closeThread:C=null}=Fd(),{report:I=null}=Or(),f=i.exports.useRef(),_=()=>g&&g.participant&&D(new wi(g.participant.id)),E=()=>g&&g.participant&&jt(g.participant.id),b=()=>{!g||!o.length||(d(g,H().userId,o),c(""))},T=w=>{w.key==="Enter"&&b()};return i.exports.useEffect(()=>{const w={linkReceived:O=>{const R=O.split("/");if(R.length===2){if(R[1]==="open"){r(!0);return}if(R[1]==="toggle"){r(F=>!F);return}const x=p(parseInt(R[1]));if(!x)return;h(x.threadId),r(!0)}},eventUrlPrefix:"friends-messenger/"};return Ct(w),()=>_t(w)},[p,h]),i.exports.useEffect(()=>{!e||!g||(f.current.scrollTop=f.current.scrollHeight)},[e,g]),i.exports.useEffect(()=>{u.length===0&&r(!1)},[u]),i.exports.useEffect(()=>{if(e&&!g){n>0?h(n):u.length>0&&h(u[0].threadId);return}!e&&g&&(s(g.threadId),h(-1))},[e,g,n,u,h]),e?l(se,{className:"nitro-friends-messenger",uniqueKey:"nitro-friends-messenger",theme:"messenger",children:[t(ne,{headerText:m("messenger.window.title",["OPEN_CHAT_COUNT"],[u.length.toString()]),hideButtonClose:!0,onCloseClick:w=>r(!1)}),l(re,{children:[t(S,{fullWidth:!0,size:4,children:t("div",{className:"d-flex h-100 overflow-auto gap-2",children:u&&u.length>0&&u.map(w=>l(xv,{itemActive:g===w,onClick:O=>h(w.threadId),children:[w.unread&&t(xr,{count:w.unreadCount}),t(v,{fullWidth:!0,alignItems:"center",gap:1,children:l(v,{alignItems:"center",className:"friend-head px-1",children:[w.participant.id>0&&t(st,{figure:w.participant.figure,headOnly:!0,direction:2}),w.participant.id<=0&&t(je,{isGroup:!0,badgeCode:w.participant.figure})]})})]},w.threadId))})}),t(S,{size:8,overflow:"hidden",className:"w-100",children:g&&l(V,{children:[t("div",{className:"messenger-line",children:t("p",{className:"nitro-messenger-header-text fw-bold",children:m("messenger.window.separator",["FRIEND_NAME"],[g.participant.name])})}),l(v,{alignItems:"center",justifyContent:"between",gap:1,children:[l(v,{gap:1,children:[l(Kr,{className:"gap-1",children:[t("button",{className:"follow",title:m("messenger.followfriend.tooltip"),onClick:_}),t("button",{className:"profile",title:m("guide.help.common.profile.tooltip"),onClick:E})]}),t("button",{className:"report",title:m("messenger.window.button.report.tooltip"),onClick:()=>I(Ve.IM,{reportedUserId:g.participant.id}),children:m("messenger.window.button.report")})]}),t("button",{className:"clear",onClick:w=>C(g.threadId)})]}),t(S,{fit:!0,className:"chat-messages",children:t(S,{innerRef:f,overflow:"auto",children:t(Ov,{thread:g})})}),l(v,{gap:1,children:[t("input",{type:"text",className:"chat-input-form form-control-sm",maxLength:255,placeholder:m("messenger.window.input.default",["FRIEND_NAME"],[g.participant.name]),value:o,onChange:w=>c(w.target.value),onKeyDown:T}),t("button",{className:"messenger-button chat-submit fw-bold px-3",onClick:b,children:m("widgets.chatinput.say")})]})]})})]})]}):null},Av=a=>{const{settings:e=null,onlineFriends:r=[]}=cr();return e?l(V,{children:[Si.exports.createPortal(t(_v,{onlineFriends:r}),document.getElementById("toolbar-friend-bar-container")),t(Rv,{}),t(kv,{})]}):null},Pv=()=>{const{games:a,selectedGame:e,setSelectedGame:r}=fa(),n=o=>{let c=["game-icon"];return e===o&&c.push("selected"),c.join(" ")},s=o=>`url(${o.assetUrl}${o.gameNameId}_icon.png)`;return l(M,{fullWidth:!0,className:"gameList-container bg-dark p-1",children:[m("gamecenter.game_list_title"),t(v,{gap:3,children:a&&a.map((o,c)=>t(M,{className:n(o),onClick:u=>r(o),style:{backgroundImage:s(o)}},c))})]})},Dv=()=>{const{gameURL:a,setGameURL:e}=fa(),[r,n]=i.exports.useState(0),s=i.exports.useRef();return i.exports.useEffect(()=>{if(!s||s&&!s.current)return;n(0);let o=document.createElement("iframe");o.src=a,o.classList.add("game-center-stage"),o.classList.add("h-100"),o.onload=()=>{n(c=>c+=1)},s.current.innerHTML="",s.current.appendChild(o)},[s,a]),i.exports.useEffect(()=>{r>1&&(e(null),D(new DI))},[r,e]),a?t(M,{innerRef:s,className:"game-center-stage"}):null},Mv=()=>{const{selectedGame:a,accountStatus:e}=fa();i.exports.useEffect(()=>{a&&(D(new MI(a.gameId)),D(new LI(a.gameId)))},[a]);const r=()=>Qt.uintHexColor(a.bgColor),n=()=>`url(${a.assetUrl}${a.gameNameId}_theme.png)`,s=()=>Qt.uintHexColor(a.textColor),o=()=>{D(new UI(a.gameId))};return l(v,{className:"game-view py-4",fullHeight:!0,style:{backgroundColor:r(),backgroundImage:n(),color:s()},children:[l(v,{className:"w-75",column:!0,alignItems:"center",gap:2,children:[t(N,{bold:!0,children:m(`gamecenter.${a.gameNameId}.description_title`)}),t("img",{src:a.assetUrl+a.gameNameId+"_logo.png"}),(e.hasUnlimitedGames||e.freeGamesLeft>0)&&t(V,{children:l(L,{variant:"light",position:"relative",className:"px-4",onClick:o,children:[m("gamecenter.play_now"),!e.hasUnlimitedGames&&t(xr,{className:"me-n1 mt-n1",count:e.freeGamesLeft})]})}),t(N,{bold:!0,className:"w-50",center:!0,children:m(`gamecenter.${a.gameNameId}.description_content`)})]}),t(M,{className:"w-25"})]})},Lv=()=>{const{isVisible:a,setIsVisible:e,games:r,accountStatus:n}=fa();if(i.exports.useEffect(()=>{const s=()=>{e(c=>!c)},o={linkReceived:c=>{switch(c.split("/")[1]){case"toggle":s();break}},eventUrlPrefix:"games/"};return Ct(o),()=>_t(o)},[]),!(!a||!r||!n))return l(v,{position:"absolute",className:"top-0 bottom-0 start-0 end-0 bg-black",justifyContent:"center",children:[l(v,{className:"game-center-main",column:!0,children:[t(Mv,{}),t(Pv,{})]}),t(Dv,{})]})},Uv=[0,1,2,3,4,5,6,7,8],Fv=a=>{const{badgeParts:e=[],setBadgeParts:r=null}=a,[n,s]=i.exports.useState(-1),{groupCustomize:o=null}=no(),c=(u,g,p)=>{const d=[...e];d[u][g]=p,r(d),g==="key"&&s(-1)};return!e||!e.length?null:l(V,{children:[n<0&&e&&e.length>0&&e.map((u,g)=>l(v,{alignItems:"center",justifyContent:"between",gap:2,className:"bg-muted rounded px-2 py-1",children:[l(v,{pointer:!0,center:!0,className:"bg-muted rounded p-1",onClick:p=>s(g),children:[e[g].code&&e[g].code.length>0&&t(je,{badgeCode:e[g].code,isGroup:!0}),(!e[g].code||!e[g].code.length)&&t(v,{center:!0,className:"badge-image group-badge",children:t(Ss,{className:"fa-icon"})})]}),u.type!==zt.BASE&&t(le,{gap:1,columnCount:3,children:Uv.map((p,d)=>t(M,{pointer:!0,className:`group-badge-position-swatch ${e[g].position===p?"active":""}`,onClick:h=>c(g,"position",p)},d))}),t(le,{gap:1,columnCount:8,children:o.badgePartColors.length>0&&o.badgePartColors.map((p,d)=>t(M,{pointer:!0,className:`group-badge-color-swatch ${e[g].color===d+1?"active":""}`,style:{backgroundColor:"#"+p.color},onClick:h=>c(g,"color",d+1)},d))})]},g)),n>=0&&l(le,{gap:1,columnCount:5,children:[e[n].type===zt.SYMBOL&&t(S,{pointer:!0,center:!0,className:"bg-muted rounded p-1",onClick:u=>c(n,"key",0),children:t(v,{center:!0,className:"badge-image group-badge",children:t(xn,{className:"fa-icon"})})}),(e[n].type===zt.BASE?o.badgeBases:o.badgeSymbols).map((u,g)=>t(S,{pointer:!0,center:!0,className:"bg-muted rounded p-1",onClick:p=>c(n,"key",u.id),children:t(je,{badgeCode:zt.getCode(e[n].type,u.id,e[n].color,4),isGroup:!0})},g))]})]})},nm=a=>{const{groupData:e=null,setGroupData:r=null,setCloseAction:n=null,skipDefault:s=null}=a,[o,c]=i.exports.useState(null),{groupCustomize:u=null}=no(),g=()=>{if(!o||!o.length)return"";let d="";return o.forEach(h=>h.code&&(d+=h.code)),d},p=i.exports.useCallback(()=>{if(!e||!o||!o.length)return!1;if(e.groupBadgeParts===o)return!0;if(e.groupId<=0)return r(h=>{const C={...h};return C.groupBadgeParts=o,C}),!0;const d=[];return o.forEach(h=>{h.code&&(d.push(h.key),d.push(h.color),d.push(h.position))}),D(new FI(e.groupId,d)),!0},[e,o,r]);return i.exports.useEffect(()=>{if(e.groupBadgeParts)return;const d=[new zt(zt.BASE,u.badgeBases[0].id,u.badgePartColors[0].id),new zt(zt.SYMBOL,0,u.badgePartColors[0].id),new zt(zt.SYMBOL,0,u.badgePartColors[0].id),new zt(zt.SYMBOL,0,u.badgePartColors[0].id),new zt(zt.SYMBOL,0,u.badgePartColors[0].id)];r(h=>({...h,groupBadgeParts:d}))},[e.groupBadgeParts,u,r]),i.exports.useEffect(()=>{if(e.groupId<=0){c(e.groupBadgeParts?[...e.groupBadgeParts]:null);return}c(e.groupBadgeParts)},[e]),i.exports.useEffect(()=>(n({action:p}),()=>n(null)),[n,p]),l(le,{overflow:"hidden",gap:1,children:[t(S,{size:2,children:t(v,{center:!0,className:"bg-muted rounded p-1",children:t(je,{badgeCode:g(),isGroup:!0})})}),t(S,{size:10,overflow:"auto",children:t(Fv,{badgeParts:o,setBadgeParts:c})})]})},sm=a=>{const{groupData:e=null,setGroupData:r=null,setCloseAction:n=null}=a,[s,o]=i.exports.useState(null),{groupCustomize:c=null}=no(),u=d=>d===0?c.groupColorsA.find(h=>h.id===s[d]).color:c.groupColorsB.find(h=>h.id===s[d]).color,g=(d,h)=>{o(C=>{const I=[...C];return I[d]=h,I})},p=i.exports.useCallback(()=>!e||!s||!s.length?!1:e.groupColors===s?!0:e.groupId<=0?(r(d=>{const h={...d};return h.groupColors=[...s],h}),!0):(D(new GI(e.groupId,s[0],s[1])),!0),[e,s,r]);return i.exports.useEffect(()=>{if(!c.groupColorsA||!c.groupColorsB||e.groupColors)return;const d=[c.groupColorsA[0].id,c.groupColorsB[0].id];r(h=>({...h,groupColors:d}))},[c,e.groupColors,r]),i.exports.useEffect(()=>{if(e.groupId<=0){o(e.groupColors?[...e.groupColors]:null);return}o(e.groupColors)},[e]),i.exports.useEffect(()=>(n({action:p}),()=>n(null)),[n,p]),s?l(le,{overflow:"hidden",children:[l(S,{size:2,gap:1,children:[t(N,{bold:!0,children:m("group.edit.color.guild.color")}),e.groupColors&&e.groupColors.length>0&&l(v,{overflow:"hidden",className:"rounded border",children:[t(M,{className:"group-color-swatch",style:{backgroundColor:"#"+u(0)}}),t(M,{className:"group-color-swatch",style:{backgroundColor:"#"+u(1)}})]})]}),l(S,{size:5,gap:1,overflow:"hidden",children:[t(N,{bold:!0,children:m("group.edit.color.primary.color")}),t(Ue,{gap:1,columnCount:7,columnMinWidth:16,columnMinHeight:16,children:e.groupColors&&c.groupColorsA&&c.groupColorsA.map((d,h)=>t("div",{className:Rn("group-badge-color-swatch cursor-pointer",e.groupColors[0]===d.id&&"active"),style:{backgroundColor:"#"+d.color},onClick:()=>g(0,d.id)},h))})]}),l(S,{size:5,gap:1,overflow:"hidden",children:[t(N,{bold:!0,children:m("group.edit.color.secondary.color")}),t(Ue,{gap:1,columnCount:7,columnMinWidth:16,columnMinHeight:16,children:e.groupColors&&c.groupColorsB&&c.groupColorsB.map((d,h)=>t("div",{className:Rn("group-badge-color-swatch cursor-pointer",e.groupColors[1]===d.id&&"active"),style:{backgroundColor:"#"+d.color},onClick:()=>g(1,d.id)},h))})]})]}):null},Gv=a=>{const{groupData:e=null,setGroupData:r=null,purchaseCost:n=0}=a,{groupCustomize:s=null}=no(),o=()=>{if(!e||!e.groupBadgeParts||!e.groupBadgeParts.length)return"";let u="";return e.groupBadgeParts.forEach(g=>g.code&&(u+=g.code)),u},c=u=>u===0?s.groupColorsA.find(g=>g.id===e.groupColors[u]).color:s.groupColorsB.find(g=>g.id===e.groupColors[u]).color;return e?l(le,{overflow:"hidden",gap:1,children:[l(S,{size:3,children:[l(S,{center:!0,className:"bg-muted rounded p-1",gap:2,children:[t(N,{bold:!0,center:!0,children:m("group.create.confirm.guildbadge")}),t(je,{badgeCode:o(),isGroup:!0})]}),l(S,{center:!0,className:"bg-muted rounded p-1",gap:2,children:[t(N,{bold:!0,center:!0,children:m("group.edit.color.guild.color")}),l(v,{overflow:"hidden",className:"rounded border",children:[t(M,{className:"group-color-swatch",style:{backgroundColor:"#"+c(0)}}),t(M,{className:"group-color-swatch",style:{backgroundColor:"#"+c(1)}})]})]})]}),l(S,{size:9,justifyContent:"between",children:[l(S,{children:[l(S,{gap:1,children:[t(N,{bold:!0,children:e.groupName}),t(N,{children:e.groupDescription})]}),t(N,{overflow:"auto",children:m("group.create.confirm.info")})]}),t(N,{center:!0,variant:"white",className:"bg-primary rounded p-1",children:m("group.create.confirm.buyinfo",["amount"],[n.toString()])})]})]}):null},om=a=>{const{groupData:e=null,setGroupData:r=null,setCloseAction:n=null,onClose:s=null,isCreator:o=!1,availableRooms:c=[]}=a,[u,g]=i.exports.useState(""),[p,d]=i.exports.useState(""),[h,C]=i.exports.useState(-1),{showConfirm:I=null}=Xe(),f=()=>{!e||e.groupId<=0||I(m("group.deleteconfirm.desc"),()=>{D(new VI(e.groupId)),s&&s()},null,null,null,m("group.deleteconfirm.title"))},_=i.exports.useCallback(()=>!e||!u||!u.length?!1:u===e.groupName&&p===e.groupDescription?!0:e.groupId<=0?h<=0?!1:(r(E=>{const b={...E};return b.groupName=u,b.groupDescription=p,b.groupHomeroomId=h,b}),!0):(D(new BI(e.groupId,u,p||"")),!0),[e,u,p,h,r]);return i.exports.useEffect(()=>{g(e.groupName||""),d(e.groupDescription||""),C(e.groupHomeroomId)},[e]),i.exports.useEffect(()=>(n({action:_}),()=>n(null)),[n,_]),e?l(S,{justifyContent:"between",overflow:"auto",children:[l(S,{gap:1,children:[l(v,{alignItems:"center",gap:1,children:[t(N,{center:!0,className:"col-3",children:m("group.edit.name")}),t("input",{type:"text",className:"form-control form-control-sm",value:u,maxLength:29,onChange:E=>g(E.target.value)})]}),l(v,{alignItems:"center",gap:1,children:[t(N,{center:!0,className:"col-3",children:m("group.edit.desc")}),t("textarea",{className:"form-control form-control-sm",value:p,maxLength:254,onChange:E=>d(E.target.value)})]}),o&&l(V,{children:[l(v,{alignItems:"center",gap:1,children:[t(N,{center:!0,className:"col-3",children:m("group.edit.base")}),t(S,{fullWidth:!0,gap:1,children:l("select",{className:"form-select form-select-sm",value:h,onChange:E=>C(parseInt(E.target.value)),children:[t("option",{value:-1,disabled:!0,children:m("group.edit.base.select.room")}),c&&c.map((E,b)=>t("option",{value:E.id,children:E.name},b))]})})]}),l(v,{gap:1,children:[t(M,{className:"col-3",children:" "}),t(N,{small:!0,children:m("group.edit.base.warning")})]})]})]}),!o&&t(L,{variant:"danger",onClick:f,children:m("group.delete")}),o&&t(N,{underline:!0,center:!0,fullWidth:!0,pointer:!0,onClick:E=>Z("navigator/create"),children:m("group.createroom")})]}):null},Bv=[1,2,3,4],Vv=a=>{const{onClose:e=null}=a,[r,n]=i.exports.useState(1),[s,o]=i.exports.useState(null),[c,u]=i.exports.useState(null),[g,p]=i.exports.useState(null),[d,h]=i.exports.useState(0),C=()=>{if(!c)return;const _=[];c.groupBadgeParts.forEach(E=>{E.code&&(_.push(E.key),_.push(E.color),_.push(E.position))}),D(new jI(c.groupName,c.groupDescription,c.groupHomeroomId,c.groupColors[0],c.groupColors[1],_))},I=()=>{if(!(s&&s.action&&!s.action())){if(r===1){e();return}n(_=>_-1)}},f=()=>{if(!(s&&s.action&&!s.action())){if(r===4){C();return}n(_=>_===4?_:_+1)}};return U(HI,_=>{const E=_.getParser(),b=[];E.availableRooms.forEach((T,w)=>b.push({id:w,name:T})),p(b),h(E.groupCost)}),i.exports.useEffect(()=>{n(1),u({groupId:-1,groupName:null,groupDescription:null,groupHomeroomId:-1,groupState:1,groupCanMembersDecorate:!0,groupColors:null,groupBadgeParts:null}),D(new WI)},[u]),c?l(se,{className:"nitro-group-creator",theme:"primary",children:[t(ne,{headerText:m("group.create.title"),onCloseClick:e}),l(re,{children:[t(v,{center:!0,className:"creator-tabs",children:Bv.map((_,E)=>t(v,{center:!0,className:`tab tab-${_===1?"blue-flat":_===4?"yellow":"blue-arrow"} ${r===_?"active":""}`,children:t(N,{variant:"white",children:m(`group.create.steplabel.${_}`)})},E))}),l(S,{overflow:"hidden",children:[l(v,{alignItems:"center",gap:2,children:[t(M,{className:`nitro-group-tab-image tab-${r}`}),l(S,{grow:!0,gap:0,children:[t(N,{bold:!0,fontSize:4,children:m(`group.create.stepcaption.${r}`)}),t(N,{children:m(`group.create.stepdesc.${r}`)})]})]}),l(S,{overflow:"hidden",children:[r===1&&t(om,{groupData:c,setGroupData:u,setCloseAction:o,onClose:null,isCreator:!0,availableRooms:g}),r===2&&t(nm,{groupData:c,setGroupData:u,setCloseAction:o}),r===3&&t(sm,{groupData:c,setGroupData:u,setCloseAction:o}),r===4&&t(Gv,{groupData:c,setGroupData:u,purchaseCost:d})]}),l(v,{justifyContent:"between",children:[t(L,{variant:"link",className:"text-black",onClick:I,children:m(r===1?"generic.cancel":"group.create.previousstep")}),t(L,{disabled:r===4&&!Hn(),variant:r===4?Hn()?"success":"danger":"primary",onClick:f,children:m(r===4?Hn()?"group.create.confirm.buy":"group.create.confirm.viprequired":"group.create.nextstep")})]})]})]})]}):null},Hv=["regular","exclusive","private"],am=a=>{const{groupInformation:e=null,onClose:r=null,overflow:n="hidden",...s}=a,{showConfirm:o=null}=Xe(),c=e&&e.ownerName===H().userName,u=()=>e&&Fi(e.id),g=()=>{o(m("group.leaveconfirm.desc"),()=>{D(new Ri(e.id,H().userId)),r&&r()},null)},p=()=>e.membershipType===wt.NOT_MEMBER||e.membershipType===wt.REQUEST_PENDING?null:c?t("i",{className:"icon icon-group-owner",title:m("group.youareowner")}):e.isAdmin?t("i",{className:"icon icon-group-admin",title:m("group.youareadmin")}):t("i",{className:"icon icon-group-member",title:m("group.youaremember")}),d=()=>{if(c)return"group.youareowner";if(e.type===nr.PRIVATE&&e.membershipType!==wt.MEMBER)return"";if(e.membershipType===wt.MEMBER)return"group.leave";if(e.membershipType===wt.NOT_MEMBER&&e.type===nr.REGULAR)return"group.join";if(e.membershipType===wt.REQUEST_PENDING)return"group.membershippending";if(e.membershipType===wt.NOT_MEMBER&&e.type===nr.EXCLUSIVE)return"group.requestmembership"},h=()=>{if(!(e.type===nr.PRIVATE&&e.membershipType===wt.NOT_MEMBER)){if(e.membershipType===wt.MEMBER){g();return}u()}},C=I=>{switch(I){case"members":Ul(e.id);break;case"members_pending":Ul(e.id,2);break;case"manage":id(e.id);break;case"homeroom":Kt(e.roomId);break;case"furniture":Z("catalog/open/"+at.GUILD_CUSTOM_FURNI);break;case"popular_groups":Z("navigator/search/groups");break}};return e?l(le,{className:"profile-grey-bg-border p-2",overflow:n,...s,children:[l(S,{center:!0,size:3,overflow:"hidden",children:[t(v,{alignItems:"center",overflow:"hidden",className:"group-badge",children:t(je,{badgeCode:e.badge,isGroup:!0,scale:2})}),l(S,{alignItems:"center",gap:1,children:[t(N,{small:!0,underline:!0,pointer:!0,onClick:()=>C("members"),children:m("group.membercount",["totalMembers"],[e.membersCount.toString()])}),e.pendingRequestsCount>0&&t(N,{small:!0,underline:!0,pointer:!0,onClick:()=>C("members_pending"),children:m("group.pendingmembercount",["amount"],[e.pendingRequestsCount.toString()])}),e.isOwner&&t(N,{small:!0,underline:!0,pointer:!0,onClick:()=>C("manage"),children:m("group.manage")})]}),p()]}),l(S,{size:9,justifyContent:"between",overflow:"auto",children:[l(S,{overflow:"hidden",children:[l(S,{gap:1,children:[l(v,{alignItems:"center",gap:2,children:[t(N,{bold:!0,children:e.title}),l(v,{gap:1,children:[t("i",{className:"icon icon-group-type-"+e.type,title:m(`group.edit.settings.type.${Hv[e.type]}.help`)}),e.canMembersDecorate&&t("i",{className:"icon icon-group-decorate",title:m("group.memberscandecorate")})]})]}),t(N,{small:!0,children:m("group.created",["date","owner"],[e.createdAt,e.ownerName])})]}),t(N,{small:!0,textBreak:!0,overflow:"auto",className:"group-description",children:e.description})]}),l(S,{children:[l(S,{gap:1,children:[t(N,{small:!0,underline:!0,pointer:!0,onClick:()=>C("homeroom"),children:m("group.linktobase")}),t(N,{small:!0,underline:!0,pointer:!0,onClick:()=>C("furniture"),children:m("group.buyfurni")}),t(N,{small:!0,underline:!0,pointer:!0,onClick:()=>C("popular_groups"),children:m("group.showgroups")})]}),(e.type!==nr.PRIVATE||e.type===nr.PRIVATE&&e.membershipType===wt.MEMBER)&&t(L,{disabled:e.membershipType===wt.REQUEST_PENDING||c,onClick:h,children:m(d())})]})]})]}):null},Wv=a=>{const[e,r]=i.exports.useState(null);return U(Ks,n=>{const s=n.getParser();(e&&e.id===s.id||s.flag)&&r(s)}),e?l(se,{className:"nitro-group-information-standalone",theme:"primary",children:[t(ne,{headerText:m("group.window.title"),onCloseClick:n=>r(null)}),t(re,{children:t(am,{groupInformation:e,onClose:()=>r(null)})})]}):null},jv=["regular","exclusive","private"],qv=a=>{const{groupData:e=null,setGroupData:r=null,setCloseAction:n=null}=a,[s,o]=i.exports.useState(e.groupState),[c,u]=i.exports.useState(e.groupCanMembersDecorate),g=i.exports.useCallback(()=>e?s===e.groupState&&c===e.groupCanMembersDecorate?!0:e.groupId<=0?(r(p=>{const d={...p};return d.groupState=s,d.groupCanMembersDecorate=c,d}),!0):(D(new qI(e.groupId,s,c?0:1)),!0):!1,[e,s,c,r]);return i.exports.useEffect(()=>{o(e.groupState),u(e.groupCanMembersDecorate)},[e]),i.exports.useEffect(()=>(n({action:g}),()=>n(null)),[n,g]),l(S,{overflow:"auto",children:[t(S,{children:jv.map((p,d)=>l(v,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"radio",name:"groupState",checked:s===d,onChange:h=>o(d)}),l(S,{gap:0,children:[l(v,{gap:1,children:[t("i",{className:`icon icon-group-type-${d}`}),t(N,{bold:!0,children:m(`group.edit.settings.type.${p}.label`)})]}),t(N,{children:m(`group.edit.settings.type.${p}.help`)})]})]},d))}),t(Mb,{}),l(v,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"checkbox",checked:c,onChange:p=>u(d=>!d)}),l(S,{gap:1,children:[t(N,{bold:!0,children:m("group.edit.settings.rights.caption")}),t(N,{children:m("group.edit.settings.rights.members.help")})]})]})]})},zv=[1,2,3,5],Yv=a=>{const[e,r]=i.exports.useState(1),[n,s]=i.exports.useState(null),[o,c]=i.exports.useState(null),u=()=>{s(p=>(p&&p.action&&p.action(),null)),c(null)},g=p=>{n&&n.action&&n.action(),r(p)};return U(Ks,p=>{const d=p.getParser();!o||o.groupId!==d.id||c(h=>{const C={...h};return C.groupName=d.title,C.groupDescription=d.description,C.groupState=d.type,C.groupCanMembersDecorate=d.canMembersDecorate,C})}),U(zI,p=>{const d=p.getParser(),h=[];d.badgeParts.forEach((C,I)=>{h.push(new Oa(C.isBase?Oa.BASE:Oa.SYMBOL,C.key,C.color,C.position))}),c({groupId:d.id,groupName:d.title,groupDescription:d.description,groupHomeroomId:d.roomId,groupState:d.state,groupCanMembersDecorate:d.canMembersDecorate,groupColors:[d.colorA,d.colorB],groupBadgeParts:h})}),!o||o.groupId<=0?null:l(se,{className:"nitro-group-manager",children:[t(ne,{headerText:m("group.window.title"),onCloseClick:u}),t(fn,{children:zv.map(p=>t(Zr,{isActive:e===p,onClick:()=>g(p),children:m(`group.edit.tab.${p}`)},p))}),l(re,{children:[l(v,{alignItems:"center",gap:2,children:[t(M,{className:`nitro-group-tab-image tab-${e}`}),l(S,{grow:!0,gap:0,children:[t(N,{bold:!0,fontSize:4,children:m(`group.edit.tabcaption.${e}`)}),t(N,{children:m(`group.edit.tabdesc.${e}`)})]})]}),l(S,{grow:!0,overflow:"hidden",children:[e===1&&t(om,{groupData:o,setGroupData:c,setCloseAction:s,onClose:u}),e===2&&t(nm,{groupData:o,setGroupData:c,setCloseAction:s,skipDefault:!0}),e===3&&t(sm,{groupData:o,setGroupData:c,setCloseAction:s}),e===5&&t(qv,{groupData:o,setGroupData:c,setCloseAction:s})]})]})]})},$v=a=>{const[e,r]=i.exports.useState(-1),[n,s]=i.exports.useState(-1),[o,c]=i.exports.useState(null),[u,g]=i.exports.useState(-1),[p,d]=i.exports.useState(0),[h,C]=i.exports.useState(""),[I,f]=i.exports.useState(null),{showConfirm:_=null}=Xe(),E=R=>{if(R.rank===Xt.OWNER)return"group.members.owner";if(o.admin){if(R.rank===Xt.ADMIN)return"group.members.removerights";if(R.rank===Xt.MEMBER)return"group.members.giverights"}return""},b=i.exports.useCallback(()=>{e===-1||n===-1||u===-1||D(new Il(e,u,h,n))},[e,n,u,h]),T=R=>{!o.admin||R.rank===Xt.OWNER||(R.rank!==Xt.ADMIN?D(new KI(o.groupId,R.id)):D(new XI(o.groupId,R.id)),b())},w=R=>{!o.admin||R.rank!==Xt.REQUESTED||(D(new QI(o.groupId,R.id)),b())},O=R=>{if(o.admin){if(R.rank===Xt.REQUESTED){D(new JI(o.groupId,R.id)),b();return}f(R.name),D(new ZI(o.groupId,R.id))}};return U(YI,R=>{const x=R.getParser();c(x),s(x.level),d(Math.ceil(x.totalMembersCount/x.pageSize))}),U($I,R=>{const x=R.getParser();_(m(x.furnitureCount>0?"group.kickconfirm.desc":"group.kickconfirm_nofurni.desc",["user","amount"],[I,x.furnitureCount.toString()]),()=>{D(new Ri(o.groupId,x.userId)),b()},null),f(null)}),i.exports.useEffect(()=>{const R={linkReceived:x=>{const F=x.split("/");if(F.length<2)return;const A=parseInt(F[1])||-1,k=parseInt(F[2])||3;r(A),s(k),g(0)},eventUrlPrefix:"group-members/"};return Ct(R),()=>_t(R)},[]),i.exports.useEffect(()=>{g(0)},[e,n,h]),i.exports.useEffect(()=>{e===-1||n===-1||u===-1||D(new Il(e,u,h,n))},[e,n,u,h]),i.exports.useEffect(()=>{e!==-1&&(s(-1),c(null),d(0),C(""),f(null))},[e]),e===-1||!o?null:l(se,{className:"nitro-group-members",theme:"primary",children:[t(ne,{headerText:m("group.members.title",["groupName"],[o?o.groupTitle:""]),onCloseClick:R=>r(-1)}),l(re,{overflow:"hidden",children:[l(v,{gap:2,children:[t(v,{center:!0,className:"group-badge",children:t(je,{badgeCode:o.badge,isGroup:!0,className:"mx-auto d-block"})}),l(S,{fullWidth:!0,gap:1,children:[t("input",{type:"text",className:"form-control form-control-sm w-100",placeholder:m("group.members.searchinfo"),value:h,onChange:R=>C(R.target.value)}),l("select",{className:"form-select form-select-sm w-100",value:n,onChange:R=>s(parseInt(R.target.value)),children:[t("option",{value:"0",children:m("group.members.search.all")}),t("option",{value:"1",children:m("group.members.search.admins")}),t("option",{value:"2",children:m("group.members.search.pending")})]})]})]}),t(le,{columnCount:2,overflow:"auto",className:"nitro-group-members-list-grid",children:o.result.map((R,x)=>l(v,{gap:2,alignItems:"center",overflow:"hidden",className:"member-list-item bg-white rounded p-2",children:[t("div",{className:"avatar-head cursor-pointer",onClick:()=>jt(R.id),children:t(st,{figure:R.figure,headOnly:!0,direction:2})}),l(S,{grow:!0,gap:1,children:[t(N,{bold:!0,small:!0,pointer:!0,onClick:F=>jt(R.id),children:R.name}),R.rank!==Xt.REQUESTED&&t(N,{small:!0,italics:!0,variant:"muted",children:m("group.members.since",["date"],[R.joinedAt])})]}),l(S,{gap:1,children:[R.rank!==Xt.REQUESTED&&t(v,{center:!0,children:t(M,{pointer:o.admin,className:`icon icon-group-small-${R.rank===Xt.OWNER?"owner":R.rank===Xt.ADMIN?"admin":o.admin&&R.rank===Xt.MEMBER?"not-admin":""}`,title:m(E(R)),onClick:F=>T(R)})}),o.admin&&R.rank===Xt.REQUESTED&&t(v,{alignItems:"center",children:t(M,{pointer:!0,className:"nitro-friends-spritesheet icon-accept",title:m("group.members.accept"),onClick:F=>w(R)})}),o.admin&&R.rank!==Xt.OWNER&&R.id!==H().userId&&t(v,{alignItems:"center",children:t(M,{pointer:!0,className:"nitro-friends-spritesheet icon-deny",title:m(R.rank===Xt.REQUESTED?"group.members.reject":"group.members.kick"),onClick:F=>O(R)})})]})]},x))}),l(v,{gap:1,justifyContent:"between",alignItems:"center",children:[t(L,{disabled:o.pageIndex===0,onClick:R=>g(x=>x-1),children:t(zr,{className:"fa-icon"})}),t(N,{small:!0,children:m("group.members.pageinfo",["amount","page","totalPages"],[o.totalMembersCount.toString(),(o.pageIndex+1).toString(),p.toString()])}),t(L,{disabled:o.pageIndex===p-1,onClick:R=>g(x=>x+1),children:t(Yr,{className:"fa-icon"})})]})]})]})},Kv=a=>{const[e,r]=i.exports.useState(!1);return no(),U(eE,n=>{const s=n.getParser();r(!1),Kt(s.roomId)}),i.exports.useEffect(()=>{const n={linkReceived:s=>{const o=s.split("/");if(!(o.length<2))switch(o[1]){case"create":r(!0);return;case"manage":if(!o[2])return;r(!1),D(new tE(Number(o[2])));return}},eventUrlPrefix:"groups/"};return Ct(n),()=>_t(n)},[]),l(V,{children:[e&&t(Vv,{onClose:()=>r(!1)}),!e&&t(Yv,{}),t($v,{}),t(Wv,{})]})},Xv=a=>{const{helpRequestDescription:e=null,helpRequestAverageTime:r=0}=a,n=s=>D(new rE(s));return l(S,{children:[l(S,{gap:0,className:"bg-muted p-2 rounded",children:[t(N,{bold:!0,children:m("guide.help.request.guide.accept.request.title")}),t(N,{variant:"muted",children:m("guide.help.request.type.1")}),t(N,{wrap:!0,textBreak:!0,children:e})]}),l(S,{gap:1,children:[t(L,{variant:"success",onClick:s=>n(!0),children:m("guide.help.request.guide.accept.accept.button")}),t(L,{variant:"danger",onClick:s=>n(!1),children:m("guide.help.request.guide.accept.skip.link")})]})]})},Qv=a=>{const{isOnDuty:e=!1,isHandlingGuideRequests:r=!1,setIsHandlingGuideRequests:n=null,isHandlingHelpRequests:s=!1,setIsHandlingHelpRequests:o=null,isHandlingBullyReports:c=!1,setIsHandlingBullyReports:u=null,guidesOnDuty:g=0,helpersOnDuty:p=0,guardiansOnDuty:d=0,processAction:h=null}=a;return l(S,{children:[l(v,{alignItems:"center",gap:2,className:"bg-muted p-2 rounded",children:[t(M,{className:"duty-switch"+(e?"":" off"),onClick:C=>h("toggle_duty")}),l(S,{gap:0,children:[t(N,{bold:!0,children:m("guide.help.guide.tool.yourstatus")}),t(N,{children:m(`guide.help.guide.tool.duty.${e?"on":"off"}`)})]})]}),l(S,{gap:1,children:[t(N,{bold:!0,children:m("guide.help.guide.tool.tickettypeselection.caption")}),l(v,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",disabled:e,type:"checkbox",checked:r,onChange:C=>n(C.target.checked)}),t(N,{children:m("guide.help.guide.tool.tickettypeselection.guiderequests")})]}),l(v,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",disabled:e,type:"checkbox",checked:s,onChange:C=>o(C.target.checked)}),t(N,{children:m("guide.help.guide.tool.tickettypeselection.onlyhelprequests")})]}),l(v,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",disabled:e,type:"checkbox",checked:c,onChange:C=>u(C.target.checked)}),t(N,{children:m("guide.help.guide.tool.tickettypeselection.bullyreports")})]})]}),t("hr",{className:"bg-dark m-0"}),l(v,{center:!0,gap:2,children:[t(M,{className:"info-icon"}),l(S,{gap:1,children:[t(M,{dangerouslySetInnerHTML:{__html:m("guide.help.guide.tool.guidesonduty",["amount"],[g.toString()])}}),t(M,{dangerouslySetInnerHTML:{__html:m("guide.help.guide.tool.helpersonduty",["amount"],[p.toString()])}}),t(M,{dangerouslySetInnerHTML:{__html:m("guide.help.guide.tool.guardiansonduty",["amount"],[d.toString()])}})]})]}),t("hr",{className:"bg-dark m-0"}),l(v,{justifyContent:"between",gap:2,children:[t(L,{disabled:!0,onClick:C=>h("forum_link"),children:m("guide.help.guide.tool.forum.link")}),t(L,{disabled:!0,children:m("guide.help.guide.tool.skill.link")})]})]})},Jv=a=>{const e=i.exports.useRef(null),{isGuide:r=!1,userId:n=0,userName:s=null,userFigure:o=null,isTyping:c=!1,messageGroups:u=[]}=a,[g,p]=i.exports.useState("");i.exports.useEffect(()=>{var E;(E=e.current)==null||E.scrollIntoView({block:"end",behavior:"smooth"})},[u]);const d=i.exports.useCallback(()=>{D(new nE)},[]),h=i.exports.useCallback(()=>{D(new sE)},[]),C=i.exports.useCallback(()=>{D(new oE)},[]);U(aE,E=>{const b=E.getParser();Kt(b.requesterRoomId)});const I=i.exports.useCallback(()=>{!g||!g.length||(D(new iE(g)),p(""))},[g]),f=i.exports.useCallback(E=>{E.key==="Enter"&&I()},[I]),_=i.exports.useCallback(E=>E===H().userId,[]);return l(S,{fullHeight:!0,children:[l(v,{alignItems:"center",justifyContent:"between",gap:1,className:"bg-muted p-2 rounded",children:[r&&l(Kr,{children:[t(L,{onClick:d,children:m("guide.help.request.guide.ongoing.visit.button")}),t(L,{onClick:h,children:m("guide.help.request.guide.ongoing.invite.button")})]}),!r&&l(S,{gap:0,children:[t(N,{bold:!0,children:s}),t(N,{children:m("guide.help.request.user.ongoing.guide.desc")})]}),t(L,{variant:"danger",disabled:!0,children:m("guide.help.common.report.link")})]}),t(S,{overflow:"hidden",gap:1,className:"bg-muted rounded chat-messages p-2",children:l(S,{overflow:"auto",children:[u.map((E,b)=>l(v,{fullWidth:!0,justifyContent:_(E.userId)?"end":"start",gap:2,children:[t(M,{shrink:!0,className:"message-avatar",children:!_(E.userId)&&t(st,{figure:o,direction:2})}),l(M,{className:"bg-light text-black border-radius mb-2 rounded py-1 px-2 messages-group-"+(_(E.userId)?"right":"left"),children:[l(N,{bold:!0,children:[_(E.userId)&&H().userName,!_(E.userId)&&s]}),E.messages.map((T,w)=>t(M,{pointer:!!T.roomId,className:T.roomId?"text-break text-underline":"text-break",onClick:()=>T.roomId?Kt(T.roomId):null,children:T.message},w))]}),_(E.userId)&&t(M,{className:"message-avatar flex-shrink-0",children:t(st,{figure:H().figure,direction:4})})]},b)),t("div",{ref:e})]})}),l(S,{gap:1,children:[l(v,{gap:1,children:[t("input",{type:"text",className:"form-control form-control-sm",placeholder:m("guide.help.request.guide.ongoing.input.empty",["name"],[s]),value:g,onChange:E=>p(E.target.value),onKeyDown:f}),t(L,{variant:"success",onClick:I,children:m("widgets.chatinput.say")})]}),c&&t(N,{variant:"muted",children:m("guide.help.common.typing")})]}),t(L,{fullWidth:!0,variant:"success",onClick:C,children:m("guide.help.request."+(r?"guide":"user")+".ongoing.close.link")})]})},Zv=15,ew=a=>{const{userRequest:e="",setUserRequest:r=null}=a,[n,s]=i.exports.useState(!1),o=()=>{s(!0),D(new lE(1,e))};return l(S,{children:[t(N,{children:m("guide.help.request.user.create.help")}),t("textarea",{className:"request-message",maxLength:140,value:e,onChange:c=>r(c.target.value),placeholder:m("guide.help.request.user.create.input.help")}),t(L,{fullWidth:!0,variant:"success",disabled:e.length<Zv||n,onClick:o,children:m("guide.help.request.user.create.input.button")})]})},tw=a=>{const{userName:e=null}=a,r=n=>D(new cE(n));return l(S,{children:[l(v,{justifyContent:"between",gap:1,className:"bg-muted p-2 rounded",children:[l(S,{gap:0,children:[t(N,{bold:!0,children:e}),t(N,{children:m("guide.help.request.user.feedback.guide.desc")})]}),t(L,{variant:"danger",disabled:!0,children:m("guide.help.common.report.link")})]}),l(S,{gap:1,children:[t(N,{bold:!0,children:m("guide.help.request.user.feedback.closed.title")}),t(N,{children:m("guide.help.request.user.feedback.closed.desc")})]}),e&&e.length>0&&l(V,{children:[t("hr",{className:"bg-dark m-0 mt-auto"}),l(S,{children:[t(N,{center:!0,bold:!0,children:m("guide.help.request.user.feedback.question")}),l(v,{gap:1,children:[t(L,{fullWidth:!0,variant:"success",onClick:n=>r(!0),children:m("guide.help.request.user.feedback.positive.button")}),t(L,{fullWidth:!0,variant:"danger",onClick:n=>r(!1),children:m("guide.help.request.user.feedback.negative.button")})]})]})]})]})},rw=a=>l(S,{gap:1,children:[t(N,{bold:!0,children:m("guide.help.request.no_tour_guides.title")}),t(N,{children:m("guide.help.request.no_tour_guides.message")})]}),nw=a=>{const{helpRequestDescription:e=null,helpRequestAverageTime:r=0}=a,n=()=>D(new uE);return l(S,{children:[l(S,{gap:0,className:"bg-muted rounded p-2",children:[t(N,{bold:!0,children:m("guide.help.request.guide.accept.request.title")}),t(N,{variant:"muted",children:m("guide.help.request.type.1")}),t(N,{wrap:!0,textBreak:!0,children:e})]}),l(S,{gap:1,children:[t(N,{bold:!0,children:m("guide.help.request.user.pending.info.title")}),t(N,{children:m("guide.help.request.user.pending.info.message")}),t(N,{children:m("guide.help.request.user.pending.info.waiting",["waitingtime"],[r.toString()])})]}),t(L,{variant:"danger",onClick:n,children:m("guide.help.request.user.pending.cancel.button")})]})},sw=a=>t(S,{gap:1,children:t(N,{children:m("guide.help.request.user.guide.disconnected.error.desc")})}),ow=a=>l(S,{gap:1,children:[t(N,{bold:!0,children:m("guide.help.request.user.thanks.info.title")}),t(N,{children:m("guide.help.request.user.thanks.info.desc")})]}),aw=a=>{const[e,r]=i.exports.useState(!1),[n,s]=i.exports.useState(m("guide.help.guide.tool.title")),[o,c]=i.exports.useState(!1),[u,g]=i.exports.useState(me.GUIDE_TOOL_MENU),[p,d]=i.exports.useState(!1),[h,C]=i.exports.useState(!1),[I,f]=i.exports.useState(!1),[_,E]=i.exports.useState(!1),[b,T]=i.exports.useState(0),[w,O]=i.exports.useState(0),[R,x]=i.exports.useState(0),[F,A]=i.exports.useState(""),[k,y]=i.exports.useState(null),[P,G]=i.exports.useState(0),[B,Y]=i.exports.useState(0),[X,z]=i.exports.useState(null),[Ee,ie]=i.exports.useState(null),[Pe,Qe]=i.exports.useState(!1),[pt,Ze]=i.exports.useState([]),{simpleAlert:Ft=null}=Xe(),We=i.exports.useCallback((Fe,Ie)=>{switch(Fe){case me.GUIDE_TOOL_MENU:s(m("guide.help.guide.tool.title")),c(!1);break;case me.GUIDE_ACCEPT:s(m("guide.help.request.guide.accept.title")),c(!0);break;case me.GUIDE_ONGOING:s(m("guide.help.request.guide.ongoing.title",["name"],[Ie])),c(!0);break;case me.USER_CREATE:s(m("guide.help.request.user.create.title")),c(!1);break;case me.USER_PENDING:s(m("guide.help.request.user.pending.title")),c(!0);break;case me.USER_ONGOING:s(m("guide.help.request.user.ongoing.title",["name"],[Ie])),c(!0);break;case me.USER_FEEDBACK:s(m("guide.help.request.user.feedback.title")),c(!0);break;case me.USER_THANKS:s(m("guide.help.request.user.thanks.title")),c(!1);break;case me.USER_NO_HELPERS:s(m("guide.help.request.no_tour_guides.heading")),c(!1);break;case me.USER_SOMETHING_WRONG:s(m("guide.help.request.user.guide.disconnected.error.heading")),c(!1);break}g(Fe),r(!0)},[]),qt=i.exports.useCallback(Fe=>{switch(Fe.type){case Bt.SHOW_GUIDE_TOOL:r(!0);return;case Bt.HIDE_GUIDE_TOOL:r(!1);return;case Bt.TOGGLE_GUIDE_TOOL:r(Ie=>!Ie);return;case Bt.CREATE_HELP_REQUEST:We(me.USER_CREATE);return}},[We]);lt(Bt.SHOW_GUIDE_TOOL,qt),lt(Bt.HIDE_GUIDE_TOOL,qt),lt(Bt.TOGGLE_GUIDE_TOOL,qt),lt(Bt.CREATE_HELP_REQUEST,qt),U(Du,Fe=>{!Fe.getParser().isAllowed(Pu.USE_GUIDE_TOOL)&&p&&(d(!1),D(new El(!1,!1,!1,!1)))}),U(dE,Fe=>{const Ie=Fe.getParser();d(Ie.onDuty),O(Ie.guidesOnDuty),T(Ie.helpersOnDuty),x(Ie.guardiansOnDuty)}),U(mE,Fe=>{const Ie=Fe.getParser();y(Ie.helpRequestDescription),G(Ie.roleSpecificWaitTime),Ie.asGuide&&p&&We(me.GUIDE_ACCEPT),Ie.asGuide||We(me.USER_PENDING)}),U(gE,Fe=>{const Ie=Fe.getParser();p?(Y(Ie.requesterUserId),z(Ie.requesterName),ie(Ie.requesterFigure),We(me.GUIDE_ONGOING,Ie.requesterName)):(Y(Ie.guideUserId),z(Ie.guideName),ie(Ie.guideFigure),We(me.USER_ONGOING,Ie.guideName))}),U(pE,Fe=>{const Ie=Fe.getParser();Qe(Ie.isTyping)}),U(hE,Fe=>{const Ie=Fe.getParser(),Ye=[...pt];let yt=Ye[Ye.length-1];(!yt||yt.userId!==Ie.senderId)&&(yt=new Gl(Ie.senderId),Ye.push(yt)),yt.addChat(new Fl(Ie.chatMessage)),Ze(Ye)}),U(fE,Fe=>{const Ie=Fe.getParser();if(Ie.roomId!==0){const Ye=[...pt];let yt=Ye[Ye.length-1];const de=p?H().userId:B;(!yt||yt.userId!==de)&&(yt=new Gl(de),Ye.push(yt)),yt.addChat(new Fl(Ie.roomName,Ie.roomId)),Ze(Ye)}}),U(IE,Fe=>{p?(Y(0),z(null),ie(null),Qe(!1),Ze([]),We(me.GUIDE_TOOL_MENU)):We(me.USER_FEEDBACK)}),U(EE,Fe=>{switch(Fe.getParser().errorCode){case 0:We(me.USER_SOMETHING_WRONG);break;case 1:case 2:We(me.USER_NO_HELPERS);break}}),U(CE,Fe=>{Y(0),z(null),ie(null),Qe(!1),Ze([]),We(p?me.GUIDE_TOOL_MENU:me.USER_THANKS)}),i.exports.useEffect(()=>{const Fe={linkReceived:Ie=>{const Ye=Ie.split("/");if(!(Ye.length<2))switch(Ye[1]){case"tour":return}},eventUrlPrefix:"help/"};return Ct(Fe),()=>_t(Fe)},[]);const Er=i.exports.useCallback(Fe=>{switch(Fe){case"close":r(!1),A(""),g(me.GUIDE_TOOL_MENU);return;case"toggle_duty":if(!h&&!I&&!_){Ft(m("guide.help.guide.tool.noqueueselected.message"),null,null,null,m("guide.help.guide.tool.noqueueselected.caption"),null);return}d(Ye=>(D(new El(!Ye,Ye?!1:I,Ye?!1:_,Ye?!1:h)),!Ye));return;case"forum_link":const Ie=K("group.homepage.url","").replace("%groupid%",K("guide.help.alpha.groupid","0"));window.open(Ie);return}},[h,I,_,Ft]);return e?l(se,{className:"nitro-guide-tool",theme:"primary",children:[t(ne,{headerText:n,onCloseClick:Fe=>Er("close"),noCloseButton:o}),l(re,{className:"text-black",children:[u===me.GUIDE_TOOL_MENU&&t(Qv,{isOnDuty:p,isHandlingGuideRequests:I,setIsHandlingGuideRequests:f,isHandlingHelpRequests:_,setIsHandlingHelpRequests:E,isHandlingBullyReports:h,setIsHandlingBullyReports:C,guidesOnDuty:w,helpersOnDuty:b,guardiansOnDuty:R,processAction:Er}),u===me.GUIDE_ACCEPT&&t(Xv,{helpRequestDescription:k,helpRequestAverageTime:P}),[me.GUIDE_ONGOING,me.USER_ONGOING].includes(u)&&t(Jv,{isGuide:p,userId:B,userName:X,userFigure:Ee,isTyping:Pe,messageGroups:pt}),u===me.USER_CREATE&&t(ew,{userRequest:F,setUserRequest:A}),u===me.USER_PENDING&&t(nw,{helpRequestDescription:k,helpRequestAverageTime:P}),u===me.USER_FEEDBACK&&t(tw,{userName:X}),u===me.USER_THANKS&&t(ow,{}),u===me.USER_NO_HELPERS&&t(rw,{}),u===me.USER_SOMETHING_WRONG&&t(sw,{})]})]}):null},iw=a=>{const[e,r]=i.exports.useState(!1),[n,s]=i.exports.useState(null),[o,c]=i.exports.useState(0),[u,g]=i.exports.useState(null),{userFigure:p=null}=En(),{purse:d=null,clubStatus:h=null}=Qn(),{badgeCodes:C=[],activate:I=null,deactivate:f=null}=Ea(),_=()=>d.clubDays<=0?m("purse.clubdays.zero.amount.text"):d.minutesUntilExpiration>-1&&d.minutesUntilExpiration<60*24?Tr.shortFormat(d.minutesUntilExpiration*60):Tr.shortFormat((d.clubPeriods*31+d.clubDays)*86400),E=()=>{switch(h){case Mr.ACTIVE:return m(`hccenter.status.${h}.info`,["timeleft","joindate","streakduration"],[_(),n==null?void 0:n.firstSubscriptionDate,Tr.shortFormat((n==null?void 0:n.currentHcStreak)*86400)]);case Mr.EXPIRED:return m(`hccenter.status.${h}.info`,["joindate"],[n==null?void 0:n.firstSubscriptionDate]);default:return m(`hccenter.status.${h}.info`)}},b=()=>!n||n.timeUntilPayday<60?m("hccenter.special.time.soon"):Tr.shortFormat(n.timeUntilPayday*60),T=()=>m("hccenter.special.sum",["credits"],[((n==null?void 0:n.creditRewardForStreakBonus)+(n==null?void 0:n.creditRewardForMonthlySpent)).toString()]);if(U(gu,O=>{const R=O.getParser();c(R.giftsAvailable)}),U(_E,O=>{const R=O.getParser();s(R.data)}),i.exports.useEffect(()=>{const O={linkReceived:R=>{const x=R.split("/");if(!(x.length<2))switch(x[1]){case"open":if(x.length>2)switch(x[2]){case"hccenter":r(!0);break}return}},eventUrlPrefix:"habboUI/"};return Ct(O),()=>_t(O)},[]),i.exports.useEffect(()=>{g(ub(C))},[C]),i.exports.useEffect(()=>{if(!e)return;const O=I();return()=>f(O)},[e,I,f]),i.exports.useEffect(()=>{D(new pu),D(new bE)},[]),!e)return null;const w=t(Go,{id:"popover-basic",children:l(Go.Body,{className:"text-black py-2 px-3",children:[t("h5",{children:m("hccenter.breakdown.title")}),t("div",{children:m("hccenter.breakdown.creditsspent",["credits"],[n==null?void 0:n.totalCreditsSpent.toString()])}),t("div",{children:m("hccenter.breakdown.paydayfactor.percent",["percent"],[((n==null?void 0:n.kickbackPercentage)*100).toString()])}),t("div",{children:m("hccenter.breakdown.streakbonus",["credits"],[n==null?void 0:n.creditRewardForStreakBonus.toString()])}),t("hr",{className:"w-100 text-black my-1"}),t("div",{children:m("hccenter.breakdown.total",["credits","actual"],[T(),(((n==null?void 0:n.kickbackPercentage)*(n==null?void 0:n.totalCreditsSpent)+(n==null?void 0:n.creditRewardForStreakBonus))*100/100).toString()])}),t("div",{className:"btn btn-link text-primary p-0",onClick:()=>Z("habbopages/"+K("hc.center")["payday.habbopage"]),children:m("hccenter.special.infolink")})]})});return l(se,{theme:"primary",className:"nitro-hc-center",children:[t(ne,{headerText:m("generic.hccenter"),onCloseClick:()=>r(!1)}),l(v,{position:"relative",className:"bg-muted p-2 hc-logo",children:[t(S,{gap:1,justifyContent:"end",className:"px-2",children:t(v,{children:t(L,{variant:"success",onClick:O=>Z("catalog/open/"+K("catalog.links")["hc.buy_hc"]),children:m(h===Mr.ACTIVE?"hccenter.btn.extend":"hccenter.btn.buy")})})}),t(M,{position:"absolute",className:"end-0 p-4 top-3 habbo-avatar",children:t(st,{figure:p,direction:4,scale:2})})]}),l(re,{children:[l(v,{gap:2,children:[t(je,{badgeCode:u,className:"align-self-center flex-shrink-0 me-1"}),l(S,{size:5,className:"streak-info",gap:0,children:[t(N,{small:!0,children:m("hccenter.status."+h)}),t(N,{small:!0,dangerouslySetInnerHTML:{__html:E()}})]})]}),K("hc.center")["payday.info"]&&l(v,{alignItems:"center",children:[l(S,{gap:1,className:"p-2 payday-special mb-1 ml-1",children:[t(N,{variant:"white",bold:!0,children:m("hccenter.special.title")}),t(N,{variant:"white",small:!0,children:m("hccenter.special.info")}),t(N,{variant:"white",small:!0,underline:!0,className:"pt-4 cursor-pointer",onClick:()=>Z("habbopages/"+K("hc.center")["payday.habbopage"]),children:m("hccenter.special.infolink")})]}),l(S,{gap:0,className:"payday flex-shrink-0 p-2",children:[t(N,{bold:!0,className:"ms-2",children:m("hccenter.special.time.title")}),l(v,{children:[t("i",{className:"clock me-2"}),t(N,{className:"align-self-center",children:b()})]}),h===Mr.ACTIVE&&l(S,{gap:1,className:"pe-3 pt-3",children:[t(N,{bold:!0,className:"ms-2",children:m("hccenter.special.amount.title")}),l(v,{children:[t(N,{className:"w-100 text-center ms-4n",children:T()}),t(ou,{trigger:["hover","focus"],placement:"left",overlay:w,children:t(N,{underline:!0,small:!0,variant:"primary",className:"pt-4",children:m("hccenter.breakdown.infolink")})})]})]})]})]}),K("hc.center")["gift.info"]&&l(v,{className:"hc-gift-special p-2",children:[l(S,{gap:1,children:[t(N,{variant:"white",bold:!0,children:m("hccenter.gift.title")}),t(N,{variant:"white",dangerouslySetInnerHTML:{__html:o>0?m("hccenter.unclaimedgifts",["unclaimedgifts"],[o.toString()]):m("hccenter.gift.info")}})]}),t(L,{className:"btn-lg align-self-center ms-auto",onClick:()=>Z("catalog/open/"+K("catalog.links")["hc.hc_gifts"]),children:m(h===Mr.ACTIVE?"hccenter.btn.gifts.redeem":"hccenter.btn.gifts.view")})]}),K("hc.center")["benefits.info"]&&l(S,{className:"benefits py-2",children:[t(N,{bold:!0,variant:"primary",children:m("hccenter.general.title")}),t(N,{small:!0,dangerouslySetInnerHTML:{__html:m("hccenter.general.info")}}),t(N,{small:!0,underline:!0,className:"cursor-pointer",variant:"primary",onClick:()=>Z("habbopages/"+K("hc.center")["benefits.habbopage"]),children:m("hccenter.general.infolink")})]})]})]})},lw=a=>{const[e,r]=i.exports.useState(""),{activeReport:n=null,setActiveReport:s=null}=Or(),o=()=>{e.length<15||s(u=>{const g=kt.REPORT_SUMMARY;return{...u,message:e,currentStep:g}})},c=()=>{s(u=>({...u,currentStep:u.currentStep-1}))};return l(V,{children:[l(S,{gap:1,children:[t(N,{fontSize:4,children:m("help.emergency.chat_report.subtitle")}),t(N,{children:m("help.cfh.input.text")})]}),t("textarea",{className:"form-control h-100",value:e,onChange:u=>r(u.target.value)}),l(v,{gap:2,justifyContent:"between",children:[t(L,{variant:"secondary",disabled:!(n.reportType===Ve.BULLY||n.reportType===Ve.EMERGENCY),onClick:c,children:m("generic.back")}),t(L,{disabled:e.length<15,onClick:o,children:m("help.emergency.main.submit.button")})]})]})},cw=a=>{const{setActiveReport:e=null}=Or(),r=()=>{e(n=>{const s=kt.SELECT_USER,o=Ve.BULLY;return{...n,currentStep:s,reportType:o}})};return l(V,{children:[l(S,{grow:!0,center:!0,gap:1,children:[t(N,{fontSize:3,children:m("help.main.frame.title")}),t(N,{children:m("help.main.self.description")})]}),l(S,{gap:1,children:[t(L,{onClick:r,children:m("help.main.bully.subtitle")}),t(L,{onClick:()=>St(new Bt(Bt.CREATE_HELP_REQUEST)),disabled:!K("guides.enabled"),children:m("help.main.help.title")}),t(L,{disabled:!0,children:m("help.main.self.tips.title")})]}),t(L,{variant:"link",textColor:"black",onClick:()=>D(new NE(!1)),children:m("help.main.my.sanction.status")})]})},uw=a=>{const{username:e="",onAction:r=null}=a,[n,s]=i.exports.useState(!1),o=()=>{n||(s(!0),D(new TE(e)))};return U(SE,c=>{const u=c.getParser();u&&u.webId===H().userId&&r("close")}),l("div",{className:"d-flex flex-column gap-4 h-100",children:[t("div",{className:"bg-muted rounded p-2 text-center",children:m("tutorial.name_change.info.confirm")}),l("div",{className:"d-flex flex-column align-items-center gap-1 h-100",children:[t("div",{children:m("tutorial.name_change.confirm")}),t("div",{className:"fw-bold",children:e})]}),l("div",{className:"d-flex gap-2",children:[t("button",{className:"btn btn-success w-100",disabled:n,onClick:o,children:m("generic.ok")}),t("button",{className:"btn btn-primary w-100",onClick:()=>r("close"),children:m("cancel")})]})]})},dw=a=>{const{onAction:e=null}=a;return l("div",{className:"d-flex flex-column gap-4 h-100",children:[t("div",{className:"bg-muted rounded p-2 text-center",children:m("tutorial.name_change.info.main")}),t("div",{className:"fw-bold d-flex align-items-center justify-content-center h-100 w-100",children:m("tutorial.name_change.current",["name"],[H().userName])}),l("div",{className:"d-flex gap-2",children:[t("button",{className:"btn btn-success w-100",onClick:()=>e("start"),children:m("tutorial.name_change.change")}),t("button",{className:"btn btn-primary w-100",onClick:()=>e("confirmation",H().userName),children:m("tutorial.name_change.keep")})]})]})},mw=0,gw=2,pw=3,hw=4,fw=5,Iw=6,Ew=a=>{const{onAction:e=null}=a,[r,n]=i.exports.useState(""),[s,o]=i.exports.useState(!1),[c,u]=i.exports.useState(!1),[g,p]=i.exports.useState(null),[d,h]=i.exports.useState([]),C=()=>{r!==""&&(o(!1),h([]),p(null),u(!0),D(new wE(r)))},I=f=>{o(!1),h([]),p(null),n(f)};return U(vE,f=>{u(!1);const _=f.getParser();if(_)switch(_.resultCode){case mw:o(!0);break;case gw:p("short");break;case pw:p("long");break;case hw:p("invalid");break;case fw:h(_.nameSuggestions),p("taken");break;case Iw:p("change_not_allowed")}}),l("div",{className:"d-flex flex-column gap-3 h-100",children:[t("div",{children:m("tutorial.name_change.info.select")}),l("div",{className:"d-flex gap-2",children:[t("input",{type:"text",className:"form-control form-control-sm",value:r,onChange:f=>I(f.target.value)}),t("button",{className:"btn btn-primary",disabled:r===""||c,onClick:C,children:m("tutorial.name_change.check")})]}),!g&&!s&&t("div",{className:"bg-muted rounded p-2 text-center",children:m("help.tutorial.name.info")}),g&&t("div",{className:"bg-danger rounded p-2 text-center text-white",children:m(`help.tutorial.name.${g}`,["name"],[r])}),s&&t("div",{className:"bg-success rounded p-2 text-center text-white",children:m("help.tutorial.name.available",["name"],[r])}),d&&t("div",{className:"d-flex flex-column gap-2",children:d.map((f,_)=>t("div",{className:"col bg-muted rounded p-1 cursor-pointer",onClick:()=>I(f),children:f},_))}),l("div",{className:"d-flex gap-2",children:[t("button",{className:"btn btn-success w-100",disabled:!s,onClick:()=>e("confirmation",r),children:m("tutorial.name_change.pick")}),t("button",{className:"btn btn-primary w-100",onClick:()=>e("close"),children:m("cancel")})]})]})},xo="INIT",Ba="INPUT",Va="CONFIRMATION",Cw=a=>{const[e,r]=i.exports.useState(!1),[n,s]=i.exports.useState(xo),[o,c]=i.exports.useState(""),u=(p,d)=>{switch(p){case"start":s(Ba);break;case"confirmation":c(d),s(Va);break;case"close":c(""),r(!1);break}},g=i.exports.useMemo(()=>{switch(n){case xo:return"tutorial.name_change.title.main";case Ba:return"tutorial.name_change.title.select";case Va:return"tutorial.name_change.title.confirm"}},[n]);return lt(Zo.INIT,p=>{s(xo),r(!0)}),e?l(se,{className:"nitro-change-username",theme:"primary",children:[t(ne,{headerText:m(g),onCloseClick:()=>u("close")}),l(re,{className:"text-black",children:[n===xo&&t(dw,{onAction:u}),n===Ba&&t(Ew,{onAction:u}),n===Va&&t(uw,{username:o,onAction:u})]})]}):null},_w=a=>{const{activeReport:e=null,setActiveReport:r=null}=Or(),n=()=>{const s=[];switch(e.reportType){case Ve.BULLY:case Ve.EMERGENCY:case Ve.ROOM:{const o=e.roomId<=0?e.reportedChats[0].roomId:e.roomId;e.reportedChats.forEach(c=>s.push(c.webId,c.message)),D(new kE(e.message,e.cfhTopic,e.reportedUserId,o,s));break}case Ve.IM:e.reportedChats.forEach(o=>s.push(o.webId,o.message)),D(new OE(e.message,e.cfhTopic,e.reportedUserId,s));break;case Ve.THREAD:D(new yE(e.groupId,e.threadId,e.cfhTopic,e.message));break;case Ve.MESSAGE:D(new xE(e.groupId,e.threadId,e.messageId,e.cfhTopic,e.message));break;case Ve.PHOTO:D(new RE(e.extraData,e.roomId,e.reportedUserId,e.cfhTopic,e.roomObjectId));break}r(null)};return l(V,{children:[l(S,{gap:1,children:[t(N,{fontSize:4,children:m("help.cfh.button.send")}),t(N,{children:m("help.main.summary")})]}),t(L,{variant:"success",onClick:n,children:m("guide.help.request.emergency.submit.button")})]})},bw=a=>{const{sanctionInfo:e=null,setSanctionInfo:r=null}=Or(),n=(s,o,c)=>{let u=`help.sanction.${s}`;switch(o){case"ALERT":u=u+".alert";break;case"MUTE":u=u+".mute";break;case"BAN_PERMANENT":u=u+".permban";break;default:if(u=u+".ban",c>24)return u=u+".days",m(u,["days"],[(c/24).toString()])}return m(u,["hours"],[c.toString()])};return e?l(se,{className:"nitro-help",theme:"primary",children:[t(ne,{headerText:m("help.sanction.info.title"),onCloseClick:()=>r(null)}),t(re,{className:"text-black",children:l(le,{children:[t(S,{center:!0,size:5,overflow:"hidden",children:t(M,{className:"index-image"})}),l(S,{justifyContent:"between",size:7,overflow:"hidden",children:[e.sanctionReason==="cfh.reason.EMPTY"?t("div",{className:"col-12 fw-bold",children:m("help.sanction.current.none")}):l(V,{children:[(e.probationHoursLeft>0||e.isSanctionActive)&&t("div",{className:"col-12 fw-bold",children:m("help.sanction.probation.reminder")}),l("div",{className:`col-12 fw-bold ${e.isSanctionNew?"text-danger":""}`,children:[m("help.sanction.last.sanction")," ",n("current",e.sanctionName,e.sanctionLengthHours)]}),l("div",{className:"col-12",children:[m("generic.start.time")," ",e.sanctionCreationTime]}),l("div",{className:"col-12",children:[m("generic.reason")," ",e.sanctionReason]}),l("div",{className:"col-12",children:[m("help.sanction.probation.days.left")," ",Math.trunc(e.probationHoursLeft/24)+1]})]}),e.hasCustomMute&&!e.isSanctionActive&&t("div",{className:"col-12 fw-bold",children:m("help.sanction.custom.mute")}),e.tradeLockExpiryTime&&e.tradeLockExpiryTime.length>0&&l("div",{className:"col-12 fw-bold",children:[m("trade.locked.until")," ",e.tradeLockExpiryTime]}),t("div",{className:"col-12",children:n("next",e.nextSanctionName,e.nextSanctionLengthHours)}),t(L,{variant:"success",onClick:s=>r(null),children:m("habbo.way.ok.button")})]})]})})]}):null},Nw=a=>{const[e,r]=i.exports.useState([]),{activeReport:n=null,setActiveReport:s=null}=Or(),{chatHistory:o=[],messengerHistory:c=[]}=ha(),u=i.exports.useMemo(()=>{switch(n.reportType){case Ve.BULLY:case Ve.EMERGENCY:return o.filter(h=>h.type===Rr.TYPE_CHAT&&h.webId===n.reportedUserId&&h.entityType===gt.USER);case Ve.IM:return c.filter(h=>h.webId===n.reportedUserId&&h.type===Rr.TYPE_IM)}return[]},[n,o,c]),g=h=>{r(C=>{const I=[...C],f=I.indexOf(h);return f>=0?I.splice(f,1):I.push(h),I})},p=()=>{!e||e.length<=0||s(h=>({...h,reportedChats:e,currentStep:kt.SELECT_TOPICS}))},d=()=>{s(h=>({...h,currentStep:h.currentStep-1}))};return l(V,{children:[l(S,{gap:1,children:[t(N,{fontSize:4,children:m("help.emergency.chat_report.subtitle")}),t(N,{children:m("help.emergency.chat_report.description")})]}),l(S,{gap:1,overflow:"hidden",children:[!u||!u.length&&t(N,{children:m("help.cfh.error.no_user_data")}),u.length>0&&t(Ue,{gap:1,columnCount:1,columnMinHeight:25,overflow:"auto",children:u.map((h,C)=>t(Re,{onClick:I=>g(h),itemActive:e.indexOf(h)>=0,children:t(N,{children:h.message})},h.id))})]}),l(v,{gap:2,justifyContent:"between",children:[t(L,{variant:"secondary",onClick:d,disabled:n.reportType===Ve.IM,children:m("generic.back")}),t(L,{disabled:e.length<=0,onClick:p,children:m("help.emergency.main.submit.button")})]})]})},Sw=a=>{const[e,r]=i.exports.useState(-1),{chatHistory:n=[]}=ha(),{activeReport:s=null,setActiveReport:o=null}=Or(),c=i.exports.useMemo(()=>{const d=new Map;return n.forEach(h=>{h.type===Rr.TYPE_CHAT&&h.entityType===gt.USER&&h.webId!==H().userId&&!d.has(h.webId)&&d.set(h.webId,{id:h.webId,username:h.name})}),Array.from(d.values())},[n]),u=d=>{d<=0||o(h=>({...h,reportedUserId:d,currentStep:kt.SELECT_CHATS}))},g=d=>{r(h=>d===h?-1:d)},p=()=>{o(d=>({...d,currentStep:d.currentStep-1}))};return l(V,{children:[l(S,{gap:1,children:[t(N,{fontSize:4,children:m("help.emergency.main.step.two.title")}),c.length>0&&t(N,{children:m("report.user.pick.user")})]}),l(S,{gap:1,overflow:"hidden",children:[!c.length&&t(N,{children:m("report.user.error.nolist")}),c.length>0&&t(Ue,{columnCount:1,columnMinHeight:25,gap:1,children:c.map((d,h)=>t(Re,{onClick:C=>g(d.id),itemActive:e===d.id,children:t("span",{dangerouslySetInnerHTML:{__html:d.username}})},d.id))})]}),l(v,{gap:2,justifyContent:"between",children:[t(L,{variant:"secondary",onClick:p,children:m("generic.back")}),t(L,{disabled:e<=0,onClick:()=>u(e),children:m("help.emergency.main.submit.button")})]})]})},Tw=a=>{const[e,r]=i.exports.useState(-1),[n,s]=i.exports.useState(-1),{setActiveReport:o=null}=Or(),{cfhCategories:c=[]}=ws(),u=()=>{e<0||n<0||o(p=>({...p,cfhCategory:e,cfhTopic:c[e].topics[n].id,currentStep:kt.INPUT_REPORT_MESSAGE}))},g=()=>{o(p=>({...p,currentStep:p.currentStep-1}))};return l(V,{children:[l(S,{gap:1,children:[t(N,{fontSize:4,children:m("help.emergency.chat_report.subtitle")}),t(N,{children:m("help.cfh.pick.topic")})]}),l(S,{gap:1,overflow:"auto",children:[e<0&&c.map((p,d)=>t(L,{variant:"danger",onClick:h=>r(d),children:m(`help.cfh.reason.${p.name}`)},d)),e>=0&&c[e].topics.map((p,d)=>t(L,{variant:"danger",onClick:h=>s(d),active:n===d,children:m(`help.cfh.topic.${p.id}`)},d))]}),l(v,{gap:2,justifyContent:"between",children:[t(L,{variant:"secondary",onClick:g,children:m("generic.back")}),t(L,{disabled:n<0,onClick:u,children:m("help.emergency.main.submit.button")})]})]})},vw=a=>{const[e,r]=i.exports.useState(!1),{activeReport:n=null,setActiveReport:s=null,report:o=null}=Or(),c=()=>{s(null),r(!1)};i.exports.useEffect(()=>{const g={linkReceived:p=>{const d=p.split("/");if(!(d.length<2))switch(d[1]){case"show":r(!0);return;case"hide":r(!1);return;case"toggle":r(h=>!h);return;case"tour":return;case"report":d.length>=5&&d[2]==="room"&&(parseInt(d[3]),unescape(d.splice(4).join("/")));return}},eventUrlPrefix:"help/"};return Ct(g),()=>_t(g)},[]),i.exports.useEffect(()=>{n&&r(!0)},[n]);const u=()=>{if(n)switch(n.currentStep){case kt.SELECT_USER:return t(Sw,{});case kt.SELECT_CHATS:return t(Nw,{});case kt.SELECT_TOPICS:return t(Tw,{});case kt.INPUT_REPORT_MESSAGE:return t(lw,{});case kt.REPORT_SUMMARY:return t(_w,{})}return t(cw,{})};return l(V,{children:[e&&l(se,{className:"nitro-help",theme:"primary",children:[t(ne,{headerText:m("help.button.cfh"),onCloseClick:c}),t(re,{className:"text-black",children:l(le,{children:[t(S,{center:!0,size:5,overflow:"hidden",children:t(M,{className:"index-image"})}),t(S,{justifyContent:"between",size:7,overflow:"hidden",children:t(u,{})})]})})]}),t(bw,{}),t(Cw,{})]})},ww=a=>{const[e,r]=i.exports.useState(null),[n,s]=i.exports.useState(null),[o,c]=i.exports.useState(null),[u,g]=i.exports.useState(null);return U(AE,p=>{const d=p.getParser();r(d.productType),s(d.productClassId),c(d.totalCoinsForBonus),g(d.coinsStillRequiredToBuy)}),i.exports.useEffect(()=>{D(new PE)},[]),e?l("div",{className:"bonus-rare widget d-flex",children:[e,l("div",{className:"bg-light-dark rounded overflow-hidden position-relative bonus-bar-container",children:[t("div",{className:"d-flex justify-content-center align-items-center w-100 h-100 position-absolute small top-0",children:o-u+"/"+o}),t("div",{className:"small bg-info rounded position-absolute top-0 h-100",style:{width:(o-u)/o*100+"%"}})]})]}):null},Rw=a=>{const{data:e=null,level:r=0}=a;return l("div",{className:"hof-user-container",children:[l("div",{className:"hof-tooltip",children:[l("div",{className:"hof-header",children:[r,". ",e.userName," ",t(hr,{userId:e.userId})]}),t("div",{className:"small text-center text-white",children:m("landing.view.competition.hof.points",["points"],[qo(e.currentScore).toString()])})]}),t(st,{figure:e.figure,direction:2})]})},xw=a=>{const{slot:e=-1,conf:r=null}=a,[n,s]=i.exports.useState(null);return U(DE,o=>{const c=o.getParser();s(c.data)}),i.exports.useEffect(()=>{const o=r?r.campaign:"";D(new ME(o))},[r]),n?t("div",{className:"hall-of-fame d-flex",children:n.hof&&n.hof.length>0&&n.hof.map((o,c)=>t(Rw,{data:o,level:c+1},c))}):null},yw=a=>{const[e,r]=i.exports.useState(null),[n,s]=i.exports.useState(0);return U(LE,o=>{const c=o.getParser();r(c.articles)}),i.exports.useEffect(()=>{D(new UE)},[]),e?l("div",{className:"promo-articles widget mb-2",children:[l("div",{className:"d-flex flex-row align-items-center w-100 mb-1",children:[t("small",{className:"flex-shrink-0 pe-1",children:m("landing.view.promo.article.header")}),t("hr",{className:"w-100 my-0"})]}),t("div",{className:"d-flex flex-row mb-1",children:e&&e.length>0&&e.map((o,c)=>t("div",{className:"promo-articles-bullet cursor-pointer "+(o===e[n]?"promo-articles-bullet-active":""),onClick:u=>s(c)},o.id))}),e&&e[n]&&l("div",{className:"promo-article d-flex flex-row row mx-0",children:[t("div",{className:"promo-article-image",style:{backgroundImage:`url(${e[n].imageUrl})`}}),l("div",{className:"col-3 d-flex flex-column h-100",children:[t("h3",{className:"my-0",children:e[n].title}),t("b",{children:e[n].bodyText}),t("button",{className:"btn btn-sm mt-auto btn-gainsboro",onClick:o=>vs(e[n].linkContent),children:e[n].buttonText})]})]})]}):null},Ow=a=>{const{conf:e=null}=a,r=n=>{const s=e[n];if(!s)return null;switch(n){case"image":return on.interpolate(s)}return s};return l("div",{className:"widgetcontainer",children:[t("div",{className:"widgetcontainer-image flex-shrink-0",style:{backgroundImage:`url(${r("image")})`}}),l("div",{className:"d-flex flex-column align-self-center",children:[t("h3",{className:"widgetcontainer-header ubuntu-bold",children:r("header")}),t("p",{className:"widgetcontainer-body",children:r("body")}),t("button",{className:"btn widgetcontainer-button ubuntu-bold",onClick:n=>Z("catalog/open/"+at.NEW_ADDITIONS),children:r("button")})]})]})},kw=a=>{switch(a.widgetType){case"promoarticle":return t(yw,{});case"achievementcompetition_hall_of_fame":return t(xw,{slot:a.slot,conf:a.widgetConf});case"bonusrare":return t(ww,{});case"widgetcontainer":return t(Ow,{conf:a.widgetConf});default:return null}},Un=a=>{const{widgetType:e=null,widgetSlot:r=0,widgetConf:n=null,className:s="",...o}=a;return t("div",{className:`widget-slot slot-${r} ${s||""}`,...o,children:t(kw,{widgetType:e,slot:r,widgetConf:n})})},Aw=a=>{const[e,r]=i.exports.useState(!0),{userFigure:n=null}=En();if(ze([Wt.CREATED,Wt.ENDED],h=>{switch(h.type){case Wt.CREATED:r(!1);return;case Wt.ENDED:r(h.openLandingView);return}}),!e)return null;const s=K("hotelview").images["background.colour"],o=on.interpolate(K("hotelview").images.background),c=on.interpolate(K("hotelview").images.sun),u=on.interpolate(K("hotelview").images.drape),g=on.interpolate(K("hotelview").images.left),p=on.interpolate(K("hotelview").images["right.repeat"]),d=on.interpolate(K("hotelview").images.right);return l("div",{className:"nitro-hotel-view",style:s&&s?{background:s}:{},children:[t("div",{className:"container h-100 py-3 overflow-hidden landing-widgets",children:l("div",{className:"row h-100",children:[l("div",{className:"col-9 h-100 d-flex flex-column",children:[t(Un,{widgetSlot:1,widgetType:K("hotelview").widgets["slot."+1+".widget"],widgetConf:K("hotelview").widgets["slot."+1+".conf"],className:"col-6"}),l("div",{className:"col-12 row mx-0",children:[t(Un,{widgetSlot:2,widgetType:K("hotelview").widgets["slot."+2+".widget"],widgetConf:K("hotelview").widgets["slot."+2+".conf"],className:"col-7"}),t(Un,{widgetSlot:3,widgetType:K("hotelview").widgets["slot."+3+".widget"],widgetConf:K("hotelview").widgets["slot."+3+".conf"],className:"col-5"}),t(Un,{widgetSlot:4,widgetType:K("hotelview").widgets["slot."+4+".widget"],widgetConf:K("hotelview").widgets["slot."+4+".conf"],className:"col-7"}),t(Un,{widgetSlot:5,widgetType:K("hotelview").widgets["slot."+5+".widget"],widgetConf:K("hotelview").widgets["slot."+5+".conf"],className:"col-5"})]}),t(Un,{widgetSlot:6,widgetType:K("hotelview").widgets["slot."+6+".widget"],widgetConf:K("hotelview").widgets["slot."+6+".conf"],className:"mt-auto"})]}),t("div",{className:"col-3 h-100",children:t(Un,{widgetSlot:7,widgetType:K("hotelview").widgets["slot."+7+".widget"],widgetConf:K("hotelview").widgets["slot."+7+".conf"]})})]})}),t("div",{className:"background position-absolute",style:o&&o.length?{backgroundImage:`url(${o})`}:{}}),t("div",{className:"sun position-absolute",style:c&&c.length?{backgroundImage:`url(${c})`}:{}}),t("div",{className:"drape position-absolute",style:u&&u.length?{backgroundImage:`url(${u})`}:{}}),t("div",{className:"left position-absolute",style:g&&g.length?{backgroundImage:`url(${g})`}:{}}),t("div",{className:"right-repeat position-absolute",style:p&&p.length?{backgroundImage:`url(${p})`}:{}}),t("div",{className:"right position-absolute",style:d&&d.length?{backgroundImage:`url(${d})`}:{}}),K("hotelview")["show.avatar"]&&t("div",{className:"avatar-image",children:t(st,{figure:n,direction:2})})]})},lc=a=>{const{badgeCode:e=null,children:r=null,...n}=a,{selectedBadgeCode:s=null,setSelectedBadgeCode:o=null,toggleBadge:c=null,getBadgeId:u=null}=Ea(),{isUnseen:g=null}=fr(),p=g(qe.BADGE,u(e));return l(Re,{itemActive:s===e,itemUnseen:p,onMouseDown:d=>o(e),onDoubleClick:d=>c(s),...n,children:[t(je,{badgeCode:e}),r]})},Pw=a=>{const[e,r]=i.exports.useState(!1),{badgeCodes:n=[],activeBadgeCodes:s=[],selectedBadgeCode:o=null,isWearingBadge:c=null,canWearBadges:u=null,toggleBadge:g=null,getBadgeId:p=null,activate:d=null,deactivate:h=null}=Ea(),{isUnseen:C=null,removeUnseen:I=null}=fr();return i.exports.useEffect(()=>{!o||!C(qe.BADGE,p(o))||I(qe.BADGE,p(o))},[o,C,I,p]),i.exports.useEffect(()=>{if(!e)return;const f=d();return()=>h(f)},[e,d,h]),i.exports.useEffect(()=>(r(!0),()=>r(!1)),[]),l(le,{children:[t(S,{size:7,overflow:"hidden",children:t(Ue,{columnCount:4,children:n&&n.length>0&&n.map((f,_)=>c(f)?null:t(lc,{badgeCode:f},_))})}),l(S,{className:"justify-content-between",size:5,overflow:"auto",children:[l(S,{overflow:"hidden",gap:2,children:[t(N,{children:m("inventory.badges.activebadges")}),t(Ue,{columnCount:3,children:s&&s.length>0&&s.map((f,_)=>t(lc,{badgeCode:f},_))})]}),!!o&&l(S,{grow:!0,justifyContent:"end",gap:2,children:[l(v,{alignItems:"center",gap:2,children:[t(je,{shrink:!0,badgeCode:o}),t(N,{children:Qs(o)})]}),t(L,{disabled:!c(o)&&!u(),onClick:f=>g(o),children:m(c(o)?"inventory.badges.clearbadge":"inventory.badges.wearbadge")})]})]})]})},Ji=a=>{const{title:e="",desc:r="",children:n=null,...s}=a;return l(le,{...s,children:[t(S,{center:!0,size:5,overflow:"hidden",children:t("div",{className:"empty-image"})}),l(S,{justifyContent:"center",size:7,overflow:"hidden",children:[t(N,{bold:!0,fontSize:5,overflow:"unset",truncate:!0,children:e}),t(N,{overflow:"auto",children:r})]}),n]})},Dw=a=>{const{botItem:e=null,children:r=null,...n}=a,[s,o]=i.exports.useState(!1),{selectedBot:c=null,setSelectedBot:u=null}=Gd(),{isUnseen:g=null}=fr(),p=g(qe.BOT,e.botData.id),d=h=>{switch(h.type){case xe.MOUSE_DOWN:u(e),o(!0);return;case xe.MOUSE_UP:o(!1);return;case xe.ROLL_OUT:if(!s||c!==e)return;gi(e);return;case"dblclick":gi(e);return}};return l(Re,{itemActive:c===e,itemUnseen:p,onMouseDown:d,onMouseUp:d,onMouseOut:d,onDoubleClick:d,...n,children:[t(st,{figure:e.botData.figure,direction:3,headOnly:!0}),r]})},Mw=a=>{const{roomSession:e=null,roomPreviewer:r=null}=a,[n,s]=i.exports.useState(!1),{botItems:o=[],selectedBot:c=null,activate:u=null,deactivate:g=null}=Gd(),{isUnseen:p=null,removeUnseen:d=null}=fr();return i.exports.useEffect(()=>{if(!c||!r)return;const h=c.botData,C=q();let I=C.getRoomInstanceVariable(C.activeRoomId,te.ROOM_WALL_TYPE),f=C.getRoomInstanceVariable(C.activeRoomId,te.ROOM_FLOOR_TYPE),_=C.getRoomInstanceVariable(C.activeRoomId,te.ROOM_LANDSCAPE_TYPE);I=I&&I.length?I:"101",f=f&&f.length?f:"101",_=_&&_.length?_:"1.1",r.reset(!1),r.updateRoomWallsAndFloorVisibility(!0,!0),r.updateObjectRoom(f,I,_),r.addAvatarIntoRoom(h.figure,0)},[r,c]),i.exports.useEffect(()=>{!c||!p(qe.BOT,c.botData.id)||d(qe.BOT,c.botData.id)},[c,p,d]),i.exports.useEffect(()=>{if(!n)return;const h=u();return()=>g(h)},[n,u,g]),i.exports.useEffect(()=>(s(!0),()=>s(!1)),[]),!o||!o.length?t(Ji,{title:m("inventory.empty.bots.title"),desc:m("inventory.empty.bots.desc")}):l(le,{children:[t(S,{size:7,overflow:"hidden",children:t(Ue,{columnCount:5,children:o&&o.length>0&&o.map(h=>t(Dw,{botItem:h},h.botData.id))})}),l(S,{size:5,overflow:"auto",children:[t(S,{overflow:"hidden",position:"relative",children:t(ua,{roomPreviewer:r,height:140})}),c&&l(S,{grow:!0,justifyContent:"between",gap:2,children:[t(N,{grow:!0,truncate:!0,children:c.botData.name}),!!e&&t(L,{onClick:h=>gi(c),children:m("inventory.furni.placetoroom")})]})]})]})},Lw=a=>{const{groupItem:e=null,...r}=a,[n,s]=i.exports.useState(!1),{selectedItem:o=null,setSelectedItem:c=null}=Xn(),u=p=>{switch(p.type){case xe.MOUSE_DOWN:c(e),s(!0);return;case xe.MOUSE_UP:s(!1);return;case xe.ROLL_OUT:if(!n||e!==o)return;Is(e);return;case"dblclick":Is(e);return}},g=e.getUnlockedCount();return t(Re,{className:g?"":"opacity-0-5 ",itemImage:e.iconUrl,itemCount:e.getUnlockedCount(),itemActive:e===o,itemUniqueNumber:e.stuffData.uniqueNumber,itemUnseen:e.hasUnseenItems,onMouseDown:u,onMouseUp:u,onMouseOut:u,onDoubleClick:u,...r})},im=a=>{const{groupItems:e=[],setGroupItems:r=null}=a,[n,s]=i.exports.useState("");return i.exports.useEffect(()=>{let o=[...e];if(n&&n.length){const c=n.toLocaleLowerCase();o=e.filter(u=>c&&c.length&&u.name.toLocaleLowerCase().includes(c)?u:null)}r(o)},[e,r,n]),l(v,{gap:1,children:[t("input",{type:"text",className:"form-control form-control-sm",placeholder:m("generic.search"),value:n,onChange:o=>s(o.target.value)}),t(L,{variant:"primary",children:t(xm,{className:"fa-icon"})})]})},Uw=a=>{const e=a.getLastItem();if(!e||!e.sellable)return!1;St(new qi(e))},Fw=a=>{const{roomSession:e=null,roomPreviewer:r=null}=a,[n,s]=i.exports.useState(!1),[o,c]=i.exports.useState([]),{groupItems:u=[],selectedItem:g=null,activate:p=null,deactivate:d=null}=Xn(),{resetItems:h=null}=fr();return i.exports.useEffect(()=>{if(!g||!r)return;const C=g.getLastItem();if(!C)return;const I=q();let f=I.getRoomInstanceVariable(I.activeRoomId,te.ROOM_WALL_TYPE),_=I.getRoomInstanceVariable(I.activeRoomId,te.ROOM_FLOOR_TYPE),E=I.getRoomInstanceVariable(I.activeRoomId,te.ROOM_LANDSCAPE_TYPE);if(f=f&&f.length?f:"101",_=_&&_.length?_:"101",E=E&&E.length?E:"1.1",r.reset(!1),r.updateObjectRoom(_,f,E),r.updateRoomWallsAndFloorVisibility(!0,!0),C.category===ee.WALL_PAPER||C.category===ee.FLOOR||C.category===ee.LANDSCAPE){if(_=C.category===ee.FLOOR?g.stuffData.getLegacyString():_,f=C.category===ee.WALL_PAPER?g.stuffData.getLegacyString():f,E=C.category===ee.LANDSCAPE?g.stuffData.getLegacyString():E,r.updateObjectRoom(_,f,E),C.category===ee.LANDSCAPE){const b=H().getWallItemDataByName("window_double_default");b&&r.addWallItemIntoRoom(b.id,new Rt(90,0,0),b.customParams)}}else g.isWallItem?r.addWallItemIntoRoom(g.type,new Rt(90),C.stuffData.getLegacyString()):r.addFurnitureIntoRoom(g.type,new Rt(90),g.stuffData,C.extra.toString())},[r,g]),i.exports.useEffect(()=>{!g||!g.hasUnseenItems||(h(qe.FURNI,g.items.map(C=>C.id)),g.hasUnseenItems=!1)},[g,h]),i.exports.useEffect(()=>{if(!n)return;const C=p();return()=>d(C)},[n,p,d]),i.exports.useEffect(()=>(s(!0),()=>s(!1)),[]),!u||!u.length?t(Ji,{title:m("inventory.empty.title"),desc:m("inventory.empty.desc")}):l(le,{children:[l(S,{size:7,overflow:"hidden",children:[t(im,{groupItems:u,setGroupItems:c}),t(Ue,{columnCount:5,children:o&&o.length>0&&o.map((C,I)=>t(Lw,{groupItem:C},I))})]}),l(S,{size:5,overflow:"auto",children:[l(S,{overflow:"hidden",position:"relative",children:[t(ua,{roomPreviewer:r,height:140}),g&&g.stuffData.isUnique&&t(Td,{className:"top-2 end-2",position:"absolute",uniqueNumber:g.stuffData.uniqueNumber,uniqueSeries:g.stuffData.uniqueSeries}),g&&g.stuffData.rarityLevel>-1&&t(wd,{className:"top-2 end-2",position:"absolute",level:g.stuffData.rarityLevel})]}),g&&l(S,{grow:!0,justifyContent:"between",gap:2,children:[t(N,{grow:!0,truncate:!0,children:g.name}),l(S,{gap:1,children:[!!e&&t(L,{onClick:C=>Is(g),children:m("inventory.furni.placetoroom")}),g&&g.isSellable&&t(L,{onClick:C=>Uw(g),children:m("inventory.marketplace.sell")})]})]})]})]})},Ha=9,Gw=a=>{const{cancelTrade:e=null}=a,[r,n]=i.exports.useState(null),[s,o]=i.exports.useState(null),[c,u]=i.exports.useState(null),[g,p]=i.exports.useState(null),[d,h]=i.exports.useState(3),[C,I]=i.exports.useState(1),{ownUser:f=null,otherUser:_=null,groupItems:E=[],tradeState:b=rt.TRADING_STATE_READY,progressTrade:T=null,removeItem:w=null,setTradeState:O=null}=Vd(),{simpleAlert:R=null}=Xe(),x=(P,G,B,Y,X)=>{if(!f||f.accepts||!f.userItems)return!1;if(f.userItems.length<Ha)return!0;if(!Y)return!1;let z=G.toString();return B===ee.POSTER?z=z+"poster"+X.getLegacyString():B===ee.GUILD_FURNI?z=j_(G,X):z=(P?"I":"S")+z,!!f.userItems.getValue(z)},F=P=>{if(!r)return;const G=r.getTradeItems(P);if(!G||!G.length)return;let B=null;const Y=[];for(const z of G)Y.push(z.id),B||(B=z);if(f.userItems.length+Y.length<=1500)if(!B.isGroupable&&Y.length)D(new Cl(Y.pop()));else{const z=[];for(const Ee of Y)x(B.isWallItem,B.type,B.category,B.isGroupable,B.stuffData)&&z.push(Ee);z.length&&(z.length===1?D(new Cl(z.pop())):D(new FE(...z)))}else R(m("trading.items.too_many_items.desc"),ue.DEFAULT,null,null,m("trading.items.too_many_items.title"))},A=P=>P?t(Zc,{className:"mt-auto pb-5 text-success fa-icon"}):t(ym,{className:"mt-auto pb-5 text-danger fa-icon"}),k=(P,G)=>{(isNaN(Number(P))||Number(P)<0||!P)&&(P=1),P=Math.max(Number(P),1),P=Math.min(Number(P),G),P!==C&&I(P)},y=P=>{k(C,P),F(C)};return i.exports.useEffect(()=>{I(1)},[r]),i.exports.useEffect(()=>{if(b!==rt.TRADING_STATE_COUNTDOWN)return;h(3);const P=setInterval(()=>{h(G=>{const B=G-1;return B===0&&clearInterval(P),B})},1e3);return()=>clearInterval(P)},[b,O]),i.exports.useEffect(()=>{d===0&&O(rt.TRADING_STATE_CONFIRMING)},[d,O]),b===rt.TRADING_STATE_READY||!f||!_?null:l(S,{children:[t(v,{children:l(S,{size:4,fullWidth:!0,overflow:"hidden",className:"trading-inventory",children:[t(im,{groupItems:E,setGroupItems:p}),l(v,{column:!0,fullHeight:!0,fullWidth:!0,justifyContent:"between",overflow:"hidden",gap:2,children:[t(Ue,{columnCount:3,children:g&&g.length>0&&g.map((P,G)=>{const B=P.getUnlockedCount();return t(Re,{className:B?"":"opacity-0-5 ",itemImage:P.iconUrl,itemCount:B,itemActive:r===P,itemUniqueNumber:P.stuffData.uniqueNumber,onClick:Y=>B&&n(P),onDoubleClick:Y=>F(1),children:B>0&&r===P&&t(L,{position:"absolute",variant:"success",className:"trade-button bottom-1 end-1",onClick:Y=>F(1),children:t(Yr,{className:"fa-icon"})})},G)})}),l(S,{gap:1,alignItems:"end",children:[l(le,{overflow:"hidden",children:[t(S,{size:6,overflow:"hidden",children:t("input",{type:"number",className:"form-control form-control-sm quantity-input",placeholder:m("catalog.bundlewidget.spinner.select.amount"),disabled:!r,value:C,onChange:P=>I(P.target.valueAsNumber)})}),t(S,{size:6,overflow:"hidden",children:t(L,{variant:"secondary",disabled:!r,onClick:P=>y(r.getUnlockedCount()),children:m("inventory.trading.areoffering")})})]}),t(M,{fullWidth:!0,className:"badge bg-muted",children:r?r.name:m("catalog_selectproduct")})]})]})]})}),l(S,{fullWidth:!0,size:8,overflow:"hidden",className:"trade-bg p-2",children:[l(le,{overflow:"hidden",children:[l(S,{size:4,overflow:"hidden",children:[t(v,{justifyContent:"between",alignItems:"center",children:l(N,{children:[m("inventory.trading.you")," ",m("inventory.trading.areoffering"),":"]})}),t(Ue,{columnCount:3,children:Array.from(Array(Ha),(P,G)=>{const B=f.userItems.getWithIndex(G)||null;return B?t(Re,{itemActive:s===B,itemImage:B.iconUrl,itemCount:B.getTotalCount(),itemUniqueNumber:B.stuffData.uniqueNumber,onClick:Y=>o(B),onDoubleClick:Y=>w(B),children:s===B&&t(L,{position:"absolute",variant:"danger",className:"trade-button bottom-1 start-1",onClick:Y=>w(B),children:t(zr,{className:"fa-icon"})})},G):t(Re,{},G)})}),t(M,{fullWidth:!0,className:"badge bg-muted",children:s?s.name:m("catalog_selectproduct")})]}),A(f.accepts),l(S,{size:4,overflow:"hidden",children:[t(v,{justifyContent:"between",alignItems:"center",children:l(N,{children:[_.userName," ",m("inventory.trading.isoffering"),":"]})}),t(Ue,{columnCount:3,children:Array.from(Array(Ha),(P,G)=>{const B=_.userItems.getWithIndex(G)||null;return B?t(Re,{itemActive:c===B,itemImage:B.iconUrl,itemCount:B.getTotalCount(),itemUniqueNumber:B.stuffData.uniqueNumber,onClick:Y=>u(B)},G):t(Re,{},G)})}),t(M,{fullWidth:!0,className:"badge bg-muted w-100",children:c?c.name:m("catalog_selectproduct")})]}),A(_.accepts)]}),l(v,{grow:!0,justifyContent:"between",children:[t(L,{variant:"danger",onClick:e,children:m("generic.cancel")}),b===rt.TRADING_STATE_READY&&t(L,{variant:"secondary",disabled:!f.itemCount&&!_.itemCount,onClick:T,children:m("inventory.trading.accept")}),b===rt.TRADING_STATE_RUNNING&&t(L,{variant:"secondary",disabled:!f.itemCount&&!_.itemCount,onClick:T,children:m(f.accepts?"inventory.trading.modify":"inventory.trading.accept")}),b===rt.TRADING_STATE_COUNTDOWN&&t(L,{variant:"secondary",disabled:!0,children:m("inventory.trading.countdown",["counter"],[d.toString()])}),b===rt.TRADING_STATE_CONFIRMING&&t(L,{variant:"secondary",onClick:T,children:m("inventory.trading.button.restore")}),b===rt.TRADING_STATE_CONFIRMED&&t(L,{variant:"secondary",children:m("inventory.trading.info.waiting")})]})]})]})},Bw=a=>{const{petItem:e=null,children:r=null,...n}=a,[s,o]=i.exports.useState(!1),{selectedPet:c=null,setSelectedPet:u=null}=Bd(),{isUnseen:g}=fr(),p=g(qe.PET,e.petData.id),d=h=>{switch(h.type){case xe.MOUSE_DOWN:u(e),o(!0);return;case xe.MOUSE_UP:o(!1);return;case xe.ROLL_OUT:if(!s||e!==c)return;mi(e);return;case"dblclick":mi(e);return}};return l(Re,{itemActive:e===c,itemUnseen:p,onMouseDown:d,onMouseUp:d,onMouseOut:d,onDoubleClick:d,...n,children:[t(dn,{figure:e.petData.figureData.figuredata,direction:3,headOnly:!0}),r]})},Vw=a=>{const{roomSession:e=null,roomPreviewer:r=null}=a,[n,s]=i.exports.useState(!1),{petItems:o=null,selectedPet:c=null,activate:u=null,deactivate:g=null}=Bd(),{isUnseen:p=null,removeUnseen:d=null}=fr();return i.exports.useEffect(()=>{if(!c||!r)return;const h=c.petData,C=q();let I=C.getRoomInstanceVariable(C.activeRoomId,te.ROOM_WALL_TYPE),f=C.getRoomInstanceVariable(C.activeRoomId,te.ROOM_FLOOR_TYPE),_=C.getRoomInstanceVariable(C.activeRoomId,te.ROOM_LANDSCAPE_TYPE);I=I&&I.length?I:"101",f=f&&f.length?f:"101",_=_&&_.length?_:"1.1",r.reset(!1),r.updateRoomWallsAndFloorVisibility(!0,!0),r.updateObjectRoom(f,I,_),r.addPetIntoRoom(h.figureString)},[r,c]),i.exports.useEffect(()=>{!c||!p(qe.PET,c.petData.id)||d(qe.PET,c.petData.id)},[c,p,d]),i.exports.useEffect(()=>{if(!n)return;const h=u();return()=>g(h)},[n,u,g]),i.exports.useEffect(()=>(s(!0),()=>s(!1)),[]),!o||!o.length?t(Ji,{title:m("inventory.empty.pets.title"),desc:m("inventory.empty.pets.desc")}):l(le,{children:[t(S,{size:7,overflow:"hidden",children:t(Ue,{columnCount:5,children:o&&o.length>0&&o.map(h=>t(Bw,{petItem:h},h.petData.id))})}),l(S,{size:5,overflow:"auto",children:[t(S,{overflow:"hidden",position:"relative",children:t(ua,{roomPreviewer:r,height:140})}),c&&c.petData&&l(S,{grow:!0,justifyContent:"between",gap:2,children:[t(N,{grow:!0,truncate:!0,children:c.petData.name}),!!e&&t(L,{onClick:h=>mi(c),children:m("inventory.furni.placetoroom")})]})]})]})},lm="inventory.furni",cm="inventory.bots",um="inventory.furni.tab.pets",dm="inventory.badges",cc=[lm,cm,um,dm],Hw=[qe.FURNI,qe.BOT,qe.PET,qe.BADGE],Ww=a=>{const[e,r]=i.exports.useState(!1),[n,s]=i.exports.useState(cc[0]),[o,c]=i.exports.useState(null),[u,g]=i.exports.useState(null),{isTrading:p=!1,stopTrading:d=null}=Vd(),{getCount:h=null,resetCategory:C=null}=fr(),I=()=>{p&&d(),r(!1)};return Se(ht.PLACED,f=>{B_()&&(Zs(!1),f.placedInRoom||r(!0))}),ze([Wt.CREATED,Wt.ENDED],f=>{switch(f.type){case Wt.CREATED:c(f.session);return;case Wt.ENDED:c(null),r(!1);return}}),U(GE,f=>{const _=f.getParser();for(const E of _.data)qu().setBadgePointLimit(E.badgeId,E.limit)}),i.exports.useEffect(()=>{const f={linkReceived:_=>{const E=_.split("/");if(!(E.length<2))switch(E[1]){case"show":r(!0);return;case"hide":r(!1);return;case"toggle":r(b=>!b);return}},eventUrlPrefix:"inventory/"};return Ct(f),()=>_t(f)},[]),i.exports.useEffect(()=>(g(new Wo(q(),++Wo.PREVIEW_COUNTER)),()=>{g(f=>(f.dispose(),null))}),[]),i.exports.useEffect(()=>{!e&&p&&r(!0)},[e,p]),e?l(se,{uniqueKey:"inventory",className:p?"nitro-inventory trading":"nitro-inventory",theme:p?"primary":"",children:[t(ne,{headerText:m("inventory.title"),onCloseClick:I}),!p&&l(V,{children:[t(fn,{children:cc.map((f,_)=>t(Zr,{isActive:n===f,onClick:E=>s(f),count:h(Hw[_]),children:m(f)},_))}),l(re,{children:[n===lm&&t(Fw,{roomSession:o,roomPreviewer:u}),n===cm&&t(Mw,{roomSession:o,roomPreviewer:u}),n===um&&t(Vw,{roomSession:o,roomPreviewer:u}),n===dm&&t(Pw,{})]})]}),p&&t(re,{children:t(Gw,{cancelTrade:I})})]}):null},Zi=a=>{const{records:e=null}=a,{openRoomInfo:r=null}=ws(),n=i.exports.useMemo(()=>{const o=[];return e.forEach(c=>{o.push({isRoomInfo:!0,roomId:c.roomId,roomName:c.roomName}),c.chatlog.forEach(u=>{o.push({timestamp:u.timestamp,habboId:u.userId,username:u.userName,hasHighlighting:u.hasHighlighting,message:u.message,isRoomInfo:!1})})}),o},[e]),s=o=>l(v,{gap:2,alignItems:"center",justifyContent:"between",className:"bg-muted p-1",children:[l(v,{gap:1,children:[t(N,{gfbold:!0,children:"Room name:"}),t(N,{children:o.roomName})]}),l(v,{gap:1,children:[t(L,{onClick:c=>Kt(o.roomId),children:"Visit Room"}),t(L,{onClick:c=>r(o.roomId),children:"Room Tools"})]})]});return t(V,{children:l(S,{fit:!0,gap:0,overflow:"hidden",children:[t(S,{gap:2,children:l(le,{gap:1,className:"text-black pb-1",children:[t(M,{className:"g-col-1",children:"Time"}),t(M,{className:"g-col-3",children:"User"}),t(M,{className:"g-col-7",children:"Message"})]})}),e&&e.length>0&&t(ma,{rows:n,rowRender:o=>l(V,{children:[o.isRoomInfo&&t(s,{roomId:o.roomId,roomName:o.roomName}),!o.isRoomInfo&&l(le,{fullHeight:!1,gap:1,alignItems:"center",className:"log-entry py-1 border-bottom",children:[t(N,{className:"g-col-2",children:o.timestamp}),t(N,{className:"g-col-3",bold:!0,underline:!0,pointer:!0,onClick:c=>Z(`mod-tools/open-user-info/${o.habboId}`),children:o.username}),t(N,{textBreak:!0,wrap:!0,className:"g-col-7",children:o.message})]})]})})]})})},jw=a=>{const{roomId:e=null,onCloseClick:r=null}=a,[n,s]=i.exports.useState(null);return U(BE,o=>{const c=o.getParser();!c||c.data.roomId!==e||s(c.data)}),i.exports.useEffect(()=>{D(new VE(e))},[e]),n?l(se,{className:"nitro-mod-tools-chatlog",theme:"modtool-windows",windowPosition:At.TOP_CENTER,children:[t(ne,{headerText:`Room Chatlog ${n.roomName}`,onCloseClick:r}),t(re,{className:"text-black h-100",overflow:"hidden",children:t(S,{className:"mod-content p-2",children:n&&t(Zi,{records:[n]})})})]}):null},qw=a=>{const{roomId:e=null,onCloseClick:r=null}=a,[n,s]=i.exports.useState(!1),[o,c]=i.exports.useState(null),[u,g]=i.exports.useState(null),[p,d]=i.exports.useState(null),[h,C]=i.exports.useState(null),[I,f]=i.exports.useState(null),[_,E]=i.exports.useState(!1),[b,T]=i.exports.useState(0),[w,O]=i.exports.useState(!1),[R,x]=i.exports.useState(!1),[F,A]=i.exports.useState(!1),[k,y]=i.exports.useState(""),P=(G,B)=>{if(G)switch(G){case"alert_only":if(k.trim().length===0)return;D(new co(co.ACTION_ALERT,k,"")),D(new _l(e,R?1:0,F?1:0,w?1:0));return;case"send_message":if(k.trim().length===0)return;D(new co(co.ACTION_MESSAGE,k,"")),D(new _l(e,R?1:0,F?1:0,w?1:0));return}};return U(HE,G=>{const B=G.getParser();!B||B.data.flatId!==e||(c(B.data.flatId),g(B.data.room.name),C(B.data.ownerId),f(B.data.ownerName),E(B.data.ownerInRoom),T(B.data.userCount))}),i.exports.useEffect(()=>{n||(D(new WE(e)),s(!0))},[e,n,s]),l(se,{className:"nitro-mod-tools-room",theme:"modtool-windows",windowPosition:At.TOP_CENTER,children:[t(ne,{headerText:"Room Info",onCloseClick:G=>r()}),l(re,{className:"text-black",children:[l(S,{gap:0,className:"mod-content p-2",children:[t(N,{gfbold:!0,children:u}),t(N,{children:p})]}),l(v,{gap:2,className:"mod-content p-2",children:[l(S,{justifyContent:"center",grow:!0,gap:1,children:[l(v,{alignItems:"center",gap:1,children:[t(N,{gfbold:!0,className:"",children:"Room Owner:"}),t(N,{underline:!0,pointer:!0,truncate:!0,children:I})]}),l(v,{alignItems:"center",gap:2,children:[t(N,{gfbold:!0,className:"",children:"Users in room:"}),t(N,{children:b})]}),l(v,{alignItems:"center",gap:2,children:[t(N,{gfbold:!0,className:"",children:"Owner in room:"}),t(N,{children:_?"Yes":"No"})]})]}),l(S,{gap:1,children:[t(L,{onClick:G=>Kt(e),children:"Visit Room"}),t(L,{onClick:G=>Z(`mod-tools/open-room-chatlog/${e}`),children:"Chatlog"})]})]}),l(S,{className:"mod-content p-2",gap:1,children:[l(v,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"checkbox",checked:w,onChange:G=>O(G.target.checked)}),t(N,{children:"Kick everyone out"})]}),l(v,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"checkbox",checked:R,onChange:G=>x(G.target.checked)}),t(N,{children:"Enable the doorbell"})]}),l(v,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"checkbox",checked:F,onChange:G=>A(G.target.checked)}),t(N,{children:"Change room name"})]})]}),t("textarea",{className:"form-control message-input p-1",placeholder:"Type a mandatory message to the users in this text box...",value:k,onChange:G=>y(G.target.value)}),l(v,{justifyContent:"between",children:[t(L,{variant:"danger",onClick:G=>P("send_message"),children:"Send Caution"}),t(L,{onClick:G=>P("alert_only"),children:"Send Alert only"})]})]})]})},zw=a=>{const{onCloseClick:e=null,issueId:r=null}=a,[n,s]=i.exports.useState(null);return U(jE,o=>{const c=o.getParser();!c||c.data.issueId!==r||s(c.data)}),i.exports.useEffect(()=>{D(new qE(r))},[r]),l(se,{className:"nitro-mod-tools-chatlog",theme:"modtool-windows",children:[t(ne,{headerText:"Issue Chatlog",onCloseClick:e}),t(re,{className:"text-black",children:n&&t(Zi,{records:[n.chatRecord]})})]})},Yw=a=>{const{issueId:e=null,onIssueInfoClosed:r=null}=a,[n,s]=i.exports.useState(!1),{tickets:o=[],openUserInfo:c=null}=ws(),u=o.find(d=>d.issueId===e),g=d=>{D(new Mu([d])),r(d)},p=d=>{D(new uo([e],d)),r(e)};return l(V,{children:[l(se,{className:"nitro-mod-tools-handle-issue",theme:"modtool-windows",children:[t(ne,{headerText:"Resolving issue "+e,onCloseClick:()=>r(e)}),l(re,{className:"text-black",children:[t(N,{fontSize:4,children:"Issue Information"}),l(le,{overflow:"auto",children:[t(S,{size:8,children:t("table",{className:"table table-striped table-sm table-text-small text-black m-0",children:l("tbody",{children:[l("tr",{children:[t("th",{children:"Source"}),t("td",{children:mb(u.categoryId)})]}),l("tr",{children:[t("th",{children:"Category"}),t("td",{className:"text-break",children:m("help.cfh.topic."+u.reportedCategoryId)})]}),l("tr",{children:[t("th",{children:"Description"}),t("td",{className:"text-break",children:u.message})]}),l("tr",{children:[t("th",{children:"Caller"}),t("td",{children:t(N,{gfbold:!0,underline:!0,pointer:!0,onClick:d=>c(u.reporterUserId),children:u.reporterUserName})})]}),l("tr",{children:[t("th",{children:"Reported User"}),t("td",{children:t(N,{gfbold:!0,underline:!0,pointer:!0,onClick:d=>c(u.reportedUserId),children:u.reportedUserName})})]})]})})}),l(S,{size:4,gap:1,children:[t(L,{variant:"secondary",onClick:()=>s(!n),children:"Chatlog"}),t(L,{onClick:d=>p(uo.RESOLUTION_USELESS),children:"Close as useless"}),t(L,{variant:"danger",onClick:d=>p(uo.RESOLUTION_ABUSIVE),children:"Close as abusive"}),t(L,{variant:"success",onClick:d=>p(uo.RESOLUTION_RESOLVED),children:"Close as resolved"}),t(L,{variant:"secondary",onClick:d=>g(e),children:"Release"})]})]})]})]}),n&&t(zw,{issueId:e,onCloseClick:()=>s(!1)})]})},$w=a=>{const{myIssues:e=null,handleIssue:r=null}=a;return l(S,{gap:0,overflow:"hidden",children:[t(S,{gap:2,children:l(le,{gap:1,className:"text-black fw-bold border-bottom pb-1",children:[t(M,{className:"g-col-2",children:"Type"}),t(M,{className:"g-col-3",children:"Room/Player"}),t(M,{className:"g-col-3",children:"Opened"}),t(M,{className:"g-col-2"}),t(M,{className:"g-col-2"})]})}),t(S,{overflow:"auto",className:"striped-children",gap:0,children:e&&e.length>0&&e.map(n=>l(le,{gap:1,alignItems:"center",className:"text-black py-1 border-bottom",children:[t(M,{className:"g-col-2",children:n.categoryId}),t(M,{className:"g-col-3",children:n.reportedUserName}),t(M,{className:"g-col-3",children:new Date(Date.now()-n.issueAgeInMilliseconds).toLocaleTimeString()}),t(M,{className:"g-col-2",children:t(L,{variant:"primary",onClick:s=>r(n.issueId),children:"Handle"})}),t(M,{className:"g-col-2",children:t(L,{variant:"danger",onClick:s=>D(new Mu([n.issueId])),children:"Release"})})]},n.issueId))})]})},Kw=a=>{const{openIssues:e=null}=a;return l(S,{gap:0,overflow:"hidden",children:[t(S,{gap:2,children:l(le,{gap:1,className:"text-black fw-bold border-bottom pb-1",children:[t(M,{className:"g-col-2",children:"Type"}),t(M,{className:"g-col-3",children:"Room/Player"}),t(M,{className:"g-col-4",children:"Opened"}),t(M,{className:"g-col-3"})]})}),t(S,{overflow:"auto",className:"striped-children",gap:0,children:e&&e.length>0&&e.map(r=>l(le,{gap:1,alignItems:"center",className:"text-black py-1 border-bottom",children:[t(M,{className:"g-col-2",children:r.categoryId}),t(M,{className:"g-col-3",children:r.reportedUserName}),t(M,{className:"g-col-4",children:new Date(Date.now()-r.issueAgeInMilliseconds).toLocaleTimeString()}),t(M,{className:"g-col-3",children:t(L,{variant:"success",onClick:n=>D(new zE([r.issueId],!1,0,"pick issue button")),children:"Pick Issue"})})]},r.issueId))})]})},Xw=a=>{const{pickedIssues:e=null}=a;return l(S,{gap:0,overflow:"hidden",children:[t(S,{gap:2,children:l(le,{gap:1,className:"text-black fw-bold border-bottom pb-1",children:[t(M,{className:"g-col-2",children:"Type"}),t(M,{className:"g-col-3",children:"Room/Player"}),t(M,{className:"g-col-4",children:"Opened"}),t(M,{className:"g-col-3",children:"Picker"})]})}),t(S,{overflow:"auto",className:"striped-children",gap:0,children:e&&e.length>0&&e.map(r=>l(le,{gap:1,alignItems:"center",className:"text-black py-1 border-bottom",children:[t(M,{className:"g-col-2",children:r.categoryId}),t(M,{className:"g-col-3",children:r.reportedUserName}),t(M,{className:"g-col-4",children:new Date(Date.now()-r.issueAgeInMilliseconds).toLocaleTimeString()}),t(M,{className:"g-col-3",children:r.pickerUserName})]},r.issueId))})]})},Qw=["Open Issues","My Issues","Picked Issues"],Jw=a=>{const{onCloseClick:e=null}=a,[r,n]=i.exports.useState(0),[s,o]=i.exports.useState([]),{tickets:c=[]}=ws(),u=c.filter(I=>I.state===ka.STATE_OPEN),g=c.filter(I=>I.state===ka.STATE_PICKED&&I.pickerUserId===H().userId),p=c.filter(I=>I.state===ka.STATE_PICKED),d=I=>{o(f=>{const _=[...f],E=_.indexOf(I);return E>=0&&_.splice(E,1),_})},h=I=>{o(f=>{const _=[...f],E=_.indexOf(I);return E===-1?_.push(I):_.splice(E,1),_})},C=()=>{switch(r){case 0:return t(Kw,{openIssues:u});case 1:return t($w,{myIssues:g,handleIssue:h});case 2:return t(Xw,{pickedIssues:p})}return null};return l(V,{children:[l(se,{className:"nitro-mod-tools-tickets",children:[t(ne,{headerText:"Tickets",onCloseClick:e}),t(fn,{children:Qw.map((I,f)=>t(Zr,{isActive:r===f,onClick:_=>n(f),children:I},f))}),t(re,{gap:1,children:t(C,{})})]}),s&&s.length>0&&s.map(I=>t(Yw,{issueId:I,onIssueInfoClosed:d},I))]})},Zw=a=>{const{userId:e=null,onCloseClick:r=null}=a,[n,s]=i.exports.useState(null),[o,c]=i.exports.useState(null);return U(YE,u=>{const g=u.getParser();!g||g.data.userId!==e||(c(g.data.username),s(g.data.roomChatlogs))}),i.exports.useEffect(()=>{D(new $E(e))},[e]),l(se,{className:"nitro-mod-tools-chatlog",theme:"modtool-windows",windowPosition:At.TOP_CENTER,children:[t(ne,{headerText:`User Chatlog: ${o||""}`,onCloseClick:r}),t(re,{className:"text-black h-100",children:n&&t(Zi,{records:n})})]})},uc=[new Le(1,"Alert",Le.ALERT,1,0),new Le(2,"Mute 1h",Le.MUTE,2,0),new Le(3,"Ban 18h",Le.BAN,3,0),new Le(4,"Ban 7 days",Le.BAN,4,0),new Le(5,"Ban 30 days (step 1)",Le.BAN,5,0),new Le(7,"Ban 30 days (step 2)",Le.BAN,7,0),new Le(6,"Ban 100 years",Le.BAN,6,0),new Le(106,"Ban avatar-only 100 years",Le.BAN,6,0),new Le(101,"Kick",Le.KICK,0,0),new Le(102,"Lock trade 1 week",Le.TRADE_LOCK,0,168),new Le(104,"Lock trade permanent",Le.TRADE_LOCK,0,876e3),new Le(105,"Message",Le.MESSAGE,0,0)],eR=a=>{const{user:e=null,onCloseClick:r=null}=a,[n,s]=i.exports.useState(-1),[o,c]=i.exports.useState(-1),[u,g]=i.exports.useState(""),{cfhCategories:p=null,settings:d=null}=ws(),{simpleAlert:h=null}=Xe(),C=i.exports.useMemo(()=>{const E=[];if(p&&p.length)for(const b of p)for(const T of b.topics)E.push(T);return E},[p]),I=E=>h(E,ue.DEFAULT,null,null,"Error"),f=()=>{let E=null;const b=C[n];if(n===-1&&(E="You must select a CFH topic"),E)return I(E);const T=u.trim().length===0?m(`help.cfh.topic.${b.id}`):u;D(new KE(e.userId,n,T)),r()},_=()=>{let E=null;const b=C[n],T=uc[o];if(n===-1||o===-1?E="You must select a CFH topic and Sanction":!d||!d.cfhPermission?E="You do not have permission to do this":b?T||(E="You must select a sanction"):E="You must select a CFH topic",E){I(E);return}const w=u.trim().length===0?m(`help.cfh.topic.${b.id}`):u;switch(T.actionType){case Le.ALERT:{if(!d.alertPermission){I("You have insufficient permissions");return}D(new eC(e.userId,w,b.id));break}case Le.MUTE:D(new ZE(e.userId,w,b.id));break;case Le.BAN:{if(!d.banPermission){I("You have insufficient permissions");return}D(new JE(e.userId,w,b.id,o,T.actionId===106));break}case Le.KICK:{if(!d.kickPermission){I("You have insufficient permissions");return}D(new QE(e.userId,w,b.id));break}case Le.TRADE_LOCK:{const O=T.actionLengthHours*60;D(new XE(e.userId,w,O,b.id));break}case Le.MESSAGE:{if(u.trim().length===0){I("Please write a message to user");return}D(new Lu(e.userId,u,b.id));break}}r()};return e?l(se,{className:"nitro-mod-tools-user-action",theme:"modtool-windows",windowPosition:At.TOP_CENTER,children:[t(ne,{headerText:"Mod Action: "+(e?e.username:""),onCloseClick:()=>r()}),l(re,{className:"text-black",children:[l("select",{className:"form-select form-select-sm",value:n,onChange:E=>s(parseInt(E.target.value)),children:[t("option",{value:-1,disabled:!0,children:"CFH Topic"}),C.map((E,b)=>t("option",{value:b,children:m("help.cfh.topic."+E.id)},b))]}),l("select",{className:"form-select form-select-sm",value:o,onChange:E=>c(parseInt(E.target.value)),children:[t("option",{value:-1,disabled:!0,children:"Sanction Type"}),uc.map((E,b)=>t("option",{value:b,children:E.name},b))]}),l(S,{gap:1,children:[t(N,{small:!0,children:"Optional message type, overrides default"}),t("textarea",{className:"form-control",value:u,onChange:E=>g(E.target.value)})]}),l(v,{justifyContent:"between",gap:1,children:[t(L,{variant:"primary",onClick:f,children:"Default Sanction"}),t(L,{variant:"success",onClick:_,children:"Sanction"})]})]})]}):null},tR=a=>{const{userId:e=null,onCloseClick:r=null}=a,[n,s]=i.exports.useState(null);return U(tC,o=>{const c=o.getParser();c.data.userId===e&&s(c.data)}),i.exports.useEffect(()=>{D(new rC(e))},[e]),e?l(se,{className:"nitro-mod-tools-user-visits",theme:"modtool-windows",windowPosition:At.TOP_CENTER,children:[t(ne,{headerText:"User Visits",onCloseClick:r}),t(re,{className:"text-black",gap:1,children:l(S,{fullHeight:!0,gap:0,overflow:"hidden",children:[t(S,{gap:2,children:l(le,{gap:1,className:"text-black fw-bold border-bottom pb-1",children:[t(M,{className:"g-col-2",children:"Time"}),t(M,{className:"g-col-7",children:"Room name"}),t(M,{className:"g-col-3",children:"Visit"})]})}),t(ma,{rows:(n==null?void 0:n.rooms)??[],rowRender:o=>l(le,{fullHeight:!1,gap:1,alignItems:"center",className:"text-black py-1 border-bottom",children:[l(N,{className:"g-col-2",children:[o.enterHour.toString().padStart(2,"0"),": ",o.enterMinute.toString().padStart(2,"0")]}),t(N,{className:"g-col-7",children:o.roomName}),t(N,{bold:!0,underline:!0,pointer:!0,variant:"primary",className:"g-col-3",onClick:c=>Kt(o.roomId),children:"Visit Room"})]})})]})})]}):null},rR=a=>{const{user:e=null,onCloseClick:r=null}=a,[n,s]=i.exports.useState(""),{simpleAlert:o=null}=Xe();if(!e)return null;const c=()=>{if(n.trim().length===0){o("Please write a message to user.",null,null,null,"Error",null);return}D(new Lu(e.userId,n,-999)),r()};return l(se,{className:"nitro-mod-tools-user-message",theme:"modtool-windows",windowPosition:At.TOP_CENTER,children:[t(ne,{headerText:"Send Message",onCloseClick:()=>r()}),l(re,{className:"text-black",children:[l(N,{children:["Message To: ",e.username]}),t("textarea",{className:"form-control",value:n,onChange:u=>s(u.target.value)}),t(L,{fullWidth:!0,onClick:c,children:"Send message"})]})]})},nR=a=>{const{onCloseClick:e=null,userId:r=null}=a,[n,s]=i.exports.useState(null),[o,c]=i.exports.useState(!1),[u,g]=i.exports.useState(!1),[p,d]=i.exports.useState(!1),h=i.exports.useMemo(()=>n?[{localeKey:"modtools.userinfo.userName",value:n.userName,showOnline:!0},{localeKey:"modtools.userinfo.cfhCount",value:n.cfhCount.toString()},{localeKey:"modtools.userinfo.abusiveCfhCount",value:n.abusiveCfhCount.toString()},{localeKey:"modtools.userinfo.cautionCount",value:n.cautionCount.toString()},{localeKey:"modtools.userinfo.banCount",value:n.banCount.toString()},{localeKey:"modtools.userinfo.lastSanctionTime",value:n.lastSanctionTime},{localeKey:"modtools.userinfo.tradingLockCount",value:n.tradingLockCount.toString()},{localeKey:"modtools.userinfo.tradingExpiryDate",value:n.tradingExpiryDate},{localeKey:"modtools.userinfo.minutesSinceLastLogin",value:Tr.format(n.minutesSinceLastLogin*60,".ago",2)},{localeKey:"modtools.userinfo.lastPurchaseDate",value:n.lastPurchaseDate},{localeKey:"modtools.userinfo.primaryEmailAddress",value:n.primaryEmailAddress},{localeKey:"modtools.userinfo.identityRelatedBanCount",value:n.identityRelatedBanCount.toString()},{localeKey:"modtools.userinfo.registrationAgeInMinutes",value:Tr.format(n.registrationAgeInMinutes*60,".ago",2)},{localeKey:"modtools.userinfo.userClassification",value:n.userClassification}]:null,[n]);return U(nC,C=>{const I=C.getParser();!I||I.data.userId!==r||s(I.data)}),i.exports.useEffect(()=>{D(new sC(r))},[r]),n?l(V,{children:[l(se,{className:"nitro-mod-tools-user",theme:"modtool-windows",windowPosition:At.TOP_CENTER,children:[t(ne,{headerText:m("modtools.userinfo.title",["username"],[n.userName]),onCloseClick:()=>e()}),t(re,{className:"text-black",children:l(le,{overflow:"hidden",className:"mod-content p-2",children:[t(S,{size:8,overflow:"auto",children:t("table",{className:"table table-striped table-sm table-text-small text-black m-0",children:t("tbody",{children:h.map((C,I)=>l("tr",{children:[t("th",{scope:"row",children:m(C.localeKey)}),l("td",{children:[C.value,C.showOnline&&t("i",{className:`icon icon-pf-${n.online?"online":"offline"} ms-2`})]})]},I))})})}),l(S,{size:4,gap:1,children:[t(L,{onClick:C=>Z(`mod-tools/open-user-chatlog/${r}`),children:"Room Chat"}),t(L,{onClick:C=>c(!o),children:"Send Message"}),t(L,{onClick:C=>d(!p),children:"Room Visits"}),t(L,{onClick:C=>g(!u),children:"Mod Action"})]})]})})]}),o&&t(rR,{user:{userId:r,username:n.userName},onCloseClick:()=>c(!1)}),u&&t(eR,{user:{userId:r,username:n.userName},onCloseClick:()=>g(!1)}),p&&t(tR,{userId:r,onCloseClick:()=>d(!1)})]}):null},sR=a=>{const[e,r]=i.exports.useState(!1),[n,s]=i.exports.useState(-1),[o,c]=i.exports.useState(null),[u,g]=i.exports.useState(!1),{openRooms:p=[],openRoomChatlogs:d=[],openUserChatlogs:h=[],openUserInfos:C=[],openRoomInfo:I=null,closeRoomInfo:f=null,toggleRoomInfo:_=null,openRoomChatlog:E=null,closeRoomChatlog:b=null,toggleRoomChatlog:T=null,openUserInfo:w=null,closeUserInfo:O=null,toggleUserInfo:R=null,openUserChatlog:x=null,closeUserChatlog:F=null,toggleUserChatlog:A=null}=ws(),k=i.exports.useRef(null);return Se([gr.INITIALIZED,gr.DISPOSED],y=>{if(!Bn.isRoomPreviewerId(y.roomId))switch(y.type){case gr.INITIALIZED:s(y.roomId);return;case gr.DISPOSED:s(-1);return}}),zi(y=>{if(y.category!==Q.UNIT)return;const P=ye();if(!P)return;const G=P.userDataManager.getUserDataByIndex(y.id);!G||G.type!==gt.USER||c({userId:G.webID,username:G.name})}),i.exports.useEffect(()=>{const y={linkReceived:P=>{const G=P.split("/");if(!(G.length<2))switch(G[1]){case"show":r(!0);return;case"hide":r(!1);return;case"toggle":r(B=>!B);return;case"open-room-info":I(Number(G[2]));return;case"close-room-info":f(Number(G[2]));return;case"toggle-room-info":_(Number(G[2]));return;case"open-room-chatlog":E(Number(G[2]));return;case"close-room-chatlog":b(Number(G[2]));return;case"toggle-room-chatlog":T(Number(G[2]));return;case"open-user-info":w(Number(G[2]));return;case"close-user-info":O(Number(G[2]));return;case"toggle-user-info":R(Number(G[2]));return;case"open-user-chatlog":x(Number(G[2]));return;case"close-user-chatlog":F(Number(G[2]));return;case"toggle-user-chatlog":A(Number(G[2]));return}},eventUrlPrefix:"mod-tools/"};return Ct(y),()=>_t(y)},[I,f,_,E,b,T,w,O,R,x,F,A]),l(V,{children:[e&&l(se,{uniqueKey:"mod-tools",className:"nitro-mod-tools",windowPosition:At.TOP_LEFT,theme:"primary-modtool",children:[t(ne,{headerText:"Mod Tools",onCloseClick:y=>r(!1)}),l(re,{className:"text-black",gap:1,children:[l(L,{gap:1,onClick:y=>Z(`mod-tools/toggle-room-info/${n}`),disabled:n<=0,className:"position-relative",children:[t(M,{className:"icon icon-small-room position-absolute start-1"})," Room Tool"]}),l(L,{innerRef:k,gap:1,onClick:y=>Z(`mod-tools/toggle-room-chatlog/${n}`),disabled:n<=0,className:"position-relative",children:[t(M,{className:"icon icon-chat-history position-absolute start-1"})," Chatlog Tool"]}),l(L,{gap:1,onClick:()=>Z(`mod-tools/toggle-user-info/${o.userId}`),disabled:!o,className:"position-relative",children:[t(M,{className:"icon icon-user position-absolute start-1"})," User: ",o?o.username:""]}),l(L,{gap:1,onClick:()=>g(y=>!y),className:"position-relative",children:[t(M,{className:"icon icon-tickets position-absolute start-1"})," Report Tool"]})]})]}),p.length>0&&p.map(y=>t(qw,{roomId:y,onCloseClick:()=>Z(`mod-tools/close-room-info/${y}`)},y)),d.length>0&&d.map(y=>t(jw,{roomId:y,onCloseClick:()=>Z(`mod-tools/close-room-chatlog/${y}`)},y)),C.length>0&&C.map(y=>t(nR,{userId:y,onCloseClick:()=>Z(`mod-tools/close-user-info/${y}`)},y)),h.length>0&&h.map(y=>t(Zw,{userId:y,onCloseClick:()=>Z(`mod-tools/close-user-chatlog/${y}`)},y)),u&&t(Jw,{onCloseClick:()=>g(!1)})]})},oR=[Ae.START_DOORBELL,Ae.STATE_WAITING,Ae.STATE_NO_ANSWER,Ae.START_PASSWORD,Ae.STATE_WRONG_PASSWORD],aR=[Ae.START_DOORBELL,Ae.STATE_WAITING,Ae.STATE_NO_ANSWER],iR=a=>{const[e,r]=i.exports.useState(""),{doorData:n=null,setDoorData:s=null}=kr(),o=()=>{n&&n.state===Ae.STATE_WAITING&&ui(),s(null)},c=()=>{!n||!n.roomInfo||(Vn(n.roomInfo.roomId),s(p=>{const d={...p};return d.state=Ae.STATE_PENDING_SERVER,d}))},u=()=>{!n||!n.roomInfo||(Vn(n.roomInfo.roomId,e),s(p=>{const d={...p};return d.state=Ae.STATE_PENDING_SERVER,d}))};if(i.exports.useEffect(()=>{!n||n.state!==Ae.STATE_NO_ANSWER||ui()},[n]),!n||n.state===Ae.NONE||oR.indexOf(n.state)===-1)return null;const g=aR.indexOf(n.state)>=0;return l(se,{className:"nitro-navigator-doorbell",theme:"primary",children:[t(ne,{headerText:m(g?"navigator.doorbell.title":"navigator.password.title"),onCloseClick:o}),l(re,{className:"px-3 pb-4",children:[l(S,{gap:1,children:[t(N,{small:!0,bold:!0,children:n&&n.roomInfo&&n.roomInfo.roomName}),n.state===Ae.START_DOORBELL&&t(N,{small:!0,children:m("navigator.doorbell.info")}),n.state===Ae.STATE_WAITING&&t(N,{small:!0,children:m("navigator.doorbell.waiting")}),n.state===Ae.STATE_NO_ANSWER&&t(N,{small:!0,children:m("navigator.doorbell.no.answer")}),n.state===Ae.START_PASSWORD&&t(N,{small:!0,children:m("navigator.password.info")}),n.state===Ae.STATE_WRONG_PASSWORD&&t(N,{small:!0,children:m("navigator.password.retryinfo")})]}),g&&l(v,{fullWidth:!0,gap:1,className:"align-items-end mt-auto pt-3",children:[t(N,{small:!0,className:"cursor-pointer",underline:!0,onClick:o,children:m("generic.cancel")}),n.state===Ae.START_DOORBELL&&t(L,{className:"ms-auto",onClick:c,children:m("navigator.doorbell.button.ring")})]}),!g&&l(V,{children:[l(v,{className:"pt-3 align-items-center",gap:1,children:[t(N,{small:!0,fullWidth:!0,children:m("navigator.password.enter")}),t("input",{type:"password",className:"form-control form-control-sm",onChange:p=>r(p.target.value)})]}),l(v,{fullWidth:!0,gap:1,className:"align-items-end mt-auto pt-3",children:[t(N,{small:!0,className:"cursor-pointer",underline:!0,onClick:o,children:m("generic.cancel")}),t(L,{className:"ms-auto",onClick:u,children:m("navigator.password.button.try")})]})]})]})]})},lR=a=>{const{itemImage:e=void 0,itemColor:r=void 0,itemActive:n=!1,itemCount:s=1,itemCountMinimum:o=1,itemUniqueSoldout:c=!1,itemUniqueNumber:u=-2,itemUnseen:g=!1,itemHighlight:p=!1,disabled:d=!1,center:h=!0,column:C=!0,style:I={},classNames:f=[],position:_="relative",overflow:E="hidden",children:b=null,...T}=a,w=i.exports.useMemo(()=>{const R=["room-creator-grid-item"];return n&&R.push("active"),(c||u>0)&&R.push("unique-item"),c&&R.push("sold-out"),g&&R.push("unseen"),p&&R.push("has-highlight"),d&&R.push("disabled"),e===null&&R.push("icon","loading-icon"),f.length&&R.push(...f),R},[n,c,u,g,p,d,e,f]),O=i.exports.useMemo(()=>{let R={...I};return e&&(R.backgroundImage=`url(${e})`),r&&(R.backgroundColor=r),Object.keys(I).length&&(R={...R,...I}),R},[I,e,r]);return l(S,{center:h,pointer:!0,position:_,overflow:E,column:C,classNames:w,style:O,...T,children:[s>o&&t(xr,{count:s}),u>0&&l(V,{children:[t(M,{fit:!0,className:"unique-bg-override",style:{backgroundImage:`url(${e})`}}),t("div",{className:"position-absolute bottom-0 unique-item-counter",children:t(gn,{value:u})})]}),b]})},cR=a=>{const[e,r]=i.exports.useState(null),[n,s]=i.exports.useState(null),[o,c]=i.exports.useState(null),[u,g]=i.exports.useState(null),[p,d]=i.exports.useState(null),[h,C]=i.exports.useState(0),[I,f]=i.exports.useState([]),[_,E]=i.exports.useState(""),{categories:b=null}=kr(),T=K("hc.disabled",!1),w=x=>K("images.url")+`/navigator/models/model_${x}.png`,O=(x,F)=>{!x||x.clubLevel>pr()||E(I[F].name)},R=()=>{D(new oC(n,o,"model_"+_,Number(u),Number(p),h))};return i.exports.useEffect(()=>{if(!e){const x=[];for(let F=10;F<=100;F=F+10)x.push(F);r(x),d(x[0])}},[e]),i.exports.useEffect(()=>{b&&b.length&&g(b[0].id)},[b]),i.exports.useEffect(()=>{const x=K("navigator.room.models");x&&x.length&&(f(x),E(x[0].name))},[]),l(se,{className:"nitro-room-creator",theme:"primary",children:[t(ne,{headerText:m("navigator.createroom.title"),onCloseClick:x=>Z("navigator/close-creator")}),t(re,{children:t(S,{overflow:"hidden",children:l(le,{overflow:"hidden",children:[l(S,{size:5,gap:1,overflow:"auto",className:"px-2 py-1",children:[l(S,{gap:1,children:[t(N,{gfbold:!0,children:m("navigator.createroom.roomnameinfo")}),t("input",{type:"text",className:"room-creator-form",maxLength:60,onChange:x=>s(x.target.value),placeholder:m("navigator.createroom.roomnameinfo")})]}),l(S,{grow:!0,gap:1,children:[t(N,{gfbold:!0,children:m("navigator.createroom.roomdescinfo")}),t("textarea",{className:"flex-grow-1 room-creator-form",maxLength:255,onChange:x=>c(x.target.value),placeholder:m("navigator.createroom.roomdescinfo")})]}),l(S,{gap:1,children:[t(N,{gfbold:!0,children:m("navigator.category")}),t("select",{className:"form-select form-select-sm",onChange:x=>g(Number(x.target.value)),children:b&&b.length>0&&b.map(x=>t("option",{value:x.id,children:m(x.name)},x.id))})]}),l(S,{gap:1,children:[t(N,{gfbold:!0,children:m("navigator.maxvisitors")}),t("select",{className:"form-select form-select-sm",onChange:x=>d(Number(x.target.value)),children:e&&e.map(x=>t("option",{value:x,children:x},x))})]}),l(S,{gap:1,children:[t(N,{gfbold:!0,children:m("navigator.tradesettings")}),l("select",{className:"form-select form-select-sm",onChange:x=>C(Number(x.target.value)),children:[t("option",{value:"0",children:m("navigator.roomsettings.trade_not_allowed")}),t("option",{value:"1",children:m("navigator.roomsettings.trade_not_with_Controller")}),t("option",{value:"2",children:m("navigator.roomsettings.trade_allowed")})]})]}),l(v,{gap:2,children:[t(L,{fullWidth:!0,className:"volter-bold-button",onClick:R,disabled:!n||n.length<3,children:m("navigator.createroom.create")}),t(L,{fullWidth:!0,className:"volter-button",onClick:x=>Z("navigator/close-creator"),children:m("cancel")})]})]}),t(S,{size:7,gap:1,overflow:"auto",children:t(Ue,{className:"room-creator-grid",columnCount:2,columnMinWidth:100,columnMinHeight:50,overflow:"unset",children:I.map((x,F)=>l(lR,{fullHeight:!0,onClick:()=>O(x,F),itemActive:_===x.name,overflow:"unset",gap:0,className:"py-3",disabled:pr()<x.clubLevel,children:[t(v,{fullHeight:!0,center:!0,overflow:"hidden",children:t("img",{alt:"",src:w(x.name)})}),l(N,{position:"absolute",className:"bottom-1 start-1",children:[x.tileSize," ",m("navigator.createroom.tilesize")]}),!T&&x.clubLevel>ar.NO_CLUB&&t(Et,{position:"absolute",className:"top-1 end-1",type:"hc"}),_&&t("i",{className:"active-arrow"})]},x.name))})})]})})})]})},uR=a=>{const{onCloseClick:e=null}=a,[r,n]=i.exports.useState(!1),[s,o]=i.exports.useState(!1),{report:c=null}=Or(),{navigatorData:u=null}=kr(),g=d=>{switch(d){case"settings":return H().userId===u.enteredGuestRoom.ownerId||H().isModerator;case"staff_pick":return H().securityLevel>=jo.COMMUNITY;default:return!1}},p=(d,h)=>{if(!(!u||!u.enteredGuestRoom))switch(d){case"set_home_room":let C=-1;u.homeRoomId!==u.enteredGuestRoom.roomId&&(C=u.enteredGuestRoom.roomId),C>0&&D(new cC(C));return;case"navigator_search_tag":Z(`navigator/search/${h}`),D(new hs("hotel_view",`tag:${h}`));return;case"open_room_thumbnail_camera":St(new Pr(Pr.TOGGLE_THUMBNAIL));return;case"open_group_info":eo(u.enteredGuestRoom.habboGroupId);return;case"toggle_room_link":Z("navigator/toggle-room-link");return;case"open_room_settings":D(new Ru(u.enteredGuestRoom.roomId));return;case"toggle_pick":n(I=>!I),D(new lC(u.enteredGuestRoom.roomId));return;case"toggle_mute":o(I=>!I),D(new iC);return;case"room_filter":D(new aC(u.enteredGuestRoom.roomId));return;case"open_floorplan_editor":Z("floor-editor/toggle");return;case"report_room":c(Ve.ROOM,{roomId:u.enteredGuestRoom.roomId,roomName:u.enteredGuestRoom.roomName});return;case"close":e();return}};return i.exports.useEffect(()=>{u&&(n(u.currentRoomIsStaffPick),u.enteredGuestRoom&&o(u.enteredGuestRoom.allInRoomMuted))},[u]),u.enteredGuestRoom?l(se,{className:"nitro-room-info",theme:"primary",children:[t(ne,{headerText:m("navigator.roomsettings.roominfo"),onCloseClick:()=>p("close")}),t(re,{className:"text-black",children:u.enteredGuestRoom&&l(V,{children:[t(v,{gap:2,overflow:"hidden",children:l(S,{grow:!0,gap:1,overflow:"hidden",children:[l(v,{gap:1,children:[l(S,{grow:!0,gap:1,children:[l(v,{gap:1,children:[t("i",{onClick:()=>p("set_home_room"),className:Rn("flex-shrink-0 icon icon-house-small cursor-pointer",u.homeRoomId!==u.enteredGuestRoom.roomId&&"gray")}),t(N,{bold:!0,children:u.enteredGuestRoom.roomName})]}),u.enteredGuestRoom.showOwner&&l(v,{alignItems:"center",gap:1,children:[t(N,{small:!0,variant:"muted",children:m("navigator.roomownercaption")}),l(v,{alignItems:"center",gap:1,children:[t(hr,{userId:u.enteredGuestRoom.ownerId}),t(N,{small:!0,children:u.enteredGuestRoom.ownerName})]})]}),l(v,{alignItems:"center",gap:1,children:[t(N,{small:!0,variant:"muted",children:m("navigator.roomrating")}),t(N,{small:!0,children:u.currentRoomRating})]}),u.enteredGuestRoom.tags.length>0&&t(v,{alignItems:"center",gap:1,children:u.enteredGuestRoom.tags.map(d=>l(N,{pointer:!0,className:"bg-muted rounded p-1",onClick:h=>p("navigator_search_tag",d),children:["#",d]},d))})]}),l(S,{alignItems:"center",gap:1,children:[g("settings")&&t("i",{className:"icon icon-cog cursor-pointer",title:m("navigator.room.popup.info.room.settings"),onClick:d=>p("open_room_settings")}),t(Om,{title:m("navigator.embed.caption"),className:"cursor-pointer fa-icon",onClick:d=>Z("navigator/toggle-room-link")})]})]}),t(N,{small:!0,overflow:"auto",style:{maxHeight:50},children:u.enteredGuestRoom.description}),t(v,{justifyContent:"center",children:t(da,{roomId:u.enteredGuestRoom.roomId,customUrl:u.enteredGuestRoom.officialRoomPicRef,children:g("settings")&&t("i",{className:"icon icon-camera-small position-absolute b-0 r-0 m-1 cursor-pointer top-0",onClick:()=>p("open_room_thumbnail_camera")})})}),u.enteredGuestRoom.habboGroupId>0&&l(v,{pointer:!0,alignItems:"center",gap:2,onClick:()=>p("open_group_info"),children:[t(je,{className:"flex-none",badgeCode:u.enteredGuestRoom.groupBadgeCode,isGroup:!0}),t(N,{small:!0,underline:!0,children:m("navigator.guildbase",["groupName"],[u.enteredGuestRoom.groupName])})]}),l(v,{gap:1,className:"w-100 room-tool-item",onClick:()=>p("toggle_room_link"),children:[t(M,{pointer:!0,title:m("room.like.button.text"),className:"icon-width icon icon-link-room float-start"}),t(N,{underline:!0,small:!0,children:m("navigator.embed.caption")})]})]})}),l(S,{gap:1,children:[g("staff_pick")&&t(L,{onClick:()=>p("toggle_pick"),children:m(r?"navigator.staffpicks.unpick":"navigator.staffpicks.pick")}),t(L,{variant:"danger",onClick:()=>p("report_room"),children:m("help.emergency.main.report.room")}),g("settings")&&l(V,{children:[t(L,{onClick:()=>p("open_room_settings"),children:m("navigator.room.popup.info.room.settings")}),t(L,{onClick:()=>p("toggle_mute"),children:m(s?"navigator.muteall_on":"navigator.muteall_off")}),t(L,{onClick:()=>p("room_filter"),children:m("navigator.roomsettings.roomfilter")}),t(L,{onClick:()=>p("open_floorplan_editor"),children:m("open.floor.plan.editor")})]})]})]})})]}):null},dR=a=>{const{onCloseClick:e=null}=a,{navigatorData:r=null}=kr();return r.enteredGuestRoom?l(se,{className:"nitro-room-link",theme:"primary",children:[t(ne,{headerText:m("navigator.embed.title"),onCloseClick:e}),t(re,{className:"text-black d-flex align-items-center",children:l(v,{gap:2,children:[t(da,{roomId:r.enteredGuestRoom.roomId,customUrl:r.enteredGuestRoom.officialRoomPicRef}),l(S,{children:[t(N,{bold:!0,fontSize:5,children:m("navigator.embed.headline")}),t(N,{children:m("navigator.embed.info")}),l(N,{children:[" ",m("navigator.embed.direct.info")]}),t("input",{type:"text",readOnly:!0,className:"form-control form-control-sm",value:m("navigator.embed.src",["roomId"],[r.enteredGuestRoom.roomId.toString()])})]})]})})]}):null},mR=a=>{const{roomData:e=null,handleChange:r=null}=a,[n,s]=i.exports.useState(""),[o,c]=i.exports.useState(""),[u,g]=i.exports.useState(!1),p=()=>{!u||n.length<=0||o.length<=0||n!==o||r("password",n)};return i.exports.useEffect(()=>{s(""),c(""),g(!1)},[e]),l(V,{children:[l(S,{gap:1,children:[t(N,{bold:!0,children:m("navigator.roomsettings.roomaccess.caption")}),t(N,{children:m("navigator.roomsettings.roomaccess.info")})]}),l(S,{overflow:"auto",children:[l(S,{gap:1,children:[t(N,{bold:!0,children:m("navigator.roomsettings.doormode")}),l(v,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"radio",name:"lockState",checked:e.lockState===nt.OPEN_STATE&&!u,onChange:d=>r("lock_state",nt.OPEN_STATE)}),t(N,{children:m("navigator.roomsettings.doormode.open")})]}),l(v,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"radio",name:"lockState",checked:e.lockState===nt.DOORBELL_STATE&&!u,onChange:d=>r("lock_state",nt.DOORBELL_STATE)}),t(N,{children:m("navigator.roomsettings.doormode.doorbell")})]}),l(v,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"radio",name:"lockState",checked:e.lockState===nt.INVISIBLE_STATE&&!u,onChange:d=>r("lock_state",nt.INVISIBLE_STATE)}),t(N,{children:m("navigator.roomsettings.doormode.invisible")})]}),l(v,{fullWidth:!0,gap:1,children:[t("input",{className:"form-check-input",type:"radio",name:"lockState",checked:e.lockState===nt.PASSWORD_STATE||u,onChange:d=>g(d.target.checked)}),!u&&e.lockState!==nt.PASSWORD_STATE&&t(N,{children:m("navigator.roomsettings.doormode.password")}),(u||e.lockState===nt.PASSWORD_STATE)&&l(S,{gap:1,children:[t(N,{children:m("navigator.roomsettings.doormode.password")}),t("input",{type:"password",className:"form-control form-control-sm col-4",value:n,onChange:d=>s(d.target.value),placeholder:m("navigator.roomsettings.password"),onFocus:d=>g(!0)}),u&&n.length<=0&&t(N,{bold:!0,small:!0,variant:"danger",children:m("navigator.roomsettings.passwordismandatory")}),t("input",{type:"password",className:"form-control form-control-sm col-4",value:o,onChange:d=>c(d.target.value),onBlur:p,placeholder:m("navigator.roomsettings.passwordconfirm")}),u&&n.length>0&&n!==o&&t(N,{bold:!0,small:!0,variant:"danger",children:m("navigator.roomsettings.invalidconfirm")})]})]})]}),l(S,{gap:1,children:[t(N,{bold:!0,children:m("navigator.roomsettings.pets")}),l(v,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"checkbox",checked:e.allowPets,onChange:d=>r("allow_pets",d.target.checked)}),t(N,{children:m("navigator.roomsettings.allowpets")})]}),l(v,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"checkbox",checked:e.allowPetsEat,onChange:d=>r("allow_pets_eat",d.target.checked)}),t(N,{children:m("navigator.roomsettings.allowfoodconsume")})]})]})]})]})},dc=3,mc=60,gc=255,yo=15,gR=a=>{const{roomData:e=null,handleChange:r=null,onClose:n=null}=a,[s,o]=i.exports.useState(""),[c,u]=i.exports.useState(""),[g,p]=i.exports.useState(""),[d,h]=i.exports.useState(""),[C,I]=i.exports.useState(0),[f,_]=i.exports.useState(""),{showConfirm:E=null}=Xe(),{categories:b=null}=kr();U(uC,x=>{const F=x.getParser();if(F)switch(F.code){case bl.ERROR_INVALID_TAG:_("navigator.roomsettings.unacceptablewords");case bl.ERROR_NON_USER_CHOOSABLE_TAG:_("navigator.roomsettings.nonuserchoosabletag");break;default:_("");break}});const T=()=>{E(m("navigator.roomsettings.deleteroom.confirm.message",["room_name"],[e.roomName]),()=>{D(new dC(e.roomId)),n&&n(),Z("navigator/search/myworld_view")},null,null,null,m("navigator.roomsettings.deleteroom.confirm.title"))},w=()=>{s===e.roomName||s.length<dc||s.length>mc||r("name",s)},O=()=>{c===e.roomDescription||c.length>gc||r("description",c)},R=x=>{x===0&&g===e.tags[0]||g.length>yo||x===1&&d===e.tags[1]||d.length>yo||(g===""&&d!==""&&h(""),_(""),I(x),r("tags",g===""&&d!==""?[d]:[g,d]))};return i.exports.useEffect(()=>{o(e.roomName),u(e.roomDescription),p(e.tags.length>0&&e.tags[0]?e.tags[0]:""),h(e.tags.length>0&&e.tags[1]?e.tags[1]:"")},[e]),l(V,{children:[l(v,{alignItems:"center",gap:1,children:[t(N,{className:"col-3",children:m("navigator.roomname")}),l(S,{fullWidth:!0,gap:0,children:[t("input",{className:"form-control form-control-sm",value:s,maxLength:mc,onChange:x=>o(x.target.value),onBlur:w}),s.length<dc&&t(N,{bold:!0,small:!0,variant:"danger",children:m("navigator.roomsettings.roomnameismandatory")})]})]}),l(v,{alignItems:"center",gap:1,children:[t(N,{className:"col-3",children:m("navigator.roomsettings.desc")}),t("textarea",{className:"form-control form-control-sm",value:c,maxLength:gc,onChange:x=>u(x.target.value),onBlur:O})]}),l(v,{alignItems:"center",gap:1,children:[t(N,{className:"col-3",children:m("navigator.category")}),t("select",{className:"form-select form-select-sm",value:e.categoryId,onChange:x=>r("category",x.target.value),children:b&&b.map(x=>t("option",{value:x.id,children:m(x.name)},x.id))})]}),l(v,{alignItems:"center",gap:1,children:[t(N,{className:"col-3",children:m("navigator.maxvisitors")}),t("select",{className:"form-select form-select-sm",value:e.userCount,onChange:x=>r("max_visitors",x.target.value),children:Bl&&Bl.map(x=>t("option",{value:x,children:x},x))})]}),l(v,{alignItems:"center",gap:1,children:[t(N,{className:"col-3",children:m("navigator.tradesettings")}),l("select",{className:"form-select form-select-sm",value:e.tradeState,onChange:x=>r("trade_state",x.target.value),children:[t("option",{value:"0",children:m("navigator.roomsettings.trade_not_allowed")}),t("option",{value:"1",children:m("navigator.roomsettings.trade_not_with_Controller")}),t("option",{value:"2",children:m("navigator.roomsettings.trade_allowed")})]})]}),l(v,{alignItems:"center",gap:1,children:[t(N,{className:"col-3",children:m("navigator.tags")}),l(S,{fullWidth:!0,gap:0,children:[t("input",{className:"form-control form-control-sm",value:g,onChange:x=>p(x.target.value),onBlur:()=>R(0)}),g.length>yo&&t(N,{bold:!0,small:!0,variant:"danger",children:m("navigator.roomsettings.toomanycharacters")}),C===0&&f!=""&&t(N,{bold:!0,small:!0,variant:"danger",children:m(f)})]}),l(S,{fullWidth:!0,gap:0,children:[t("input",{className:"form-control form-control-sm",value:d,onChange:x=>h(x.target.value),onBlur:()=>R(1)}),d.length>yo&&t(N,{bold:!0,small:!0,variant:"danger",children:m("navigator.roomsettings.toomanycharacters")}),C===1&&f!=""&&t(N,{bold:!0,small:!0,variant:"danger",children:m(f)})]})]}),l(v,{alignItems:"center",gap:1,children:[t(M,{className:"col-3"}),t("input",{className:"form-check-input",type:"checkbox",checked:e.allowWalkthrough,onChange:x=>r("allow_walkthrough",x.target.checked)}),t(N,{children:m("navigator.roomsettings.allow_walk_through")})]}),l(N,{variant:"danger",underline:!0,bold:!0,pointer:!0,className:"d-flex justify-content-center align-items-center gap-1",onClick:T,children:[t(xn,{className:"fa-icon"}),m("navigator.roomsettings.delete")]})]})},pR=a=>{var g;const{roomData:e=null,handleChange:r=null}=a,[n,s]=i.exports.useState(-1),[o,c]=i.exports.useState([]),u=p=>{c(d=>{const h=[...d],C=h.findIndex(I=>I.userId===p);return C>=0&&h.splice(C,1),h}),D(new gC(p,e.roomId)),s(-1)};return U(mC,p=>{const d=p.getParser();!e||e.roomId!==d.roomId||c(d.bannedUsers)}),i.exports.useEffect(()=>{D(new Uu(e.roomId))},[e.roomId]),l(le,{overflow:"auto",children:[l(S,{size:6,children:[l(N,{bold:!0,children:[m("navigator.roomsettings.moderation.banned.users")," (",o.length,")"]}),t(v,{overflow:"hidden",className:"bg-white rounded list-container p-2",children:t(S,{fullWidth:!0,overflow:"auto",gap:1,children:o&&o.length>0&&o.map((p,d)=>l(v,{shrink:!0,alignItems:"center",gap:1,overflow:"hidden",children:[t(hr,{userName:p.userName}),l(N,{pointer:!0,grow:!0,onClick:h=>s(p.userId),children:[" ",p.userName]})]},d))})}),l(L,{disabled:n<=0,onClick:p=>u(n),children:[m("navigator.roomsettings.moderation.unban")," ",n>0&&((g=o.find(p=>p.userId===n))==null?void 0:g.userName)]})]}),l(S,{size:6,children:[l(S,{gap:1,children:[t(N,{bold:!0,children:m("navigator.roomsettings.moderation.mute.header")}),t(v,{alignItems:"center",gap:1,children:l("select",{className:"form-select form-select-sm",value:e.moderationSettings.allowMute,onChange:p=>r("moderation_mute",p.target.value),children:[t("option",{value:Ar.MODERATION_LEVEL_NONE,children:m("navigator.roomsettings.moderation.none")}),t("option",{value:Ar.MODERATION_LEVEL_USER_WITH_RIGHTS,children:m("navigator.roomsettings.moderation.rights")})]})})]}),l(S,{gap:1,children:[t(N,{bold:!0,children:m("navigator.roomsettings.moderation.kick.header")}),t(v,{alignItems:"center",gap:1,children:l("select",{className:"form-select form-select-sm",value:e.moderationSettings.allowKick,onChange:p=>r("moderation_kick",p.target.value),children:[t("option",{value:Ar.MODERATION_LEVEL_NONE,children:m("navigator.roomsettings.moderation.none")}),t("option",{value:Ar.MODERATION_LEVEL_USER_WITH_RIGHTS,children:m("navigator.roomsettings.moderation.rights")}),t("option",{value:Ar.MODERATION_LEVEL_ALL,children:m("navigator.roomsettings.moderation.all")})]})})]}),l(S,{gap:1,children:[t(N,{bold:!0,children:m("navigator.roomsettings.moderation.ban.header")}),t(v,{alignItems:"center",gap:1,children:l("select",{className:"form-select form-select-sm",value:e.moderationSettings.allowBan,onChange:p=>r("moderation_ban",p.target.value),children:[t("option",{value:Ar.MODERATION_LEVEL_NONE,children:m("navigator.roomsettings.moderation.none")}),t("option",{value:Ar.MODERATION_LEVEL_USER_WITH_RIGHTS,children:m("navigator.roomsettings.moderation.rights")})]})})]})]})]})},hR=a=>{const{roomData:e=null}=a,[r,n]=i.exports.useState(new Map);return U(pC,s=>{const o=s.getParser();!e||e.roomId!==o.roomId||n(o.users)}),U(hC,s=>{const o=s.getParser();!e||e.roomId!==o.roomId||n(c=>{const u=new Map(c);return u.set(o.data.userId,o.data.userName),u})}),U(fC,s=>{const o=s.getParser();!e||e.roomId!==o.roomId||n(c=>{const u=new Map(c);return u.delete(o.userId),u})}),i.exports.useEffect(()=>{D(new IC(e.roomId))},[e.roomId]),l(le,{children:[l(S,{size:6,children:[t(N,{bold:!0,children:m("navigator.flatctrls.userswithrights",["displayed","total"],[r.size.toString(),r.size.toString()])}),t(v,{overflow:"hidden",className:"bg-white rounded list-container p-2",children:t(S,{fullWidth:!0,overflow:"auto",gap:1,children:Array.from(r.entries()).map(([s,o],c)=>l(v,{shrink:!0,alignItems:"center",gap:1,overflow:"hidden",children:[t(hr,{userName:o}),l(N,{pointer:!0,grow:!0,onClick:u=>D(new EC(s)),children:[" ",o]})]},c))})})]}),t(S,{size:6,justifyContent:"end",children:t(L,{variant:"danger",disabled:!r.size,onClick:s=>D(new CC(e.roomId)),children:m("navigator.flatctrls.clear")})})]})},fR=a=>{const{roomData:e=null,handleChange:r=null}=a,[n,s]=i.exports.useState(0);return i.exports.useEffect(()=>{s(e.chatSettings.distance)},[e.chatSettings]),l(V,{children:[l(S,{gap:1,children:[t(N,{bold:!0,children:m("navigator.roomsettings.vip.caption")}),t(N,{children:m("navigator.roomsettings.vip.info")})]}),l(le,{overflow:"auto",children:[l(S,{size:6,gap:1,children:[t(N,{bold:!0,children:m("navigator.roomsettings.chat_settings")}),t(N,{children:m("navigator.roomsettings.chat_settings.info")}),l("select",{className:"form-select form-select-sm",value:e.chatSettings.mode,onChange:o=>r("bubble_mode",o.target.value),children:[t("option",{value:ft.CHAT_MODE_FREE_FLOW,children:m("navigator.roomsettings.chat.mode.free.flow")}),t("option",{value:ft.CHAT_MODE_LINE_BY_LINE,children:m("navigator.roomsettings.chat.mode.line.by.line")})]}),l("select",{className:"form-select form-select-sm",value:e.chatSettings.weight,onChange:o=>r("chat_weight",o.target.value),children:[t("option",{value:ft.CHAT_BUBBLE_WIDTH_NORMAL,children:m("navigator.roomsettings.chat.bubbles.width.normal")}),t("option",{value:ft.CHAT_BUBBLE_WIDTH_THIN,children:m("navigator.roomsettings.chat.bubbles.width.thin")}),t("option",{value:ft.CHAT_BUBBLE_WIDTH_WIDE,children:m("navigator.roomsettings.chat.bubbles.width.wide")})]}),l("select",{className:"form-select form-select-sm",value:e.chatSettings.speed,onChange:o=>r("bubble_speed",o.target.value),children:[t("option",{value:ft.CHAT_SCROLL_SPEED_FAST,children:m("navigator.roomsettings.chat.speed.fast")}),t("option",{value:ft.CHAT_SCROLL_SPEED_NORMAL,children:m("navigator.roomsettings.chat.speed.normal")}),t("option",{value:ft.CHAT_SCROLL_SPEED_SLOW,children:m("navigator.roomsettings.chat.speed.slow")})]}),l("select",{className:"form-select form-select-sm",value:e.chatSettings.protection,onChange:o=>r("flood_protection",o.target.value),children:[t("option",{value:ft.FLOOD_FILTER_LOOSE,children:m("navigator.roomsettings.chat.flood.loose")}),t("option",{value:ft.FLOOD_FILTER_NORMAL,children:m("navigator.roomsettings.chat.flood.normal")}),t("option",{value:ft.FLOOD_FILTER_STRICT,children:m("navigator.roomsettings.chat.flood.strict")})]}),t(N,{children:m("navigator.roomsettings.chat_settings.hearing.distance")}),t("input",{type:"number",min:"0",className:"form-control form-control-sm",value:n,onChange:o=>s(o.target.valueAsNumber),onBlur:o=>r("chat_distance",n)})]}),l(S,{size:6,gap:1,children:[t(N,{bold:!0,children:m("navigator.roomsettings.vip_settings")}),l(v,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"checkbox",checked:e.hideWalls,onChange:o=>r("hide_walls",o.target.checked)}),t(N,{children:m("navigator.roomsettings.hide_walls")})]}),l("select",{className:"form-select form-select-sm",value:e.wallThickness,onChange:o=>r("wall_thickness",o.target.value),children:[t("option",{value:"0",children:m("navigator.roomsettings.wall_thickness.normal")}),t("option",{value:"1",children:m("navigator.roomsettings.wall_thickness.thick")}),t("option",{value:"-1",children:m("navigator.roomsettings.wall_thickness.thin")}),t("option",{value:"-2",children:m("navigator.roomsettings.wall_thickness.thinnest")})]}),l("select",{className:"form-select form-select-sm",value:e.floorThickness,onChange:o=>r("floor_thickness",o.target.value),children:[t("option",{value:"0",children:m("navigator.roomsettings.floor_thickness.normal")}),t("option",{value:"1",children:m("navigator.roomsettings.floor_thickness.thick")}),t("option",{value:"-1",children:m("navigator.roomsettings.floor_thickness.thin")}),t("option",{value:"-2",children:m("navigator.roomsettings.floor_thickness.thinnest")})]})]})]})]})},Nn=["navigator.roomsettings.tab.1","navigator.roomsettings.tab.2","navigator.roomsettings.tab.3","navigator.roomsettings.tab.4","navigator.roomsettings.tab.5"],IR=a=>{const[e,r]=i.exports.useState(null),[n,s]=i.exports.useState(Nn[0]);U(_C,u=>{const g=u.getParser();if(!g)return;const p=g.data;r({roomId:p.roomId,roomName:p.name,roomDescription:p.description,categoryId:p.categoryId,userCount:p.maximumVisitorsLimit,tags:p.tags,tradeState:p.tradeMode,allowWalkthrough:p.allowWalkThrough,lockState:p.doorMode,password:null,allowPets:p.allowPets,allowPetsEat:p.allowFoodConsume,hideWalls:p.hideWalls,wallThickness:p.wallThickness,floorThickness:p.floorThickness,chatSettings:{mode:p.chatSettings.mode,weight:p.chatSettings.weight,speed:p.chatSettings.speed,distance:p.chatSettings.distance,protection:p.chatSettings.protection},moderationSettings:{allowMute:p.roomModerationSettings.allowMute,allowKick:p.roomModerationSettings.allowKick,allowBan:p.roomModerationSettings.allowBan}}),D(new Uu(p.roomId))});const o=()=>{r(null),s(Nn[0])},c=(u,g)=>{r(p=>{const d={...p};switch(u){case"name":d.roomName=String(g);break;case"description":d.roomDescription=String(g);break;case"category":d.categoryId=Number(g);break;case"max_visitors":d.userCount=Number(g);break;case"trade_state":d.tradeState=Number(g);break;case"tags":d.tags=g;break;case"allow_walkthrough":d.allowWalkthrough=Boolean(g);break;case"allow_pets":d.allowPets=Boolean(g);break;case"allow_pets_eat":d.allowPetsEat=Boolean(g);break;case"hide_walls":d.hideWalls=Boolean(g);break;case"wall_thickness":d.wallThickness=Number(g);break;case"floor_thickness":d.floorThickness=Number(g);break;case"lock_state":d.lockState=Number(g);break;case"password":d.lockState=nt.PASSWORD_STATE,d.password=String(g);break;case"moderation_mute":d.moderationSettings.allowMute=Number(g);break;case"moderation_kick":d.moderationSettings.allowKick=Number(g);break;case"moderation_ban":d.moderationSettings.allowBan=Number(g);break;case"bubble_mode":d.chatSettings.mode=Number(g);break;case"chat_weight":d.chatSettings.weight=Number(g);break;case"bubble_speed":d.chatSettings.speed=Number(g);break;case"flood_protection":d.chatSettings.protection=Number(g);break;case"chat_distance":d.chatSettings.distance=Number(g);break}return D(new bC(d.roomId,d.roomName,d.roomDescription,d.lockState,d.password,d.userCount,d.categoryId,d.tags.length,d.tags,d.tradeState,d.allowPets,d.allowPetsEat,d.allowWalkthrough,d.hideWalls,d.wallThickness,d.floorThickness,d.moderationSettings.allowMute,d.moderationSettings.allowKick,d.moderationSettings.allowBan,d.chatSettings.mode,d.chatSettings.weight,d.chatSettings.speed,d.chatSettings.distance,d.chatSettings.protection)),d})};return e?l(se,{uniqueKey:"nitro-room-settings",className:"nitro-room-settings",children:[t(ne,{headerText:m("navigator.roomsettings"),onCloseClick:o}),t(fn,{children:Nn.map(u=>t(Zr,{isActive:n===u,onClick:g=>s(u),children:m(u)},u))}),l(re,{children:[n===Nn[0]&&t(gR,{roomData:e,handleChange:c,onClose:o}),n===Nn[1]&&t(mR,{roomData:e,handleChange:c}),n===Nn[2]&&t(hR,{roomData:e,handleChange:c}),n===Nn[3]&&t(fR,{roomData:e,handleChange:c}),n===Nn[4]&&t(pR,{roomData:e,handleChange:c})]})]}):null},pc=a=>{const{roomData:e=null}=a,[r,n]=i.exports.useState(!1),s=i.exports.useRef(),o=()=>{const c=100*(e.userCount/e.maxUserCount);let u="bg-primary";return c>=92?u="bg-danger":c>=50?u="bg-warning":c>0&&(u="bg-success"),u};return l(V,{children:[t(M,{pointer:!0,innerRef:s,className:"icon icon-navigator-info",onMouseOver:c=>n(!0),onMouseLeave:c=>n(!1)}),t(au,{show:r,target:s.current,placement:"right",children:t(Go,{children:l(re,{overflow:"hidden",className:"room-info bg-transparent",children:[l(v,{gap:2,overflow:"hidden",className:"room-info-bg p-2",children:[l(da,{roomId:e.roomId,customUrl:e.officialRoomPicRef,className:"d-flex flex-column align-items-center justify-content-end mb-1",children:[e.habboGroupId>0&&t(je,{badgeCode:e.groupBadgeCode,isGroup:!0,className:"position-absolute top-0 start-0 m-1 "}),e.doorMode!==nt.OPEN_STATE&&t("i",{className:"position-absolute end-0 mb-1 me-1 icon icon-navigator-room-"+(e.doorMode===nt.DOORBELL_STATE?"locked":e.doorMode===nt.PASSWORD_STATE?"password":e.doorMode===nt.INVISIBLE_STATE?"invisible":"")})]}),l(S,{gap:1,children:[t(N,{bold:!0,truncate:!0,className:"flex-grow-1",style:{maxHeight:13},children:e.roomName}),l(v,{gap:2,children:[t(N,{italics:!0,variant:"muted",children:m("navigator.roomownercaption")}),l(v,{alignItems:"center",gap:1,children:[t(hr,{userId:e.ownerId}),t(N,{italics:!0,children:e.ownerName})]})]}),t(N,{className:"flex-grow-1",children:e.description}),l(v,{className:"badge p-1 position-absolute m-1 bottom-0 end-0 m-2 "+o(),gap:1,children:[t(iu,{className:"fa-icon"}),e.userCount]})]})]}),l(S,{children:[l(v,{children:[l(v,{gap:1,className:"align-items-center",children:[t(hr,{userId:e.ownerId}),t(N,{bold:!0,underline:!0,children:e.ownerName})]}),l(v,{gap:1,className:"align-items-center",justifyContent:"end",fullWidth:!0,children:[t("i",{className:"icon icon-navigator-room-group"}),t(N,{bold:!0,underline:!0,children:e.groupName})]})]}),l(v,{gap:1,children:[t(N,{bold:!0,children:m("navigator.roompopup.property.max_users")}),t(N,{children:e.maxUserCount})]})]})]})})})]})},hc=a=>{const{roomData:e=null,children:r=null,thumbnail:n=!1,...s}=a,{setDoorData:o=null}=kr(),c=()=>{const g=100*(e.userCount/e.maxUserCount);let p="badge-empty";return g>=92?p="badge-danger":g>=50?p="badge-warning":g>0&&(p="badge-success"),p},u=g=>{if(e.ownerId!==H().userId){if(e.habboGroupId!==0){Kt(e.roomId);return}switch(e.doorMode){case nt.DOORBELL_STATE:o(p=>{const d={...p};return d.roomInfo=e,d.state=Ae.START_DOORBELL,d});return;case nt.PASSWORD_STATE:o(p=>{const d={...p};return d.roomInfo=e,d.state=Ae.START_PASSWORD,d});return}}Vn(e.roomId)};return n?l(S,{pointer:!0,overflow:"hidden",alignItems:"center",onClick:u,gap:0,className:"nav-thumbnail p-1 rounded-3 small mb-1 flex-column",...s,children:[l(da,{roomId:e.roomId,customUrl:e.officialRoomPicRef,className:"d-flex flex-column align-items-center justify-content-end mb-1",children:[e.habboGroupId>0&&t(je,{badgeCode:e.groupBadgeCode,isGroup:!0,className:"position-absolute top-0 start-0 m-1"}),l(v,{center:!0,className:"badge p-1 position-absolute m-1 "+c(),gap:1,children:[t(iu,{className:"fa-icon"}),e.userCount]}),e.doorMode!==nt.OPEN_STATE&&t("i",{className:"position-absolute end-0 mb-1 me-1 icon icon-navigator-room-"+(e.doorMode===nt.DOORBELL_STATE?"locked":e.doorMode===nt.PASSWORD_STATE?"password":e.doorMode===nt.INVISIBLE_STATE?"invisible":"")})]}),l(v,{className:"w-100",children:[t(N,{truncate:!0,className:"flex-grow-1",children:e.roomName}),t(v,{reverse:!0,alignItems:"center",gap:1,children:t(pc,{roomData:e})}),r]})]}):l(v,{pointer:!0,overflow:"hidden",alignItems:"center",onClick:u,gap:2,className:"navigator-item px-2 small",...s,children:[l(v,{center:!0,className:"p-1 fw-bold "+c(),gap:1,children:[t("div",{className:"nav-avatar-icon"}),e.userCount]}),t(N,{truncate:!0,grow:!0,children:e.roomName}),l(v,{reverse:!0,alignItems:"center",gap:1,children:[t(pc,{roomData:e}),e.habboGroupId>0&&t("i",{className:"icon icon-navigator-room-group"}),e.doorMode!==nt.OPEN_STATE&&t("i",{className:"icon icon-navigator-room-"+(e.doorMode===nt.DOORBELL_STATE?"locked":e.doorMode===nt.PASSWORD_STATE?"password":e.doorMode===nt.INVISIBLE_STATE?"invisible":"")})]}),r]})},ER=a=>{const{searchResult:e=null,...r}=a,[n,s]=i.exports.useState(!0),[o,c]=i.exports.useState(0),{topLevelContext:u=null}=kr(),g=()=>{let C=e.code;return!C||!C.length||m("navigator.searchcode.title."+C)=="navigator.searchcode.title."+C?e.data:C.startsWith("${")?C.slice(2,C.length-1):"navigator.searchcode.title."+C},p=()=>{c(C=>C===an.LIST?an.THUMBNAILS:an.LIST)},d=()=>{e.action==1?D(new hs(e.code,"")):e.action==2&&u&&D(new hs(u.code,""))};i.exports.useEffect(()=>{e&&(s(!e.closed),c(e.mode))},[e]);const h=o>=an.THUMBNAILS;return l(S,{className:"bg-white",gap:0,children:[l(v,{fullWidth:!0,alignItems:"center",justifyContent:"between",className:"px-2 py-1",children:[l(v,{grow:!0,pointer:!0,alignItems:"center",gap:1,onClick:C=>s(I=>!I),children:[n&&t(km,{className:"text-secondary fa-icon"}),!n&&t(Ss,{className:"text-secondary fa-icon"}),l("div",{className:"nav-category",children:[" ",m(g())]})]}),l(v,{gap:2,children:[o===an.LIST&&t(Am,{className:"text-secondary fa-icon",onClick:p}),o>=an.THUMBNAILS&&t(Pm,{className:"text-secondary fa-icon",onClick:p}),e.action>0&&e.action===1&&t(Dm,{className:"text-secondary fa-icon",onClick:d}),e.action>0&&e.action!==1&&t(Mm,{className:"text-secondary fa-icon",onClick:d})]})]})," ",n&&t(V,{children:h?t(Ue,{columnCount:3,...r,columnMinWidth:110,columnMinHeight:130,className:"mx-2",children:e.rooms.length>0&&e.rooms.map((C,I)=>t(hc,{roomData:C,thumbnail:!0},I))}):t(le,{columnCount:1,className:"navigator-grid",gap:0,children:e.rooms.length>0&&e.rooms.map((C,I)=>t(hc,{roomData:C},I))})})]})},CR=a=>{const{sendSearch:e=null}=a,[r,n]=i.exports.useState(0),[s,o]=i.exports.useState(""),{topLevelContext:c=null,searchResult:u=null}=kr(),g=()=>{if(!c)return;let d=ts[r];d||(d=ts[0]);const h=(d.query?d.query+":":"")+s;e(h||"",c.code)},p=d=>{d.key==="Enter"&&g()};return i.exports.useEffect(()=>{if(!u)return;const d=u.data.split(":");let h=null,C="";if(d.length>=2){const[I,...f]=d;h=ts.find(_=>_.query===I),C=f.join(":")}else C=u.data;h||(h=ts[0]),n(ts.findIndex(I=>I===h)),o(C)},[u]),l(v,{fullWidth:!0,gap:1,children:[t(v,{shrink:!0,children:t("select",{className:"form-select form-select-sm",value:r,onChange:d=>n(parseInt(d.target.value)),children:ts.map((d,h)=>t("option",{value:h,children:m("navigator.filter."+d.name)},h))})}),l(v,{fullWidth:!0,gap:2,children:[t("input",{type:"text",className:"form-control form-control-sm",placeholder:m("navigator.filter.input.placeholder"),value:s,onChange:d=>o(d.target.value),onKeyDown:d=>p(d)}),t("i",{className:"icon icon-pen navigator-search-button position-absolute",onClick:g})]})]})},_R=a=>{const[e,r]=i.exports.useState(!1),[n,s]=i.exports.useState(!1),[o,c]=i.exports.useState(!1),[u,g]=i.exports.useState(!1),[p,d]=i.exports.useState(!1),[h,C]=i.exports.useState(!1),[I,f]=i.exports.useState(!0),[_,E]=i.exports.useState(!1),{searchResult:b=null,topLevelContext:T=null,topLevelContexts:w=null,navigatorData:O=null}=kr(),R=i.exports.useRef(null),x=i.exports.useRef();ze(Wt.CREATED,k=>{r(!1),c(!1)});const F=i.exports.useCallback((k,y)=>{D(new hs(y,k)),C(!0)},[]),A=i.exports.useCallback(()=>{if(!n){E(!0);return}if(R.current){F(R.current.value,R.current.code),R.current=null;return}if(b){F(b.data,b.code);return}T&&F("",T.code)},[n,b,T,F]);return i.exports.useEffect(()=>{const k={linkReceived:y=>{const P=y.split("/");if(!(P.length<2))switch(P[1]){case"show":{r(!0),E(!0);return}case"hide":r(!1);return;case"toggle":{if(e){r(!1);return}r(!0),E(!0);return}case"toggle-room-info":g(G=>!G);return;case"toggle-room-link":d(G=>!G);return;case"goto":if(P.length<=2)return;switch(P[2]){case"home":if(O.homeRoomId<=0)return;Kt(O.homeRoomId);break;default:{const G=parseInt(P[2]);Kt(G)}}return;case"create":c(G=>!G);return;case"close-creator":c(!1);return;case"search":if(P.length>2){const G=P[2];let B="";P.length>3&&(B=P[3]),R.current={value:B,code:G},r(!0),E(!0)}return}},eventUrlPrefix:"navigator/"};return Ct(k),()=>_t(k)},[e,O]),i.exports.useEffect(()=>{b&&(C(!1),x&&x.current&&(x.current.scrollTop=0))},[b]),i.exports.useEffect(()=>{!e||!n||!_||(A(),E(!1))},[e,n,_,A]),i.exports.useEffect(()=>{n||!T||s(!0)},[n,T]),i.exports.useEffect(()=>{!e||!I||(D(new NC),f(!1))},[e,I]),i.exports.useEffect(()=>{Bs.addCallback(Ys.OPENROOM,(k,y=!1,P=null)=>D(new SC(k)))},[]),l(V,{children:[e&&l(se,{uniqueKey:"navigator",className:"nitro-navigator",children:[t(ne,{headerText:m("navigator.title"),onCloseClick:k=>r(!1)}),t(fn,{children:w&&w.length>0&&w.map((k,y)=>t(Zr,{isActive:T===k,onClick:P=>F("",k.code),children:m("navigator.toplevelview."+k.code)},y))}),l(re,{position:"relative",children:[h&&t(M,{fit:!0,position:"absolute",className:"top-0 start-0 z-index-1 bg-muted opacity-0-5"}),l(V,{children:[t(CR,{sendSearch:F}),t(S,{overflow:"auto",children:b&&b.results.map((k,y)=>t(ER,{searchResult:k},y))})]}),t(v,{className:"nav-bottom",children:l(v,{className:"nav-bottom-buttons position-absolute",children:[t(v,{className:"nav-create-room",onClick:k=>c(y=>!y),children:t(N,{variant:"white",bold:!0,className:"nav-bottom-buttons-text",children:m("navigator.createroom.create")})}),t(v,{className:"nav-random-room",children:t(N,{variant:"white",bold:!0,className:"nav-bottom-buttons-text",children:m("navigator.random.room")})})]})})]})]}),o&&t(cR,{}),t(iR,{}),u&&t(uR,{onCloseClick:()=>g(!1)}),p&&t(dR,{onCloseClick:()=>d(!1)}),t(IR,{})]})},bR=/\n\r|\n|\r/mg,NR=a=>{const[e,r]=i.exports.useState(null),[n,s]=i.exports.useState(""),[o,c]=i.exports.useState(null),u=i.exports.useRef(null);return i.exports.useEffect(()=>{const g=async d=>{try{const h=await fetch(d);if(!h)return;const I=(await h.text()).split(bR),f=I.shift().split("|");s(f[0]),c(_=>f[1]&&f[1].split(";").length===2?{width:parseInt(f[1].split(";")[0]),height:parseInt(f[1].split(";")[1])}:null),r(I.join(""))}catch{mu.error(`Failed to fetch ${d}`)}},p={linkReceived:d=>{const h=d.split("/");h.length<2||(h.shift(),g(K("habbopages.url")+h.join("/")))},eventUrlPrefix:"habbopages/"};return Ct(p),()=>_t(p)},[]),i.exports.useEffect(()=>{const g=p=>{if(!(p.target instanceof HTMLAnchorElement))return;p.preventDefault();const d=p.target.href;!d||!d.length||vs(d)};return document.addEventListener("click",g),()=>{document.removeEventListener("click",g)}},[]),e?l(se,{className:"nitropedia",theme:"primary",style:o?{width:o.width,height:o.height}:{},children:[t(ne,{headerText:n,onCloseClick:()=>r(null)}),t(re,{children:t(M,{fit:!0,innerRef:u,className:"text-black",dangerouslySetInnerHTML:{__html:e}})})]}):null},SR=a=>{const{offer:e=null,setOpen:r=null}=a;if(e)return l(ji,{fadesOut:!1,onClose:null,onClick:n=>r(!0),gap:2,children:[t(M,{className:"nitro-targeted-offer-icon",style:{backgroundImage:`url(${K("image.library.url")+e.iconImageUrl})`}}),t(N,{variant:"light",className:"ubuntu-bold",children:e.title})]})},TR=a=>{const{offer:e=null,setOpen:r=null}=a,{getCurrencyAmount:n}=Qn(),[s,o]=i.exports.useState(1),c=i.exports.useMemo(()=>{let p=!1,d=!1,h=!1;return e.priceInCredits>0&&(p=n(-1)>=e.priceInCredits),e.priceInActivityPoints>0?d=n(e.activityPointType)>=e.priceInActivityPoints:d=!0,e.purchaseLimit>0&&(h=!0),p&&d&&h},[e,n]),u=()=>{let p=Math.max(0,(e.expirationTime-Date.now())/1e3);return Tr.format(p)},g=()=>{D(new TC(e.id,s)),D(new Fu)};if(e)return l(se,{theme:"primary-slim",uniqueKey:"targeted-offer",className:"nitro-targeted-offer",children:[t(ne,{headerText:m(e.title),onCloseClick:p=>r(!1)}),t(bd,{position:"relative",className:"justify-content-center align-items-center cursor-pointer",variant:"danger",gap:3,children:m("targeted.offer.timeleft",["timeleft"],[u()])}),l(re,{gap:1,children:[l(v,{gap:1,fullHeight:!0,children:[l(v,{gap:1,column:!0,className:"w-75 text-black",children:[l(S,{className:"bg-warning p-2",fullHeight:!0,children:[t("h4",{children:m(e.title)}),t(M,{dangerouslySetInnerHTML:{__html:e.description}})]}),l(v,{alignSelf:"center",alignItems:"center",justifyContent:"center",gap:2,children:[e.purchaseLimit>1&&l(v,{gap:1,children:[t(N,{variant:"muted",children:m("catalog.bundlewidget.quantity")}),t("input",{type:"number",value:s,onChange:p=>o(parseInt(p.target.value)),min:1,max:e.purchaseLimit})]}),t(L,{variant:"primary",disabled:!c,onClick:()=>g(),children:m("targeted.offer.button.buy")})]})]}),t(M,{className:"w-50",fullHeight:!0,style:{background:`url(${K("image.library.url")+e.imageUrl}) no-repeat center`}})]}),l(v,{className:"price-ray position-absolute",alignItems:"center",justifyContent:"center",column:!0,children:[t(N,{children:m("targeted.offer.price.label")}),e.priceInCredits>0&&l(v,{gap:1,children:[t(N,{variant:"light",children:e.priceInCredits}),t(Et,{type:-1})]}),e.priceInActivityPoints>0&&l(v,{gap:1,children:[l(N,{className:"ubuntu-bold",variant:"light",children:["+",e.priceInActivityPoints]})," ",t(Et,{type:e.activityPointType})]})]})]})]})},vR=()=>{const[a,e]=i.exports.useState(null),[r,n]=i.exports.useState(!1);if(U(vC,s=>{let o=s.getParser();o&&e(o.data)}),zd(()=>{D(new Fu)}),!!a)return t(V,{children:r?t(TR,{offer:a,setOpen:n}):t(SR,{offer:a,setOpen:n})})},wR=a=>{const[e,r]=i.exports.useState(0),[n,s]=i.exports.useState(null),[o,c]=i.exports.useState(!0),{showConfirm:u=null}=Xe();U(Gu,C=>{r(0),s(null)}),U(Nu,C=>{r(0),s(null)}),U(Ts,C=>{const I=C.getParser();I.roomEnter&&(I.data.habboGroupId>0?(r(I.data.habboGroupId),D(new Gs(I.data.habboGroupId,!1))):(r(0),s(null)))}),U(wC,C=>{const I=C.getParser();!n||I.groupId!==n.id&&I.groupId!==e||(r(0),s(null))}),U(Ks,C=>{const I=C.getParser();I.id===e&&s(I)});const g=()=>{u(m("group.leaveconfirm.desc"),()=>{D(new Ri(n.id,H().userId))},null)},p=n&&n.ownerName===H().userName,d=()=>{if(p)return"group.manage";if(n.type===nr.PRIVATE)return"";if(n.membershipType===wt.MEMBER)return"group.leave";if(n.membershipType===wt.NOT_MEMBER&&n.type===nr.REGULAR)return"group.join";if(n.membershipType===wt.REQUEST_PENDING)return"group.membershippending";if(n.membershipType===wt.NOT_MEMBER&&n.type===nr.EXCLUSIVE)return"group.requestmembership"},h=()=>{if(p)return id(n.id);if(!(n.type===nr.PRIVATE&&n.membershipType===wt.NOT_MEMBER)){if(n.membershipType===wt.MEMBER){g();return}Fi(n.id)}};return n?t(M,{className:"nitro-notification-bubble",children:l(S,{children:[l(v,{className:"grouproom-header",alignItems:"center",justifyContent:"between",pointer:!0,onClick:C=>c(I=>!I),children:[t(N,{bold:!0,small:!0,className:"header-text p-1",variant:"white",children:m("group.homeroominfo.title")}),o&&t(ra,{className:"fa-icon"}),!o&&t(na,{className:"fa-icon"})]}),o&&t(V,{children:l(S,{className:"px-2 pb-2",children:[l(v,{pointer:!0,alignItems:"center",gap:2,onClick:C=>eo(n.id),children:[t(M,{className:"group-badge",children:t(je,{badgeCode:n.badge,isGroup:!0})}),t(N,{bold:!0,variant:"white",children:n.title})]}),(n.type!==nr.PRIVATE||p)&&t(L,{fullWidth:!0,className:"btn-flash fw-bold",disabled:n.membershipType===wt.REQUEST_PENDING,onClick:h,children:m(d())})]})})]})}):null},RR=a=>{const{title:e="Nitro",onClose:r=null,...n}=a;return t(ca,{title:e,onClose:r,...n,children:l(le,{children:[t(S,{center:!0,size:5,children:t("object",{data:"https://assets.nitrodev.co/logos/nitro-n-dark.svg",width:"100",height:"100",children:" "})}),l(S,{size:7,children:[l(S,{alignItems:"center",gap:0,children:[t(N,{bold:!0,fontSize:4,children:"Nitro React"}),l(N,{children:["v",ad()]})]}),l(S,{alignItems:"center",children:[l(N,{children:[t("b",{children:"Renderer:"})," v",ab()]}),l(S,{fullWidth:!0,gap:1,children:[t(L,{fullWidth:!0,variant:"success",onClick:s=>window.open("https://discord.nitrodev.co"),children:"Discord"}),l(v,{gap:1,children:[t(L,{fullWidth:!0,onClick:s=>window.open("https://git.krews.org/nitro/nitro-react"),children:"Git"}),t(L,{fullWidth:!0,onClick:s=>window.open("https://git.krews.org/nitro/nitro-react/-/issues"),children:"Bug Report"})]})]})]})]}),t(S,{center:!0,size:5,children:t(S,{className:"flashui-logo"})}),l(S,{size:7,children:[l(S,{alignItems:"center",gap:0,children:[t(N,{bold:!0,fontSize:4,children:"Flash UI-edit"}),t(N,{small:!0,children:"is created by Robbis"})]}),l(S,{fullWidth:!0,gap:1,children:[t(L,{fullWidth:!0,variant:"success",onClick:s=>window.open("https://discord.gg/j3bqtZKAF3"),children:"Flash-UI Discord"}),l(v,{gap:1,children:[t(L,{fullWidth:!0,onClick:s=>window.open("https://git.krews.org/robbis1111/nitro-react-flashUI"),children:"Git"}),t(L,{fullWidth:!0,onClick:s=>window.open("https://git.krews.org/robbis1111/nitro-react-flashUI/-/issues"),children:"Bug Report"})]})]})]})]})})},xR=a=>{const{item:e=null,title:r=a.item&&a.item.title||"",onClose:n=null,...s}=a,[o,c]=i.exports.useState(!1),u=()=>{vs(e.clickUrl),n()},g=e.alertType===ue.DEFAULT;return l(ca,{title:r,onClose:n,...s,type:g?ue.DEFAULT:e.alertType,children:[l(v,{fullHeight:!0,overflow:"auto",gap:g||e.imageUrl&&!o?2:0,children:[e.imageUrl&&!o&&t("img",{src:e.imageUrl,alt:e.title,onError:()=>{c(!0)},className:"align-self-baseline"}),l(M,{classNames:["notification-text overflow-y-auto d-flex flex-column w-100",e.clickUrl&&!g?"justify-content-center":""],children:[e.messages.length>0&&e.messages.map((p,d)=>{const h=p.replace(/\r\n|\r|\n/g,"<br />");return t(M,{dangerouslySetInnerHTML:{__html:h}},d)}),e.clickUrl&&e.clickUrl.length>0&&e.imageUrl&&!o&&l(V,{children:[t("hr",{className:"my-2 w-100"}),t(L,{onClick:u,className:"align-self-center px-3",children:m(e.clickUrlText)})]})]})]}),(!e.imageUrl||e.imageUrl&&o)&&t(V,{children:l(S,{alignItems:"center",center:!0,gap:0,children:[t("hr",{className:"my-2 w-100"}),!e.clickUrl&&t(L,{onClick:n,children:m("generic.close")}),e.clickUrl&&e.clickUrl.length>0&&t(L,{onClick:u,children:m(e.clickUrlText)})]})})]})},yR=a=>{const{item:e=null,title:r=a.item&&a.item.title||"",onClose:n=null,...s}=a,[o,c]=i.exports.useState(""),[u,g]=i.exports.useState([]),p=()=>{vs(e.clickUrl),n()},d=C=>{let I=JSON.parse(e.messages[0]);g(I.filter(f=>f.includes(C))),c(C)};i.exports.useEffect(()=>{g(JSON.parse(e.messages[0]))},[e]);const h=e.clickUrl&&e.clickUrl.startsWith("event:");return l(ca,{title:r,onClose:n,...s,children:[t(v,{fullWidth:!0,alignItems:"center",position:"relative",children:t("input",{type:"text",className:"form-control form-control-sm",placeholder:m("generic.search"),value:o,onChange:C=>d(C.target.value)})}),t(S,{fullHeight:!0,className:"py-1",overflow:"hidden",children:t(Ue,{gap:1,columnCount:1,children:u&&u.map((C,I)=>t("span",{children:C},I))})}),t("hr",{className:"my-2"}),l(S,{alignItems:"center",center:!0,gap:1,children:[!h&&!e.clickUrl&&t(L,{onClick:n,children:m("generic.close")}),e.clickUrl&&e.clickUrl.length>0&&t(L,{onClick:p,children:m(e.clickUrlText)})]})]})},OR=(a,e)=>{if(!a)return null;const r={key:a.id,item:a,onClose:e};switch(a.alertType){case ue.NITRO:return t(RR,{...r});case ue.SEARCH:return t(yR,{...r});default:return t(xR,{...r})}},kR=a=>{const{item:e=null,onClose:r=null,...n}=a;return l(ji,{fadesOut:!1,className:"flex-column nitro-notification club-gift",onClose:r,...n,children:[l("div",{className:"d-flex gap-1 mb-2",children:[t(Et,{type:"hc",className:"flex-shrink-0"}),t("span",{className:"ms-1",children:m("notifications.text.club_gift")})]}),l("div",{className:"d-flex align-items-center justify-content-end gap-2",children:[t("button",{type:"button",className:"btn btn-success w-100 btn-sm",onClick:()=>vs(e.linkUrl),children:m("notifications.button.show_gift_list")}),t("span",{className:"text-decoration-underline cursor-pointer text-nowrap",onClick:r,children:m("notifications.button.later")})]})]})},AR=a=>{const{item:e=null,onClose:r=null,...n}=a,s=e.message.replace(/\r\n|\r|\n/g,"<br />");return l(ji,{onClose:r,gap:2,alignItems:"center",onClick:o=>e.linkUrl&&e.linkUrl.length&&vs(e.linkUrl),...n,children:[t(v,{center:!0,className:"bubble-image-container",children:e.iconUrl&&e.iconUrl.length&&t("img",{className:"no-select",src:e.iconUrl,alt:""})}),t(N,{wrap:!0,className:"notification-bubble-text",variant:"white",dangerouslySetInnerHTML:{__html:s}})]})},PR=(a,e)=>{if(!a)return null;const r={key:a.id,item:a,onClose:e};switch(a.notificationType){case $e.CLUBGIFT:return t(kR,{...r});default:return t(AR,{...r})}},DR=a=>{const{item:e=null,onClose:r=null,...n}=a,{message:s=null,onConfirm:o=null,onCancel:c=null,confirmText:u=null,cancelText:g=null,title:p=null}=e,d=()=>{o&&o(),r()},h=()=>{c&&c(),r()};return l(ca,{title:p,onClose:r,...n,type:ue.ALERT,children:[t(v,{grow:!0,center:!0,children:t(N,{children:s})}),l(v,{gap:1,children:[t(L,{fullWidth:!0,variant:"danger",onClick:h,children:g}),t(L,{fullWidth:!0,onClick:d,children:u})]})]})},MR=(a,e)=>{if(!a)return null;const r={key:a.id,item:a,onClose:e};switch(a.confirmType){default:return t(DR,{...r})}},LR=a=>{const{alerts:e=[],bubbleAlerts:r=[],confirms:n=[],closeAlert:s=null,closeBubbleAlert:o=null,closeConfirm:c=null}=Xe(),u=i.exports.useMemo(()=>{if(!e||!e.length)return null;const d=[];for(const h of e){const C=OR(h,()=>s(h));d.push(C)}return d},[e,s]),g=i.exports.useMemo(()=>{if(!r||!r.length)return null;const d=[];for(const h of r){const C=PR(h,()=>o(h));if(h.notificationType===$e.CLUBGIFT){d.unshift(C);continue}d.push(C)}return d},[r,o]),p=i.exports.useMemo(()=>{if(!n||!n.length)return null;const d=[];for(const h of n){const C=MR(h,()=>c(h));d.push(C)}return d},[n,c]);return l(V,{children:[t(S,{gap:1,children:g}),p,u]})},fc=a=>{const{type:e=-1,amount:r=-1,short:n=!1}=a,s=i.exports.useMemo(()=>l(v,{justifyContent:"end",pointer:!0,gap:1,className:"nitro-purse-button rounded",children:[t(N,{bold:!0,truncate:!0,textEnd:!0,variant:"white",grow:!0,children:n?D_(r):qo(r)}),t(Et,{type:e})]}),[r,n,e]);return n?t(ou,{placement:"left",overlay:t(Lm,{id:`tooltip-${e}`,children:qo(r)}),children:s}):s},UR=a=>{const{type:e=-1,amount:r=-1}=a;return t(v,{fullWidth:!0,justifyContent:"between",className:"nitro-purse-seasonal-currency nitro-notification "+K("currency.seasonal.color"),children:l(v,{fullWidth:!0,children:[t(N,{bold:!0,truncate:!0,fullWidth:!0,className:"seasonal-padding seasonal-bold",children:m(`purse.seasonal.currency.${e}`)}),t(N,{bold:!0,truncate:!0,variant:"white",className:"seasonal-amount text-end",children:qo(r)}),t(v,{className:"nitro-seasonal-box seasonal-padding",children:t(Et,{type:e})})]})})},FR=a=>{const{purse:e=null,hcDisabled:r=!1}=Qn(),n=i.exports.useMemo(()=>K("system.currency.types",[]),[]),s=i.exports.useMemo(()=>K("currency.display.number.short",!1),[]),o=(()=>{if(!e)return null;const u=e.clubPeriods*31+e.clubDays,g=e.minutesUntilExpiration;return e.clubLevel===ar.NO_CLUB?m("purse.clubdays.zero.amount.text"):g>-1&&g<60*24?Tr.shortFormat(g*60):Tr.shortFormat(u*86400)})(),c=(u,g=-1,p=!1)=>{if(!e||!e.activityPoints||!e.activityPoints.size)return null;const d=Array.from(e.activityPoints.keys()).filter(I=>n.indexOf(I)>=0);let h=0;for(;h<u;)d.shift(),h++;h=0;const C=[];for(const I of d){if(g>-1&&h===g)break;p?C.push(t(UR,{type:I,amount:e.activityPoints.get(I)},I)):C.push(t(fc,{type:I,amount:e.activityPoints.get(I),short:s},I)),h++}return C};return e?l(S,{className:"nitro-purse-container",gap:1,children:[t(v,{className:"nitro-purse nitro-notification p-2",children:l(le,{fullWidth:!0,gap:2,children:[l(S,{justifyContent:"center",size:r?8:4,gap:1,children:[t(fc,{type:-1,amount:e.credits,short:s}),c(0,2)]}),!r&&l(S,{center:!0,pointer:!0,size:4,gap:1,className:"nitro-purse-subscription",onClick:u=>Z("habboUI/open/hccenter"),children:[t(Et,{className:"club-text",type:"hc"}),t(N,{bold:!0,className:"club-text",children:o})]}),l(S,{justifyContent:"center",size:2,gap:1,children:[t(v,{center:!0,pointer:!0,className:"nitro-purse-right-button help p-1",onClick:u=>Z("help/show"),children:t(N,{small:!0,children:m("help.button.cfh")})}),t(v,{center:!0,pointer:!0,className:"nitro-purse-right-button disconnect p-1",onClick:u=>Z("disconnect"),children:t("i",{className:"icon icon-purse-disconnect"})}),t(v,{center:!0,pointer:!0,className:"nitro-purse-right-button settings p-1",onClick:u=>Z("user-settings/toggle"),children:t("i",{className:"icon icon-purse-settings"})})]})]})}),c(2,-1,!0)]}):null},GR={purple:9452386,blue:3891856,green:6459451,yellow:10658089,lilac:6897548,orange:10841125,turquoise:2661026,red:10104881},BR=a=>{const[e,r]=i.exports.useState(!0),[n,s]=i.exports.useState(""),[o,c]=i.exports.useState("");Bb(RC.MYSTERY_BOX_KEYS_UPDATE,g=>{s(g.keyColor),c(g.boxColor)});const u=g=>{const p=GR[g];return Qt.int2rgb(p)};return n===""&&o===""?null:t(M,{className:"nitro-notification-bubble rounded mysterybox-extension",children:l(S,{children:[l(v,{alignItems:"center",justifyContent:"between",pointer:!0,onClick:g=>r(p=>!p),children:[t(N,{variant:"white",children:m("mysterybox.tracker.title")}),e&&t(ra,{className:"fa-icon"}),!e&&t(na,{className:"fa-icon"})]}),e&&l(V,{children:[t(N,{variant:"white",children:m("mysterybox.tracker.description")}),l(v,{justifyContent:"center",alignItems:"center",gap:2,children:[t(Re,{className:"mysterybox-container",children:t("div",{className:"box-image flex-shrink-0",style:{backgroundColor:u(o)},children:t("div",{className:"chain-overlay-image"})})}),t(Re,{className:"mysterybox-container",children:t("div",{className:"key-image flex-shrink-0",style:{backgroundColor:u(n)},children:t("div",{className:"key-overlay-image"})})})]})]})]})})},VR=a=>{const{eventId:e=-1,eventName:r="",eventDescription:n="",setIsEditingPromote:s=null}=a,[o,c]=i.exports.useState(r),[u,g]=i.exports.useState(n),p=()=>{D(new xC(e,o,u)),s(!1)};return l(se,{className:"nitro-guide-tool",theme:"primary-slim",children:[t(ne,{headerText:m("navigator.eventsettings.editcaption"),onCloseClick:()=>s(!1)}),l(re,{className:"text-black",children:[l(S,{children:[t(N,{bold:!0,children:m("navigator.eventsettings.name")}),t("input",{type:"text",className:"form-control form-control-sm",placeholder:m("navigator.eventsettings.name"),maxLength:64,value:o,onChange:d=>c(d.target.value)})]}),l(S,{children:[t(N,{bold:!0,children:m("navigator.eventsettings.desc")}),t("textarea",{className:"form-control form-control-sm",placeholder:m("navigator.eventsettings.desc"),maxLength:64,value:u,onChange:d=>g(d.target.value)})]}),t(S,{children:t(L,{fullWidth:!0,disabled:!o||!u,variant:!o||!u?"danger":"success",onClick:d=>p(),children:m("navigator.eventsettings.edit")})})]})]})},HR=a=>{const{eventDescription:e="",setIsEditingPromote:r=null}=a,{setIsExtended:n}=Yi(),s=()=>{n(!0),Z("catalog/open/room_event")};return l(V,{children:[t(v,{alignItems:"center",gap:2,style:{overflowWrap:"anywhere"},children:t(N,{variant:"white",children:e})}),t("br",{}),t("br",{}),l(le,{className:"d-flex align-items-center justify-content-end gap-2",children:[t(L,{className:"btn btn-primary w-100 btn-sm",onClick:o=>r(!0),children:m("navigator.roominfo.editevent")}),t(L,{className:"btn btn-success w-100 btn-sm",onClick:o=>s(),children:m("roomad.extend.event")})]})]})},WR=a=>{const{eventDescription:e=""}=a;return l(V,{children:[t(v,{alignItems:"center",gap:2,style:{overflowWrap:"anywhere"},children:t(N,{variant:"white",children:e})}),t("br",{}),t("br",{}),t(S,{alignItems:"center",gap:1,children:l(M,{fullWidth:!0,overflow:"hidden",position:"relative",className:"bg-light-dark rounded",children:[t(v,{fit:!0,center:!0,position:"absolute",children:t(N,{variant:"white",center:!0,children:m("navigator.eventinprogress")})}),t(N,{children:" "})]})})]})},jR=a=>{const[e,r]=i.exports.useState(!1),[n,s]=i.exports.useState(!0),{promoteInformation:o,setPromoteInformation:c}=Yi();return U(Gu,u=>{c(null)}),o?t(V,{children:o.data.adId!==-1&&t(M,{className:"nitro-notification-bubble rounded",children:l(S,{children:[l(v,{alignItems:"center",justifyContent:"between",pointer:!0,onClick:u=>s(g=>!g),children:[t(N,{variant:"white",overflow:"hidden",children:o.data.eventName}),n&&t(ra,{className:"fa-icon"}),!n&&t(na,{className:"fa-icon"})]}),n&&H().userId!==o.data.ownerAvatarId&&t(WR,{eventDescription:o.data.eventDescription}),n&&H().userId===o.data.ownerAvatarId&&t(HR,{eventDescription:o.data.eventDescription,setIsEditingPromote:()=>r(!0)}),e&&t(VR,{eventId:o.data.adId,eventName:o.data.eventName,eventDescription:o.data.eventDescription,setIsEditingPromote:()=>r(!1)})]})})}):null},qR=a=>t("div",{className:"nitro-right-side",children:l(S,{position:"relative",gap:1,children:[t(FR,{}),t(wR,{}),t(BR,{}),t(vR,{}),t(jR,{}),t(LR,{})]})}),zR=a=>t("div",{className:"room-spectator"}),YR=a=>{const[e,r]=i.exports.useState(null),[n,s]=i.exports.useState(null),{chatStyleId:o=0}=En(),{roomSession:c=null}=Ge();U(yC,g=>{const p=g.getParser();if(!p)return;const d=c.userDataManager.getPetData(p.petId);d&&(r(d),s(p))});const u=(g,p)=>{!g||!p||c==null||c.sendChatMessage(`${g} ${p}`,o)};return!e||!n?null:l(se,{uniqueKey:"user-settings",className:"user-settings-window no-resize",theme:"primary-slim",children:[t(ne,{headerText:m("widgets.pet.commands.title"),onCloseClick:()=>s(null)}),l(re,{className:"text-black",children:[t(v,{alignItems:"center",justifyContent:"center",gap:2,children:l(le,{columnCount:2,children:[t(S,{fullWidth:!0,overflow:"hidden",className:"body-image pet p-1",children:t(dn,{figure:e.figure,posture:"std",direction:2})}),t(N,{variant:"black",small:!0,wrap:!0,children:e.name})]})}),t(le,{columnCount:2,children:n.commands&&n.commands.length>0&&n.commands.map((g,p)=>t(L,{disabled:!n.enabledCommands.includes(g),onClick:()=>u(e.name,m(`pet.command.${g}`)),children:m(`pet.command.${g}`)},p))})]})]})},Yt=a=>{const{justifyContent:e="center",alignItems:r="center",classNames:n=[],...s}=a,o=i.exports.useMemo(()=>{const c=["menu-header","pb-1"];return n.length&&c.push(...n),c},[n]);return t(v,{justifyContent:e,alignItems:r,classNames:o,...s})},$R=a=>{const{chatEvent:e=null,onClose:r=null}=a,[n,s]=i.exports.useState(e.chat==="${bot.skill.chatter.configuration.text.placeholder}"?"":e.chat),[o,c]=i.exports.useState(e.automaticChat),[u,g]=i.exports.useState(e.mixSentences),[p,d]=i.exports.useState(e.chatDelay),h=i.exports.useMemo(()=>Oi(ye().roomId,e.objectId,e.category,1),[e]),C=f=>f.replace(/;#;/g," ").replace(/\r\n|\r|\n/g,"\r"),I=()=>{const f=C(n)+";#;"+o+";#;"+p+";#;"+u;D(new nn(e.botId,Ne.SETUP_CHAT,f)),r()};return t(yn,{windowPosition:At.NOTHING,handleSelector:".drag-handler",dragStyle:{top:h.y,left:h.x},children:l(M,{className:"nitro-context-menu bot-chat",children:[t(Yt,{className:"drag-handler",children:m("bot.skill.chatter.configuration.title")}),l(S,{className:"p-1",children:[l(S,{gap:1,children:[t(N,{variant:"white",children:m("bot.skill.chatter.configuration.chat.text")}),t("textarea",{className:"form-control form-control-sm",placeholder:m("bot.skill.chatter.configuration.text.placeholder"),value:n,rows:7,onChange:f=>s(f.target.value)})]}),l(S,{gap:1,children:[l(v,{gap:1,alignItems:"center",justifyContent:"between",children:[t(N,{fullWidth:!0,variant:"white",children:m("bot.skill.chatter.configuration.automatic.chat")}),t("input",{type:"checkbox",className:"form-check-input",checked:o,onChange:f=>c(f.target.checked)})]}),l(v,{gap:1,alignItems:"center",justifyContent:"between",children:[t(N,{fullWidth:!0,variant:"white",children:m("bot.skill.chatter.configuration.markov")}),t("input",{type:"checkbox",className:"form-check-input",checked:u,onChange:f=>g(f.target.checked)})]}),l(v,{gap:1,alignItems:"center",justifyContent:"between",children:[t(N,{fullWidth:!0,variant:"white",children:m("bot.skill.chatter.configuration.chat.delay")}),t("input",{type:"number",className:"form-control form-control-sm",value:p,onChange:f=>d(f.target.valueAsNumber)})]})]}),l(v,{alignItems:"center",justifyContent:"between",gap:1,children:[t(L,{fullWidth:!0,variant:"primary",onClick:r,children:m("cancel")}),t(L,{fullWidth:!0,variant:"success",onClick:I,children:m("save")})]})]})]})})},Ic=-1,Ec=0,Cc=1,_c=2,bc=3,Nc=4,Sc=5,Tc=6,KR=a=>{const{item:e=null,onClose:r=null}=a,[n,s]=i.exports.useState(Ic),[o,c]=i.exports.useState(null),[u,g]=i.exports.useState(null),{roomSession:p=null}=Ge(),d=()=>{o&&q().selectRoomObject(p.roomId,o.roomIndex,Q.UNIT)},h=()=>{p.usePetProduct(e.requestRoomObjectId,o.webID),r()},C=i.exports.useMemo(()=>{if(!o||!u)return null;const I=new ps(o.figure),f=u.customParams.split(" "),_=parseInt(f[0]);switch(u.specialType){case ee.PET_SHAMPOO:{if(f.length<2)return null;const E=q().getPetColorResult(_,I.paletteId),b=q().getPetColorResultsForTag(_,f[1]);let T=-1;for(const w of b)if(w.breed===E.breed){T=parseInt(w.id);break}return t(dn,{typeId:I.typeId,paletteId:T,petColor:I.color,customParts:I.customParts,direction:2})}case ee.PET_CUSTOM_PART:{if(f.length<4)return null;const E=[],b=f[1].split(",").map(R=>parseInt(R)),T=f[2].split(",").map(R=>parseInt(R)),w=f[3].split(",").map(R=>parseInt(R));let O=0;for(;O<b.length;){const R=b[O],x=I.getCustomPart(R);let F=w[O];x!=null&&(F=x.paletteId),E.push(new Aa(R,T[O],F)),O++}return t(dn,{typeId:I.typeId,paletteId:I.paletteId,petColor:I.color,customParts:E,direction:2})}case ee.PET_CUSTOM_PART_SHAMPOO:{if(f.length<3)return null;const E=[],b=f[1].split(",").map(O=>parseInt(O)),T=f[2].split(",").map(O=>parseInt(O));let w=0;for(;w<b.length;){const O=b[w],R=I.getCustomPart(O);let x=-1;R!=null&&(x=R.partId),E.push(new Aa(b[w],x,T[w])),w++}return t(dn,{typeId:I.typeId,paletteId:I.paletteId,petColor:I.color,customParts:E,direction:2})}case ee.PET_SADDLE:{if(f.length<4)return null;const E=[],b=f[1].split(",").map(R=>parseInt(R)),T=f[2].split(",").map(R=>parseInt(R)),w=f[3].split(",").map(R=>parseInt(R));let O=0;for(;O<b.length;)E.push(new Aa(b[O],T[O],w[O])),O++;for(const R of I.customParts)b.indexOf(R.layerId)===-1&&E.push(R);return t(dn,{typeId:I.typeId,paletteId:I.paletteId,petColor:I.color,customParts:E,direction:2})}case ee.MONSTERPLANT_REBREED:case ee.MONSTERPLANT_REVIVAL:case ee.MONSTERPLANT_FERTILIZE:{let E="rip";const b=q().getRoomObject(p.roomId,o.roomIndex,Q.UNIT);if(b&&(E=b.model.getValue(te.FIGURE_POSTURE),E==="rip")){const T=o.petLevel;T<7?E=`grw${T}`:E="std"}return t(dn,{typeId:I.typeId,paletteId:I.paletteId,petColor:I.color,customParts:I.customParts,posture:E,direction:2})}}},[o,u,p]);return i.exports.useEffect(()=>{const I=p.userDataManager.getUserDataByIndex(e.id);c(I);const f=oa(p.roomId,e.requestRoomObjectId,Q.FLOOR);if(!f)return;g(f);let _=Ic;switch(f.specialType){case ee.PET_SHAMPOO:_=Ec;break;case ee.PET_CUSTOM_PART:_=Cc;break;case ee.PET_CUSTOM_PART_SHAMPOO:_=_c;break;case ee.PET_SADDLE:_=bc;break;case ee.MONSTERPLANT_REVIVAL:_=Nc;break;case ee.MONSTERPLANT_REBREED:_=Sc;break;case ee.MONSTERPLANT_FERTILIZE:_=Tc;break}s(_)},[p,e]),o?l(se,{className:"nitro-use-product-confirmation",children:[t(ne,{headerText:m("useproduct.widget.title",["name"],[o.name]),onCloseClick:r}),t(re,{center:!0,children:l(v,{gap:2,overflow:"hidden",children:[t(S,{children:t(M,{pointer:!0,className:"product-preview",onClick:d,children:C})}),l(S,{justifyContent:"between",overflow:"auto",children:[l(S,{gap:2,children:[n===Ec&&l(V,{children:[t(N,{children:m("useproduct.widget.text.shampoo",["productName"],[u.name])}),t(N,{children:m("useproduct.widget.info.shampoo")})]}),n===Cc&&l(V,{children:[t(N,{children:m("useproduct.widget.text.custompart",["productName"],[u.name])}),t(N,{children:m("useproduct.widget.info.custompart")})]}),n===_c&&l(V,{children:[t(N,{children:m("useproduct.widget.text.custompartshampoo",["productName"],[u.name])}),t(N,{children:m("useproduct.widget.info.custompartshampoo")})]}),n===bc&&l(V,{children:[t(N,{children:m("useproduct.widget.text.saddle",["productName"],[u.name])}),t(N,{children:m("useproduct.widget.info.saddle")})]}),n===Nc&&l(V,{children:[t(N,{children:m("useproduct.widget.text.revive_monsterplant",["productName"],[u.name])}),t(N,{children:m("useproduct.widget.info.revive_monsterplant")})]}),n===Sc&&l(V,{children:[t(N,{children:m("useproduct.widget.text.rebreed_monsterplant",["productName"],[u.name])}),t(N,{children:m("useproduct.widget.info.rebreed_monsterplant")})]}),n===Tc&&l(V,{children:[t(N,{children:m("useproduct.widget.text.fertilize_monsterplant",["productName"],[u.name])}),t(N,{children:m("useproduct.widget.info.fertilize_monsterplant")})]})]}),l(v,{alignItems:"center",justifyContent:"between",children:[t(L,{variant:"danger",onClick:r,children:m("useproduct.widget.cancel")}),t(L,{variant:"success",onClick:h,children:m("useproduct.widget.use")})]})]})]})})]}):null},j=a=>{const{disabled:e=!1,fullWidth:r=!0,justifyContent:n="center",alignItems:s="center",classNames:o=[],onClick:c=null,...u}=a,g=d=>{e||c&&c(d)},p=i.exports.useMemo(()=>{const d=["menu-item","list-item"];return e&&d.push("disabled"),o.length&&d.push(...o),d},[e,o]);return t(v,{fullWidth:r,justifyContent:n,alignItems:s,classNames:p,onClick:g,...u})},XR=a=>{const{justifyContent:e="center",alignItems:r="center",classNames:n=[],collapsed:s=!0,...o}=a,c=i.exports.useMemo(()=>{const u=["menu-bottom"];return n.length&&u.push(...n),u},[n]);return t(v,{justifyContent:e,alignItems:r,classNames:c,...o,children:t("i",{className:s?"icon icon-context-menu-arrow-up":"icon icon-context-menu-arrow-down"})})},QR=25,vc=3,JR=5e3,ZR=75,ss=10;let Wa=!1,Oo=null,ko=-1e6,ja=1;const en=a=>{const{objectId:e=-1,category:r=-1,userType:n=-1,fades:s=!1,onClose:o=null,position:c="absolute",classNames:u=[],style:g={},children:p=null,collapsable:d=!1,...h}=a,[C,I]=i.exports.useState({x:null,y:null}),[f,_]=i.exports.useState(1),[E,b]=i.exports.useState(!1),[T,w]=i.exports.useState(Wa),O=i.exports.useRef(),R=i.exports.useCallback(k=>{if(!E)return;ja+=k;let y=(1-ja/ZR)*1;if(y<=0)return o(),!1;_(y)},[E,o]),x=i.exports.useCallback((k,y)=>{if(!k||!y||!Oo)return;let P=-O.current.offsetHeight;n>-1&&(n===gt.USER||n===gt.BOT||n===gt.RENTABLE_BOT)?P=P+(k.height>50?15:0):P=P-14,Oo.addValue(y.y-k.top);let G=Oo.getMax();G<ko-vc&&(G=ko-vc),ko=G;const B=y.y-G;let Y=~~(y.x-O.current.offsetWidth/2),X=~~(B+P);const z=Ce().width-O.current.offsetWidth-ss,Ee=Ce().height-O.current.offsetHeight-ss;Y<ss?Y=ss:Y>z&&(Y=z),X<ss?X=ss:X>Ee&&(X=Ee),I({x:Y,y:X})},[n]),F=i.exports.useMemo(()=>{const k=["nitro-context-menu"];return T&&k.push("menu-hidden"),k.push(C.x!==null?"visible":"invisible"),u.length&&k.push(...u),k},[C,u,T]),A=i.exports.useMemo(()=>{let k={};return k.left=C.x||0,k.top=C.y||0,k.opacity=f,Object.keys(g).length&&(k={...k,...g}),k},[C,f,g]);return i.exports.useEffect(()=>{if(!O.current)return;const k=y=>{if(!O.current)return;R(y);const P=Oi(ye().roomId,e,r),G=Xu(ye().roomId,e,r);x(P,G)};return mn().add(k),()=>{mn().remove(k)}},[e,r,R,x]),i.exports.useEffect(()=>{if(!s)return;const k=setTimeout(()=>b(!0),JR);return()=>clearTimeout(k)},[s]),i.exports.useEffect(()=>{Wa=T},[T]),i.exports.useEffect(()=>{Oo=new OC(QR),ko=-1e6,ja=1},[]),l(M,{innerRef:O,position:c,classNames:F,style:A,...h,children:[!(d&&Wa)&&p,d&&t(XR,{onClick:()=>w(!T),collapsed:T})]})},wc=0,Rc=1,xc=2,yc=3,Oc=4,kc=5,Ac=6,Pc=7,ex=a=>{const{item:e=null,updateConfirmingProduct:r=null,onClose:n=null}=a,[s,o]=i.exports.useState(0),{roomSession:c=null}=Ge(),u=g=>{if(g)switch(g){case"use_product":case"use_product_shampoo":case"use_product_custom_part":case"use_product_custom_part_shampoo":case"use_product_saddle":case"replace_product_saddle":case"revive_monsterplant":case"rebreed_monsterplant":case"fertilize_monsterplant":r(e);break}};return i.exports.useEffect(()=>{if(!e)return;const g=oa(c.roomId,e.requestRoomObjectId,Q.FLOOR);if(!g)return;let p=wc;switch(g.specialType){case ee.PET_SHAMPOO:p=Rc;break;case ee.PET_CUSTOM_PART:p=xc;break;case ee.PET_CUSTOM_PART_SHAMPOO:p=yc;break;case ee.PET_SADDLE:p=Oc;break;case ee.MONSTERPLANT_REVIVAL:p=kc;break;case ee.MONSTERPLANT_REBREED:p=Ac;break;case ee.MONSTERPLANT_FERTILIZE:p=Pc;break}o(p)},[c,e]),l(en,{objectId:e.id,category:Q.UNIT,userType:gt.PET,onClose:n,collapsable:!0,children:[t(Yt,{children:e.name}),s===wc&&t(j,{onClick:g=>u("use_product"),children:m("infostand.button.useproduct")}),s===Rc&&t(j,{onClick:g=>u("use_product_shampoo"),children:m("infostand.button.useproduct_shampoo")}),s===xc&&t(j,{onClick:g=>u("use_product_custom_part"),children:m("infostand.button.useproduct_custom_part")}),s===yc&&t(j,{onClick:g=>u("use_product_custom_part_shampoo"),children:m("infostand.button.useproduct_custom_part_shampoo")}),s===Oc&&l(V,{children:[e.replace&&t(j,{onClick:g=>u("replace_product_saddle"),children:m("infostand.button.replaceproduct_saddle")}),!e.replace&&t(j,{onClick:g=>u("use_product_saddle"),children:m("infostand.button.useproduct_saddle")})]}),s===kc&&t(j,{onClick:g=>u("revive_monsterplant"),children:m("infostand.button.revive_monsterplant")}),s===Ac&&t(j,{onClick:g=>u("rebreed_monsterplant"),children:m("infostand.button.rebreed_monsterplant")}),s===Pc&&t(j,{onClick:g=>u("fertilize_monsterplant"),children:m("infostand.button.fertilize_monsterplant")})]})},tx=a=>{const{avatarInfo:e=null,onClose:r=null}=a;return e?t(S,{className:"nitro-infostand rounded",children:l(S,{overflow:"visible",className:"container-fluid content-area",gap:1,children:[l(S,{gap:1,children:[l(v,{alignItems:"center",justifyContent:"between",gap:1,children:[t(N,{variant:"white",small:!0,wrap:!0,children:e.name}),t(xn,{className:"cursor-pointer fa-icon",onClick:r})]}),t("hr",{className:"m-0"})]}),l(S,{gap:1,children:[l(v,{gap:1,children:[t(S,{fullWidth:!0,className:"body-image bot",children:t(st,{figure:e.figure,direction:4})}),t(S,{grow:!0,center:!0,gap:0,children:e.badges.length>0&&e.badges.map(n=>t(je,{badgeCode:n,showInfo:!0},n))})]}),t("hr",{className:"m-0"})]}),t(v,{alignItems:"center",className:"bg-light-dark rounded py-1 px-2",children:t(N,{fullWidth:!0,wrap:!0,textBreak:!0,variant:"white",small:!0,className:"motto-content",children:e.motto})}),e.carryItem>0&&l(S,{gap:1,children:[t("hr",{className:"m-0"}),t(N,{variant:"white",small:!0,wrap:!0,children:m("infostand.text.handitem",["item"],[m("handitem"+e.carryItem)])})]})]})}):null},qa=0,Dc=1,Mc=2,rx=a=>{const{avatarInfo:e=null,onClose:r=null}=a,{roomSession:n=null}=Ge(),[s,o]=i.exports.useState(0),[c,u]=i.exports.useState(!1),[g,p]=i.exports.useState(!1),[d,h]=i.exports.useState(!1),[C,I]=i.exports.useState([]),[f,_]=i.exports.useState([]),[E,b]=i.exports.useState([]),[T,w]=i.exports.useState([]),[O,R]=i.exports.useState(!1),[x,F]=i.exports.useState(0),[A,k]=i.exports.useState(0),[y,P]=i.exports.useState(!1),[G,B]=i.exports.useState(!1),[Y,X]=i.exports.useState(null),[z,Ee]=i.exports.useState(!1),[ie,Pe]=i.exports.useState(!1),[Qe,pt]=i.exports.useState(-1),[Ze,Ft]=i.exports.useState(""),[We,qt]=i.exports.useState("");Gn(Su.NPE_SONG_CHANGED,de=>{pt(de.id)},z||ie),Gn(AC.SIR_TRAX_SONG_INFO_RECEIVED,de=>{if(de.id!==Qe)return;const Oe=Ce().soundManager.musicController.getSongInfo(de.id);Oe&&(Ft(Oe.name),qt(Oe.creator))},z||ie),i.exports.useEffect(()=>{let de=qa,Oe=!1,ot=!1,Zt=!1,fe=[],Me=[],Cr=[],On=[],er=!1,oo=0,Rs=0,kn=!1,An=!1,Zn=!1,xs=!1,_n=-1;const Pn=e.roomControllerLevel>=tt.GUEST;if((Pn||e.isOwner||e.isRoomOwner||e.isAnyRoomController)&&(Oe=!0,ot=!e.isWallItem,e.roomControllerLevel>=tt.MODERATOR&&(kn=!0)),e.isAnyRoomController&&(An=!0),(e.usagePolicy===Nl.EVERYBODY||e.usagePolicy===Nl.CONTROLLER&&Pn||e.extraParam===sn.JUKEBOX&&Pn||e.extraParam===sn.USABLE_PRODUCT&&Pn)&&(Zt=!0),e.extraParam){if(e.extraParam===sn.CRACKABLE_FURNI){const Gt=e.stuffData;Zt=!0,er=!0,oo=Gt.hits,Rs=Gt.target}else if(e.extraParam===sn.JUKEBOX){const Gt=Ce().soundManager.musicController.getRoomItemPlaylist();Gt&&(_n=Gt.nowPlayingSongId),Zn=!0}else e.extraParam.indexOf(sn.SONGDISK)===0&&(_n=parseInt(e.extraParam.substr(sn.SONGDISK.length)),xs=!0);if(kn){const Gt=e.extraParam.substr(sn.BRANDING_OPTIONS.length);if(Gt){const Br=Gt.split("	");for(const es of Br){const Vr=es.split("=");Vr&&Vr.length===2&&(fe.push(Vr[0]),Me.push(Vr[1]))}}}}if(kn){const Gt=q().getRoomObject(n.roomId,e.id,e.isWallItem?Q.WALL:Q.FLOOR);if(Gt){const Br=Gt.model.getValue(te.FURNITURE_CUSTOM_VARIABLES),es=Gt.model.getValue(te.FURNITURE_DATA);if(Br&&Br.length)for(const Vr of Br)Cr.push(Vr),On.push(es[Vr]||"")}}e.isOwner||e.isAnyRoomController?de=Mc:(e.isRoomOwner||e.roomControllerLevel>=tt.GUILD_ADMIN)&&(de=Dc),e.isStickie&&(de=qa),o(de),u(Oe),p(ot),h(Zt),I(fe),_(Me),b(Cr),w(On),R(er),F(oo),k(Rs),P(kn),B(An),X(null),Ee(Zn),Pe(xs),pt(_n),e.groupId&&D(new Gs(e.groupId,!1))},[n,e]),U(Ks,de=>{const Oe=de.getParser();!e||e.groupId!==Oe.id||Oe.flag||(Y&&X(null),X(Oe.title))}),i.exports.useEffect(()=>{const de=Ce().soundManager.musicController.getSongInfo(Qe);Ft((de==null?void 0:de.name)??""),qt((de==null?void 0:de.creator)??"")},[Qe]);const Er=i.exports.useCallback((de,Oe)=>{const ot=Array.from(f);ot[de]=Oe,_(ot)},[f]),Fe=i.exports.useCallback((de,Oe)=>{const ot=Array.from(T);ot[de]=Oe,w(ot)},[T]),Ie=i.exports.useCallback(()=>{if(C.length===0||f.length===0)return"";let de="",Oe=0;for(;Oe<C.length;){const ot=C[Oe],Zt=f[Oe];de=de+(ot+"="+Zt+"	"),Oe++}return de},[C,f]),Ye=i.exports.useCallback(de=>{if(!(!de||de===""))switch(de){case"buy_one":Z(`catalog/open/offerId/${e.purchaseOfferId}`);return;case"move":q().processRoomObjectOperation(e.id,e.category,Dr.OBJECT_MOVE);break;case"rotate":q().processRoomObjectOperation(e.id,e.category,Dr.OBJECT_ROTATE_POSITIVE);break;case"pickup":s===Mc?q().processRoomObjectOperation(e.id,e.category,Dr.OBJECT_PICKUP):q().processRoomObjectOperation(e.id,e.category,Dr.OBJECT_EJECT);break;case"use":q().useRoomObject(e.id,e.category);break;case"save_branding_configuration":{const Oe=new Map,ot=Ie().split("	");if(ot)for(const Zt of ot){const[fe,Me]=Zt.split("=",2);Oe.set(fe,Me)}q().modifyRoomObjectDataWithMap(e.id,e.category,Dr.OBJECT_SAVE_STUFF_DATA,Oe);break}case"save_custom_variables":{const Oe=new Map;for(let ot=0;ot<E.length;ot++){const Zt=E[ot],fe=T[ot];Zt&&Zt.length&&fe&&fe.length&&Oe.set(Zt,fe)}D(new kC(e.id,Oe));break}}},[e,s,E,T,Ie]),yt=i.exports.useCallback(()=>{const de=e.stuffData;return!de||!(de instanceof $s)?null:de.getValue(2)},[e]);return e?l(S,{gap:1,alignItems:"end",children:[t(S,{className:"nitro-infostand",children:l(S,{overflow:"visible",className:"container-fluid content-area",gap:1,children:[l(S,{gap:1,children:[l(v,{alignItems:"center",justifyContent:"between",gap:1,children:[t(N,{gfbold:!0,variant:"white",wrap:!0,children:e.name}),t("i",{className:"infostand-close",onClick:r})]}),t("hr",{className:"m-0"})]}),l(S,{gap:1,children:[l(v,{position:"relative",gap:1,children:[e.stuffData.isUnique&&t("div",{className:"position-absolute end-0",children:t(Td,{uniqueNumber:e.stuffData.uniqueNumber,uniqueSeries:e.stuffData.uniqueSeries})}),e.stuffData.rarityLevel>-1&&t("div",{className:"position-absolute end-0",children:t(wd,{level:e.stuffData.rarityLevel})}),e.image&&e.image.src.length&&t("img",{className:"d-block mx-auto",src:e.image.src,alt:""})]}),t("hr",{className:"m-0"})]}),l(S,{gap:1,children:[t(N,{fullWidth:!0,wrap:!0,textBreak:!0,variant:"white",children:e.description}),t("hr",{className:"m-0"})]}),l(S,{gap:1,children:[l(v,{alignItems:"center",gap:1,children:[t(hr,{userId:e.ownerId}),t(N,{variant:"white",wrap:!0,children:m("furni.owner",["name"],[e.ownerName])})]}),e.purchaseOfferId>0&&t(v,{children:t(L,{className:"volter-button",onClick:de=>Ye("buy_one"),children:m("infostand.button.buy")})})]}),(z||ie)&&l(S,{gap:1,children:[t("hr",{className:"m-0"}),Qe===-1&&t(N,{variant:"white",small:!0,wrap:!0,children:m("infostand.jukebox.text.not.playing")}),!!Ze.length&&l(v,{alignItems:"center",gap:1,children:[t(M,{className:"icon disk-icon"}),t(N,{variant:"white",small:!0,wrap:!0,children:Ze})]}),!!We.length&&l(v,{alignItems:"center",gap:1,children:[t(M,{className:"icon disk-creator"}),t(N,{variant:"white",small:!0,wrap:!0,children:We})]})]}),l(S,{gap:1,children:[O&&l(V,{children:[t("hr",{className:"m-0"}),t(N,{variant:"white",wrap:!0,children:m("infostand.crackable_furni.hits_remaining",["hits","target"],[x.toString(),A.toString()])})]}),e.groupId>0&&l(V,{children:[t("hr",{className:"m-0"}),l(v,{pointer:!0,alignItems:"center",gap:2,onClick:()=>eo(e.groupId),children:[t(je,{badgeCode:yt(),isGroup:!0}),t(N,{variant:"white",underline:!0,children:Y})]})]}),y&&l(V,{children:[t("hr",{className:"m-0"}),G&&l(N,{wrap:!0,variant:"white",children:["ID: ",e.id]}),C.length>0&&l(V,{children:[t("hr",{className:"m-0"}),t(S,{gap:1,children:C.map((de,Oe)=>l(v,{alignItems:"center",gap:1,children:[t(N,{wrap:!0,align:"end",variant:"white",className:"col-4",children:de}),t("input",{type:"text",className:"form-control form-control-sm",value:f[Oe],onChange:ot=>Er(Oe,ot.target.value)})]},Oe))})]})]}),E.length>0&&l(V,{children:[t("hr",{className:"m-0 my-1"}),t(S,{gap:1,children:E.map((de,Oe)=>l(v,{alignItems:"center",gap:1,children:[t(N,{small:!0,wrap:!0,align:"end",variant:"white",className:"col-4",children:de}),t("input",{type:"text",className:"form-control form-control-sm",value:T[Oe],onChange:ot=>Fe(Oe,ot.target.value)})]},Oe))})]})]})]})}),l(v,{gap:2,justifyContent:"end",children:[c&&t(L,{className:"infostand-buttons px-2",onClick:de=>Ye("move"),children:m("infostand.button.move")}),g&&t(L,{className:"infostand-buttons px-2",onClick:de=>Ye("rotate"),children:m("infostand.button.rotate")}),s!==qa&&t(L,{className:"infostand-buttons px-2",onClick:de=>Ye("pickup"),children:m(s===Dc?"infostand.button.eject":"infostand.button.pickup")}),d&&t(L,{className:"infostand-buttons px-2",onClick:de=>Ye("use"),children:m("infostand.button.use")}),C.length>0&&f.length>0&&C.length===f.length&&t(L,{className:"infostand-buttons px-2",onClick:()=>Ye("save_branding_configuration"),children:m("save")}),E.length>0&&T.length>0&&E.length===T.length&&t(L,{className:"infostand-buttons px-2",onClick:()=>Ye("save_custom_variables"),children:m("save")})]})]}):null},nx=a=>{const{avatarInfo:e=null,onClose:r=null}=a,[n,s]=i.exports.useState(0),[o,c]=i.exports.useState(0);return Ge(),En(),i.exports.useEffect(()=>{s(e.remainingGrowTime),c(e.remainingTimeToLive)},[e]),i.exports.useEffect(()=>{if(e.petType!==qr.MONSTERPLANT||e.dead)return;const u=setInterval(()=>{s(g=>g-1),c(g=>g-1)},1e3);return()=>clearInterval(u)},[e]),e?t(S,{className:"nitro-infostand rounded",children:l(S,{overflow:"visible",className:"container-fluid content-area",gap:1,children:[l(S,{gap:1,children:[l(v,{alignItems:"center",justifyContent:"between",gap:1,children:[t(N,{variant:"white",small:!0,wrap:!0,children:e.name}),t(Ss,{className:"fa-icon",onClick:r})]}),t(N,{variant:"white",small:!0,wrap:!0,children:m(`pet.breed.${e.petType}.${e.petBreed}`)}),t("hr",{className:"m-0"})]}),l(S,{gap:1,children:[l(v,{gap:1,children:[t(S,{fullWidth:!0,overflow:"hidden",className:"body-image pet p-1",children:t(dn,{figure:e.petFigure,posture:e.posture,direction:4})}),l(S,{grow:!0,gap:1,children:[t(N,{variant:"white",center:!0,small:!0,wrap:!0,children:m("pet.level",["level","maxlevel"],[e.level.toString(),e.maximumLevel.toString()])}),l(S,{alignItems:"center",gap:1,children:[t(N,{variant:"white",truncate:!0,children:m("infostand.pet.text.happiness")}),l(M,{fullWidth:!0,overflow:"hidden",position:"relative",className:"bg-light-dark rounded",children:[t(v,{fit:!0,center:!0,position:"absolute",children:t(N,{variant:"white",small:!0,children:e.happyness+"/"+e.maximumHappyness})}),t(M,{className:"bg-info rounded pet-stats",style:{width:e.happyness/e.maximumHappyness*100+"%"}})]})]}),l(S,{alignItems:"center",gap:1,children:[t(N,{variant:"white",truncate:!0,children:m("infostand.pet.text.experience")}),l(M,{fullWidth:!0,overflow:"hidden",position:"relative",className:"bg-light-dark rounded",children:[t(v,{fit:!0,center:!0,position:"absolute",children:t(N,{variant:"white",small:!0,children:e.experience+"/"+e.levelExperienceGoal})}),t(M,{className:"bg-purple rounded pet-stats",style:{width:e.experience/e.levelExperienceGoal*100+"%"}})]})]}),l(S,{alignItems:"center",gap:1,children:[t(N,{variant:"white",truncate:!0,children:m("infostand.pet.text.energy")}),l(M,{fullWidth:!0,overflow:"hidden",position:"relative",className:"bg-light-dark rounded",children:[t(v,{fit:!0,center:!0,position:"absolute",children:t(N,{variant:"white",small:!0,children:e.energy+"/"+e.maximumEnergy})}),t(M,{className:"bg-success rounded pet-stats",style:{width:e.energy/e.maximumEnergy*100+"%"}})]})]})]})]}),t("hr",{className:"m-0"})]}),l(S,{gap:1,children:[t(N,{variant:"white",small:!0,wrap:!0,children:m("infostand.text.petrespect",["count"],[e.respect.toString()])}),t(N,{variant:"white",small:!0,wrap:!0,children:m("pet.age",["age"],[e.age.toString()])}),t("hr",{className:"m-0"})]}),t(S,{gap:1,children:l(v,{alignItems:"center",gap:1,children:[t(hr,{userId:e.ownerId}),t(N,{variant:"white",small:!0,wrap:!0,children:m("infostand.text.petowner",["name"],[e.ownerName])})]})})]})}):null},sx=a=>{const{avatarInfo:e=null,onClose:r=null}=a,n=i.exports.useMemo(()=>!(e.botSkills.indexOf(Ne.NO_PICK_UP)>=0||!e.amIOwner&&!e.amIAnyRoomController),[e]),s=()=>D(new Bu(e.webID));if(e)return l(S,{gap:1,children:[t(S,{className:"nitro-infostand rounded",children:l(S,{overflow:"visible",className:"container-fluid content-area",gap:1,children:[l(S,{gap:1,children:[l(v,{alignItems:"center",justifyContent:"between",gap:1,children:[t(N,{variant:"white",small:!0,wrap:!0,children:e.name}),t(xn,{className:"cursor-pointer fa-icon",onClick:r})]}),t("hr",{className:"m-0"})]}),l(S,{gap:1,children:[l(v,{gap:1,children:[t(S,{fullWidth:!0,className:"body-image bot",children:t(st,{figure:e.figure,direction:4})}),t(S,{grow:!0,center:!0,gap:0,children:e.badges.length>0&&e.badges.map(o=>t(je,{badgeCode:o,showInfo:!0},o))})]}),t("hr",{className:"m-0"})]}),l(S,{gap:1,children:[t(v,{alignItems:"center",className:"bg-light-dark rounded py-1 px-2",children:t(N,{fullWidth:!0,wrap:!0,textBreak:!0,variant:"white",className:"motto-content",children:e.motto})}),t("hr",{className:"m-0"})]}),l(S,{gap:1,children:[l(v,{alignItems:"center",gap:1,children:[t(hr,{userId:e.ownerId}),t(N,{variant:"white",wrap:!0,children:m("infostand.text.botowner",["name"],[e.ownerName])})]}),e.carryItem>0&&l(V,{children:[t("hr",{className:"m-0"}),t(N,{variant:"white",wrap:!0,children:m("infostand.text.handitem",["item"],[m("handitem"+e.carryItem)])})]})]})]})}),n&&t(v,{justifyContent:"end",children:t(L,{className:"infostand-buttons",onClick:s,children:m("infostand.button.pickup")})})]})},ox=a=>{const{relationships:e=null}=a,r=({type:n})=>{const s=e&&e.relationshipStatusMap.hasKey(n)?e.relationshipStatusMap.getValue(n):null;if(!s||!s.friendCount)return null;const o=Sn.RELATIONSHIP_NAMES[n].toLocaleLowerCase();return l(v,{alignItems:"center",gap:1,children:[t("i",{className:`nitro-friends-spritesheet icon-${o}`}),t(v,{alignItems:"center",gap:0,children:l(N,{gfbold:!0,variant:"white",onClick:c=>jt(s.randomFriendId),children:[t("u",{children:s.randomFriendName}),s.friendCount>1&&" "+m(`extendedprofile.relstatus.others.${o}`,["count"],[(s.friendCount-1).toString()])]})})]})};return l(V,{children:[t(r,{type:Sn.HEART}),t(r,{type:Sn.SMILE}),t(r,{type:Sn.BOBBA})]})},ax=a=>{Z(`navigator/search/${a}`),D(new hs("hotel_view",`tag:${a}`))},ix=a=>{const{tags:e=null}=a;return!e||!e.length?null:l(V,{children:[t("hr",{className:"m-0"}),t(v,{className:"flex-tags",children:e&&e.length>0&&e.map((r,n)=>t(N,{variant:"white",className:"text-tags",onClick:s=>ax(r),children:r},n))})]})},lx=a=>{const{avatarInfo:e=null,setAvatarInfo:r=null,onClose:n=null}=a,[s,o]=i.exports.useState(null),[c,u]=i.exports.useState(!1),[g,p]=i.exports.useState(null),{roomSession:d=null}=Ge(),h=f=>{!c||f.length>K("motto.max.length",38)||(d.sendMottoMessage(f),u(!1))},C=f=>h(f.target.value),I=f=>{switch(f.stopPropagation(),f.key){case"Enter":h(f.target.value);return}};return ze(PC.RSUBE_BADGES,f=>{!e||e.webID!==f.userId||e.badges.join("")===f.badges.join("")||r(E=>{const b=$t(E);return b.badges=f.badges,b})}),ze(DC.USER_FIGURE,f=>{!e||e.roomIndex!==f.roomIndex||r(_=>{const E=$t(_);return E.figure=f.figure,E.motto=f.customInfo,E.achievementScore=f.activityPoints,E})}),ze(MC.FAVOURITE_GROUP_UPDATE,f=>{!e||e.roomIndex!==f.roomIndex||r(_=>{const E=$t(_),b=f.status===-1||f.habboGroupId<=0;return E.groupId=b?-1:f.habboGroupId,E.groupName=b?null:f.habboGroupName,E.groupBadgeId=b?null:H().getGroupBadge(f.habboGroupId),E})}),U(Vu,f=>{const _=f.getParser();!e||e.webID!==_.userId||p(_)}),i.exports.useEffect(()=>(u(!1),o(e.motto),D(new Hu(e.webID)),()=>{u(!1),o(null),p(null)}),[e]),e?t(S,{className:"nitro-infostand rounded",children:l(S,{overflow:"visible",className:"container-fluid content-area",gap:1,children:[l(S,{gap:1,children:[l(v,{alignItems:"center",justifyContent:"between",children:[l(v,{alignItems:"center",gap:1,children:[t("i",{className:"icon icon-profile-house cursor-pointer",onClick:f=>jt(e.webID)}),t(N,{gfbold:!0,variant:"white",className:"infostand-name",onClick:f=>jt(e.webID),children:e.name})]}),t(xn,{className:"cursor-pointer fa-icon",onClick:n})]}),t("hr",{className:"m-0"})]}),l(S,{gap:1,children:[l(v,{gap:1,children:[t(S,{fullWidth:!0,className:"body-image infostand-thumb-bg",onClick:f=>jt(e.webID),children:t(st,{figure:e.figure,direction:4})}),l(S,{grow:!0,alignItems:"center",gap:0,children:[l(v,{gap:1,children:[t(M,{className:"badge-image",children:e.badges[0]&&t(je,{badgeCode:e.badges[0],showInfo:!0})}),t(M,{pointer:e.groupId>0,className:"badge-image",onClick:f=>eo(e.groupId),children:e.groupId>0&&t(je,{badgeCode:e.groupBadgeId,isGroup:!0,showInfo:!0,customTitle:e.groupName})})]}),l(v,{gap:1,children:[t(M,{className:"badge-image",children:e.badges[1]&&t(je,{badgeCode:e.badges[1],showInfo:!0})}),t(M,{className:"badge-image",children:e.badges[2]&&t(je,{badgeCode:e.badges[2],showInfo:!0})})]}),l(v,{gap:1,children:[t(M,{className:"badge-image",children:e.badges[3]&&t(je,{badgeCode:e.badges[3],showInfo:!0})}),t(M,{className:"badge-image",children:e.badges[4]&&t(je,{badgeCode:e.badges[4],showInfo:!0})})]})]})]}),t("hr",{className:"m-0"})]}),l(S,{gap:1,children:[l(v,{alignItems:"center",className:"infostand-thumb-bg py-1 px-2",children:[e.type!==et.OWN_USER&&t(v,{grow:!0,alignItems:"center",className:"motto-content",children:t(N,{fullWidth:!0,pointer:!0,wrap:!0,textBreak:!0,variant:"white",children:s})}),e.type===et.OWN_USER&&l(v,{grow:!0,alignItems:"center",gap:2,children:[t(Um,{className:"small fa-icon"}),l(v,{grow:!0,alignItems:"center",className:"motto-content",children:[!c&&l(N,{fullWidth:!0,pointer:!0,wrap:!0,textBreak:!0,variant:"white",onClick:f=>u(!0),children:[s," "]}),c&&t("input",{type:"text",className:"motto-input",maxLength:K("motto.max.length",38),value:s,onChange:f=>o(f.target.value),onBlur:C,onKeyDown:I,autoFocus:!0})]})]})]}),t("hr",{className:"m-0"})]}),l(S,{gap:1,children:[t(N,{gfbold:!0,variant:"white",wrap:!0,children:m("infostand.text.achievement_score")+" "+e.achievementScore}),e.carryItem>0&&l(V,{children:[t("hr",{className:"m-0"}),t(N,{gfbold:!0,variant:"white",wrap:!0,children:m("infostand.text.handitem",["item"],[m("handitem"+e.carryItem)])})]})]}),t(S,{gap:1,children:t(ox,{relationships:g})}),K("user.tags.enabled")&&t(S,{gap:1,className:"mt-1",children:t(ix,{tags:H().tags})})]})}):null},Ao=0,za=1,Lc=2,Uc=3,Ya=4,Fc=5,Gc=6,cx=a=>{const{avatarInfo:e=null,onClose:r=null}=a,[n,s]=i.exports.useState(Ao),{canRequestFriend:o=null}=cr(),{report:c=null}=Or(),{roomSession:u=null}=Ge(),{userRespectRemaining:g=0,respectUser:p=null}=En(),d=i.exports.useMemo(()=>e.amIOwner&&e.targetRoomControllerLevel<tt.GUEST&&!e.isGuildRoom,[e]),h=i.exports.useMemo(()=>e.amIOwner&&e.targetRoomControllerLevel===tt.GUEST&&!e.isGuildRoom,[e]),C=i.exports.useMemo(()=>e.canBeKicked||e.canBeBanned||e.canBeMuted||d||h,[d,h,e]),I=i.exports.useMemo(()=>{let _=!1;const E=Kn();if(E){const b=E.model.getValue(te.FIGURE_CARRY_OBJECT);b>0&&b<999999&&(_=!0)}return _},[]),f=_=>{let E=!0;if(_)switch(_){case"moderate":E=!1,s(za);break;case"ban":E=!1,s(Lc);break;case"mute":E=!1,s(Uc);break;case"ambassador":E=!1,s(Ya);break;case"ambassador_mute":E=!1,s(Fc);break;case"back_moderate":E=!1,s(za);break;case"back_ambassador":E=!1,s(Ya);break;case"back":E=!1,s(Ao);break;case"whisper":St(new wn(wn.WHISPER,e.name));break;case"friend":Z(`friends/request/${e.webID}/${e.name}`);break;case"relationship":E=!1,s(Gc);break;case"respect":{p(e.webID),g-1>=1&&(E=!1);break}case"ignore":H().ignoreUser(e.name);break;case"unignore":H().unignoreUser(e.name);break;case"kick":u.sendKickMessage(e.webID);break;case"ban_hour":u.sendBanMessage(e.webID,"RWUAM_BAN_USER_HOUR");break;case"ban_day":u.sendBanMessage(e.webID,"RWUAM_BAN_USER_DAY");break;case"perm_ban":u.sendBanMessage(e.webID,"RWUAM_BAN_USER_PERM");break;case"mute_2min":u.sendMuteMessage(e.webID,2);break;case"mute_5min":u.sendMuteMessage(e.webID,5);break;case"mute_10min":u.sendMuteMessage(e.webID,10);break;case"give_rights":u.sendGiveRightsMessage(e.webID);break;case"remove_rights":u.sendTakeRightsMessage(e.webID);break;case"trade":D(new UC(e.roomIndex));break;case"report":c(Ve.BULLY,{reportedUserId:e.webID});break;case"pass_hand_item":D(new LC(e.webID));break;case"ambassador_alert":u.sendAmbassadorAlertMessage(e.webID);break;case"ambassador_kick":u.sendKickMessage(e.webID);break;case"ambassador_mute_2min":u.sendMuteMessage(e.webID,2);break;case"ambassador_mute_10min":u.sendMuteMessage(e.webID,10);break;case"ambassador_mute_60min":u.sendMuteMessage(e.webID,60);break;case"ambassador_mute_18hour":u.sendMuteMessage(e.webID,1080);break;case"rship_heart":D(new As(e.webID,Ht.RELATIONSHIP_HEART));break;case"rship_smile":D(new As(e.webID,Ht.RELATIONSHIP_SMILE));break;case"rship_bobba":D(new As(e.webID,Ht.RELATIONSHIP_BOBBA));break;case"rship_none":D(new As(e.webID,Ht.RELATIONSHIP_NONE));break}E&&r()};return i.exports.useEffect(()=>{s(Ao)},[e]),l(en,{objectId:e.roomIndex,category:Q.UNIT,userType:e.userType,onClose:r,collapsable:!0,children:[t(Yt,{className:"cursor-pointer",onClick:_=>jt(e.webID),children:e.name}),n===Ao&&l(V,{children:[o(e.webID)&&t(j,{onClick:_=>f("friend"),children:m("infostand.button.friend")}),t(j,{onClick:_=>f("trade"),children:m("infostand.button.trade")}),t(j,{onClick:_=>f("whisper"),children:m("infostand.button.whisper")}),g>0&&t(j,{onClick:_=>f("respect"),children:m("infostand.button.respect",["count"],[g.toString()])}),!o(e.webID)&&l(j,{onClick:_=>f("relationship"),children:[m("infostand.link.relationship"),t(Yr,{className:"right fa-icon"})]}),!e.isIgnored&&t(j,{onClick:_=>f("ignore"),children:m("infostand.button.ignore")}),e.isIgnored&&t(j,{onClick:_=>f("unignore"),children:m("infostand.button.unignore")}),t(j,{onClick:_=>f("report"),children:m("infostand.button.report")}),C&&l(j,{onClick:_=>f("moderate"),children:[t(Yr,{className:"right fa-icon"}),m("infostand.link.moderate")]}),e.isAmbassador&&l(j,{onClick:_=>f("ambassador"),children:[t(Yr,{className:"right fa-icon"}),m("infostand.link.ambassador")]}),I&&t(j,{onClick:_=>f("pass_hand_item"),children:m("avatar.widget.pass_hand_item")})]}),n===za&&l(V,{children:[t(j,{onClick:_=>f("kick"),children:m("infostand.button.kick")}),l(j,{onClick:_=>f("mute"),children:[t(Yr,{className:"right fa-icon"}),m("infostand.button.mute")]}),l(j,{onClick:_=>f("ban"),children:[t(Yr,{className:"right fa-icon"}),m("infostand.button.ban")]}),d&&t(j,{onClick:_=>f("give_rights"),children:m("infostand.button.giverights")}),h&&t(j,{onClick:_=>f("remove_rights"),children:m("infostand.button.removerights")}),l(j,{onClick:_=>f("back"),children:[t(zr,{className:"left fa-icon"}),m("generic.back")]})]}),n===Lc&&l(V,{children:[t(j,{onClick:_=>f("ban_hour"),children:m("infostand.button.ban_hour")}),t(j,{onClick:_=>f("ban_day"),children:m("infostand.button.ban_day")}),t(j,{onClick:_=>f("perm_ban"),children:m("infostand.button.perm_ban")}),l(j,{onClick:_=>f("back_moderate"),children:[t(zr,{className:"left fa-icon"}),m("generic.back")]})]}),n===Uc&&l(V,{children:[t(j,{onClick:_=>f("mute_2min"),children:m("infostand.button.mute_2min")}),t(j,{onClick:_=>f("mute_5min"),children:m("infostand.button.mute_5min")}),t(j,{onClick:_=>f("mute_10min"),children:m("infostand.button.mute_10min")}),l(j,{onClick:_=>f("back_moderate"),children:[t(zr,{className:"left fa-icon"}),m("generic.back")]})]}),n===Ya&&l(V,{children:[t(j,{onClick:_=>f("ambassador_alert"),children:m("infostand.button.alert")}),t(j,{onClick:_=>f("ambassador_kick"),children:m("infostand.button.kick")}),l(j,{onClick:_=>f("ambassador_mute"),children:[m("infostand.button.mute"),t(Yr,{className:"right fa-icon"})]}),l(j,{onClick:_=>f("back"),children:[t(zr,{className:"left fa-icon"}),m("generic.back")]})]}),n===Fc&&l(V,{children:[t(j,{onClick:_=>f("ambassador_mute_2min"),children:m("infostand.button.mute_2min")}),t(j,{onClick:_=>f("ambassador_mute_10min"),children:m("infostand.button.mute_10min")}),t(j,{onClick:_=>f("ambassador_mute_60min"),children:m("infostand.button.mute_60min")}),t(j,{onClick:_=>f("ambassador_mute_18hr"),children:m("infostand.button.mute_18hour")}),l(j,{onClick:_=>f("back_ambassador"),children:[t(zr,{className:"left fa-icon"}),m("generic.back")]})]}),n===Gc&&l(V,{children:[l(v,{className:"menu-list-split-3",children:[t(j,{onClick:_=>f("rship_heart"),children:t(M,{pointer:!0,className:"nitro-friends-spritesheet icon-heart"})}),t(j,{onClick:_=>f("rship_smile"),children:t(M,{pointer:!0,className:"nitro-friends-spritesheet icon-smile"})}),t(j,{onClick:_=>f("rship_bobba"),children:t(M,{pointer:!0,className:"nitro-friends-spritesheet icon-bobba"})})]}),t(j,{onClick:_=>f("rship_none"),children:m("avatar.widget.clear_relationship")}),l(j,{onClick:_=>f("back"),children:[t(zr,{className:"left fa-icon"}),m("generic.back")]})]})]})},mm=a=>{const{classNames:e=[],...r}=a,n=i.exports.useMemo(()=>{const s=["menu-list"];return e.length&&s.push(...e),s},[e]);return t(S,{classNames:n,...r})},ux=a=>{const{userId:e=-1,userName:r="",roomIndex:n=-1,setIsDecorating:s=null}=a;return t(en,{objectId:n,category:Q.UNIT,onClose:null,children:t(mm,{children:t(j,{onClick:o=>s(!1),children:m("widget.avatar.stop_decorating")})})})},dx=a=>{const{avatarInfo:e=null,onClose:r=null}=a,n=s=>{if(s)switch(s){case"move":ls(e.id,e.category,Dr.OBJECT_MOVE);break;case"rotate":ls(e.id,e.category,Dr.OBJECT_ROTATE_POSITIVE);break;case"pickup":ls(e.id,e.category,Dr.OBJECT_PICKUP);break;case"eject":ls(e.id,e.category,Dr.OBJECT_EJECT);break}};return l(en,{objectId:e.id,category:e.category,onClose:r,collapsable:!0,children:[t(Yt,{children:e.name}),l(v,{className:"menu-list-split-3",children:[t(j,{onClick:s=>n("move"),children:t(Fm,{className:"center fa-icon"})}),t(j,{onClick:s=>n("rotate"),disabled:e.isWallItem,children:t(Gm,{className:"center fa-icon"})}),(e.isOwner||e.isAnyRoomController)&&t(j,{onClick:s=>n("pickup"),children:t(nl,{className:"center fa-icon"})}),!e.isOwner&&!e.isAnyRoomController&&(e.isRoomOwner||e.roomControllerLevel>=tt.GUILD_ADMIN)&&t(j,{onClick:s=>n("eject"),children:t(nl,{className:"center fa-icon"})})]})]})},Bc=a=>{const{nameInfo:e=null,onClose:r=null}=a,n=i.exports.useMemo(()=>{const s=["name-only"];return e.isFriend&&s.push("is-friend"),s},[e]);return t(en,{objectId:e.roomIndex,category:e.category,userType:e.userType,fades:e.id!==H().userId,classNames:n,onClose:r,children:t("div",{className:"text-shadow",children:e.name})})},$a=0,Ka=1,Vc=3,Hc=4,mx=a=>{const{avatarInfo:e=null,isDancing:r=!1,setIsDecorating:n=null,onClose:s=null}=a,[o,c]=i.exports.useState(r&&Hn()?Ka:$a),{roomSession:u=null}=Ge(),[g,p]=i.exports.useState(!1),d=I=>{let f=!0;if(I)if(I.startsWith("sign_")){const _=parseInt(I.split("_")[1]);u.sendSignMessage(_)}else switch(I){case"decorate":n(!0);break;case"change_name":St(new Zo(Zo.INIT));break;case"change_looks":Z("avatar-editor/show");break;case"expressions":f=!1,c(Vc);break;case"sit":u.sendPostureMessage($o.POSTURE_SIT);break;case"stand":u.sendPostureMessage($o.POSTURE_STAND);break;case"wave":u.sendExpressionMessage($r.WAVE.ordinal);break;case"blow":u.sendExpressionMessage($r.BLOW.ordinal);break;case"laugh":u.sendExpressionMessage($r.LAUGH.ordinal);break;case"idle":u.sendExpressionMessage($r.IDLE.ordinal);break;case"dance_menu":f=!1,c(Ka);break;case"dance":u.sendDanceMessage(1);break;case"dance_stop":u.sendDanceMessage(0);break;case"dance_1":case"dance_2":case"dance_3":case"dance_4":u.sendDanceMessage(parseInt(I.charAt(I.length-1)));break;case"signs":f=!1,c(Hc);break;case"back":f=!1,c($a);break;case"drop_carry_item":D(new FC);break}f&&s()},h=()=>e.amIOwner||e.amIAnyRoomController||e.roomControllerLevel>tt.GUEST,C=x_();return l(en,{objectId:e.roomIndex,category:Q.UNIT,userType:e.userType,onClose:s,collapsable:!0,children:[t(Yt,{className:"cursor-pointer",onClick:I=>jt(e.webID),children:e.name}),!g&&l(S,{gap:0,children:[o===$a&&l(V,{children:[e.allowNameChange&&t(j,{onClick:I=>d("change_name"),children:m("widget.avatar.change_name")}),h()&&t(j,{onClick:I=>d("decorate"),children:m("widget.avatar.decorate")}),t(j,{onClick:I=>d("change_looks"),children:m("widget.memenu.myclothes")}),Hn()&&!C&&t(j,{onClick:I=>d("dance_menu"),children:l(v,{gap:1,children:[m("widget.memenu.dance"),t("i",{className:"icon icon-context-arrow-right mt-auto mb-auto"})]})}),!r&&!Hn()&&!C&&t(j,{onClick:I=>d("dance"),children:l(v,{gap:1,children:[m("widget.memenu.dance"),t("i",{className:"icon icon-context-arrow-right mt-auto mb-auto"})]})}),r&&!Hn()&&!C&&t(j,{onClick:I=>d("dance_stop"),children:m("widget.memenu.dance.stop")}),t(j,{onClick:I=>d("expressions"),children:l(v,{gap:1,children:[m("infostand.link.expressions"),t("i",{className:"icon icon-context-arrow-right mt-auto mb-auto"})]})}),t(j,{onClick:I=>d("signs"),children:l(v,{gap:1,children:[m("infostand.show.signs"),t("i",{className:"icon icon-context-arrow-right mt-auto mb-auto"})]})}),e.carryItem>0&&t(j,{onClick:I=>d("drop_carry_item"),children:m("avatar.widget.drop_hand_item")})]}),o===Ka&&l(V,{children:[r&&t(j,{onClick:I=>d("dance_stop"),children:m("widget.memenu.dance.stop")}),t(j,{onClick:I=>d("dance_1"),children:m("widget.memenu.dance1")}),t(j,{onClick:I=>d("dance_2"),children:m("widget.memenu.dance2")}),t(j,{onClick:I=>d("dance_3"),children:m("widget.memenu.dance3")}),t(j,{onClick:I=>d("dance_4"),children:m("widget.memenu.dance4")}),t(j,{onClick:I=>d("back"),children:l(v,{gap:1,children:[t("i",{className:"icon icon-context-arrow-left mt-auto mb-auto"}),m("generic.back")]})})]}),o===Vc&&l(V,{children:[w_()===us.POSTURE_STAND&&t(j,{onClick:I=>d("sit"),children:m("widget.memenu.sit")}),p_()&&t(j,{onClick:I=>d("stand"),children:m("widget.memenu.stand")}),La()&&t(j,{onClick:I=>d("wave"),children:m("widget.memenu.wave")}),La()&&l(j,{disabled:!_o(),onClick:I=>d("laugh"),children:[!_o()&&t(Et,{type:"hc"}),m("widget.memenu.laugh")]}),La()&&l(j,{disabled:!_o(),onClick:I=>d("blow"),children:[!_o()&&t(Et,{type:"hc"}),m("widget.memenu.blow")]}),t(j,{onClick:I=>d("idle"),children:m("widget.memenu.idle")}),t(j,{onClick:I=>d("back"),children:l(v,{gap:1,children:[t("i",{className:"icon icon-context-arrow-left mt-auto mb-auto"}),m("generic.back")]})})]}),o===Hc&&l(V,{children:[l(v,{className:"menu-list-split-3",children:[t(j,{onClick:I=>d("sign_1"),children:"1"}),t(j,{onClick:I=>d("sign_2"),children:"2"}),t(j,{onClick:I=>d("sign_3"),children:"3"})]}),l(v,{className:"menu-list-split-3",children:[t(j,{onClick:I=>d("sign_4"),children:"4"}),t(j,{onClick:I=>d("sign_5"),children:"5"}),t(j,{onClick:I=>d("sign_6"),children:"6"})]}),l(v,{className:"menu-list-split-3",children:[t(j,{onClick:I=>d("sign_7"),children:"7"}),t(j,{onClick:I=>d("sign_8"),children:"8"}),t(j,{onClick:I=>d("sign_9"),children:"9"})]}),l(v,{className:"menu-list-split-3",children:[t(j,{onClick:I=>d("sign_10"),children:"10"}),t(j,{onClick:I=>d("sign_11"),children:t("i",{className:"icon icon-sign-heart"})}),t(j,{onClick:I=>d("sign_12"),children:t("i",{className:"icon icon-sign-skull"})})]}),l(v,{className:"menu-list-split-3",children:[t(j,{onClick:I=>d("sign_0"),children:"0"}),t(j,{onClick:I=>d("sign_13"),children:t("i",{className:"icon icon-sign-exclamation"})}),t(j,{onClick:I=>d("sign_15"),children:t("i",{className:"icon icon-sign-smile"})})]}),l(v,{className:"menu-list-split-3",children:[t(j,{onClick:I=>d("sign_14"),children:t("i",{className:"icon icon-sign-soccer"})}),t(j,{onClick:I=>d("sign_17"),children:t("i",{className:"icon icon-sign-yellow"})}),t(j,{onClick:I=>d("sign_16"),children:t("i",{className:"icon icon-sign-red"})})]}),t(j,{onClick:I=>d("back"),children:l(v,{gap:1,children:[t("i",{className:"icon icon-context-arrow-left mt-auto mb-auto"}),m("generic.back")]})})]})]})]})},Xa=0,Wc=1,jc=2,qc=3,gx=a=>{const{avatarInfo:e=null,onClose:r=null}=a,[n,s]=i.exports.useState(Xa),{roomSession:o=null}=Ge(),{petRespectRemaining:c=0,respectPet:u=null}=En(),g=i.exports.useMemo(()=>{let d=!1;const h=Kn();if(h){const C=h.model.getValue(te.FIGURE_CARRY_OBJECT);C>0&&C<999999&&(d=!0)}return d},[]),p=d=>{let h=!0;if(d)switch(d){case"respect":u(e.id),c-1>=1&&(h=!1);break;case"treat":D(new ju(e.id));break;case"pass_handitem":D(new Wu(e.id));break;case"train":o.requestPetCommands(e.id);break;case"pick_up":o.pickupPet(e.id);break;case"mount":o.mountPet(e.id);break;case"toggle_riding_permission":o.togglePetRiding(e.id);break;case"toggle_breeding_permission":o.togglePetBreeding(e.id);break;case"dismount":o.dismountPet(e.id);break;case"saddle_off":o.removePetSaddle(e.id);break;case"breed":break;case"harvest":o.harvestPet(e.id);break;case"revive":break;case"compost":o.compostPlant(e.id);break;case"buy_saddle":Z("catalog/open/"+K("catalog.links")["pets.buy_saddle"]);break}h&&r()};return i.exports.useEffect(()=>{s(d=>e.petType===qr.MONSTERPLANT?qc:e.saddle&&!e.rider?Wc:e.rider?jc:Xa)},[e]),l(en,{objectId:e.roomIndex,category:Q.UNIT,userType:gt.PET,onClose:r,collapsable:!0,children:[t(Yt,{children:e.name}),n===Xa&&l(V,{children:[c>0&&t(j,{onClick:d=>p("respect"),children:m("infostand.button.petrespect",["count"],[c.toString()])}),t(j,{onClick:d=>p("train"),children:m("infostand.button.train")}),t(j,{onClick:d=>p("pick_up"),children:m("infostand.button.pickup")}),e.petType===qr.HORSE&&t(j,{onClick:d=>p("buy_saddle"),children:m("infostand.button.buy_saddle")}),[qr.BEAR,qr.TERRIER,qr.CAT,qr.DOG,qr.PIG].indexOf(e.petType)>-1&&t(j,{onClick:d=>p("breed"),children:m("infostand.button.breed")})]}),n===Wc&&l(V,{children:[t(j,{onClick:d=>p("mount"),children:m("infostand.button.mount")}),l(j,{onClick:d=>p("toggle_riding_permission"),gap:1,children:[t("input",{type:"checkbox",checked:!!e.publiclyRideable,readOnly:!0}),m("infostand.button.toggle_riding_permission")]}),c>0&&t(j,{onClick:d=>p("respect"),children:m("infostand.button.petrespect",["count"],[c.toString()])}),t(j,{onClick:d=>p("train"),children:m("infostand.button.train")}),t(j,{onClick:d=>p("pick_up"),children:m("infostand.button.pickup")}),t(j,{onClick:d=>p("saddle_off"),children:m("infostand.button.saddleoff")})]}),n===jc&&l(V,{children:[t(j,{onClick:d=>p("dismount"),children:m("infostand.button.dismount")}),c>0&&t(j,{onClick:d=>p("respect"),children:m("infostand.button.petrespect",["count"],[c.toString()])})]}),n===qc&&l(V,{children:[t(j,{onClick:d=>p("pick_up"),children:m("infostand.button.pickup")}),e.dead&&t(j,{onClick:d=>p("revive"),children:m("infostand.button.revive")}),o.isRoomOwner&&t(j,{onClick:d=>p("compost"),children:m("infostand.button.compost")}),!e.dead&&e.energy/e.maximumEnergy<.98&&t(j,{onClick:d=>p("treat"),children:m("infostand.button.pettreat")}),!e.dead&&e.level===e.maximumLevel&&e.breedable&&l(V,{children:[l(j,{onClick:d=>p("toggle_breeding_permission"),gap:1,children:[t("input",{type:"checkbox",checked:e.publiclyBreedable,readOnly:!0}),m("infostand.button.toggle_breeding_permission")]}),t(j,{onClick:d=>p("breed"),children:m("infostand.button.breed")})]})]}),g&&t(j,{onClick:d=>p("pass_hand_item"),children:m("infostand.button.pass_hand_item")})]})},Qa=0,zc=1,Yc=2,$c=3,px=a=>{const{avatarInfo:e=null,onClose:r=null}=a,[n,s]=i.exports.useState(Qa),{roomSession:o=null}=Ge(),{petRespectRemaining:c=0,respectPet:u=null}=En(),g=i.exports.useMemo(()=>o.isRoomOwner||o.controllerLevel>=tt.GUEST||H().isModerator,[o]),p=i.exports.useMemo(()=>{let h=!1;const C=Kn();if(C){const I=C.model.getValue(te.FIGURE_CARRY_OBJECT);I>0&&I<999999&&(h=!0)}return h},[]),d=h=>{let C=!0;if(h)switch(h){case"respect":u(e.id),c-1>=1&&(C=!1);break;case"treat":D(new ju(e.id));break;case"pass_handitem":D(new Wu(e.id));break;case"pick_up":o.pickupPet(e.id);break;case"mount":o.mountPet(e.id);break;case"dismount":o.dismountPet(e.id);break}C&&r()};return i.exports.useEffect(()=>{s(h=>e.petType===qr.MONSTERPLANT?$c:e.saddle&&!e.rider?zc:e.rider?Yc:Qa)},[e]),l(en,{objectId:e.roomIndex,category:Q.UNIT,userType:gt.PET,onClose:r,collapsable:!0,children:[t(Yt,{children:e.name}),n===Qa&&c>0&&t(j,{onClick:h=>d("respect"),children:m("infostand.button.petrespect",["count"],[c.toString()])}),n===zc&&l(V,{children:[!!e.publiclyRideable&&t(j,{onClick:h=>d("mount"),children:m("infostand.button.mount")}),c>0&&t(j,{onClick:h=>d("respect"),children:m("infostand.button.petrespect",["count"],[c.toString()])})]}),n===Yc&&l(V,{children:[t(j,{onClick:h=>d("dismount"),children:m("infostand.button.dismount")}),c>0&&t(j,{onClick:h=>d("respect"),children:m("infostand.button.petrespect",["count"],[c.toString()])})]}),n===$c&&!e.dead&&e.energy/e.maximumEnergy<.98&&t(j,{onClick:h=>d("treat"),children:m("infostand.button.pettreat")}),g&&t(j,{onClick:h=>d("pick_up"),children:m("infostand.button.pickup")}),p&&t(j,{onClick:h=>d("pass_hand_item"),children:m("infostand.button.pass_hand_item")})]})},Ja=0,Kc=1,Xc=2,hx=a=>{const{avatarInfo:e=null,onClose:r=null}=a,[n,s]=i.exports.useState(Ja),[o,c]=i.exports.useState(""),[u,g]=i.exports.useState("");U(GC,C=>{const I=C.getParser();if(I.botId===e.webID)switch(I.commandId){case Ne.CHANGE_BOT_NAME:c(I.data),s(Kc);return;case Ne.CHANGE_BOT_MOTTO:g(I.data),s(Xc);return;case Ne.SETUP_CHAT:{const f=I.data,_=f.split(f.indexOf(";#;")===-1?";":";#;");(_.length===3||_.length===4)&&(St(new Bi(e.roomIndex,Q.UNIT,e.webID,_[0],_[1].toLowerCase()==="true"||_[1]==="1",parseInt(_[2]),_[3]?_[3].toLowerCase()==="true"||_[3]==="1":!1)),r());return}}});const p=C=>D(new BC(e.webID,C)),d=C=>{let I=!0;if(C)switch(C){case"donate_to_all":p(Ne.DONATE_TO_ALL),D(new nn(e.webID,Ne.DONATE_TO_ALL,""));break;case"donate_to_user":p(Ne.DONATE_TO_USER),D(new nn(e.webID,Ne.DONATE_TO_USER,""));break;case"change_bot_name":p(Ne.CHANGE_BOT_NAME),I=!1;break;case"save_bot_name":D(new nn(e.webID,Ne.CHANGE_BOT_NAME,o));break;case"change_bot_motto":p(Ne.CHANGE_BOT_MOTTO),I=!1;break;case"save_bot_motto":D(new nn(e.webID,Ne.CHANGE_BOT_MOTTO,u));break;case"dress_up":D(new nn(e.webID,Ne.DRESS_UP,""));break;case"random_walk":D(new nn(e.webID,Ne.RANDOM_WALK,""));break;case"setup_chat":p(Ne.SETUP_CHAT),I=!1;break;case"dance":D(new nn(e.webID,Ne.DANCE,""));break;case"nux_take_tour":Ce().createLinkEvent("help/tour"),D(new nn(e.webID,Ne.NUX_TAKE_TOUR,""));break;case"pick":D(new Bu(e.webID));break}I&&r()};i.exports.useEffect(()=>{s(Ja)},[e]);const h=e.amIOwner||e.amIAnyRoomController;return l(en,{objectId:e.roomIndex,category:Q.UNIT,userType:gt.RENTABLE_BOT,onClose:r,collapsable:!0,children:[t(Yt,{children:e.name}),n===Ja&&h&&l(V,{children:[e.botSkills.indexOf(Ne.DONATE_TO_ALL)>=0&&t(j,{onClick:C=>d("donate_to_all"),children:m("avatar.widget.donate_to_all")}),e.botSkills.indexOf(Ne.DONATE_TO_USER)>=0&&t(j,{onClick:C=>d("donate_to_user"),children:m("avatar.widget.donate_to_user")}),e.botSkills.indexOf(Ne.CHANGE_BOT_NAME)>=0&&t(j,{onClick:C=>d("change_bot_name"),children:m("avatar.widget.change_bot_name")}),e.botSkills.indexOf(Ne.CHANGE_BOT_MOTTO)>=0&&t(j,{onClick:C=>d("change_bot_motto"),children:m("avatar.widget.change_bot_motto")}),e.botSkills.indexOf(Ne.DRESS_UP)>=0&&t(j,{onClick:C=>d("dress_up"),children:m("avatar.widget.dress_up")}),e.botSkills.indexOf(Ne.RANDOM_WALK)>=0&&t(j,{onClick:C=>d("random_walk"),children:m("avatar.widget.random_walk")}),e.botSkills.indexOf(Ne.SETUP_CHAT)>=0&&t(j,{onClick:C=>d("setup_chat"),children:m("avatar.widget.setup_chat")}),e.botSkills.indexOf(Ne.DANCE)>=0&&t(j,{onClick:C=>d("dance"),children:m("avatar.widget.dance")}),e.botSkills.indexOf(Ne.NO_PICK_UP)===-1&&t(j,{onClick:C=>d("pick"),children:m("avatar.widget.pick_up")})]}),n===Kc&&l(S,{className:"menu-item context-input-bg",onClick:null,gap:1,children:[t(N,{variant:"white",children:m("bot.skill.name.configuration.new.name")}),t("input",{type:"text",className:"form-control form-control-sm",value:o,maxLength:K("bot.name.max.length",15),onChange:C=>c(C.target.value)}),l(v,{alignItems:"center",justifyContent:"between",gap:1,children:[t(L,{fullWidth:!0,variant:"secondary",onClick:C=>d(null),children:m("cancel")}),t(L,{fullWidth:!0,variant:"success",onClick:C=>d("save_bot_name"),children:m("save")})]})]}),n===Xc&&l(S,{className:"menu-item context-input-bg",onClick:null,gap:1,children:[t(N,{variant:"white",children:m("bot.skill.name.configuration.new.motto")}),t("input",{type:"text",className:"form-control form-control-sm",value:u,maxLength:K("motto.max.length",38),onChange:C=>g(C.target.value)}),l(v,{alignItems:"center",justifyContent:"between",gap:1,children:[t(L,{fullWidth:!0,variant:"secondary",onClick:C=>d(null),children:m("cancel")}),t(L,{fullWidth:!0,variant:"success",onClick:C=>d("save_bot_motto"),children:m("save")})]})]})]})},fx=a=>{const[e,r]=i.exports.useState(!1),[n,s]=i.exports.useState(!1),[o,c]=i.exports.useState(null),{avatarInfo:u=null,setAvatarInfo:g=null,activeNameBubble:p=null,setActiveNameBubble:d=null,nameBubbles:h=[],removeNameBubble:C=null,productBubbles:I=[],confirmingProduct:f=null,updateConfirmingProduct:_=null,removeProductBubble:E=null,isDecorating:b=!1,setIsDecorating:T=null}=bS(),{roomSession:w=null}=Ge();Se(gr.NORMAL_MODE,x=>{e&&r(!1)}),Se(gr.GAME_MODE,x=>{e||r(!0)}),ze(VC.RSDE_DANCE,x=>{x.roomIndex===w.ownRoomIndex&&s(x.danceId!==0)}),lt(Bi.UPDATE_CHAT,x=>c(x));const O=()=>{if(!w||e)return null;if(p)return t(Bc,{nameInfo:p,onClose:()=>d(null)});if(u)switch(u.type){case Es.FURNI:{const x=u;return b?t(dx,{avatarInfo:x,onClose:()=>g(null)}):null}case et.OWN_USER:case et.PEER:{const x=u;return K("user.tags.enabled")&&H().getUserTags(x.roomIndex),x.isSpectatorMode?null:x.isOwnUser?ni.isRunning()?null:t(mx,{avatarInfo:x,isDancing:n,setIsDecorating:T,onClose:()=>g(null)}):t(cx,{avatarInfo:x,onClose:()=>g(null)})}case Cs.PET_INFO:{const x=u;return x.isOwner?t(gx,{avatarInfo:x,onClose:()=>g(null)}):t(px,{avatarInfo:x,onClose:()=>g(null)})}case _s.RENTABLE_BOT:return t(hx,{avatarInfo:u,onClose:()=>g(null)})}return null},R=()=>{if(!u)return null;switch(u.type){case Es.FURNI:return t(rx,{avatarInfo:u,onClose:()=>g(null)});case et.OWN_USER:case et.PEER:return t(lx,{avatarInfo:u,setAvatarInfo:g,onClose:()=>g(null)});case et.BOT:return t(tx,{avatarInfo:u,onClose:()=>g(null)});case _s.RENTABLE_BOT:return t(sx,{avatarInfo:u,onClose:()=>g(null)});case Cs.PET_INFO:return t(nx,{avatarInfo:u,onClose:()=>g(null)})}};return l(V,{children:[b&&t(ux,{userId:H().userId,userName:H().userName,roomIndex:w.ownRoomIndex,setIsDecorating:T}),O(),u&&t(S,{alignItems:"end",className:"nitro-infostand-container",children:R()}),h.length>0&&h.map((x,F)=>t(Bc,{nameInfo:x,onClose:()=>C(F)},F)),I.length>0&&I.map((x,F)=>t(ex,{item:x,updateConfirmingProduct:_,onClose:()=>E(F)},x.id)),o&&t($R,{chatEvent:o,onClose:()=>c(null)}),f&&t(KR,{item:f,onClose:()=>_(null)}),t(YR,{})]})},Ix=a=>{const{chatStyleId:e=0,chatStyleIds:r=null,selectChatStyleId:n=null}=a,[s,o]=i.exports.useState(null),[c,u]=i.exports.useState(!1),g=d=>{n(d),u(!1)},p=d=>{let h=!1;u(C=>(h=!C,h)),h&&o(d.target)};return i.exports.useEffect(()=>{c||o(null)},[c]),l(V,{children:[t(M,{pointer:!0,className:"chatstyles-selector cursor-pointer",onClick:p}),t(au,{show:c,target:s,placement:"top",children:t(Go,{className:"nitro-chat-style-selector-container",children:t(re,{overflow:"hidden",className:"bg-transparent bubble-window image-rendering-pixelated",children:t(le,{gap:1,columnCount:3,overflow:"auto",children:r&&r.length>0&&r.map(d=>t(v,{center:!0,pointer:!0,className:"bubble-parent-container",onClick:h=>g(d),children:t(M,{className:"bubble-container",children:t(M,{className:`chat-bubble bubble-${d}`,children:" "})},d)},d))})})})})]})},Ex=a=>{const[e,r]=i.exports.useState(""),{chatStyleId:n=0,updateChatStyleId:s=null}=En(),{selectedUsername:o="",floodBlocked:c=!1,floodBlockedSeconds:u=0,setIsTyping:g=null,setIsIdle:p=null,sendChat:d=null}=SS(),{roomSession:h=null}=Ge(),C=i.exports.useRef(),I=i.exports.useMemo(()=>m("widgets.chatinput.mode.whisper"),[]),f=i.exports.useMemo(()=>m("widgets.chatinput.mode.shout"),[]),_=i.exports.useMemo(()=>m("widgets.chatinput.mode.speak"),[]),E=i.exports.useMemo(()=>K("chat.input.maxlength",100),[]),b=i.exports.useCallback(()=>{const A=document.activeElement;return!(!A||C&&C.current===A||!(A instanceof HTMLInputElement)&&!(A instanceof HTMLTextAreaElement))},[C]),T=i.exports.useCallback(()=>{C.current.focus(),C.current.setSelectionRange(C.current.value.length*2,C.current.value.length*2)},[C]),w=i.exports.useCallback(()=>{r(A=>A!==I||!o.length?A:`${A} ${o}`)},[o,I]),O=i.exports.useCallback((A,k=!1)=>{if(!A||A==="")return;let y=k?Lr.CHAT_SHOUT:Lr.CHAT_DEFAULT,P=A;const G=P.split(" ");let B="",Y="";switch(G[0]){case I:y=Lr.CHAT_WHISPER,B=G[1],Y=I+" "+B+" ",G.shift(),G.shift();break;case f:y=Lr.CHAT_SHOUT,G.shift();break;case _:y=Lr.CHAT_DEFAULT,G.shift();break}P=G.join(" "),g(!1),p(!1),P.length<=E&&(/%CC%/g.test(encodeURIComponent(P))?r(""):(r(""),d(P,y,B,n))),r(Y)},[I,f,_,E,n,g,p,d]),R=i.exports.useCallback(A=>{!A||!A.length?g(!1):(g(!0),p(!0)),r(A)},[g,p]),x=i.exports.useCallback(A=>{if(c||!C.current||b())return;document.activeElement!==C.current&&T();const k=A.target.value;switch(A.key){case" ":case"Space":w();return;case"NumpadEnter":case"Enter":O(k,A.shiftKey);return;case"Backspace":if(k){const y=k.split(" ");y[0]===I&&y.length===3&&y[2]===""&&r("")}return}},[c,C,I,b,T,w,O]);lt(wn.CHAT_INPUT_CONTENT,A=>{switch(A.chatMode){case wn.WHISPER:{r(`${I} ${A.userName} `);return}case wn.SHOUT:return}});const F=i.exports.useMemo(()=>{let A=[];const k=K("chat.styles");for(const y of k)if(y){if(y.minRank>0){H().hasSecurity(y.minRank)&&A.push(y.styleId);continue}if(y.isSystemStyle&&H().hasSecurity(tt.MODERATOR)){A.push(y.styleId);continue}if(!(K("chat.styles.disabled").indexOf(y.styleId)>=0)){if(y.isHcOnly&&pr()>=ar.CLUB){A.push(y.styleId);continue}if(y.isAmbassadorOnly&&H().isAmbassador){A.push(y.styleId);continue}!y.isHcOnly&&!y.isAmbassadorOnly&&A.push(y.styleId)}}return A},[]);return i.exports.useEffect(()=>(document.body.addEventListener("keydown",x),()=>{document.body.removeEventListener("keydown",x)}),[x]),i.exports.useEffect(()=>{C.current&&(C.current.parentElement.dataset.value=e)},[e]),!h||h.isSpectator?null:Si.exports.createPortal(l("div",{className:"nitro-chat-input-container",children:[t(Ix,{chatStyleId:n,chatStyleIds:F,selectChatStyleId:s}),l("div",{className:"input-sizer align-items-center",children:[!c&&t("input",{ref:C,type:"text",className:"chat-input",placeholder:m("widgets.chatinput.default"),value:e,maxLength:E,onChange:A=>R(A.target.value),onMouseDown:A=>T()}),c&&l(N,{variant:"danger",children:[m("chat.input.alert.flood",["time"],[u.toString()])," "]})]})]}),document.getElementById("toolbar-chat-input-container"))},Cx=()=>{let a=null;self.onmessage=e=>{if(!e)return;const r=e.data;switch(r.action){case"START":a=setInterval(()=>postMessage(null),r.content);break;case"STOP":a&&(clearInterval(a),a=null);break}}};class _x extends Worker{constructor(e){const r=e.toString(),n=new Blob([`(${r})()`]);super(URL.createObjectURL(n))}}const bx=a=>{const{chat:e=null,makeRoom:r=null,bubbleWidth:n=ft.CHAT_BUBBLE_WIDTH_NORMAL}=a,[s,o]=i.exports.useState(!1),[c,u]=i.exports.useState(!1),g=i.exports.useRef(),p=i.exports.useMemo(()=>{switch(n){case ft.CHAT_BUBBLE_WIDTH_NORMAL:return 350;case ft.CHAT_BUBBLE_WIDTH_THIN:return 240;case ft.CHAT_BUBBLE_WIDTH_WIDE:return 2e3}},[n]);return i.exports.useEffect(()=>{o(!1);const d=g.current;if(!d)return;const h=d.offsetWidth,C=d.offsetHeight;e.width=h,e.height=C,e.elementRef=d;let I=e.left,f=e.top;return!I&&!f&&(I=e.location.x-h/2,f=d.parentElement.offsetHeight-C,e.left=I,e.top=f),u(!0),()=>{e.elementRef=null,u(!1)}},[e]),i.exports.useEffect(()=>{!c||!e||s||(r&&r(e),o(!0))},[e,c,s,r]),l("div",{ref:g,className:`bubble-container ${s?"visible":"invisible"}`,onClick:d=>q().selectRoomObject(e.roomId,e.senderId,Q.UNIT),children:[e.styleId===0&&t("div",{className:"user-container-bg",style:{backgroundColor:e.color}}),l("div",{className:`chat-bubble bubble-${e.styleId} type-${e.type}`,style:{maxWidth:p},children:[t("div",{className:"user-container",children:e.imageUrl&&e.imageUrl.length>0&&t("div",{className:"user-image",style:{backgroundImage:`url(${e.imageUrl})`}})}),l("div",{className:"chat-content",children:[t("span",{className:"username mr-1",dangerouslySetInnerHTML:{__html:`${e.username}: `}}),t("span",{className:"message",dangerouslySetInnerHTML:{__html:`${e.formattedText}`}})]}),t("div",{className:"pointer"})]})]})},Nx=a=>{const{chatMessages:e=[],setChatMessages:r=null,chatSettings:n=null,getScrollSpeed:s=6e3}=vS(),o=i.exports.useRef(),c=i.exports.useCallback(()=>{r(p=>{if(p){const d=p.filter(h=>h.top>-h.height*2);if(d.length!==p.length)return d}return p})},[r]),u=i.exports.useCallback((p,d,h)=>{for(let C=e.indexOf(p)-1;C>=0;C--){const I=e[C];if(!(!I||p===I||h.indexOf(I)>=0||I.top+I.height-d>p.top+p.height)&&pb(p,I,-d,0)){const f=Math.abs(I.top+I.height-p.top);h.push(I),I.top-=f,I.skipMovement=!0,u(I,f,h)}}},[e]),g=i.exports.useCallback(p=>{if(n.mode===ft.CHAT_MODE_FREE_FLOW)p.skipMovement=!0,u(p,0,[p]),c();else{const d=p.top+p.height,h=p.height,C=o.current.offsetHeight-d,I=h-C;C<h&&(r(f=>(f.forEach(_=>{_!==p&&(_.top-=I)}),f)),c())}},[n,u,c,r]);return i.exports.useEffect(()=>{const p=(d=null)=>{if(!o||!o.current)return;const h=o.current.offsetHeight,C=Math.round(document.body.offsetHeight*K("chat.viewer.height.percentage"));o.current.style.height=`${C}px`,r(I=>(I&&I.forEach(f=>f.top-=h-C),I))};return window.addEventListener("resize",p),p(),()=>{window.removeEventListener("resize",p)}},[r]),i.exports.useEffect(()=>{const p=h=>{r(C=>(C.forEach(I=>{if(I.skipMovement){I.skipMovement=!1;return}I.top-=h}),C)),c()},d=new _x(Cx);return d.onmessage=()=>p(15),d.postMessage({action:"START",content:s}),()=>{d.postMessage({action:"STOP"})}},[s,c,r]),t("div",{ref:o,className:"nitro-chat-widget",children:e.map(p=>t(bx,{chat:p,makeRoom:g,bubbleWidth:n.weight},p.id))})},gm=a=>{const{title:e=null,items:r=[],selectItem:n=null,onClose:s=null}=a,[o,c]=i.exports.useState(null),[u,g]=i.exports.useState(""),p=H().isModerator,d=i.exports.useMemo(()=>{const h=u.toLocaleLowerCase();return r.filter(C=>{var I;return(I=C.name)==null?void 0:I.toLocaleLowerCase().includes(h)})},[r,u]);return i.exports.useEffect(()=>{o&&n(o)},[o,n]),l(se,{className:"nitro-chooser-widget",theme:"primary",children:[t(ne,{headerText:e,onCloseClick:s}),l(re,{overflow:"hidden",gap:2,children:[t("input",{type:"text",className:"form-control form-control-sm",placeholder:m("generic.search"),value:u,onChange:h=>g(h.target.value)}),t(ma,{rows:d,rowRender:h=>t(v,{alignItems:"center",className:Rn("rounded p-1",o===h&&"bg-muted"),pointer:!0,onClick:C=>c(h),children:l(N,{truncate:!0,children:[h.name," ",p&&" - "+h.id]})})})]})]})},Sx=a=>{const{items:e=null,onClose:r=null,selectItem:n=null,populateChooser:s=null}=PS();return i.exports.useEffect(()=>{const o={linkReceived:c=>{c.split("/"),s()},eventUrlPrefix:"furni-chooser/"};return Ct(o),()=>_t(o)},[s]),e?t(gm,{title:m("widget.chooser.furni.title"),items:e,selectItem:n,onClose:r}):null},Tx=a=>{const{items:e=null,onClose:r=null,selectItem:n=null,populateChooser:s=null}=GS();return i.exports.useEffect(()=>{const o={linkReceived:c=>{c.split("/"),s()},eventUrlPrefix:"user-chooser/"};return Ct(o),()=>_t(o)},[s]),e?t(gm,{title:m("widget.chooser.user.title"),items:e,selectItem:n,onClose:r}):null},vx=a=>{const[e,r]=i.exports.useState(!1),{users:n=[],answer:s=null}=RS();return i.exports.useEffect(()=>{r(!!n.length)},[n]),e?l(se,{className:"nitro-widget-doorbell",theme:"primary",children:[t(ne,{headerText:m("navigator.doorbell.title"),onCloseClick:o=>r(!1)}),l(re,{overflow:"hidden",gap:0,children:[t(S,{gap:2,children:t(le,{gap:1,className:"px-1 pb-1",children:t(N,{small:!0,className:"g-col-10",children:m("widgets.doorbell.info")})})}),t(S,{overflow:"auto",className:"striped-children",gap:0,children:n&&n.length>0&&n.map(o=>l(le,{gap:1,alignItems:"center",className:"text-black p-1",children:[t(N,{small:!0,className:"g-col-6",children:o}),t(M,{className:"g-col-6",children:l(v,{alignItems:"center",justifyContent:"end",gap:1,children:[t("i",{className:"icon icon-accept-check cursor-pointer",onClick:()=>s(o,!0)}),t("i",{className:"icon icon-decline-x cursor-pointer",onClick:()=>s(o,!1)})]})})]},o))})]})]}):null},el=a=>{const{objectId:e=-1,category:r=-1,noFollow:n=!1,position:s="absolute",...o}=a,[c,u]=i.exports.useState({x:-1,y:-1}),g=i.exports.useRef();return i.exports.useEffect(()=>{let p=!1;const d=()=>{const C=ye();return Oi(C.roomId,e,r,1)},h=()=>{const C=d();!C||!g.current||u({x:Math.round(C.left+C.width/2-g.current.offsetWidth/2),y:Math.round(C.top-g.current.offsetHeight+10)})};return n?h():(p=!0,mn().add(h)),()=>{p&&mn().remove(h)}},[e,r,n]),t(M,{innerRef:g,position:s,visible:c.x+(g.current?g.current.offsetWidth:0)>-1,className:"object-location",style:{left:c.x,top:c.y},...o})},wx=a=>{const{roomIndex:e=-1,request:r=null,hideFriendRequest:n=null,requestResponse:s=null}=a;return t(el,{objectId:e,category:Q.UNIT,children:t(M,{className:"nitro-friend-request-dialog p-2",children:l(S,{children:[l(v,{alignItems:"center",justifyContent:"between",gap:2,children:[t(N,{small:!0,bold:!0,variant:"white",className:"w-75",children:m("widget.friendrequest.from",["username"],[r.name])}),t("i",{className:"friend-req-close",onClick:o=>n(r.requesterUserId)})]}),l(v,{children:[t(N,{small:!0,className:"mt-2 cursor-pointer",underline:!0,onClick:o=>s(r.requesterUserId,!1),children:m("widget.friendrequest.decline")}),t(L,{className:"accept-friend-btn",onClick:o=>s(r.requesterUserId,!0),children:m("widget.friendrequest.accept")})]})]})})})},Rx=a=>{const{displayedRequests:e=[],hideFriendRequest:r=null}=kS(),{requestResponse:n=null}=cr();return e.length?t(V,{children:e.map((s,o)=>t(wx,{roomIndex:s.roomIndex,request:s.request,hideFriendRequest:r,requestResponse:n},o))}):null},xx=a=>{const{productType:e=ge.FLOOR,classId:r=-1,extraParam:n=void 0}=a;switch(e){case ge.WALL:case ge.FLOOR:return t(Hi,{productType:e,productClassId:r});case ge.BADGE:return t(je,{badgeCode:n});case ge.HABBO_CLUB:return t(Et,{type:"hc"})}return null},yx=a=>{const{ownerId:e=-1}=a,[r,n]=i.exports.useState(0),[s,o]=i.exports.useState(void 0),c=()=>{r===1&&D(new qC(e)),n(0),o(void 0)};U(HC,g=>{n(1)}),U(WC,g=>{n(0),o(void 0)}),U(jC,g=>{const p=g.getParser();o({contentType:p.contentType,classId:p.classId}),n(2)});const u=H().userId===e;return r===0?null:l(se,{className:"nitro-mysterybox-dialog",theme:"primary-slim",children:[t(ne,{headerText:m(r===1?`mysterybox.dialog.${u?"owner":"other"}.title`:"mysterybox.reward.title"),onCloseClick:c}),l(re,{children:[r===1&&l(V,{children:[l(N,{variant:"primary",children:[" ",m(`mysterybox.dialog.${u?"owner":"other"}.subtitle`)," "]}),l(N,{children:[" ",m(`mysterybox.dialog.${u?"owner":"other"}.description`)," "]}),l(N,{children:[" ",m(`mysterybox.dialog.${u?"owner":"other"}.waiting`)]}),l(L,{variant:"danger",onClick:c,className:"mt-auto",children:[" ",m(`mysterybox.dialog.${u?"owner":"other"}.cancel`)," "]})]}),r===2&&s&&l(V,{children:[l(N,{variant:"black",children:[" ",m("mysterybox.reward.text")," "]}),t(v,{className:"prize-container justify-content-center mx-auto",children:t(xx,{classId:s.classId,productType:s.contentType})}),l(L,{variant:"success",onClick:c,className:"mt-auto",children:[" ",m("mysterybox.reward.close")," "]})]})]})]})},Ox=a=>{const{objectId:e=-1,onClose:r=null}=a,[n,s]=i.exports.useState(""),o=()=>{D(new zC(e,n)),r()};return e===-1?null:l(se,{className:"nitro-mysterytrophy-dialog no-resize",theme:"primary-slim",children:[t(ne,{center:!0,headerText:m("mysterytrophy.header.title"),onCloseClick:r}),l(re,{children:[l(v,{className:"mysterytrophy-dialog-top p-3",children:[t("div",{className:"mysterytrophy-image flex-shrink-0"}),t("div",{className:"m-2",children:t(N,{variant:"white",className:"mysterytrophy-text-big",children:m("mysterytrophy.header.description")})})]}),t(v,{className:"mysterytrophy-dialog-bottom p-2",children:l(S,{gap:1,children:[l(v,{alignItems:"center",className:"bg-white rounded py-1 px-2 input-mysterytrophy-dialog",children:[t("textarea",{className:"form-control form-control-sm input-mysterytrophy",value:n,onChange:c=>s(c.target.value)}),t("div",{className:"mysterytrophy-pencil-image flex-shrink-0 small fa-icon"})]}),l(v,{className:"mt-2",gap:5,display:"flex",justifyContent:"center",alignItems:"center",children:[t(N,{pointer:!0,className:"text-decoration",onClick:()=>r(),children:m("cancel")}),t(L,{variant:"success",onClick:()=>o(),children:m("generic.ok")})]})]})})]})]})},kx=a=>{const{objectId:e=-1,onClose:r=null}=a,{roomSession:n=null}=Ge(),s=()=>{n.useMultistateItem(e),r()};return l(se,{className:"nitro-use-product-confirmation",children:[t(ne,{headerText:m("effectbox.header.title"),onCloseClick:r}),t(re,{center:!0,children:t(v,{gap:2,children:l(S,{justifyContent:"between",children:[t(N,{children:m("effectbox.header.description")}),l(v,{alignItems:"center",justifyContent:"between",children:[t(L,{variant:"danger",onClick:r,children:m("generic.cancel")}),t(L,{variant:"success",onClick:s,children:m("generic.ok")})]})]})})})]})},Po=-1,Ax=0,Px=a=>{const{objectId:e=-1,onClose:r=null}=a,[n,s]=i.exports.useState(null),[o,c]=i.exports.useState(Po),{roomSession:u=null}=Ge(),g=()=>{u.useMultistateItem(e),r()};return i.exports.useEffect(()=>{if(!u||e===-1)return;const p=oa(u.roomId,e,Q.FLOOR);if(!p)return;s(p);let d=Po;switch(p.specialType){case ee.MONSTERPLANT_SEED:d=Ax;break}if(d===Po){r();return}c(d)},[u,e,r]),o===Po?null:l(se,{className:"nitro-use-product-confirmation",children:[t(ne,{headerText:m("useproduct.widget.title.plant_seed",["name"],[n.name]),onCloseClick:r}),t(re,{center:!0,children:l(v,{gap:2,overflow:"hidden",children:[t(S,{children:t(M,{className:"product-preview",children:t(M,{className:"monsterplant-image"})})}),l(S,{justifyContent:"between",overflow:"auto",children:[l(S,{gap:2,children:[t(N,{children:m("useproduct.widget.text.plant_seed",["productName"],[n.name])}),t(N,{children:m("useproduct.widget.info.plant_seed")})]}),l(v,{alignItems:"center",justifyContent:"between",children:[t(L,{variant:"danger",onClick:r,children:m("useproduct.widget.cancel")}),t(L,{variant:"success",onClick:g,children:m("widget.monsterplant_seed.button.use")})]})]})]})})]})},Do=-1,Dx=0,Mx=a=>{const{objectId:e=-1,onClose:r=null}=a,[n,s]=i.exports.useState(Do),[o,c]=i.exports.useState(ce.MALE),[u,g]=i.exports.useState(null),{roomSession:p=null}=Ge(),d=()=>{li().send(new YC(e)),li().send(new yu(o,u)),r()};return i.exports.useEffect(()=>{let h=Do;const C=H().figure,I=H().gender,f=[];if(p&&e>=0){const _=oa(p.roomId,e,Q.FLOOR);if(_)switch(_.specialType){case ee.FIGURE_PURCHASABLE_SET:h=Dx;const E=_.customParams.split(",").map(b=>parseInt(b));for(const b of E)Tt().isValidFigureSetForGender(b,I)&&f.push(b);break}}if(h===Do){r();return}c(I),g(Tt().getFigureStringWithFigureIds(C,I,f)),s(h)},[p,e,r]),n===Do?null:l(se,{className:"nitro-use-product-confirmation",children:[t(ne,{headerText:m("useproduct.widget.title.bind_clothing"),onCloseClick:r}),t(re,{center:!0,children:l(v,{gap:2,overflow:"hidden",children:[t(S,{children:t(M,{className:"mannequin-preview",children:t(st,{figure:u,direction:2})})}),l(S,{justifyContent:"between",overflow:"auto",children:[l(S,{gap:2,children:[t(N,{children:m("useproduct.widget.text.bind_clothing")}),t(N,{children:m("useproduct.widget.info.bind_clothing")})]}),l(v,{alignItems:"center",justifyContent:"between",children:[t(L,{variant:"danger",onClick:r,children:m("useproduct.widget.cancel")}),t(L,{variant:"success",onClick:d,children:m("useproduct.widget.bind_clothing")})]})]})]})})]})},Lx=a=>{const{closeConfirm:e=null,processAction:r=null,onClose:n=null,objectId:s=-1,mode:o=null,confirmMode:c=null,confirmingObjectId:u=-1,groupData:g=null,isGroupMember:p=!1,objectOwnerId:d=-1}=ON(),{simpleAlert:h=null}=Xe();U($C,I=>{const f=I.getParser();if(f)switch(f.count){case 1:h(m("costumehopper.costumerequired.bodytext"),null,"catalog/open/temporary_effects",m("costumehopper.costumerequired.buy"),m("costumehopper.costumerequired.header"),null);break;case 2:h(m("viphopper.viprequired.bodytext"),null,"catalog/open/habbo_club",m("viprequired.buy.vip"),m("viprequired.header"),null);break;case 3:h(m("gate.viprequired.bodytext"),null,"catalog/open/habbo_club",m("viprequired.buy.vip"),m("gate.viprequired.title"),null);break}});const C=H().userId===d;return l(V,{children:[c===Ci&&t(Px,{objectId:u,onClose:e}),c===_i&&t(Mx,{objectId:u,onClose:e}),c===qd&&t(kx,{objectId:u,onClose:e}),c===bi&&t(Ox,{objectId:u,onClose:e}),t(yx,{ownerId:d}),s>=0&&o&&l(en,{objectId:s,category:Q.FLOOR,onClose:n,fades:!0,children:[o===Mt.FRIEND_FURNITURE&&l(V,{children:[t(Yt,{children:m("friendfurni.context.title")}),t(j,{onClick:I=>r("use_friend_furni"),children:m("friendfurni.context.use")})]}),o===Mt.MONSTERPLANT_SEED&&l(V,{children:[t(Yt,{children:m("furni.mnstr_seed.name")}),t(j,{onClick:I=>r("use_monsterplant_seed"),children:m("widget.monsterplant_seed.button.use")})]}),o===Mt.RANDOM_TELEPORT&&l(V,{children:[t(Yt,{children:m("furni.random_teleport.name")}),t(j,{onClick:I=>r("use_random_teleport"),children:m("widget.random_teleport.button.use")})]}),o===Mt.PURCHASABLE_CLOTHING&&l(V,{children:[t(Yt,{children:m("furni.generic_usable.name")}),t(j,{onClick:I=>r("use_purchaseable_clothing"),children:m("widget.generic_usable.button.use")})]}),o===Mt.MYSTERY_BOX&&l(V,{children:[t(Yt,{children:m("mysterybox.context.title")}),t(j,{onClick:I=>r("use_mystery_box"),children:m("mysterybox.context."+(C?"owner":"other")+".use")})]}),o===Mt.MYSTERY_TROPHY&&l(V,{children:[t(Yt,{children:m("mysterytrophy.header.title")}),t(j,{onClick:I=>r("use_mystery_trophy"),children:m("friendfurni.context.use")})]}),o===jd&&g&&l(V,{children:[t(Yt,{className:"cursor-pointer text-truncate",onClick:()=>eo(g.guildId),children:g.guildName}),!p&&t(j,{onClick:I=>r("join_group"),children:m("widget.furniture.button.join.group")}),t(j,{onClick:I=>r("go_to_group_homeroom"),children:m("widget.furniture.button.go.to.group.home.room")}),g.guildHasReadableForum&&t(j,{onClick:I=>r("open_forum"),children:m("widget.furniture.button.open_group_forum")})]})]})]})},Ux=a=>{const{objectId:e=-1,color:r=0,setColor:n=null,applyToner:s=null,toggleToner:o=null,onClose:c=null}=wN();return e===-1?null:l(se,{theme:"primary",className:"nitro-room-widget-toner",children:[t(ne,{headerText:m("widget.backgroundcolor.info"),onCloseClick:c}),l(re,{overflow:"hidden",justifyContent:"between",children:[t(S,{overflow:"auto",gap:1,children:t("input",{type:"color",className:"form-control",value:Qt.makeColorNumberHex(r),onChange:u=>n(Qt.convertFromHex(u.target.value))})}),l(S,{gap:1,children:[t(L,{fullWidth:!0,variant:"primary",onClick:o,children:m("widget.backgroundcolor.button.on")}),t(L,{fullWidth:!0,variant:"primary",onClick:s,children:m("widget.backgroundcolor.button.apply")})]})]})]})},Fx=a=>{const{objectId:e=-1,color:r="1",badgeName:n="",badgeDesc:s="",date:o="",senderName:c="",onClose:u=null}=xN();return e===-1?null:t(Rd,{color:r,message:s,date:o,senderName:c,customTitle:n,onCloseClick:u})},Gx=a=>{const{objectId:e=-1,recipes:r=[],ingredients:n=[],selectedRecipe:s=null,requiredIngredients:o=null,isCrafting:c=!1,craft:u=null,selectRecipe:g=null,onClose:p=null}=AN(),{roomSession:d=null}=Ge(),[h,C]=i.exports.useState(!1),I=i.exports.useMemo(()=>{const E=q().getRoomObject(d.roomId,e,Q.FLOOR);return Vt(E)},[e,d.roomId]),f=i.exports.useMemo(()=>{if(!o||!o.length)return!1;for(const E of o){const b=n.find(T=>T.name===E.itemName);if(!b||b.count<E.count)return!1}return!0},[n,o]),_=()=>{if(!h){C(!0);return}u(),C(!1)};return i.exports.useEffect(()=>{C(!1)},[s]),e===-1?null:l(se,{className:"nitro-widget-crafting",theme:"primary-slim",children:[t(ne,{headerText:m("crafting.title"),onCloseClick:p}),t(re,{children:l(v,{grow:!0,overflow:"hidden",gap:2,children:[l(v,{column:!0,fullWidth:!0,gap:2,children:[l(S,{overflow:"hidden",fullHeight:!0,children:[t("div",{className:"bg-muted rounded py-1 text-center",children:m("crafting.title.products")}),t(Ue,{columnCount:5,children:r.length>0&&r.map(E=>t(Re,{itemImage:E.iconUrl,itemActive:s&&s.name===E.name,onClick:()=>g(E)},E.name))})]}),l(S,{overflow:"hidden",fullHeight:!0,children:[t("div",{className:"bg-muted rounded py-1 text-center",children:m("crafting.title.mixer")}),t(Ue,{columnCount:5,children:n.length>0&&n.map(E=>t(Re,{itemImage:E.iconUrl,itemCount:E.count,itemCountMinimum:0,className:(E.count?"":"opacity-0-5 ")+"cursor-default"},E.name))})]})]}),l(v,{column:!0,fullWidth:!0,gap:2,children:[!s&&t(S,{center:!0,fullHeight:!0,className:"text-black text-center",children:m("crafting.info.start")}),s&&l(V,{children:[l(S,{overflow:"hidden",fullHeight:!0,children:[t("div",{className:"bg-muted rounded py-1 text-center",children:m("crafting.current_recipe")}),t(Ue,{columnCount:5,children:!!o&&o.length>0&&o.map(E=>{const b=n.find(w=>w.name===E.itemName),T=[];for(let w=0;w<E.count;w++)T.push(t(Re,{itemImage:b.iconUrl,className:(b.count-w<=0?"opacity-0-5 ":"")+"cursor-default"},w));return T})})]}),l(v,{gap:2,column:!0,fullHeight:!0,children:[l(v,{gap:2,className:"bg-muted rounded",column:!0,fullHeight:!0,children:[t("div",{className:"py-1 text-center",children:m("crafting.result")}),l(v,{gap:1,center:!0,column:!0,fullHeight:!0,className:"pb-1",children:[t(S,{fullHeight:!0,children:t("img",{src:s.iconUrl})}),t("div",{className:"text-black",children:s.localizedName})]})]}),l(L,{variant:!I||!f?"danger":h?"warning":c?"primary":"success",disabled:!I||!f||c,onClick:_,children:[!c&&m(I?f?h?"generic.confirm":"crafting.btn.craft":"crafting.status.recipe.incomplete":"crafting.btn.notowner"),c&&t(Wi,{})]})]})]})]})]})})]})},Bx=a=>{const[e,r]=i.exports.useState(!1),{presets:n=[],dimmerState:s=0,selectedPresetId:o=0,color:c=16777215,brightness:u=255,effectId:g=0,selectedColor:p=0,setSelectedColor:d=null,selectedBrightness:h=0,setSelectedBrightness:C=null,selectedEffectId:I=0,setSelectedEffectId:f=null,selectPresetId:_=null,applyChanges:E}=DN(),b=()=>{tr.previewDimmer(c,u,g===2),r(!1)};Se(ve.REMOVE_DIMMER,w=>r(!1)),i.exports.useEffect(()=>{!n||!n.length||r(!0)},[n]);const T=i.exports.useMemo(()=>K("widget.dimmer.colorwheel",!1),[]);return e?l(se,{className:"nitro-room-widget-dimmer",children:[t(ne,{headerText:m("widget.dimmer.title"),onCloseClick:b}),s===1&&t(fn,{children:n.map(w=>t(Zr,{isActive:o===w.id,onClick:O=>_(w.id),children:m(`widget.dimmer.tab.${w.id}`)},w.id))}),l(re,{children:[s===0&&l(S,{alignItems:"center",children:[t(M,{className:"dimmer-banner"}),t(N,{center:!0,className:"bg-muted rounded p-1",children:m("widget.dimmer.info.off")}),t(L,{fullWidth:!0,variant:"success",onClick:()=>tr.changeState(),children:m("widget.dimmer.button.on")})]}),s===1&&l(V,{children:[l(S,{gap:1,children:[t(N,{fontWeight:"bold",children:m("widget.backgroundcolor.hue")}),T&&t("input",{type:"color",className:"form-control",value:Qt.makeColorNumberHex(p),onChange:w=>d(Qt.convertFromHex(w.target.value))}),!T&&t(le,{gap:1,columnCount:7,children:tr.AVAILABLE_COLORS.map((w,O)=>t(S,{fullWidth:!0,pointer:!0,className:Rn("color-swatch rounded",w===p&&"active"),onClick:()=>d(w),style:{backgroundColor:tr.HTML_COLORS[O]}},O))})]}),l(S,{gap:1,children:[t(N,{fontWeight:"bold",children:m("widget.backgroundcolor.lightness")}),t(Pt,{className:"nitro-slider",min:tr.MIN_BRIGHTNESS,max:tr.MAX_BRIGHTNESS,value:h,onChange:w=>C(w),thumbClassName:"thumb percent",renderThumb:(w,O)=>t("div",{...w,children:tr.scaleBrightness(O.valueNow)})})]}),l(v,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"checkbox",checked:I===2,onChange:w=>f(w.target.checked?2:1)}),t(N,{children:m("widget.dimmer.type.checkbox")})]}),l(v,{gap:1,children:[t(L,{fullWidth:!0,variant:"danger",onClick:()=>tr.changeState(),children:m("widget.dimmer.button.off")}),t(L,{fullWidth:!0,variant:"success",onClick:E,children:m("widget.dimmer.button.apply")})]})]})]})]}):null},Vx=a=>{const{objectId:e=-1,value:r=0,onClose:n=null,redeem:s=null}=LN();return e===-1?null:l(se,{className:"nitro-widget-exchange-credit",theme:"primary",children:[t(ne,{headerText:m("catalog.redeem.dialog.title"),onCloseClick:n}),t(re,{center:!0,children:l(v,{overflow:"hidden",gap:2,children:[t(S,{center:!0,children:t(M,{className:"exchange-image"})}),l(S,{grow:!0,justifyContent:"between",overflow:"hidden",children:[l(S,{gap:1,overflow:"auto",children:[t(N,{fontWeight:"bold",children:m("creditfurni.description",["credits"],[r.toString()])}),t(N,{children:m("creditfurni.prompt")})]}),t(L,{variant:"success",onClick:s,children:m("catalog.redeem.dialog.button.exchange")})]})]})})]})},Hx=a=>{const{currentIndex:e=-1,currentPhotos:r=null}=a,[n,s]=i.exports.useState(0),o=r&&r.length?r[n]:null,c=()=>{s(g=>{let p=g+1;return p>=r.length&&(p=0),p})},u=()=>{s(g=>{let p=g-1;return p<0&&(p=r.length-1),p})};return i.exports.useEffect(()=>{s(e)},[e]),o?l(le,{style:{display:"flex",flexDirection:"column"},children:[t(v,{center:!0,className:"picture-preview border border-black",style:o.w?{backgroundImage:"url("+o.w+")"}:{},children:!o.w&&t(N,{bold:!0,children:m("camera.loading")})}),o.m&&o.m.length&&t(N,{center:!0,children:o.m}),l(v,{alignItems:"center",justifyContent:"between",children:[t(N,{children:o.n||""}),t(N,{children:new Date(o.t*1e3).toLocaleDateString()})]}),r.length>1&&l(v,{className:"picture-preview-buttons",children:[t(nu,{className:"cursor-pointer picture-preview-buttons-previous fa-icon",onClick:u}),t(N,{underline:!0,className:"cursor-pointer",onClick:g=>jt(o.oi),children:o.o}),t(su,{className:"cursor-pointer picture-preview-buttons-next fa-icon",onClick:c})]})]}):null},Wx=a=>{const{objectId:e=-1,currentPhotoIndex:r=-1,currentPhotos:n=null,onClose:s=null}=FN(),{report:o=null}=Or();return e===-1||r===-1?null:l(se,{className:"nitro-external-image-widget",theme:"primary-slim",children:[t(ne,{headerText:"",isGalleryPhoto:!0,onReportPhoto:()=>o(Ve.PHOTO,{extraData:n[r].w,roomId:n[r].s,reportedUserId:H().userId,roomObjectId:Number(n[r].u)}),onCloseClick:s}),t(re,{children:t(Hx,{currentIndex:r,currentPhotos:n})})]})},jx=a=>{const{objectId:e=-1,type:r=0,stage:n=0,usernames:s=[],figures:o=[],date:c=null,onClose:u=null,respond:g=null}=BN();if(e===-1)return null;if(n>0)return l(se,{className:"nitro-engraving-lock",theme:"primary",children:[t(ne,{headerText:m("friend.furniture.confirm.lock.caption"),onCloseClick:u}),l(re,{children:[t("h5",{className:"text-black text-center fw-bold mt-2 mb-2",children:m("friend.furniture.confirm.lock.subtitle")}),t("div",{className:"d-flex justify-content-center mb-2",children:t("div",{className:`engraving-lock-stage-${n}`})}),n===2&&t("div",{className:"text-small text-black text-center mb-2",children:m("friend.furniture.confirm.lock.other.locked")}),l(v,{gap:1,children:[t(L,{fullWidth:!0,onClick:p=>g(!1),children:m("friend.furniture.confirm.lock.button.cancel")}),t(L,{fullWidth:!0,variant:"success",onClick:p=>g(!0),children:m("friend.furniture.confirm.lock.button.confirm")})]})]})]});if(s.length>0)return t(yn,{handleSelector:".nitro-engraving-lock-view",children:l("div",{className:`nitro-engraving-lock-view engraving-lock-${r}`,children:[t("div",{className:"engraving-lock-close",onClick:u}),l(v,{justifyContent:"center",children:[t("div",{className:"engraving-lock-avatar",children:t(st,{figure:o[0],direction:2})}),t("div",{className:"engraving-lock-avatar",children:t(st,{figure:o[1],direction:4})})]}),l(S,{justifyContent:"between",className:"mt-1",children:[l(S,{alignItems:"center",justifyContent:"center",gap:1,children:[l("div",{children:[r===0&&m("lovelock.engraving.caption"),r===3&&m("wildwest.engraving.caption")]}),t("div",{children:c})]}),l(v,{justifyContent:"center",gap:4,children:[t("div",{children:s[0]}),t("div",{children:s[1]})]})]})]})})},qx=a=>{const{objectId:e=-1,classId:r=-1,itemType:n=null,text:s=null,isOwnerOfFurniture:o=!1,senderName:c=null,senderFigure:u=null,placedItemId:g=-1,placedItemType:p=null,placedInRoom:d=!1,imageUrl:h=null,openPresent:C=null,onClose:I=null}=tS(),{groupItems:f=[]}=Xn();if(e===-1)return null;const _=E=>{const b=f.find(T=>{var w;return((w=T.getItemById(E))==null?void 0:w.id)===E});b&&Is(b),I()};return l(se,{className:"nitro-gift-opening",theme:"primary",children:[t(ne,{headerText:m(c?"widget.furni.present.window.title_from":"widget.furni.present.window.title",["name"],[c]),onCloseClick:I}),l(re,{children:[g===-1&&l(S,{overflow:"hidden",children:[t(v,{center:!0,overflow:"auto",children:t(Sd,{userName:c,figure:u,message:s})}),o&&l(v,{gap:1,children:[c&&t(L,{fullWidth:!0,onClick:E=>Z("catalog/open"),children:m("widget.furni.present.give_gift",["name"],[c])}),t(L,{fullWidth:!0,variant:"success",onClick:C,children:m("widget.furni.present.open_gift")})]})]}),g>-1&&l(v,{gap:2,overflow:"hidden",children:[t(S,{center:!0,className:"p-2",children:t(hn,{imageUrl:h})}),l(S,{grow:!0,children:[l(S,{center:!0,gap:1,children:[t(N,{wrap:!0,small:!0,children:m("widget.furni.present.message_opened")}),t(N,{bold:!0,fontSize:5,children:s})]}),l(S,{grow:!0,gap:1,children:[l(v,{gap:1,children:[d&&t(L,{fullWidth:!0,onClick:null,children:m("widget.furni.present.put_in_inventory")}),t(L,{fullWidth:!0,variant:"success",onClick:E=>_(g),children:m(d?"widget.furni.present.keep_in_room":"widget.furni.present.place_in_room")})]}),c&&c.length&&t(L,{fullWidth:!0,onClick:E=>Z("catalog/open"),children:m("widget.furni.present.give_gift",["name"],[c])})]})]})]})]})]})},zx=a=>{const{stuffDatas:e=null,getScoreType:r=null,getClearType:n=null}=jN();return!e||!e.size?null:t(V,{children:Array.from(e.entries()).map(([s,o],c)=>t(el,{objectId:s,category:Q.FLOOR,children:l(S,{className:"nitro-widget-high-score nitro-context-menu",gap:0,children:[t(Yt,{children:m("high.score.display.caption",["scoretype","cleartype"],[m(`high.score.display.scoretype.${r(o.scoreType)}`),m(`high.score.display.cleartype.${n(o.clearType)}`)])}),l(mm,{overflow:"hidden",gap:1,className:"h-100",children:[l(S,{gap:1,children:[l(v,{alignItems:"center",children:[t(N,{center:!0,bold:!0,variant:"white",className:"col-8",children:m("high.score.display.users.header")}),t(N,{center:!0,bold:!0,variant:"white",className:"col-4",children:m("high.score.display.score.header")})]}),t("hr",{className:"m-0"})]}),t(S,{overflow:"auto",gap:1,className:"overflow-y-scroll",children:o.entries.map((u,g)=>l(v,{alignItems:"center",children:[t(N,{center:!0,variant:"white",className:"col-8",children:u.users.join(", ")}),t(N,{center:!0,variant:"white",className:"col-4",children:u.score})]},g))})]})]})},c))})},Yx=a=>(YN(),null),$x=-1,Mo=0,Za=1,ei=2,ti=3,ri=4,Kx=a=>{const[e,r]=i.exports.useState(null),[n,s]=i.exports.useState($x),{objectId:o=-1,figure:c=null,gender:u=null,clubLevel:g=ar.NO_CLUB,name:p=null,setName:d=null,saveFigure:h=null,wearFigure:C=null,saveName:I=null,onClose:f=null}=KN();return i.exports.useEffect(()=>{if(o===-1)return;const _=ye();if(_.isRoomOwner||_.controllerLevel>=tt.GUEST||H().isModerator){s(Mo);return}if(H().gender.toLowerCase()!==u.toLowerCase()){s(ri);return}if(pr()<g){s(ti);return}s(ei)},[o,u,g]),i.exports.useEffect(()=>{switch(n){case Mo:case ri:{const _=Tt().createFigureContainer(c);ms.transformAsMannequinFigure(_),r(_.getFigureString());break}case Za:{const _=Tt().createFigureContainer(H().figure);ms.transformAsMannequinFigure(_),r(_.getFigureString());break}case ei:case ti:{const _=ms.getMergedMannequinFigureContainer(H().figure,c);r(_.getFigureString());break}}},[n,c,g]),o===-1?null:l(se,{className:"nitro-mannequin no-resize",theme:"primary",children:[t(ne,{headerText:m("mannequin.widget.title"),onCloseClick:f}),t(re,{center:!0,children:l(v,{fullWidth:!0,gap:2,overflow:"hidden",children:[t(S,{children:l(M,{position:"relative",className:"mannequin-preview",children:[t(st,{position:"absolute",figure:e,direction:2}),g>0&&t(Et,{className:"position-absolute end-2 bottom-2",type:"hc"})]})}),l(S,{grow:!0,justifyContent:"between",overflow:"auto",children:[n===Mo&&l(V,{children:[t("input",{type:"text",className:"form-control form-control-sm",value:p,onChange:_=>d(_.target.value),onBlur:I}),l(S,{gap:1,children:[t(L,{variant:"success",onClick:_=>s(Za),children:m("mannequin.widget.style")}),t(L,{variant:"success",onClick:C,children:m("mannequin.widget.wear")})]})]}),n===Za&&l(V,{children:[l(S,{gap:1,children:[t(N,{bold:!0,children:p}),t(N,{wrap:!0,children:m("mannequin.widget.savetext")})]}),l(v,{alignItems:"center",justifyContent:"between",children:[t(N,{underline:!0,pointer:!0,onClick:_=>s(Mo),children:m("mannequin.widget.back")}),t(L,{variant:"success",onClick:h,children:m("mannequin.widget.save")})]})]}),n===ei&&l(V,{children:[l(S,{gap:1,children:[t(N,{bold:!0,children:p}),t(N,{children:m("mannequin.widget.weartext")})]}),t(L,{variant:"success",onClick:C,children:m("mannequin.widget.wear")})]}),n===ti&&t(v,{center:!0,grow:!0,children:t(N,{children:m("mannequin.widget.clubnotification")})}),n===ri&&t(N,{children:m("mannequin.widget.wronggender")})]})]})})]})},Xx=a=>(sS(),null),pm=["9CCEFF","FF9CFF","9CFF9C","FFFF33"],Qx=["blue","pink","green","yellow"],Jx=a=>{let e=pm.indexOf(a);return e===-1&&(e=0),Qx[e]},Zx=a=>{const{objectId:e=-1,color:r="0",setColor:n=null,text:s="",setText:o=null,canModify:c=!1,onClose:u=null}=aS();return e===-1?null:t(yn,{handleSelector:".drag-handler",windowPosition:At.TOP_LEFT,children:l("div",{className:"nitro-stickie nitro-stickie-image stickie-"+Jx(r),children:[l("div",{className:"d-flex align-items-center stickie-header drag-handler",children:[t("div",{className:"d-flex align-items-center flex-grow-1 h-100",children:c&&l(V,{children:[t("div",{className:"nitro-stickie-image stickie-trash header-trash",onClick:u}),pm.map(g=>t("div",{className:"stickie-color ms-1",onClick:p=>n(g),style:{backgroundColor:Qt.makeColorHex(g)}},g))]})}),t("div",{className:"d-flex align-items-center nitro-stickie-image stickie-close header-close",onClick:u})]}),t("div",{className:"stickie-context",children:t("textarea",{className:"context-text",value:s,onChange:g=>o(g.target.value),tabIndex:0,autoFocus:!0})})]})})},ey=a=>{const{objectId:e=-1,height:r=0,maxHeight:n=40,onClose:s=null,updateHeight:o=null}=lS(),[c,u]=i.exports.useState(""),g=p=>{u(p);const d=parseFloat(p);isNaN(d)||d===r||o(d)};return i.exports.useEffect(()=>{u(r.toString())},[r]),e===-1?null:l(se,{className:"nitro-widget-custom-stack-height",theme:"primary",children:[t(ne,{headerText:m("widget.custom.stack.height.title"),onCloseClick:s}),l(re,{justifyContent:"between",children:[t(N,{children:m("widget.custom.stack.height.text")}),l(v,{gap:2,children:[t(Pt,{className:"nitro-slider",min:0,max:n,step:.01,value:r,onChange:p=>o(p),renderThumb:(p,d)=>t("div",{...p,children:d.valueNow})}),t("input",{className:"show-number-arrows",style:{width:50},type:"number",min:0,max:n,value:c,onChange:p=>g(p.target.value)})]}),l(S,{gap:1,children:[t(L,{onClick:p=>D(new ai(e,-100)),children:m("furniture.above.stack")}),t(L,{onClick:p=>D(new ai(e,0)),children:m("furniture.floor.level")})]})]})]})},hm=["9CCEFF","FF9CFF","9CFF9C","FFFF33"],ty=["blue","pink","green","yellow"],ry=["post_it","post_it_shakesp","post_it_dreams","post_it_xmas","post_it_vd","post_it_juninas"],ny=["post_it","shakesp","dreams","christmas","heart","juninas"],sy=a=>{let e=hm.indexOf(a);return e===-1&&(e=0),ty[e]},oy=a=>{let e=ry.indexOf(a);return e===-1&&(e=0),ny[e]},ay=a=>{const{objectId:e=-1,color:r="0",text:n="",type:s="",canModify:o=!1,updateColor:c=null,updateText:u=null,trash:g=null,onClose:p=null}=uS(),[d,h]=i.exports.useState(!1);return i.exports.useEffect(()=>{h(!1)},[e,r,n,s]),e===-1?null:t(yn,{handleSelector:".drag-handler",windowPosition:At.TOP_LEFT,children:l("div",{className:"nitro-stickie nitro-stickie-image stickie-"+(s=="post_it"?sy(r):oy(s)),children:[l("div",{className:"d-flex align-items-center stickie-header drag-handler",children:[t("div",{className:"d-flex align-items-center flex-grow-1 h-100",children:o&&l(V,{children:[t("div",{className:"nitro-stickie-image stickie-trash header-trash",onClick:g}),s=="post_it"&&t(V,{children:hm.map(C=>t("div",{className:"stickie-color ms-1",onClick:I=>c(C),style:{backgroundColor:Qt.makeColorHex(C)}},C))})]})}),t("div",{className:"d-flex align-items-center nitro-stickie-image stickie-close header-close",onClick:p})]}),t("div",{className:"stickie-context",children:!d||!o?t("div",{className:"context-text",onClick:C=>o&&h(!0),children:n}):t("textarea",{className:"context-text",defaultValue:n,tabIndex:0,onBlur:C=>u(C.target.value),autoFocus:!0})})]})})},iy=a=>{const{objectId:e=-1,color:r="1",senderName:n="",date:s="",message:o="",onClose:c=null}=mS();return e===-1?null:t(Rd,{color:r,message:o,date:s,senderName:n,onCloseClick:c})},ly=a=>{const[e,r]=i.exports.useState(null),{objectId:n=-1,videoId:s=null,videoStart:o=0,videoEnd:c=0,currentVideoState:u=null,selectedVideo:g=null,playlists:p=[],onClose:d=null,previous:h=null,next:C=null,pause:I=null,play:f=null,selectVideo:_=null}=ES(),E=T=>{if(r(T.target),n!==-1)switch(T.target.getPlayerState()){case-1:case 1:u!==1&&f();return;case 2:u!==2&&I()}};if(i.exports.useEffect(()=>{if(!(u===null||!e)){if(u===vr.PLAYING&&e.getPlayerState()!==vr.PLAYING){e.playVideo();return}if(u===vr.PAUSED&&e.getPlayerState()!==vr.PAUSED){e.pauseVideo();return}}},[u,e]),n===-1)return null;const b={height:"375",width:"500",playerVars:{autoplay:1,disablekb:1,controls:0,origin:window.origin,modestbranding:1,start:o,end:c}};return l(se,{className:"youtube-tv-widget",children:[t(ne,{headerText:m("catalog.page.youtube_tvs"),onCloseClick:d}),t(re,{children:l("div",{className:"row w-100 h-100",children:[l("div",{className:"youtube-video-container col-9 overflow-hidden",children:[s&&s.length>0&&t(Bm,{videoId:s,opts:b,onReady:T=>r(T.target),onStateChange:E,containerClassName:"youtubeContainer"}),(!s||s.length===0)&&t("div",{className:"empty-video w-100 h-100 justify-content-center align-items-center d-flex",children:m("widget.furni.video_viewer.no_videos")})]}),l("div",{className:"playlist-container col-3 d-flex flex-column",children:[l("span",{className:"playlist-controls justify-content-center d-flex",children:[t("i",{className:"icon icon-youtube-prev cursor-pointer",onClick:h}),t("i",{className:"icon icon-youtube-next cursor-pointer",onClick:C})]}),t("div",{className:"mb-1",children:m("widget.furni.video_viewer.playlists")}),t(Ue,{columnCount:1,columnMinWidth:80,columnMinHeight:100,className:"mb-1",overflow:"auto",children:p&&p.map((T,w)=>t(Re,{onClick:O=>_(T.video),itemActive:T.video===g,children:t("b",{children:T.title})},w))})]})]})})]})},cy=a=>{const{diskInventory:e=null,addToPlaylist:r=null}=a,[n,s]=i.exports.useState(-1),[o,c]=i.exports.useState(-1),u=i.exports.useCallback((d,h)=>{d.stopPropagation(),c(C=>C===h?-1:h)},[]),g=i.exports.useCallback((d,h)=>{var C,I;d.stopPropagation(),r(h,(I=(C=Ce().soundManager.musicController)==null?void 0:C.getRoomItemPlaylist())==null?void 0:I.length)},[r]),p=()=>{Z("catalog/open/"+at.TRAX_SONGS)};return i.exports.useEffect(()=>{var d;if(o!==-1)return(d=Ce().soundManager.musicController)==null||d.playSong(o,Ps.PRIORITY_SONG_PLAY,0,0,0,0),()=>{var h;(h=Ce().soundManager.musicController)==null||h.stop(Ps.PRIORITY_SONG_PLAY)}},[o]),i.exports.useEffect(()=>()=>c(-1),[]),l(V,{children:[l("div",{className:"bg-success py-3 container-fluid justify-content-center d-flex rounded",children:[t("img",{src:K("image.library.url")+"playlist/title_mymusic.gif",className:"my-music"}),t("h2",{className:"ms-4",children:m("playlist.editor.my.music")})]}),t("div",{className:"h-100 overflow-y-scroll mt-4 py-2",children:t(Ue,{columnCount:3,columnMinWidth:95,gap:1,children:e&&e.getKeys().map((d,h)=>{var _;const C=e.getKey(h),I=e.getWithIndex(h),f=(_=Ce().soundManager.musicController)==null?void 0:_.getSongInfo(I);return l(Re,{itemActive:n===h,onClick:()=>s(E=>E===h?-1:h),classNames:["text-black"],children:[t("div",{className:"disk-image flex-shrink-0 mb-n2",style:{backgroundColor:fd(f==null?void 0:f.songData)}}),t(N,{truncate:!0,fullWidth:!0,className:"text-center",children:f==null?void 0:f.name}),n===h&&l(v,{position:"absolute",className:"bottom-0 mb-1 bg-secondary p-1 rounded",alignItems:"center",justifyContent:"center",gap:2,children:[t(L,{onClick:E=>u(E,I),variant:"light",children:t(M,{className:o===I?"pause-btn":"preview-song"})}),t(L,{onClick:E=>g(E,C),variant:"light",children:t(M,{className:"move-disk"})})]})]},h)})})}),l("div",{className:"playlist-bottom text-black p-1",children:[t("h5",{children:m("playlist.editor.text.get.more.music")}),t("div",{children:m("playlist.editor.text.you.have.no.songdisks.available")}),t("div",{children:m("playlist.editor.text.you.can.buy.some.from.the.catalogue")}),t("button",{className:"btn btn-primary btn-sm",onClick:()=>p(),children:m("playlist.editor.button.open.catalogue")})]}),t("img",{src:K("image.library.url")+"playlist/background_get_more_music.gif",className:"get-more"})]})},uy=a=>{var d,h;const{furniId:e=-1,playlist:r=null,currentPlayingIndex:n=-1,removeFromPlaylist:s=null,togglePlayPause:o=null}=a,[c,u]=i.exports.useState(-1),g=C=>{c===C&&s(C)},p=(C,I)=>{o(C,I!==-1?I:0)};return l(V,{children:[l("div",{className:"bg-primary py-3 container-fluid justify-content-center d-flex rounded",children:[t("img",{src:K("image.library.url")+"playlist/title_playlist.gif",className:"playlist-img"}),t("h2",{className:"ms-4",children:m("playlist.editor.playlist")})]}),t("div",{className:"h-100 overflow-y-scroll py-2",children:t(v,{column:!0,gap:2,children:r&&r.map((C,I)=>l(v,{gap:1,className:"text-black cursor-pointer "+(c===I?"border border-muted border-2 rounded":"border-2"),alignItems:"center",onClick:()=>u(f=>f===I?-1:I),children:[t(M,{onClick:()=>g(I),className:"disk-2 "+(c===I?"selected-song":""),style:{backgroundColor:c===I?"":fd(C.songData)}}),C.name]},I))})}),(!r||r.length===0)&&l(V,{children:[l("div",{className:"playlist-bottom text-black p-1 ms-5",children:[t("h5",{children:m("playlist.editor.add.songs.to.your.playlist")}),t("div",{children:m("playlist.editor.text.click.song.to.choose.click.again.to.move")})]}),t("img",{src:K("image.library.url")+"playlist/background_add_songs.gif",className:"add-songs"})]}),r&&r.length>0&&l(V,{children:[n===-1&&t(L,{variant:"success",size:"lg",onClick:()=>p(e,c),children:m("playlist.editor.button.play.now")}),n!==-1&&l(v,{gap:1,children:[t(L,{variant:"danger",onClick:()=>p(e,c),children:t(M,{className:"pause-song"})}),l(v,{column:!0,children:[t(N,{bold:!0,display:"block",children:m("playlist.editor.text.now.playing.in.your.room")}),t(N,{children:((d=r[n])==null?void 0:d.name)+" - "+((h=r[n])==null?void 0:h.creator)})]})]})]})]})},dy=a=>{const{objectId:e=-1,currentPlayingIndex:r=-1,playlist:n=null,diskInventory:s=null,onClose:o=null,togglePlayPause:c=null,removeFromPlaylist:u=null,addToPlaylist:g=null}=QN();return e===-1?null:l(se,{className:"nitro-playlist-editor-widget",theme:"primary-slim",children:[t(ne,{headerText:m("playlist.editor.title"),onCloseClick:o}),t(re,{children:l("div",{className:"d-flex flex-row gap-1 h-100",children:[t("div",{className:"w-50 position-relative overflow-hidden h-100 rounded d-flex flex-column",children:t(cy,{addToPlaylist:g,diskInventory:s})}),t("div",{className:"w-50 position-relative overflow-hidden h-100 rounded d-flex flex-column",children:t(uy,{furniId:e,removeFromPlaylist:u,playlist:n,togglePlayPause:c,currentPlayingIndex:r})})]})})]})},my=a=>l(M,{fit:!0,position:"absolute",className:"nitro-room-widgets top-0 start-0",children:[t(Ux,{}),t(Fx,{}),t(Gx,{}),t(Bx,{}),t(Vx,{}),t(Wx,{}),t(jx,{}),t(qx,{}),t(zx,{}),t(Yx,{}),t(Kx,{}),t(dy,{}),t(Xx,{}),t(Zx,{}),t(ey,{}),t(ay,{}),t(iy,{}),t(Lx,{}),t(ly,{})]}),gy=a=>{const{isVisible:e=!1,errorResult:r=null,petName:n=null,objectType:s=null,onChangePetName:o=null,onConfirm:c=null,onClose:u=null}=MS();return t(V,{children:e&&l(se,{className:"nitro-pet-package no-resize",theme:"primary-slim",children:[t(ne,{center:!0,headerText:m(s==="gnome_box"?"widgets.gnomepackage.name.title":"furni.petpackage.open"),onCloseClick:()=>u()}),l(re,{children:[l(v,{className:"pet-package-container-top p-3",children:[t("div",{className:`package-image-${s} flex-shrink-0`}),t("div",{className:"m-2",children:t(N,{variant:"white",className:"package-text-big",children:m(s==="gnome_box"?"widgets.gnomepackage.name.title":"furni.petpackage")})})]}),t(v,{className:"pet-package-container-bottom p-2",children:l(S,{gap:1,children:[l(v,{alignItems:"center",className:"bg-white rounded py-1 px-2 input-pet-package-container",children:[t("input",{type:"text",className:"form-control form-control-sm input-pet-package",maxLength:K("pet.package.name.max.length"),placeholder:m(s==="gnome_box"?"widgets.gnomepackage.name.select":"widgets.petpackage.name.title"),value:n,onChange:g=>o(g.target.value)}),t("div",{className:"package-pencil-image flex-shrink-0 small fa-icon"})]}),r.length>0&&t(M,{className:"invalid-feedback d-block m-0",children:r}),l(v,{className:"mt-2",gap:5,display:"flex",justifyContent:"center",alignItems:"center",children:[t(N,{pointer:!0,className:"text-decoration",onClick:()=>u(),children:m("cancel")}),t(Vm,{variant:n.length<3?"danger":"success",disabled:n.length<3,onClick:()=>c(),children:m(s==="gnome_box"?"widgets.gnomepackage.name.pick":"furni.petpackage.confirm")})]})]})})]})]})})},py=a=>{const[e,r]=i.exports.useState("bobba"),[n,s]=i.exports.useState(""),[o,c]=i.exports.useState(!1),{wordsFilter:u=[],isVisible:g=null,setWordsFilter:p,onClose:d=null}=yS(),{navigatorData:h=null}=kr(),C=_=>{(o?!n:!e)||(D(new KC(h.enteredGuestRoom.roomId,_,o?n:e)),s(""),r("bobba"),c(!1),!(_&&u.includes(o?n:e))&&p(E=>{const b=[...E];return _?b.push(o?n:e):b.splice(b.indexOf(o?n:e),1),b}))},I=_=>{r(_),c(!1)},f=_=>{s(_),c(!0)};return g?l(se,{className:"nitro-guide-tool no-resize",theme:"primary-slim",children:[t(ne,{headerText:m("navigator.roomsettings.roomfilter"),onCloseClick:()=>d()}),l(re,{className:"text-black",children:[l(le,{className:"d-flex align-items-center justify-content-end gap-2",children:[t("input",{type:"text",className:"form-control form-control-sm",maxLength:255,value:e,onChange:_=>I(_.target.value)}),t(L,{onClick:()=>C(!0),children:m("navigator.roomsettings.roomfilter.addword")})]}),t(S,{overflow:"auto",gap:0,className:"form-control form-control-sm",style:{height:"100px"},children:u&&u.length>0&&u.map((_,E)=>t(v,{alignItems:"center",className:Rn("rounded p-1",n===_&&"bg-muted"),pointer:!0,onClick:b=>f(_),children:t(N,{truncate:!0,children:_})},E))}),t(le,{className:"d-flex align-items-center justify-content-end gap-2",children:t(L,{variant:"danger",onClick:()=>C(!1),disabled:u.length===0||!o,children:m("navigator.roomsettings.roomfilter.removeword")})})]})]}):null},hy=a=>{const[e,r]=i.exports.useState(!1),{roomSession:n=null}=Ge();lt([Pr.SHOW_THUMBNAIL,Pr.HIDE_THUMBNAIL,Pr.TOGGLE_THUMBNAIL],o=>{switch(o.type){case Pr.SHOW_THUMBNAIL:r(!0);return;case Pr.HIDE_THUMBNAIL:r(!1);return;case Pr.TOGGLE_THUMBNAIL:r(c=>!c);return}});const s=o=>{q().saveTextureAsScreenshot(o,!0),r(!1)};return e?t(Ab,{roomId:n.roomId,textureReceiver:s,onClose:()=>r(!1)}):null},fy=a=>{var R,x,F,A;const[e,r]=i.exports.useState(!1),[n,s]=i.exports.useState(null),[o,c]=i.exports.useState(null),[u,g]=i.exports.useState(null),[p,d]=i.exports.useState(!1),[h,C]=i.exports.useState(!1),[I,f]=i.exports.useState(!0),[_,E]=i.exports.useState([]),{navigatorData:b=null}=kr(),{roomSession:T=null}=Ge(),w=(k,y)=>{switch(k){case"settings":Z("navigator/toggle-room-info");return;case"zoom":r(P=>{let G=q().getRoomInstanceRenderingCanvasScale(T.roomId,1);return P?G*=2:G/=2,q().setRoomInstanceRenderingCanvasScale(T.roomId,1,G),!P});return;case"chat_history":Z("chat-history/toggle");return;case"like_room":D(new XC(1));return;case"toggle_room_link":Z("navigator/toggle-room-link");return;case"navigator_search_tag":Z(`navigator/search/${y}`),D(new hs("hotel_view",`tag:${y}`));return;case"room_history":_.length>0&&C(P=>!P);return;case"room_history_back":Kt(_[_.findIndex(P=>P.roomId===b.currentRoomId)-1].roomId);return;case"room_history_next":Kt(_[_.findIndex(P=>P.roomId===b.currentRoomId)+1].roomId);return}},O=(k,y)=>{let P=JSON.parse(window.localStorage.getItem("nitro.room.history"));if(P&&P.filter(B=>B.roomId===k).length>0)return;P&&P.length>=10&&P.shift();const G=P?[...P,{roomId:k,roomName:y}]:[{roomId:k,roomName:y}];return E(G),Li("nitro.room.history",G)};return U(Ts,k=>{const y=k.getParser();!y.roomEnter||y.data.roomId!==T.roomId||(n!==y.data.roomName&&s(y.data.roomName),o!==y.data.ownerName&&c(y.data.ownerName),u!==y.data.tags&&g(y.data.tags),O(y.data.roomId,y.data.roomName))}),i.exports.useEffect(()=>{const k=()=>{JSON.parse(window.localStorage.getItem("nitro.room.history"))&&window.localStorage.removeItem("nitro.room.history")};return window.addEventListener("beforeunload",k),()=>{window.removeEventListener("beforeunload",k)}},[]),i.exports.useEffect(()=>{d(!0);const k=setTimeout(()=>d(!1),5e3);return()=>clearTimeout(k)},[n,o,u,I]),i.exports.useEffect(()=>{E(JSON.parse(window.localStorage.getItem("nitro.room.history"))??[])},[]),l(v,{className:"nitro-room-tools-container",gap:2,children:[t("div",{className:"btn-toggle toggle-roomtool d-flex align-items-center",onClick:()=>f(!I),children:t("div",{className:"toggle-icon "+(I?"left":"right")})}),I&&l(V,{children:[l(S,{gap:0,center:!0,className:"nitro-room-tools p-3 px-3",children:[l(v,{children:[l(S,{center:!0,className:"margin-icons p-2",children:[t(M,{pointer:!0,title:m("room.settings.button.text"),className:"icon icon-cog",onClick:()=>w("settings")}),t(M,{pointer:!0,title:m("room.zoom.button.text"),onClick:()=>w("zoom"),className:Rn("icon",!e&&"icon-zoom-less",e&&"icon-zoom-more")}),t(M,{pointer:!0,title:m("room.chathistory.button.text"),onClick:()=>w("chat_history"),className:"icon icon-chat-history"}),b.canRate&&t(M,{pointer:!0,title:m("room.like.button.text"),onClick:()=>w("like_room"),className:"icon icon-like-room"}),t(M,{pointer:!0,onClick:()=>w("toggle_room_link"),className:"icon icon-room-link"})]}),l(S,{children:[t(v,{className:"w-100 room-tool-item",children:t(N,{variant:"muted",underline:!0,small:!0,onClick:()=>w("settings"),children:m("room.settings.button.text")})}),t(v,{className:"w-100 room-tool-item",children:t(N,{variant:"muted",underline:!0,small:!0,onClick:()=>w("zoom"),children:m("room.zoom.button.text")})}),t(v,{className:"w-100 room-tool-item",children:t(N,{variant:"muted",underline:!0,small:!0,onClick:()=>w("chat_history"),children:m("room.chathistory.button.text")})}),b.canRate&&t(v,{className:"w-100 room-tool-item",children:t(N,{variant:"muted",underline:!0,small:!0,onClick:()=>w("like_room"),children:m("room.like.button.text")})}),t(v,{className:"w-100 room-tool-item",children:t(N,{variant:"muted",underline:!0,small:!0,onClick:()=>w("toggle_room_link"),children:m("navigator.embed.caption")})})]})]}),l(v,{justifyContent:"center",children:[t(M,{pointer:_.length>1&&((R=_[0])==null?void 0:R.roomId)!==b.currentRoomId,title:m("room.history.button.back.tooltip"),className:`icon ${(_==null?void 0:_.length)===0||((x=_[0])==null?void 0:x.roomId)===b.currentRoomId?"icon-room-history-back-disabled":"icon-room-history-back-enabled"}`,onClick:()=>{var k;return(_==null?void 0:_.length)===0||((k=_[0])==null?void 0:k.roomId)===b.currentRoomId?null:w("room_history_back")}}),t(M,{pointer:(_==null?void 0:_.length)>0,title:m("room.history.button.tooltip"),className:`icon ${(_==null?void 0:_.length)===0?"icon-room-history-disabled":"icon-room-history-enabled"} margin-button-history`,onClick:()=>(_==null?void 0:_.length)===0?null:w("room_history")}),t(M,{pointer:_.length>1&&((F=_[_.length-1])==null?void 0:F.roomId)!==b.currentRoomId,title:m("room.history.button.forward.tooltip"),className:`icon ${(_==null?void 0:_.length)===0||((A=_[_.length-1])==null?void 0:A.roomId)===b.currentRoomId?"icon-room-history-next-disabled":"icon-room-history-next-enabled"}`,onClick:()=>{var k;return(_==null?void 0:_.length)===0||((k=_[_.length-1])==null?void 0:k.roomId)===b.currentRoomId?null:w("room_history_next")}})]})]}),t(v,{className:"nitro-room-tools-history",style:{bottom:b.canRate?"210px":"180px"},children:t(Ns,{type:Nt.SLIDE_LEFT,inProp:h,children:t(S,{center:!0,children:t(S,{className:"nitro-room-history rounded py-2 px-3",children:t(S,{gap:1,children:_.length>0&&_.map(k=>t(N,{bold:k.roomId===b.currentRoomId,variant:k.roomId===b.currentRoomId?"white":"muted",pointer:!0,onClick:()=>Kt(k.roomId),children:k.roomName},k.roomId))})})})})}),t(S,{justifyContent:"center",children:t(Ns,{type:Nt.SLIDE_LEFT,inProp:p,timeout:300,children:t(S,{center:!0,children:l(S,{className:"nitro-room-tools-info rounded py-2 px-3",children:[l(S,{gap:1,children:[t(N,{wrap:!0,variant:"white",fontSize:4,children:n}),t(N,{variant:"muted",fontSize:5,children:o})]}),u&&u.length>0&&t(v,{gap:2,children:u.map((k,y)=>l(N,{small:!0,pointer:!0,variant:"white",className:"rounded bg-primary p-1",onClick:()=>w("navigator_search_tag",k),children:["#",k]},y))})]})})})})]})]})},Iy=a=>{const{question:e=null,canVote:r=null,vote:n=null,noVotes:s=null,yesVotes:o=null}=a;return l(S,{gap:2,className:"wordquiz-question p-2",children:[!r&&l(v,{fullWidth:!0,alignItems:"center",gap:2,children:[t(v,{center:!0,pointer:!0,className:"bg-danger rounded p-2",children:t(N,{variant:"white",children:s})}),t(N,{variant:"white",center:!0,textBreak:!0,children:e}),t(v,{center:!0,pointer:!0,className:"bg-success rounded p-2",children:t(N,{variant:"white",children:o})})]}),r&&l(S,{children:[t(N,{variant:"white",center:!0,textBreak:!0,children:e}),l(v,{fullWidth:!0,justifyContent:"center",gap:1,children:[t(v,{center:!0,pointer:!0,className:"bg-danger rounded p-1",onClick:c=>n(Ko),children:t(M,{className:"word-quiz-dislike"})}),t(v,{center:!0,pointer:!0,className:"bg-success rounded p-1",onClick:c=>n(Id),children:t(M,{className:"word-quiz-like"})})]})]})]})},Ey=a=>{const{userIndex:e=null,vote:r=null,...n}=a;return t(el,{objectId:e,category:Q.UNIT,...n,children:t(v,{center:!0,pointer:!0,className:`bg-${r===Ko?"danger":"success"} rounded p-1`,children:t(M,{className:`word-quiz-${r===Ko?"dislike":"like"}-sm`})})})},Cy=a=>{const{question:e=null,answerSent:r=!1,answerCounts:n=null,userAnswers:s=null,vote:o=null}=HS();return l(V,{children:[e&&t(Iy,{question:e.content,canVote:!r,vote:o,noVotes:n.get(Ko)||0,yesVotes:n.get(Id)||0}),s&&Array.from(s.entries()).map(([c,u],g)=>t(Ey,{userIndex:c,vote:u.value},g))]})},_y=a=>{const{roomSession:e=null}=Ge(),{simpleAlert:r=null}=Xe();return Se(ii.ROOM_ZOOM,n=>q().setRoomInstanceRenderingCanvasScale(n.roomId,1,n.level,null,null,!1,n.asDelta)),Se([ve.REQUEST_TEASER,ve.REQUEST_ECOTRONBOX,ve.REQUEST_CLOTHING_CHANGE,ve.REQUEST_PLAYLIST_EDITOR,ve.OPEN_WIDGET,ve.CLOSE_WIDGET,mo.FURNI_CLICK,mo.FURNI_DOUBLE_CLICK,mo.TOOLTIP_SHOW,mo.TOOLTIP_HIDE],n=>{if(e)switch(n.objectId,n.category,n.type){}}),ze([dt.RSEME_KICKED,dt.RSEME_PETS_FORBIDDEN_IN_HOTEL,dt.RSEME_PETS_FORBIDDEN_IN_FLAT,dt.RSEME_MAX_PETS,dt.RSEME_MAX_NUMBER_OF_OWN_PETS,dt.RSEME_NO_FREE_TILES_FOR_PET,dt.RSEME_SELECTED_TILE_NOT_FREE_FOR_PET,dt.RSEME_BOTS_FORBIDDEN_IN_HOTEL,dt.RSEME_BOTS_FORBIDDEN_IN_FLAT,dt.RSEME_BOT_LIMIT_REACHED,dt.RSEME_SELECTED_TILE_NOT_FREE_FOR_BOT,dt.RSEME_BOT_NAME_NOT_ACCEPTED],n=>{let s=m("error.title"),o="";switch(n.type){case dt.RSEME_MAX_PETS:o=m("room.error.max_pets");break;case dt.RSEME_MAX_NUMBER_OF_OWN_PETS:o=m("room.error.max_own_pets");break;case dt.RSEME_KICKED:o=m("room.error.kicked"),s=m("generic.alert.title");break;case dt.RSEME_PETS_FORBIDDEN_IN_HOTEL:o=m("room.error.pets.forbidden_in_hotel");break;case dt.RSEME_PETS_FORBIDDEN_IN_FLAT:o=m("room.error.pets.forbidden_in_flat");break;case dt.RSEME_NO_FREE_TILES_FOR_PET:o=m("room.error.pets.no_free_tiles");break;case dt.RSEME_SELECTED_TILE_NOT_FREE_FOR_PET:o=m("room.error.pets.selected_tile_not_free");break;case dt.RSEME_BOTS_FORBIDDEN_IN_HOTEL:o=m("room.error.bots.forbidden_in_hotel");break;case dt.RSEME_BOTS_FORBIDDEN_IN_FLAT:o=m("room.error.bots.forbidden_in_flat");break;case dt.RSEME_BOT_LIMIT_REACHED:o=m("room.error.max_bots");break;case dt.RSEME_SELECTED_TILE_NOT_FREE_FOR_BOT:o=m("room.error.bots.selected_tile_not_free");break;case dt.RSEME_BOT_NAME_NOT_ACCEPTED:o=m("room.error.bots.name.not.accepted");break;default:return}r(o,ue.DEFAULT,null,null,s)}),l(V,{children:[t(fx,{}),t(Nx,{}),t(Ex,{}),t(vx,{}),t(my,{}),t(fy,{}),t(py,{}),t(hy,{}),t(Sx,{}),t(gy,{}),t(Tx,{}),t(Cy,{}),t(Rx,{})]})},by=a=>{const{roomSession:e=null}=Ge(),r=i.exports.useRef();return i.exports.useEffect(()=>{const n=Ce().application.renderer.view;if(!n)return;n.onclick=o=>fo(o),n.onmousemove=o=>fo(o),n.onmousedown=o=>fo(o),n.onmouseup=o=>fo(o),n.ontouchstart=o=>Co(o),n.ontouchmove=o=>Co(o),n.ontouchend=o=>Co(o),n.ontouchcancel=o=>Co(o);const s=r.current;s&&s.appendChild(n)},[]),t(M,{fit:!0,innerRef:r,className:!e&&"d-none",children:e&&l(V,{children:[t(_y,{}),e.isSpectator&&t(zR,{})]})})},Ny=a=>{const{useGuideTool:e=!1,unseenAchievementCount:r=0,setMeExpanded:n=null,children:s=null,...o}=a,c=i.exports.useRef();return i.exports.useEffect(()=>{const u=ye();u&&q().selectRoomObject(u.roomId,u.ownRoomIndex,Q.UNIT)},[]),i.exports.useEffect(()=>{const u=g=>n(!1);return document.addEventListener("click",u),()=>document.removeEventListener(xe.MOUSE_CLICK,u)},[n]),l(v,{innerRef:c,alignItems:"center",className:"nitro-toolbar-me p-2",gap:3,children:[K("guides.enabled")&&e&&l(S,{gap:1,alignItems:"center",onClick:u=>St(new Bt(Bt.TOGGLE_GUIDE_TOOL)),children:[t(M,{pointer:!0,className:"navigation-item icon icon-me-helper-tool"}),t(N,{className:"me-text",children:m("widget.memenu.guide")})]}),l(S,{gap:1,alignItems:"center",onClick:u=>Z("achievements/toggle"),children:[t(M,{pointer:!0,className:"navigation-item icon icon-me-achievements",children:r>0&&t(xr,{count:r})}),t(N,{className:"me-text",children:m("widget.memenu.achievements")})]}),l(S,{gap:1,alignItems:"center",onClick:u=>jt(H().userId),children:[t(M,{pointer:!0,className:"navigation-item icon icon-me-profile"}),t(N,{className:"me-text",children:m("widget.memenu.profile")})]}),l(S,{gap:1,alignItems:"center",onClick:u=>Z("navigator/search/myworld_view"),children:[t(M,{pointer:!0,className:"navigation-item icon icon-me-rooms"}),t(N,{className:"me-text",children:m("widget.memenu.myrooms")})]}),l(S,{gap:1,alignItems:"center",onClick:u=>Z("avatar-editor/toggle"),children:[t(M,{pointer:!0,className:"navigation-item icon icon-me-clothing"}),t(N,{className:"me-text",children:m("widget.memenu.myclothes")})]}),s]})},Sy=a=>{const{isInRoom:e}=a,[r,n]=i.exports.useState(!1),[s,o]=i.exports.useState(!0),[c,u]=i.exports.useState(!0),[g,p]=i.exports.useState(!1),{userFigure:d=null}=En(),{getFullCount:h=0}=fr(),{getTotalUnseen:C=0}=ga(),{requests:I=[]}=cr(),{iconState:f=Ur.HIDDEN}=Fd(),_=H().isModerator;return U(Du,E=>{const b=E.getParser();p(b.isAllowed(Pu.USE_GUIDE_TOOL))}),Se(QC.ANIMATE_ICON,E=>{((T,w,O,R)=>{const x=document.body.getElementsByClassName(T)[0];if(!x)return;w.className="toolbar-icon-animation",w.style.visibility="visible",w.style.left=O+"px",w.style.top=R+"px",document.body.append(w);const F=x.getBoundingClientRect(),A=w.getBoundingClientRect(),k=A.x-F.x,y=A.y-F.y,P=Math.sqrt(k*k+y*y),G=500-Math.abs(1/P*100*500*.5),B=20,Y=`ToolbarBouncing[${T}]`;Pa.getMotionByTag(Y)||(Pa.runMotion(new Sl(new JC(G+8),new ZC(x,400,12))).tag=Y);const X=new Sl(new e_(new t_(w,G,F.x-A.x+B,F.y-A.y,100,1),1),new r_(w));Pa.runMotion(X)})("icon-inventory",E.image,E.x,E.y)}),l(V,{children:[t(Ns,{type:Nt.FADE_IN,inProp:r,timeout:300,children:t(Ny,{useGuideTool:g,unseenAchievementCount:C,setMeExpanded:n})}),t(v,{alignItems:"center",id:"toolbar-chat-input-container"}),l(v,{alignItems:"center",justifyContent:"between",gap:2,className:"nitro-toolbar py-1 px-3",children:[t("button",{className:s?"toolbar-left-collapse":"toolbar-left-collapse-active",onClick:()=>o(E=>!E)}),t(v,{gap:2,alignItems:"center",className:"toolbar-left-side",children:l(v,{alignItems:"center",gap:2,children:[s&&l(v,{gap:2,children:[e&&t(M,{pointer:!0,className:"navigation-item icon icon-habbo",onClick:E=>yi()}),!e&&t(M,{pointer:!0,className:"navigation-item icon icon-house",onClick:E=>Z("navigator/goto/home")}),t(M,{pointer:!0,className:"navigation-item icon icon-rooms",onClick:E=>Z("navigator/toggle")}),K("game.center.enabled")&&t(M,{pointer:!0,className:"navigation-item icon icon-game",onClick:E=>Z("games/toggle")})]}),t(M,{pointer:!0,className:"navigation-item icon icon-catalog",onClick:E=>Z("catalog/toggle")}),t(M,{pointer:!0,className:"navigation-item icon icon-inventory",onClick:E=>Z("inventory/toggle"),children:h>0&&t(xr,{count:h})}),l(v,{center:!0,pointer:!0,className:"navigation-item item-avatar "+(r?"active ":""),onClick:E=>n(!r),children:[t(st,{figure:d,direction:2,position:"absolute"}),C>0&&t(xr,{count:C})]}),e&&t(M,{pointer:!0,className:"navigation-item icon icon-camera",onClick:E=>Z("camera/toggle")}),_&&t(M,{pointer:!0,className:"navigation-item icon icon-modtools",onClick:E=>Z("mod-tools/toggle")})]})}),l(v,{alignItems:"center",gap:2,children:[l(v,{gap:2,children:[t(M,{pointer:!0,className:"navigation-item icon icon-friendall",onClick:E=>Z("friends/toggle"),children:I.length>0&&t(xr,{count:I.length})}),(f===Ur.SHOW||f===Ur.UNREAD)&&t(M,{pointer:!0,className:`navigation-item icon icon-message ${f===Ur.UNREAD&&"is-unseen"}`,onClick:E=>la()})]}),t(M,{id:"toolbar-friend-bar-container",className:c?"d-none d-lg-block":"d-none"})]}),t("button",{className:c?"toolbar-right-collapse":"toolbar-right-collapse-active",onClick:()=>u(E=>!E)})]})]})},Ty=a=>{const{badges:e=null,gap:r=1,justifyContent:n="between",...s}=a;return t(V,{children:e&&e.length>0&&e.map((o,c)=>t(S,{center:!0,children:t(je,{badgeCode:o},o)},o))})},vy=a=>{const{relationships:e=null}=a,r=({type:n})=>{const s=e&&e.relationshipStatusMap.hasKey(n)?e.relationshipStatusMap.getValue(n):null,o=Sn.RELATIONSHIP_NAMES[n].toLocaleLowerCase();return l(v,{fullWidth:!0,gap:1,children:[t(v,{center:!0,className:"user-relationship",children:t("i",{className:`nitro-friends-spritesheet icon-${o}`})}),l(S,{grow:!0,gap:0,children:[l(v,{alignItems:"center",justifyContent:"between",className:"profile-white-bg px-2 py-1 user-relationship",children:[l(N,{small:!0,underline:!0,pointer:!0,onClick:c=>s&&s.randomFriendId>=1&&jt(s.randomFriendId),children:[(!s||s.friendCount===0)&&m("extendedprofile.add.friends"),s&&s.friendCount>=1&&s.randomFriendName]}),s&&s.friendCount>=1&&t(v,{center:!0,position:"relative",className:"avatar-image-container",children:t(st,{figure:s.randomFriendFigure,headOnly:!0,direction:4})})]}),l(N,{small:!0,italics:!0,className:"user-relationship-count",children:[(!s||s.friendCount===0)&&m("extendedprofile.no.friends.in.this.category"),s&&s.friendCount>1&&m(`extendedprofile.relstatus.others.${o}`,["count"],[(s.friendCount-1).toString()])," "]})]})]})};return l(V,{children:[t(r,{type:Sn.HEART}),t(r,{type:Sn.SMILE}),t(r,{type:Sn.BOBBA})]})},wy=a=>{const{relationships:e=null,friendsCount:r=null}=a;return l(S,{gap:1,children:[l(N,{small:!0,children:[t("b",{children:m("extendedprofile.friends.count")})," ",r]}),t(N,{bold:!0,small:!0,children:m("extendedprofile.relstatus")}),t(S,{children:t(vy,{relationships:e})})]})},Ry=a=>{const{itsMe:e=null,groups:r=null,onLeaveGroup:n=null,overflow:s="hidden",gap:o=2,...c}=a,[u,g]=i.exports.useState(null),[p,d]=i.exports.useState(null);return U(Ks,h=>{const C=h.getParser();!u||u!==C.id||C.flag||d(C)}),i.exports.useEffect(()=>{u&&D(new Gs(u,!1))},[u]),i.exports.useEffect(()=>{d(null),r.length>0&&g(h=>(h===r[0].groupId&&D(new Gs(r[0].groupId,!1)),r[0].groupId))},[r]),!r||!r.length?t(S,{center:!0,fullHeight:!0,children:l(S,{className:"profile-grey-bg py-3 px-4",children:[l(N,{small:!0,children:[" ",m("extendedprofile.nogroups.user")]}),l(v,{justifyContent:"center",gap:4,children:[t(M,{className:"no-group-spritesheet image-1"}),t(M,{className:"no-group-spritesheet image-2"}),t(M,{className:"no-group-spritesheet image-3"})]}),t(N,{small:!0,children:m("extendedprofile.nogroups.info")})]})}):l(le,{overflow:s,gap:2,...c,children:[t(S,{alignItems:"center",size:2,overflow:"auto",children:t(Ue,{overflow:null,columnCount:1,columnMinHeight:50,className:"user-groups-container",children:r.map((h,C)=>l(Re,{overflow:"unset",itemActive:u===h.groupId,onClick:()=>g(h.groupId),className:"p-1",children:[e&&t("i",{className:"position-absolute end-0 top-0 z-index-1 icon icon-group-"+(h.favourite?"favorite":"not-favorite"),onClick:()=>ib(h)}),t(je,{badgeCode:h.badgeCode,isGroup:!0})]},C))})}),t(S,{size:10,overflow:"hidden",children:p&&t(am,{groupInformation:p,onClose:n})})]})},xy=a=>{const{userProfile:e=null}=a,[r,n]=i.exports.useState(e.requestSent),s=e.id===H().userId,o=!r&&!s&&!e.isMyFriend&&!e.requestSent,c=()=>{n(!0),D(new Iu(e.username))};return i.exports.useEffect(()=>{n(e.requestSent)},[e]),l(v,{gap:2,children:[t(S,{center:!0,className:"avatar-container",children:t(st,{figure:e.figure,direction:2})}),l(S,{children:[l(S,{gap:0,children:[t(N,{bold:!0,small:!0,children:e.username}),l(N,{italics:!0,textBreak:!0,small:!0,children:[e.motto," "]})]}),l(S,{gap:1,children:[l(N,{small:!0,children:[t("b",{children:m("extendedprofile.created")})," ",e.registration]}),l(N,{small:!0,children:[t("b",{children:m("extendedprofile.last.login")})," ",Tr.format(e.secondsSinceLastVisit,".ago",2)]}),l(N,{small:!0,children:[t("b",{children:m("extendedprofile.achievementscore")})," ",e.achievementPoints]})]}),l(v,{gap:1,children:[e.isOnline&&t("i",{className:"icon icon-pf-online"}),!e.isOnline&&t("i",{className:"icon icon-pf-offline"}),l(v,{alignItems:"center",gap:1,children:[o&&t(N,{small:!0,underline:!0,pointer:!0,onClick:c,children:m("extendedprofile.addasafriend")}),!o&&l(V,{children:[t("i",{className:"icon icon-pf-tick"}),s&&t(N,{bold:!0,small:!0,children:m("extendedprofile.me")}),e.isMyFriend&&t(N,{children:m("extendedprofile.friend")}),(r||e.requestSent)&&t(N,{children:m("extendedprofile.friendrequestsent")})]})]})]})]})]})},yy=a=>{const[e,r]=i.exports.useState(null),[n,s]=i.exports.useState([]),[o,c]=i.exports.useState(null),u=()=>{r(null),s([]),c(null)},g=()=>{!e||e.id!==H().userId||jt(e.id)};return U(n_,p=>{const d=p.getParser();!e||d.userId!==e.id||s(d.badges)}),U(Vu,p=>{const d=p.getParser();!e||d.userId!==e.id||c(d)}),U(o_,p=>{const d=p.getParser();let h=!1;r(C=>(C&&C.id&&(h=C.id===d.id),d)),h||(s([]),c(null)),D(new s_(d.id)),D(new Hu(d.id))}),U(a_,p=>{const d=p.getParser();d.userId==(e==null?void 0:e.id)&&jt(d.userId)}),Se(ht.SELECTED,p=>{if(!e||p.category!==Q.UNIT)return;const d=ye().userDataManager.getUserDataByIndex(p.objectId);d.type===gt.USER&&jt(d.webID)}),e?l(se,{uniqueKey:"nitro-user-profile",theme:"primary",className:"user-profile",children:[t(ne,{headerText:m("extendedprofile.caption"),onCloseClick:u}),l(re,{overflow:"hidden",children:[l(le,{fullHeight:!1,gap:2,children:[l(S,{size:7,gap:1,className:"user-container pe-2",children:[t(xy,{userProfile:e}),e.id===H().userId&&l(v,{className:"p-0",children:[t(N,{small:!0,underline:!0,className:"cursor-pointer",onClick:p=>Z("avatar-editor/toggle"),children:"Change Clothes"}),t(N,{className:"cursor-pointer badge-text",small:!0,underline:!0,onClick:p=>Z("inventory/toggle"),children:"Change Badges"})]}),t(le,{columnCount:5,fullHeight:!0,className:"profile-grey-bg p-1",children:t(Ty,{fullWidth:!0,center:!0,badges:n})})]}),t(S,{size:5,children:o&&t(wy,{relationships:o,friendsCount:e.friendsCount})})]}),t(v,{alignItems:"center",className:"rooms-button-container px-2 py-1",children:l(v,{alignItems:"center",gap:1,onClick:p=>Z(`navigator/search/hotel_view/owner:${e.username}`),children:[t("i",{className:"icon icon-rooms"}),t(N,{bold:!0,small:!0,underline:!0,pointer:!0,children:m("extendedprofile.rooms")})]})}),t(Ry,{fullWidth:!0,itsMe:e.id===H().userId,groups:e.groups,onLeaveGroup:g})]})]}):null},Oy=a=>{const[e,r]=i.exports.useState(!1),[n,s]=i.exports.useState(null),[o,c]=Ld(),[u,g]=Ud(),p=(h,C)=>{let I=!0;const f=n.clone();switch(h){case"close_view":r(!1),I=!1;return;case"oldchat":f.oldChat=C,D(new c_(f.oldChat));break;case"room_invites":f.roomInvites=C,D(new l_(f.roomInvites));break;case"camera_follow":f.cameraFollow=C,D(new i_(f.cameraFollow));break;case"system_volume":f.volumeSystem=C,f.volumeSystem=Math.max(0,f.volumeSystem),f.volumeSystem=Math.min(100,f.volumeSystem);break;case"furni_volume":f.volumeFurni=C,f.volumeFurni=Math.max(0,f.volumeFurni),f.volumeFurni=Math.min(100,f.volumeFurni);break;case"trax_volume":f.volumeTrax=C,f.volumeTrax=Math.max(0,f.volumeTrax),f.volumeTrax=Math.min(100,f.volumeTrax);break}I&&s(f),di(f)},d=h=>{switch(h){case"volume":D(new u_(Math.round(n.volumeSystem),Math.round(n.volumeFurni),Math.round(n.volumeTrax)));break}};return U(xu,h=>{const C=h.getParser(),I=new d_;I.volumeSystem=C.volumeSystem,I.volumeFurni=C.volumeFurni,I.volumeTrax=C.volumeTrax,I.oldChat=C.oldChat,I.roomInvites=C.roomInvites,I.cameraFollow=C.cameraFollow,I.flags=C.flags,I.chatType=C.chatType,s(I),di(I)}),i.exports.useEffect(()=>{const h={linkReceived:C=>{const I=C.split("/");if(!(I.length<2))switch(I[1]){case"show":r(!0);return;case"hide":r(!1);return;case"toggle":r(f=>!f);return}},eventUrlPrefix:"user-settings/"};return Ct(h),()=>_t(h)},[]),i.exports.useEffect(()=>{n&&St(n)},[n]),!e||!n?null:l(se,{uniqueKey:"user-settings",className:"user-settings-window",theme:"settings",children:[t(ne,{headerText:m("widget.memenu.settings.title"),onCloseClick:h=>p("close_view")}),l(re,{gap:3,className:"text-white",children:[l(S,{gap:1,children:[l(v,{alignItems:"center",gap:1,children:[t("input",{className:"flash-form-check-input",type:"checkbox",checked:n.oldChat,onChange:h=>p("oldchat",h.target.checked)}),t(N,{children:m("memenu.settings.chat.prefer.old.chat")})]}),l(v,{alignItems:"center",gap:1,children:[t("input",{className:"flash-form-check-input",type:"checkbox",checked:n.roomInvites,onChange:h=>p("room_invites",h.target.checked)}),t(N,{children:m("memenu.settings.other.ignore.room.invites")})]}),l(v,{alignItems:"center",gap:1,children:[t("input",{className:"flash-form-check-input",type:"checkbox",checked:n.cameraFollow,onChange:h=>p("camera_follow",h.target.checked)}),t(N,{children:m("memenu.settings.other.disable.room.camera.follow")})]}),l(v,{alignItems:"center",gap:1,children:[t("input",{className:"flash-form-check-input",type:"checkbox",checked:o,onChange:h=>c(h.target.checked)}),t(N,{children:m("memenu.settings.other.place.multiple.objects")})]}),l(v,{alignItems:"center",gap:1,children:[t("input",{className:"flash-form-check-input",type:"checkbox",checked:u,onChange:h=>g(h.target.checked)}),t(N,{children:m("memenu.settings.other.skip.purchase.confirmation")})]})]}),l(S,{children:[t(N,{center:!0,children:m("widget.memenu.settings.volume")}),l(v,{gap:2,children:[t(N,{className:"w-25",children:m("widget.memenu.settings.volume.ui")}),l(v,{alignItems:"center",gap:1,children:[t("i",{className:n.volumeSystem>1?"icon icon-sound-off":"icon icon-sound-off-active"}),l(S,{gap:0,children:[t(v,{className:"number-range"}),t("input",{type:"range",className:"custom-range",min:"0",max:"100",step:"1",id:"volumeSystem",value:n.volumeSystem,onChange:h=>p("system_volume",h.target.value),onMouseUp:()=>d("volume")})]}),t("i",{className:n.volumeSystem<1?"icon icon-sound-on":"icon icon-sound-on-active"})]})]}),l(v,{gap:2,children:[t(N,{className:"w-25",children:m("widget.memenu.settings.volume.furni")}),l(v,{alignItems:"center",gap:1,children:[t("i",{className:n.volumeFurni>1?"icon icon-sound-off":"icon icon-sound-off-active"}),l(S,{gap:0,children:[t(v,{className:"number-range"}),t("input",{type:"range",className:"custom-range",min:"0",max:"100",step:"1",id:"volumeFurni",value:n.volumeFurni,onChange:h=>p("furni_volume",h.target.value),onMouseUp:()=>d("volume")})]}),t("i",{className:n.volumeFurni<1?"icon icon-sound-on":"icon icon-sound-on-active"})]})]}),l(v,{gap:2,children:[t(N,{className:"w-25",children:m("widget.memenu.settings.volume.trax")}),l(v,{alignItems:"center",gap:1,children:[t("i",{className:n.volumeTrax>1?"icon icon-sound-off":"icon icon-sound-off-active"}),l(S,{gap:0,children:[t(v,{className:"number-range"}),t("input",{type:"range",className:"custom-range",min:"0",max:"100",step:"1",id:"volumeTrax",value:n.volumeTrax,onChange:h=>p("trax_volume",h.target.value),onMouseUp:()=>d("volume")})]}),t("i",{className:n.volumeTrax<1?"icon icon-sound-on":"icon icon-sound-on-active"})]})]})]}),t(v,{alignItems:"end",children:t(L,{onClick:h=>p("close_view"),children:m("generic.back")})})]})]})},ky=a=>{const{trigger:e=null,furniIds:r=[]}=Te();return l(S,{gap:1,children:[t(N,{gfbold:!0,children:m("wiredfurni.pickfurnis.caption",["count","limit"],[r.length.toString(),e.maximumItemSelectionCount.toString()])}),t(N,{children:m("wiredfurni.pickfurnis.desc")})]})},tl=a=>{const{wiredType:e="",requiresFurni:r=ae.STUFF_SELECTION_OPTION_NONE,save:n=null,validate:s=null,children:o=null,hasSpecialInput:c=!1}=a,[u,g]=i.exports.useState(null),[p,d]=i.exports.useState(null),[h,C]=i.exports.useState(!1),{trigger:I=null,setTrigger:f=null,setIntParams:_=null,setStringParam:E=null,setFurniIds:b=null,setAllowsFurni:T=null,saveWired:w=null}=Te(),O=()=>f(null),R=()=>{s&&!s()||(n&&n(),C(!0))};return i.exports.useEffect(()=>{h&&(w(),C(!1))},[h,w]),i.exports.useEffect(()=>{if(!I)return;const x=I.spriteId||-1,F=H().getFloorItemData(x);F?(g(F.name),d(F.description)):(g("NAME: "+x),d("NAME: "+x)),c&&(_(I.intData),E(I.stringData)),r>ae.STUFF_SELECTION_OPTION_NONE&&b(A=>(A&&A.length&&gs.clearSelectionShaderFromFurni(A),I.selectedItems&&I.selectedItems.length?(gs.applySelectionShaderToFurni(I.selectedItems),I.selectedItems):[])),T(r)},[I,c,r,_,E,b,T]),l(se,{uniqueKey:"nitro-wired",className:"nitro-wired",theme:"wired",children:[t(ne,{headerText:m("wiredfurni.title"),onCloseClick:O}),l(re,{children:[l(S,{gap:1,children:[l(v,{alignItems:"center",gap:1,children:[t("i",{className:`icon icon-wired-${e}`}),t(N,{gfbold:!0,children:u})]}),t(N,{children:p})]}),!!o&&t("hr",{className:"m-0 bg-dark"}),o,r>ae.STUFF_SELECTION_OPTION_NONE&&l(V,{children:[t("hr",{className:"m-0 bg-dark"}),t(ky,{})]}),l(v,{alignItems:"center",gap:1,children:[t("button",{type:"button",className:"btn btn-primary notification-buttons w-100",onClick:R,children:m("wiredfurni.ready")}),t("button",{type:"button",className:"btn btn-primary notification-buttons w-100",onClick:O,children:m("cancel")})]})]})]})},ut=a=>{const{requiresFurni:e=ae.STUFF_SELECTION_OPTION_NONE,save:r=null,hasSpecialInput:n=!1,children:s=null}=a,{trigger:o=null,actionDelay:c=0,setActionDelay:u=null}=Te();return i.exports.useEffect(()=>{u(o.delayInPulses)},[o,u]),l(tl,{wiredType:"action",requiresFurni:e,save:r,hasSpecialInput:n,children:[s,!!s&&t("hr",{className:"m-0 bg-dark"}),l(S,{children:[t(N,{gfbold:!0,children:m("wiredfurni.params.delay",["seconds"],[ro(c)])}),t(Pt,{className:"wired-slider",min:0,max:20,value:c,onChange:g=>u(g)})]})]})},Ay="hd-180-1.ch-210-66.lg-270-82.sh-290-81",Py=a=>{const[e,r]=i.exports.useState(""),[n,s]=i.exports.useState(""),{trigger:o=null,setStringParam:c=null}=Te(),u=()=>c(e+bs+n);return i.exports.useEffect(()=>{const g=o.stringData.split(bs);g.length>0&&r(g[0]),g.length>1&&s(g[1].length>0?g[1]:Ay)},[o]),l(ut,{requiresFurni:ae.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:u,children:[l(S,{gap:1,children:[t(N,{gfbold:!0,children:m("wiredfurni.params.bot.name")}),t("input",{type:"text",className:"form-control form-control-sm",maxLength:32,value:e,onChange:g=>r(g.target.value)})]}),l(v,{center:!0,children:[t(st,{figure:n,direction:4}),t(L,{onClick:g=>s(H().figure),children:m("wiredfurni.params.capture.figure")})]})]})},Dy=a=>{const[e,r]=i.exports.useState(""),[n,s]=i.exports.useState(-1),{trigger:o=null,setStringParam:c=null,setIntParams:u=null}=Te(),g=()=>{c(e),u([n])};return i.exports.useEffect(()=>{r(o.stringData),s(o.intData.length>0?o.intData[0]:0)},[o]),l(ut,{requiresFurni:ae.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:g,children:[l(S,{gap:1,children:[t(N,{gfbold:!0,children:m("wiredfurni.params.bot.name")}),t("input",{type:"text",className:"form-control form-control-sm",maxLength:32,value:e,onChange:p=>r(p.target.value)})]}),l(S,{gap:1,children:[l(v,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"radio",name:"followMode",id:"followMode1",checked:n===1,onChange:p=>s(1)}),t(N,{children:m("wiredfurni.params.start.following")})]}),l(v,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"radio",name:"followMode",id:"followMode2",checked:n===0,onChange:p=>s(0)}),t(N,{children:m("wiredfurni.params.stop.following")})]})]})]})},My=[2,5,7,8,9,10,27],Ly=a=>{const[e,r]=i.exports.useState(""),[n,s]=i.exports.useState(-1),{trigger:o=null,setStringParam:c=null,setIntParams:u=null}=Te(),g=()=>{c(e),u([n])};return i.exports.useEffect(()=>{r(o.stringData),s(o.intData.length>0?o.intData[0]:0)},[o]),l(ut,{requiresFurni:ae.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:g,children:[l(S,{gap:1,children:[t(N,{gfbold:!0,children:m("wiredfurni.params.bot.name")}),t("input",{type:"text",className:"form-control form-control-sm",maxLength:32,value:e,onChange:p=>r(p.target.value)})]}),l(S,{gap:1,children:[t(N,{gfbold:!0,children:m("wiredfurni.params.handitem")}),l("select",{className:"form-select form-select-sm",value:n,onChange:p=>s(parseInt(p.target.value)),children:[t("option",{value:"0",children:"------"}),My.map(p=>t("option",{value:p,children:m(`handitem${p}`)},p))]})]})]})},Uy=a=>{const[e,r]=i.exports.useState(""),{trigger:n=null,setStringParam:s=null}=Te(),o=()=>s(e);return i.exports.useEffect(()=>{r(n.stringData)},[n]),t(ut,{requiresFurni:ae.STUFF_SELECTION_OPTION_BY_ID,hasSpecialInput:!0,save:o,children:l(S,{gap:1,children:[t(N,{gfbold:!0,children:m("wiredfurni.params.bot.name")}),t("input",{type:"text",className:"form-control form-control-sm",maxLength:32,value:e,onChange:c=>r(c.target.value)})]})})},Fy=a=>{const[e,r]=i.exports.useState(""),[n,s]=i.exports.useState(""),[o,c]=i.exports.useState(-1),{trigger:u=null,setStringParam:g=null,setIntParams:p=null}=Te(),d=()=>{g(e+bs+n),p([o])};return i.exports.useEffect(()=>{const h=u.stringData.split(bs);h.length>0&&r(h[0]),h.length>1&&s(h[1].length>0?h[1]:""),c(u.intData.length>0?u.intData[0]:0)},[u]),l(ut,{requiresFurni:ae.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:d,children:[l(S,{gap:1,children:[t(N,{gfbold:!0,children:m("wiredfurni.params.bot.name")}),t("input",{type:"text",className:"form-control form-control-sm",maxLength:32,value:e,onChange:h=>r(h.target.value)})]}),l(S,{gap:1,children:[t(N,{gfbold:!0,children:m("wiredfurni.params.message")}),t("input",{type:"text",className:"form-control form-control-sm",maxLength:64,value:n,onChange:h=>s(h.target.value)})]}),l(S,{gap:1,children:[l(v,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"radio",name:"talkMode",id:"talkMode1",checked:o===0,onChange:h=>c(0)}),t(N,{children:m("wiredfurni.params.talk")})]}),l(v,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"radio",name:"talkMode",id:"talkMode2",checked:o===1,onChange:h=>c(1)}),t(N,{children:m("wiredfurni.params.whisper")})]})]})]})},Gy=a=>{const[e,r]=i.exports.useState(""),[n,s]=i.exports.useState(""),[o,c]=i.exports.useState(-1),{trigger:u=null,setStringParam:g=null,setIntParams:p=null}=Te(),d=()=>{g(e+bs+n),p([o])};return i.exports.useEffect(()=>{const h=u.stringData.split(bs);h.length>0&&r(h[0]),h.length>1&&s(h[1].length>0?h[1]:""),c(u.intData.length>0?u.intData[0]:0)},[u]),l(ut,{requiresFurni:ae.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:d,children:[l(S,{gap:1,children:[t(N,{gfbold:!0,children:m("wiredfurni.params.bot.name")}),t("input",{type:"text",className:"form-control form-control-sm",maxLength:32,value:e,onChange:h=>r(h.target.value)})]}),l(S,{gap:1,children:[t(N,{gfbold:!0,children:m("wiredfurni.params.message")}),t("input",{type:"text",className:"form-control form-control-sm",maxLength:K("wired.action.bot.talk.max.length",64),value:n,onChange:h=>s(h.target.value)})]}),l(S,{gap:1,children:[l(v,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"radio",name:"talkMode",id:"talkMode1",checked:o===0,onChange:h=>c(0)}),t(N,{children:m("wiredfurni.params.talk")})]}),l(v,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"radio",name:"talkMode",id:"talkMode2",checked:o===1,onChange:h=>c(1)}),t(N,{children:m("wiredfurni.params.shout")})]})]})]})},By=a=>{const[e,r]=i.exports.useState(""),{trigger:n=null,setStringParam:s=null}=Te(),o=()=>s(e);return i.exports.useEffect(()=>{r(n.stringData)},[n]),t(ut,{requiresFurni:ae.STUFF_SELECTION_OPTION_BY_ID,hasSpecialInput:!0,save:o,children:l(S,{gap:1,children:[t(N,{gfbold:!0,children:m("wiredfurni.params.bot.name")}),t("input",{type:"text",className:"form-control form-control-sm",maxLength:32,value:e,onChange:c=>r(c.target.value)})]})})},Vy=a=>t(ut,{requiresFurni:ae.STUFF_SELECTION_OPTION_BY_ID_BY_TYPE_OR_FROM_CONTEXT,hasSpecialInput:!1,save:null}),Hy=a=>t(ut,{requiresFurni:ae.STUFF_SELECTION_OPTION_BY_ID_BY_TYPE_OR_FROM_CONTEXT,hasSpecialInput:!1,save:null}),Wy=a=>{const[e,r]=i.exports.useState(""),{trigger:n=null,setStringParam:s=null}=Te(),o=()=>s(e);return i.exports.useEffect(()=>{r(n.stringData)},[n]),t(ut,{requiresFurni:ae.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:o,children:l(S,{gap:1,children:[t(N,{gfbold:!0,children:m("wiredfurni.params.message")}),t("input",{type:"text",className:"form-control form-control-sm",value:e,onChange:c=>r(c.target.value),maxLength:K("wired.action.chat.max.length",100)})]})})},jy=a=>t(ut,{requiresFurni:ae.STUFF_SELECTION_OPTION_BY_ID_BY_TYPE_OR_FROM_CONTEXT,hasSpecialInput:!1,save:null}),qy=a=>{const[e,r]=i.exports.useState(!1),[n,s]=i.exports.useState(1),[o,c]=i.exports.useState(!1),[u,g]=i.exports.useState(1),[p,d]=i.exports.useState(1),[h,C]=i.exports.useState([]),{trigger:I=null,setIntParams:f=null,setStringParam:_=null}=Te(),E=()=>C(O=>[...O,{isBadge:!1,itemCode:"",probability:null}]),b=O=>{C(R=>{const x=Array.from(R);return x.splice(O,1),x})},T=(O,R,x,F)=>{const A=Array.from(h),k=A[O];k&&(k.isBadge=R,k.itemCode=x,k.probability=F,C(A))},w=()=>{let O=[];for(const R of h){if(!R.itemCode)continue;const x=[R.isBadge?"0":"1",R.itemCode,R.probability.toString()];O.push(x.join(","))}O.length>0&&(_(O.join(";")),f([n,o?1:0,u,p]))};return i.exports.useEffect(()=>{const O=[];if(I.stringData.length>0&&I.stringData.includes(";")){const R=I.stringData.split(";");for(const x of R){const F=x.split(",");F.length===3&&O.push({isBadge:F[0]==="0",itemCode:F[1],probability:Number(F[2])})}}O.length===0&&O.push({isBadge:!1,itemCode:"",probability:null}),s(I.intData.length>0?I.intData[0]:0),c(I.intData.length>1?I.intData[1]===1:!1),g(I.intData.length>2?I.intData[2]:0),d(I.intData.length>3?I.intData[3]:0),r(I.intData.length>3?I.intData[3]>0:!1),C(O)},[I]),l(ut,{requiresFurni:ae.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:w,children:[l(v,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"checkbox",id:"limitEnabled",onChange:O=>r(O.target.checked)}),t(N,{children:m("wiredfurni.params.prizelimit",["amount"],[e?u.toString():""])})]}),!e&&t(N,{center:!0,className:"bg-muted rounded p-1",children:"Reward limit not set. Make sure rewards are badges or non-tradeable items."}),e&&t(Pt,{className:"wired-slider",min:1,max:1e3,value:u,onChange:O=>g(O)}),t("hr",{className:"m-0 bg-dark"}),l(S,{gap:1,children:[t(N,{gfbold:!0,children:"How often can a user be rewarded?"}),l(v,{gap:1,children:[l("select",{className:"form-select form-select-sm w-100",value:n,onChange:O=>s(Number(O.target.value)),children:[t("option",{value:"0",children:"Once"}),l("option",{value:"3",children:["Once every ",p," minutes"]}),l("option",{value:"2",children:["Once every ",p," hours"]}),l("option",{value:"1",children:["Once every ",p," days"]})]}),n>0&&t("input",{type:"number",className:"form-control form-control-sm",value:p,onChange:O=>d(Number(O.target.value))})]})]}),t("hr",{className:"m-0 bg-dark"}),l(v,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"checkbox",id:"uniqueRewards",checked:o,onChange:O=>c(O.target.checked)}),t(N,{children:"Unique rewards"})]}),t(N,{center:!0,className:"bg-muted rounded p-1",children:"If checked each reward will be given once to each user. This will disable the probabilities option."}),t("hr",{className:"m-0 bg-dark"}),l(v,{justifyContent:"between",alignItems:"center",children:[t(N,{gfbold:!0,children:"Rewards"}),t(L,{variant:"success",onClick:E,children:t(Ss,{className:"fa-icon"})})]}),t(S,{gap:1,children:h&&h.map((O,R)=>l(v,{gap:1,children:[l(v,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"checkbox",checked:O.isBadge,onChange:x=>T(R,x.target.checked,O.itemCode,O.probability)}),t(N,{children:"Badge?"})]}),t("input",{type:"text",className:"form-control form-control-sm",value:O.itemCode,onChange:x=>T(R,O.isBadge,x.target.value,O.probability),placeholder:"Item Code"}),t("input",{type:"number",className:"form-control form-control-sm",value:O.probability,onChange:x=>T(R,O.isBadge,O.itemCode,Number(x.target.value)),placeholder:"Probability"}),R>0&&t(L,{variant:"danger",onClick:x=>b(R),children:t(Ti,{className:"fa-icon"})})]},R))})]})},zy=a=>{const[e,r]=i.exports.useState(1),[n,s]=i.exports.useState(1),[o,c]=i.exports.useState(1),{trigger:u=null,setIntParams:g=null}=Te(),p=()=>g([e,n,o]);return i.exports.useEffect(()=>{u.intData.length>=2?(r(u.intData[0]),s(u.intData[1]),c(u.intData[2])):(r(1),s(1),c(1))},[u]),l(ut,{requiresFurni:ae.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:p,children:[l(S,{gap:1,children:[t(N,{gfbold:!0,children:m("wiredfurni.params.setpoints",["points"],[e.toString()])}),t(Pt,{className:"wired-slider",min:1,max:100,value:e,onChange:d=>r(d)})]}),l(S,{gap:1,children:[t(N,{gfbold:!0,children:m("wiredfurni.params.settimesingame",["times"],[n.toString()])}),t(Pt,{className:"wired-slider",min:1,max:10,value:n,onChange:d=>s(d)})]}),l(S,{gap:1,children:[t(N,{gfbold:!0,children:m("wiredfurni.params.team")}),[1,2,3,4].map(d=>l(v,{gap:1,children:[t("input",{className:"form-check-input",type:"radio",name:"selectedTeam",id:`selectedTeam${d}`,checked:o===d,onChange:h=>c(d)}),t(N,{children:m("wiredfurni.params.team."+d)})]},d))]})]})},Yy=a=>{const[e,r]=i.exports.useState(1),[n,s]=i.exports.useState(1),{trigger:o=null,setIntParams:c=null}=Te(),u=()=>c([e,n]);return i.exports.useEffect(()=>{o.intData.length>=2?(r(o.intData[0]),s(o.intData[1])):(r(1),s(1))},[o]),l(ut,{requiresFurni:ae.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:u,children:[l(S,{gap:1,children:[t(N,{gfbold:!0,children:m("wiredfurni.params.setpoints",["points"],[e.toString()])}),t(Pt,{className:"wired-slider",min:1,max:100,value:e,onChange:g=>r(g)})]}),l(S,{gap:1,children:[t(N,{gfbold:!0,children:m("wiredfurni.params.settimesingame",["times"],[n.toString()])}),t(Pt,{className:"wired-slider",min:1,max:10,value:n,onChange:g=>s(g)})]})]})},$y=a=>{const[e,r]=i.exports.useState(-1),{trigger:n=null,setIntParams:s=null}=Te(),o=()=>s([e]);return i.exports.useEffect(()=>{r(n.intData.length>0?n.intData[0]:0)},[n]),t(ut,{requiresFurni:ae.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:o,children:l(S,{gap:1,children:[t(N,{gfbold:!0,children:m("wiredfurni.params.team")}),[1,2,3,4].map(c=>l(v,{gap:1,children:[t("input",{className:"form-check-input",type:"radio",name:"selectedTeam",id:`selectedTeam${c}`,checked:e===c,onChange:u=>r(c)}),t(N,{children:m(`wiredfurni.params.team.${c}`)})]},c))]})})},Ky=a=>{const[e,r]=i.exports.useState(""),{trigger:n=null,setStringParam:s=null}=Te(),o=()=>s(e);return i.exports.useEffect(()=>{r(n.stringData)},[n]),t(ut,{requiresFurni:ae.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:o,children:l(S,{gap:1,children:[t(N,{gfbold:!0,children:m("wiredfurni.params.message")}),t("input",{type:"text",className:"form-control form-control-sm",value:e,onChange:c=>r(c.target.value),maxLength:K("wired.action.kick.from.room.max.length",100)})]})})},Xy=a=>t(ut,{requiresFurni:ae.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!1,save:null}),Qy=[{value:0,icon:"ne"},{value:2,icon:"se"},{value:4,icon:"sw"},{value:6,icon:"nw"}],Jy=[0,1,2,3,4,5,6],Zy=a=>{const[e,r]=i.exports.useState(-1),[n,s]=i.exports.useState(-1),{trigger:o=null,setIntParams:c=null}=Te(),u=()=>c([e,n]);return i.exports.useEffect(()=>{o.intData.length>=2?(r(o.intData[0]),s(o.intData[1])):(r(-1),s(-1))},[o]),l(ut,{requiresFurni:ae.STUFF_SELECTION_OPTION_BY_ID_BY_TYPE_OR_FROM_CONTEXT,hasSpecialInput:!0,save:u,children:[l(S,{gap:1,children:[t(N,{gfbold:!0,children:m("wiredfurni.params.startdir")}),t(v,{gap:1,children:Qy.map(g=>l(v,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"radio",name:"movement",id:`movement${g.value}`,checked:e===g.value,onChange:p=>r(g.value)}),t(N,{children:t("i",{className:`icon icon-${g.icon}`})})]},g.value))})]}),l(S,{gap:1,children:[t(N,{gfbold:!0,children:m("wiredfurni.params.turn")}),Jy.map(g=>l(v,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"radio",name:"rotation",id:`rotation${g}`,checked:n===g,onChange:p=>s(g)}),t(N,{children:m(`wiredfurni.params.turn.${g}`)})]},g))]})]})},eO=[{value:0,icon:"ne"},{value:2,icon:"se"},{value:4,icon:"sw"},{value:6,icon:"nw"}],tO=a=>{const[e,r]=i.exports.useState(-1),[n,s]=i.exports.useState(-1),{trigger:o=null,setIntParams:c=null}=Te(),u=()=>c([n,e]);return i.exports.useEffect(()=>{o.intData.length>=2?(r(o.intData[1]),s(o.intData[0])):(r(-1),s(-1))},[o]),l(ut,{requiresFurni:ae.STUFF_SELECTION_OPTION_BY_ID_OR_BY_TYPE,hasSpecialInput:!0,save:u,children:[l(S,{gap:1,children:[t(N,{gfbold:!0,children:m("wiredfurni.params.emptytiles",["tiles"],[e.toString()])}),t(Pt,{className:"wired-slider",min:1,max:5,value:e,onChange:g=>r(g)})]}),l(S,{gap:1,children:[t(N,{gfbold:!0,children:m("wiredfurni.params.startdir")}),t(v,{gap:1,children:eO.map(g=>l(v,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"radio",name:"movement",id:`movement${g.value}`,checked:n===g.value,onChange:p=>s(g.value)}),t(N,{children:t("i",{className:`icon icon-${g.icon}`})})]},g.value))})]})]})},rO=[{value:4,icon:"ne"},{value:5,icon:"se"},{value:6,icon:"sw"},{value:7,icon:"nw"},{value:2,icon:"mv-2"},{value:3,icon:"mv-3"},{value:1,icon:"mv-1"}],nO=[0,1,2,3],sO=a=>{const[e,r]=i.exports.useState(-1),[n,s]=i.exports.useState(-1),{trigger:o=null,setIntParams:c=null}=Te(),u=()=>c([e,n]);return i.exports.useEffect(()=>{o.intData.length>=2?(r(o.intData[0]),s(o.intData[1])):(r(-1),s(-1))},[o]),l(ut,{requiresFurni:ae.STUFF_SELECTION_OPTION_BY_ID_BY_TYPE_OR_FROM_CONTEXT,hasSpecialInput:!0,save:u,children:[l(S,{gap:1,children:[t(N,{gfbold:!0,children:m("wiredfurni.params.movefurni")}),l(v,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"radio",name:"selectedTeam",id:"movement0",checked:e===0,onChange:g=>r(0)}),t(N,{children:m("wiredfurni.params.movefurni.0")})]}),l(v,{gap:1,children:[rO.map(g=>l(v,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"radio",name:"movement",id:`movement${g.value}`,checked:e===g.value,onChange:p=>r(g.value)}),t("i",{className:`icon icon-${g.icon}`})]},g.value)),t("div",{className:"col"})]})]}),l(S,{gap:1,children:[t(N,{gfbold:!0,children:m("wiredfurni.params.rotatefurni")}),nO.map(g=>l(v,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"radio",name:"rotation",id:`rotation${g}`,checked:n===g,onChange:p=>s(g)}),l(N,{children:[[1,2].includes(g)&&t("i",{className:`icon icon-rot-${g}`}),m(`wiredfurni.params.rotatefurni.${g}`)]})]},g))]})]})},oO=a=>{const[e,r]=i.exports.useState(-1),[n,s]=i.exports.useState(""),{trigger:o=null,setIntParams:c=null,setStringParam:u=null}=Te(),g=()=>{c([e]),u(n)};return i.exports.useEffect(()=>{r(o.intData.length>0?o.intData[0]:0),s(o.stringData)},[o]),l(ut,{requiresFurni:ae.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:g,children:[l(S,{gap:1,children:[t(N,{gfbold:!0,children:m("wiredfurni.params.length.minutes",["minutes"],[e.toString()])}),t(Pt,{className:"wired-slider",min:1,max:10,value:e,onChange:p=>r(p)})]}),l(S,{gap:1,children:[t(N,{gfbold:!0,children:m("wiredfurni.params.message")}),t("input",{type:"text",className:"form-control form-control-sm",value:n,onChange:p=>s(p.target.value),maxLength:K("wired.action.mute.user.max.length",100)})]})]})},aO=a=>t(ut,{requiresFurni:ae.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!1,save:null}),iO=a=>{const[e,r]=i.exports.useState(0),[n,s]=i.exports.useState(0),[o,c]=i.exports.useState(0),{trigger:u=null,setIntParams:g=null}=Te(),p=()=>g([e,n,o]);return i.exports.useEffect(()=>{r(u.getBoolean(0)?1:0),s(u.getBoolean(1)?1:0),c(u.getBoolean(2)?1:0)},[u]),t(ut,{requiresFurni:ae.STUFF_SELECTION_OPTION_BY_ID,hasSpecialInput:!0,save:p,children:l(S,{gap:1,children:[t(N,{gfbold:!0,children:m("wiredfurni.params.conditions")}),l(v,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"checkbox",id:"stateFlag",checked:!!e,onChange:d=>r(d.target.checked?1:0)}),t(N,{children:m("wiredfurni.params.condition.state")})]}),l(v,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"checkbox",id:"directionFlag",checked:!!n,onChange:d=>s(d.target.checked?1:0)}),t(N,{children:m("wiredfurni.params.condition.direction")})]}),l(v,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"checkbox",id:"positionFlag",checked:!!o,onChange:d=>c(d.target.checked?1:0)}),t(N,{children:m("wiredfurni.params.condition.position")})]})]})})},lO=a=>t(ut,{requiresFurni:ae.STUFF_SELECTION_OPTION_BY_ID_BY_TYPE_OR_FROM_CONTEXT,hasSpecialInput:!1,save:null}),cO=a=>t(ut,{requiresFurni:ae.STUFF_SELECTION_OPTION_BY_ID_BY_TYPE_OR_FROM_CONTEXT,hasSpecialInput:!1,save:null}),uO=a=>{switch(a){case pe.BOT_CHANGE_FIGURE:return t(Py,{});case pe.BOT_FOLLOW_AVATAR:return t(Dy,{});case pe.BOT_GIVE_HAND_ITEM:return t(Ly,{});case pe.BOT_MOVE:return t(Uy,{});case pe.BOT_TALK:return t(Gy,{});case pe.BOT_TALK_DIRECT_TO_AVTR:return t(Fy,{});case pe.BOT_TELEPORT:return t(By,{});case pe.CALL_ANOTHER_STACK:return t(Vy,{});case pe.CHASE:return t(Hy,{});case pe.CHAT:return t(Wy,{});case pe.FLEE:return t(jy,{});case pe.GIVE_REWARD:return t(qy,{});case pe.GIVE_SCORE:return t(Yy,{});case pe.GIVE_SCORE_TO_PREDEFINED_TEAM:return t(zy,{});case pe.JOIN_TEAM:return t($y,{});case pe.KICK_FROM_ROOM:return t(Ky,{});case pe.LEAVE_TEAM:return t(Xy,{});case pe.MOVE_FURNI:return t(sO,{});case pe.MOVE_AND_ROTATE_FURNI:return t(Zy,{});case pe.MOVE_FURNI_TO:return t(tO,{});case pe.MUTE_USER:return t(oO,{});case pe.RESET:return t(aO,{});case pe.SET_FURNI_STATE:return t(iO,{});case pe.TELEPORT:return t(lO,{});case pe.TOGGLE_FURNI_STATE:return t(cO,{})}return null},Jt=a=>{const{requiresFurni:e=ae.STUFF_SELECTION_OPTION_NONE,save:r=null,hasSpecialInput:n=!1,children:s=null}=a;return t(tl,{wiredType:"condition",requiresFurni:e,hasSpecialInput:n,save:()=>r&&r(),children:s})},dO=[2,5,7,8,9,10,27],mO=a=>{const[e,r]=i.exports.useState(-1),{trigger:n=null,setIntParams:s=null}=Te(),o=()=>s([e]);return i.exports.useEffect(()=>{r(n.intData.length>0?n.intData[0]:0)},[n]),t(Jt,{requiresFurni:ae.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:o,children:l(S,{gap:1,children:[t(N,{gfbold:!0,children:m("wiredfurni.params.handitem")}),t("select",{className:"form-select form-select-sm",value:e,onChange:c=>r(parseInt(c.target.value)),children:dO.map(c=>t("option",{value:c,children:m(`handitem${c}`)},c))})]})})},gO=a=>t(Jt,{requiresFurni:ae.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!1,save:null}),pO=a=>t(Jt,{requiresFurni:ae.STUFF_SELECTION_OPTION_BY_ID,hasSpecialInput:!1,save:null}),hO=[1,2,3,4],fO=a=>{const[e,r]=i.exports.useState(-1),{trigger:n=null,setIntParams:s=null}=Te(),o=()=>s([e]);return i.exports.useEffect(()=>{r(n.intData.length>0?n.intData[0]:0)},[n]),t(Jt,{requiresFurni:ae.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:o,children:l(S,{gap:1,children:[t(N,{gfbold:!0,children:m("wiredfurni.params.team")}),hO.map(c=>l(v,{gap:1,alignItems:"center",children:[t("input",{className:"form-check-input",type:"radio",name:"selectedTeam",id:`selectedTeam${c}`,checked:e===c,onChange:u=>r(c)}),t(N,{children:m(`wiredfurni.params.team.${c}`)})]},c))]})})},IO=a=>{const[e,r]=i.exports.useState(""),{trigger:n=null,setStringParam:s=null}=Te(),o=()=>s(e);return i.exports.useEffect(()=>{r(n.stringData)},[n]),t(Jt,{requiresFurni:ae.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:o,children:l(S,{gap:1,children:[t(N,{gfbold:!0,children:m("wiredfurni.params.badgecode")}),t("input",{type:"text",className:"form-control form-control-sm",value:e,onChange:c=>r(c.target.value)})]})})},EO=a=>{const[e,r]=i.exports.useState(-1),{trigger:n=null,setIntParams:s=null}=Te(),o=()=>s([e]);return i.exports.useEffect(()=>{r((n==null?void 0:n.intData[0])??0)},[n]),t(Jt,{requiresFurni:ae.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:o,children:l(S,{gap:1,children:[t(N,{gfbold:!0,children:m("wiredfurni.tooltip.effectid")}),t("input",{type:"number",className:"form-control form-control-sm",value:e,onChange:c=>r(parseInt(c.target.value))})]})})},CO=a=>{const[e,r]=i.exports.useState(""),[n,s]=i.exports.useState(""),{trigger:o=null,setIntParams:c=null}=Te(),u=()=>{let g=0,p=0;const d=new Date(e),h=new Date(n);d&&h&&(g=d.getTime()/1e3,p=h.getTime()/1e3),c([g,p])};return i.exports.useEffect(()=>{if(o.intData.length>=2){let g=new Date,p=new Date;o.intData[0]>0&&(g=new Date(o.intData[0]*1e3)),o.intData[1]>0&&(p=new Date(o.intData[1]*1e3)),r(Hl(g)),s(Hl(p))}},[o]),l(Jt,{requiresFurni:ae.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:u,children:[l(S,{gap:1,children:[t(N,{gfbold:!0,children:m("wiredfurni.params.startdate")}),t("input",{type:"text",className:"form-control form-control-sm",value:e,onChange:g=>r(g.target.value)})]}),l(S,{gap:1,children:[t(N,{gfbold:!0,children:m("wiredfurni.params.enddate")}),t("input",{type:"text",className:"form-control form-control-sm",value:n,onChange:g=>s(g.target.value)})]})]})},_O=a=>t(Jt,{requiresFurni:ae.STUFF_SELECTION_OPTION_BY_ID,hasSpecialInput:!1,save:null}),bO=a=>{const[e,r]=i.exports.useState(-1),{trigger:n=null,setIntParams:s=null}=Te(),o=()=>s([e]);return i.exports.useEffect(()=>{r(n.intData.length>0?n.intData[0]:0)},[n]),t(Jt,{requiresFurni:ae.STUFF_SELECTION_OPTION_BY_ID,hasSpecialInput:!0,save:o,children:l(S,{gap:1,children:[t(N,{gfbold:!0,children:m("wiredfurni.params.requireall")}),[0,1].map(c=>l(v,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"radio",name:"requireAll",id:`requireAll${c}`,checked:e===c,onChange:u=>r(c)}),t(N,{children:m("wiredfurni.params.requireall."+c)})]},c))]})})},NO=a=>{const[e,r]=i.exports.useState(-1),{trigger:n=null,setIntParams:s=null}=Te(),o=()=>s([e]);return i.exports.useEffect(()=>{r(n.intData.length>0?n.intData[0]:0)},[n]),t(Jt,{requiresFurni:ae.STUFF_SELECTION_OPTION_BY_ID,hasSpecialInput:!0,save:o,children:l(S,{gap:1,children:[t(N,{gfbold:!0,children:m("wiredfurni.params.not_requireall")}),[0,1].map(c=>l(v,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"radio",name:"requireAll",id:`requireAll${c}`,checked:e===c,onChange:u=>r(c)}),t(N,{children:m(`wiredfurni.params.not_requireall.${c}`)})]},c))]})})},SO=a=>t(Jt,{requiresFurni:ae.STUFF_SELECTION_OPTION_BY_ID_OR_BY_TYPE,hasSpecialInput:!1,save:null}),TO=a=>{const[e,r]=i.exports.useState(0),[n,s]=i.exports.useState(0),[o,c]=i.exports.useState(0),{trigger:u=null,setIntParams:g=null}=Te(),p=()=>g([e,n,o]);return i.exports.useEffect(()=>{r(u.getBoolean(0)?1:0),s(u.getBoolean(1)?1:0),c(u.getBoolean(2)?1:0)},[u]),t(Jt,{requiresFurni:ae.STUFF_SELECTION_OPTION_BY_ID,hasSpecialInput:!0,save:p,children:l(S,{gap:1,children:[t(N,{gfbold:!0,children:m("wiredfurni.params.conditions")}),l(v,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"checkbox",id:"stateFlag",checked:!!e,onChange:d=>r(d.target.checked?1:0)}),t(N,{children:m("wiredfurni.params.condition.state")})]}),l(v,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"checkbox",id:"directionFlag",checked:!!n,onChange:d=>s(d.target.checked?1:0)}),t(N,{children:m("wiredfurni.params.condition.direction")})]}),l(v,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"checkbox",id:"positionFlag",checked:!!o,onChange:d=>c(d.target.checked?1:0)}),t(N,{children:m("wiredfurni.params.condition.position")})]})]})})},vO=a=>{const[e,r]=i.exports.useState(-1),{trigger:n=null,setIntParams:s=null}=Te(),o=()=>s([e]);return i.exports.useEffect(()=>{r(n.intData.length>0?n.intData[0]:0)},[n]),t(Jt,{requiresFurni:ae.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:o,children:l(S,{gap:1,children:[t(N,{gfbold:!0,children:m("wiredfurni.params.allowbefore",["seconds"],[ro(e)])}),t(Pt,{className:"wired-slider",min:1,max:1200,value:e,onChange:c=>r(c)})]})})},wO=a=>{const[e,r]=i.exports.useState(-1),{trigger:n=null,setIntParams:s=null}=Te(),o=()=>s([e]);return i.exports.useEffect(()=>{r(n.intData.length>0?n.intData[0]:0)},[n]),t(Jt,{requiresFurni:ae.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:o,children:l(S,{gap:1,children:[t(N,{gfbold:!0,children:m("wiredfurni.params.allowafter",["seconds"],[ro(e)])}),t(Pt,{className:"wired-slider",min:1,max:1200,value:e,onChange:c=>r(c)})]})})},RO=a=>{const[e,r]=i.exports.useState(1),[n,s]=i.exports.useState(1),{trigger:o=null,setIntParams:c=null}=Te(),u=()=>c([e,n]);return i.exports.useEffect(()=>{o.intData.length>=2?(r(o.intData[0]),s(o.intData[1])):(r(1),s(1))},[o]),l(Jt,{requiresFurni:ae.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:u,children:[l(S,{gap:1,children:[t(N,{gfbold:!0,children:m("wiredfurni.params.usercountmin",["value"],[e.toString()])}),t(Pt,{className:"wired-slider",min:1,max:50,value:e,onChange:g=>r(g)})]}),l(S,{gap:1,children:[t(N,{gfbold:!0,children:m("wiredfurni.params.usercountmax",["value"],[n.toString()])}),t(Pt,{className:"wired-slider",min:1,max:50,value:n,onChange:g=>s(g)})]})]})},xO=a=>{switch(a){case he.ACTOR_HAS_HANDITEM:return t(mO,{});case he.ACTOR_IS_GROUP_MEMBER:case he.NOT_ACTOR_IN_GROUP:return t(gO,{});case he.ACTOR_IS_ON_FURNI:case he.NOT_ACTOR_ON_FURNI:return t(pO,{});case he.ACTOR_IS_IN_TEAM:case he.NOT_ACTOR_IN_TEAM:return t(fO,{});case he.ACTOR_IS_WEARING_BADGE:case he.NOT_ACTOR_WEARS_BADGE:return t(IO,{});case he.ACTOR_IS_WEARING_EFFECT:case he.NOT_ACTOR_WEARING_EFFECT:return t(EO,{});case he.DATE_RANGE_ACTIVE:return t(CO,{});case he.FURNIS_HAVE_AVATARS:case he.FURNI_NOT_HAVE_HABBO:return t(_O,{});case he.HAS_STACKED_FURNIS:return t(bO,{});case he.NOT_HAS_STACKED_FURNIS:return t(NO,{});case he.STUFF_TYPE_MATCHES:case he.NOT_FURNI_IS_OF_TYPE:return t(SO,{});case he.STATES_MATCH:case he.NOT_STATES_MATCH:return t(TO,{});case he.TIME_ELAPSED_LESS:return t(vO,{});case he.TIME_ELAPSED_MORE:return t(wO,{});case he.USER_COUNT_IN:case he.NOT_USER_COUNT_IN:return t(RO,{})}return null},ur=a=>{const{requiresFurni:e=ae.STUFF_SELECTION_OPTION_NONE,save:r=null,hasSpecialInput:n=!1,children:s=null}=a;return t(tl,{wiredType:"trigger",requiresFurni:e,hasSpecialInput:n,save:()=>r&&r(),children:s})},yO=a=>{const[e,r]=i.exports.useState(""),[n,s]=i.exports.useState(0),{trigger:o=null,setStringParam:c=null}=Te(),u=()=>c(n===1?e:"");return i.exports.useEffect(()=>{r(o.stringData),s(o.stringData?1:0)},[o]),t(ur,{requiresFurni:ae.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:u,children:l(S,{gap:1,children:[t(N,{gfbold:!0,children:m("wiredfurni.params.picktriggerer")}),l(v,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"radio",name:"avatarMode",id:"avatarMode0",checked:n===0,onChange:g=>s(0)}),t(N,{children:m("wiredfurni.params.anyavatar")})]}),l(v,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"radio",name:"avatarMode",id:"avatarMode1",checked:n===1,onChange:g=>s(1)}),t(N,{children:m("wiredfurni.params.certainavatar")})]}),n===1&&t("input",{type:"text",className:"form-control form-control-sm",value:e,onChange:g=>r(g.target.value)})]})})},OO=a=>{const[e,r]=i.exports.useState(""),[n,s]=i.exports.useState(-1),{trigger:o=null,setStringParam:c=null,setIntParams:u=null}=Te(),g=()=>{c(e),u([n])};return i.exports.useEffect(()=>{r(o.stringData),s(o.intData.length>0?o.intData[0]:0)},[o]),l(ur,{requiresFurni:ae.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:g,children:[l(S,{gap:1,children:[t(N,{gfbold:!0,children:m("wiredfurni.params.whatissaid")}),t("input",{type:"text",className:"form-control form-control-sm",value:e,onChange:p=>r(p.target.value)})]}),l(S,{gap:1,children:[t(N,{gfbold:!0,children:m("wiredfurni.params.picktriggerer")}),l(v,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"radio",name:"triggererAvatar",id:"triggererAvatar0",checked:n===0,onChange:p=>s(0)}),t(N,{children:m("wiredfurni.params.anyavatar")})]}),l(v,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"radio",name:"triggererAvatar",id:"triggererAvatar1",checked:n===1,onChange:p=>s(1)}),t(N,{children:H().userName})]})]})]})},kO=a=>t(ur,{requiresFurni:ae.STUFF_SELECTION_OPTION_BY_ID_OR_BY_TYPE,hasSpecialInput:!1,save:null}),AO=a=>t(ur,{requiresFurni:ae.STUFF_SELECTION_OPTION_BY_ID_OR_BY_TYPE,hasSpecialInput:!1,save:null}),PO=a=>{const[e,r]=i.exports.useState(""),{trigger:n=null,setStringParam:s=null}=Te(),o=()=>s(e);return i.exports.useEffect(()=>{r(n.stringData)},[n]),t(ur,{requiresFurni:ae.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:o,children:l(S,{gap:1,children:[t(N,{gfbold:!0,children:m("wiredfurni.params.bot.name")}),t("input",{type:"text",className:"form-control form-control-sm",maxLength:32,value:e,onChange:c=>r(c.target.value)})]})})},DO=a=>{const[e,r]=i.exports.useState(""),{trigger:n=null,setStringParam:s=null}=Te(),o=()=>s(e);return i.exports.useEffect(()=>{r(n.stringData)},[n]),t(ur,{requiresFurni:ae.STUFF_SELECTION_OPTION_BY_ID_OR_BY_TYPE,hasSpecialInput:!0,save:o,children:l(S,{gap:1,children:[t(N,{gfbold:!0,children:m("wiredfurni.params.bot.name")}),t("input",{type:"text",className:"form-control form-control-sm",maxLength:32,value:e,onChange:c=>r(c.target.value)})]})})},MO=a=>t(ur,{requiresFurni:ae.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!1,save:null}),LO=a=>{const[e,r]=i.exports.useState(1),{trigger:n=null,setIntParams:s=null}=Te(),o=()=>s([e]);return i.exports.useEffect(()=>{r(n.intData.length>0?n.intData[0]:0)},[n]),t(ur,{requiresFurni:ae.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:o,children:l(S,{gap:1,children:[t(N,{gfbold:!0,children:m("wiredfurni.params.settime",["seconds"],[ro(e)])}),t(Pt,{className:"wired-slider",min:1,max:1200,value:e,onChange:c=>r(c)})]})})},UO=a=>{const[e,r]=i.exports.useState(1),{trigger:n=null,setIntParams:s=null}=Te(),o=()=>s([e]);return i.exports.useEffect(()=>{r(n.intData.length>0?n.intData[0]:0)},[n]),t(ur,{requiresFurni:ae.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:o,children:l(S,{gap:1,children:[t(N,{gfbold:!0,children:m("wiredfurni.params.setlongtime",["time"],[Tr.format(e*5).toString()])}),t(Pt,{className:"wired-slider",min:1,max:120,value:e,onChange:c=>r(c)})]})})},FO=a=>{const[e,r]=i.exports.useState(1),{trigger:n=null,setIntParams:s=null}=Te(),o=()=>s([e]);return i.exports.useEffect(()=>{r(n.intData.length>0?n.intData[0]:0)},[n]),t(ur,{requiresFurni:ae.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:o,children:l(S,{gap:1,children:[t(N,{gfbold:!0,children:m("wiredfurni.params.settime",["seconds"],[ro(e)])}),t(Pt,{className:"wired-slider",min:1,max:60,value:e,onChange:c=>r(c)})]})})},GO=a=>t(ur,{requiresFurni:ae.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!1,save:null}),BO=a=>t(ur,{requiresFurni:ae.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!1,save:null}),VO=a=>{const[e,r]=i.exports.useState(1),{trigger:n=null,setIntParams:s=null}=Te(),o=()=>s([e]);return i.exports.useEffect(()=>{r(n.intData.length>0?n.intData[0]:0)},[n]),t(ur,{requiresFurni:ae.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:o,children:l(S,{gap:1,children:[t(N,{gfbold:!0,children:m("wiredfurni.params.setscore",["points"],[e.toString()])}),t(Pt,{className:"wired-slider",min:1,max:1e3,value:e,onChange:c=>r(c)})]})})},HO=a=>t(ur,{requiresFurni:ae.STUFF_SELECTION_OPTION_BY_ID_OR_BY_TYPE,hasSpecialInput:!1,save:null}),WO=a=>{switch(a){case Je.AVATAR_ENTERS_ROOM:return t(yO,{});case Je.AVATAR_SAYS_SOMETHING:return t(OO,{});case Je.AVATAR_WALKS_OFF_FURNI:return t(kO,{});case Je.AVATAR_WALKS_ON_FURNI:return t(AO,{});case Je.BOT_REACHED_AVATAR:return t(PO,{});case Je.BOT_REACHED_STUFF:return t(DO,{});case Je.COLLISION:return t(MO,{});case Je.EXECUTE_ONCE:return t(LO,{});case Je.EXECUTE_PERIODICALLY:return t(FO,{});case Je.EXECUTE_PERIODICALLY_LONG:return t(UO,{});case Je.GAME_ENDS:return t(GO,{});case Je.GAME_STARTS:return t(BO,{});case Je.SCORE_ACHIEVED:return t(VO,{});case Je.TOGGLE_FURNI:return t(HO,{})}return null},jO=a=>{const{trigger:e=null}=Te();return e?e instanceof Tu?uO(e.code):e instanceof vu?WO(e.code):e instanceof wu?xO(e.code):null:null},qO=a=>{const[e,r]=i.exports.useState(!1),[n,s]=i.exports.useState(!0);return ze(Wt.CREATED,o=>s(!1)),ze(Wt.ENDED,o=>s(o.openLandingView)),i.exports.useEffect(()=>{r(!0),Vs().connection.onReady()},[]),i.exports.useEffect(()=>{const o={linkReceived:c=>{const u=c.split("/");if(!(u.length<2))switch(u[1]){case"open":if(u.length>2)switch(u[2]){case"credits":break;default:{const g=u[2];Ys.openHabblet(g)}}return}},eventUrlPrefix:"habblet/"};return Ct(o),()=>_t(o)},[]),l(M,{fit:!0,children:[t(Ns,{type:Nt.FADE_IN,inProp:n,timeout:300,children:t(Aw,{})}),t(Sy,{isInRoom:!n}),t(sR,{}),t(by,{}),t(iv,{}),t(jO,{}),t(iT,{}),t(QS,{}),t(_R,{}),t(Ww,{}),t(av,{}),t(Av,{}),t(qR,{}),t(Oy,{}),t(yy,{}),t(Kv,{}),t(pT,{}),t(vw,{}),t(NR,{}),t(aw,{}),t(iw,{}),t(IT,{}),t(Lv,{}),t(Ev,{})]})};lu.UI_VERSION=ad();const zO=a=>{const[e,r]=i.exports.useState(!1),[n,s]=i.exports.useState(!1),[o,c]=i.exports.useState("Getting Ready"),[u,g]=i.exports.useState(0),[p,d]=i.exports.useState(!0);if(!Ce()){if(!NitroConfig)throw new Error("NitroConfig is not defined!");os.bootstrap()}const h=i.exports.useCallback(async C=>{switch(C.type){case go.LOADED:Ce().localization.init(),g(I=>I+20),console.log(`
%c                                                          
  Nitro V2 - FLASH UI EDIT!                               
  This UI-edit is created by robbis                       
  Do you want this UI for your hotel?                     
  Join our Discord                                        
  https://discord.gg/j3bqtZKAF3                           
                                                          
`,"color: #FFFFFF; background: #eab9d0; padding:0px 0");return;case go.FAILED:s(!0),c("Configuration Failed");return;case os.WEBGL_UNAVAILABLE:s(!0),c("WebGL Required");return;case os.WEBGL_CONTEXT_LOST:s(!0),c("WebGL Context Lost - Reloading"),setTimeout(()=>window.location.reload(),1500);return;case Hr.CONNECTION_HANDSHAKING:g(I=>I+20);return;case Hr.CONNECTION_HANDSHAKE_FAILED:s(!0),c("Handshake Failed");return;case Hr.CONNECTION_AUTHENTICATED:g(I=>I+20),Ce().init(),Bs.available&&Bs.call("legacyTrack","authentication","authok",[]);return;case Hr.CONNECTION_ERROR:s(!0),c("Connection Error");return;case Hr.CONNECTION_CLOSED:c("Connection Error"),Ys.send(-1,"client.init.handshake.fail");return;case gr.ENGINE_INITIALIZED:g(I=>I+20),setTimeout(()=>r(!0),300);return;case Tl.LOADED:{const I=K("preload.assets.urls"),f=[];if(I&&I.length)for(const E of I)f.push(on.interpolate(E));await ku().downloadAssets(f)?(Vs().init(),g(E=>E+20)):(s(!0),c("Assets Failed"));return}}},[]);return Mn(os.WEBGL_UNAVAILABLE,h),Mn(os.WEBGL_CONTEXT_LOST,h),Mn(Hr.CONNECTION_HANDSHAKING,h),Mn(Hr.CONNECTION_HANDSHAKE_FAILED,h),Mn(Hr.CONNECTION_AUTHENTICATED,h),Mn(Hr.CONNECTION_ERROR,h),Mn(Hr.CONNECTION_CLOSED,h),Se(gr.ENGINE_INITIALIZED,h),Gb(Tl.LOADED,h),ql(go.LOADED,h),ql(go.FAILED,h),i.exports.useEffect(()=>{Ce().core.configuration.init();const C=I=>d(!(window.devicePixelRatio%1));return window.addEventListener("resize",C),C(),()=>{window.removeEventListener("resize",C)}},[]),l(M,{fit:!0,overflow:"hidden",className:p&&"image-rendering-pixelated",children:[(!e||n)&&t(Ub,{isError:n,message:o,percent:u}),t(Ns,{type:Nt.FADE_IN,inProp:e,children:t(qO,{})}),t(M,{id:"draggable-windows-container"})]})};Hm(document.getElementById("root")).render(t(zO,{}));
